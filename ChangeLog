commit 200137060651f48c99276c8feb0e15980a9b46be
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 22 20:52:09 2014 -0700

    update copyright date on main documentation file

commit 63171339c03cf9bf3d691511889223bf43024124
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 23:02:27 2014 -0800

    doc: Update for 1.3.1
    
    Add 1.3.1 release notes. Update screen shots. Document new functionality
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6a73d6cbe149a930f8c4e2dac655bc3f6270013
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 23:01:28 2014 -0800

    doc: Fix image widths to make them all scale the same amount
    
    Hand-compute scale factors so that all images are presented at the
    same relative size as they would be on the screen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e61c02b51e069aa58b36f59b9ca8e7c8284bc93a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 22:13:01 2014 -0800

    altosui: Handle serial-port startup errors in idle-monitor
    
    Trap exceptions during idle monitor startup and report them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42922b40fc695bdaa92e3fb0b41a248f7df918d0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 22:01:39 2014 -0800

    altosui: Handle already-opened link in IgniteUI
    
    Must run the link open from the UI thread so that we can put up the
    in-use dialog immdiately; otherwise the UI thread is blocked which
    means the dialog never appears and the app appears to hang.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f118e33416e45ea9a2b5ede4157bd8b58ddb6ebb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 21:37:18 2014 -0800

    altosuilib: Remove some spurious debug printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 677fcafd3816b6d8d86b2dc41b840d97b5ccbf07
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 21:34:58 2014 -0800

    altoslib: Fetch target device config for Fire Igniter npyro value
    
    The code was using the AltosLink config_data, which is always the
    locally connected device's configuration. When using the packet link,
    that's not terribly useful when asking how many extra pyro channels
    are available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 13cf4000bd53ac4af66231d56e24c9eb11178a5f
Merge: 7a8551f 99fedbf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 21 20:59:06 2014 -0800

    Merge remote-tracking branch 'origin/master'

commit 99fedbf0ed42a5d4fa80f094576ca0260040ef5e
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 21 21:31:25 2014 -0700

    set version to 1.3.1 for release

commit 7a8551fe8e5f0a90cbc494842715a96f08c11900
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Jan 20 19:38:21 2014 +1000

    altosui: rate limit map downloads

commit 0faa098f05d43eefc1fa54462401171fca5034cb
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Jan 20 05:10:58 2014 +1000

    altosui: --fetchmaps gets same number of maps as GUI

commit aab5873c87d6ecfe0854751746f80d4bc7ebeffa
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Jan 20 04:52:43 2014 +1000

    AltosSiteMapPreload: only load 49 maps
    
    Google Static Maps API limits queries to 50 maps per IP per minute,
    so querying a 7x7 array instead of a 9x9 array seems more likely to
    work well.

commit 7f9cda0e2531a7bba7f1b4e3b7212a62b5bec1ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 19 00:17:06 2014 -0800

    altosui: Make romconfig serial and radio cal fields 8 digits wide
    
    This ensure that they are wide enough to show a cc1120 calibration
    value, which is 7 digits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b891115c95453d9002d8ef307a27e14eda145a5
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 17 20:55:45 2014 -0700

    set version to 1.3.0.2 for test flights this weekend

commit c33ec8207c0e5d4c855e87b2746371b19d437f7d
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 17 20:47:16 2014 -0700

    use firmware in /usr/share/altos for production flashing

commit cfcb127b248b62231049b6b50cf9b7edc2731f0a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 15 13:28:16 2014 -0800

    altos: Add missing ADC divider values for Tmega v1.0
    
    Somehow I left these out of the previous commit
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9001d5780a41986017bd3bbc7f8c5556b116c351
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 15 12:42:59 2014 -0800

    Ignore 32 and 64 bit cjnitest apps

commit c743eaa060080a7bd236466b93cff3abc96f405b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 15 12:40:26 2014 -0800

    altos: Report battery, apogee and main voltages over APRS
    
    This makes APRS more usable when you mute the RF audio on the HT.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc06242e882cba462791962c199b7c89e79adc65
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 14 23:29:59 2014 -0800

    altos: Use factory calibration for all acceleration computations
    
    The ground acceleration value will vary depending on the tilt angle of
    the airframe, which will result in incorrect acceleration computations
    during flight. This also avoids accidental boost detect when moving
    the airframe around in pad mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d812b3db418fd9816731b761a0853eb38f5a265
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 14 23:21:40 2014 -0800

    altos: Switch APRS to compressed position format
    
    This provides lat/lon/alt in fewer bytes while improving precision.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f560d5063b1339dbfb3e6723cfadb7b4c5eace25
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 14 23:18:40 2014 -0800

    doc: Ship telemini outline as pdf file too
    
    Build telemini.pdf from telemini.svg and include it in all of the
    released packages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06ffd8022ff5ac74274c9839d42c0c47274cb8b9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 1 22:08:13 2014 -0800

    altosui: Require both libaltos32 and libaltos64 for fat Linux tarball
    
    No sense shipping a broken tarball ever
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8bff2822c242d2878b408b9c0d8a7647108ea4b1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 1 22:02:56 2014 -0800

    libaltos: Build -m64 and -m32 for fat tarball when possible
    
    Check to see if we can compile libaltos for both 32 bit and 64 bit
    systems, and then use those when generating the linux tarball.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95d77eaff708397d8b1e29904dc47d8ea09e8754
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 1 22:02:04 2014 -0800

    Bump version to 1.3.9.1
    
    Lots of new features; let's not release with 1.3 set
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b15bd24bbe48e338497c6257f5fe2c7fd1cbffbb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 1 22:00:24 2014 -0800

    altosui: Handle a missing libaltos when starting up
    
    Skip a null list of devices when figuring out what to open monitor
    windows for during startup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c35ea586b9e792c45b287924fd256928308d9a36
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 1 21:12:20 2014 -0800

    altos: Flip acceleration data consistently for orientation changes
    
    Must flip the acceleration calibration data using the same function as
    flipping the actual acceleration data or the calibration will no
    longer be valid after changing orientation. For the MMA655x, this
    means using 4095 in both places, rather than using 0x7fff for the
    calibration data changes and 4095 for the data value changes. For the
    MPU6000, this means using 0 in both places.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afc16e805145c3e9ab4ba948f9ab1d9aa2b27afb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 28 10:18:53 2013 -0800

    altos: Add 'O' command for TeleMega orient testing
    
    Only present when HAS_FLIGHT_DEBUG is enabled, this command lets the
    user check the orientation tracking code by showing the current
    orientation and when the calibration values are reset.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9877f6b880a0e89fbfbf1a39ded94bdc1891f3d9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 28 10:17:37 2013 -0800

    altosui: Switch Graph to AltosOrient type
    
    The graph was using a private class for orient type, use the altoslib one
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa01f06acfbf029958a55f68175b6868817b333f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 28 10:16:24 2013 -0800

    altosui: Adjust info table column width
    
    Make sure the info table can show a full longitude value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bbc4940730e6b431f1b9ccd9bbaf9faa0ffb2b1f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 28 10:15:26 2013 -0800

    altosui: Add orient to ascent and info table views
    
    This adds 'tilt angle' to both ascent and info table views
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 053d092b3dca4ebb98e97ec0fe24f5f5e1c31f88
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 28 10:13:05 2013 -0800

    altoslib: Add AltosOrient class and max_orient()
    
    This adds the class necessary to put orient into a UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 081455dcba860f3e4df8cd66f3fe686b204034ad
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 21 08:56:00 2013 -0800

    altosui: Extend Fire Igniter to additional channels
    
    This lets the UI test fire other pyro channels on TeleMega
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9cf9a67f937185c0c0bb5b2bae4f420755965799
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 21 06:46:46 2013 -0800

    altosui: Switch from radio buttons to check boxes in pyro config. Add close
    
    First of (we hope) many review comments from Troj.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9289200ccb661b10ff892760ecbc752c7745de6b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 23:04:43 2013 -0800

    altos: Turn on -Werror for STM and LPC builds
    
    Now that the build completes with no warnings, make future warnings
    into errors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16b37b49985daf21ebb93b3d6ae64af67533be22
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 23:02:51 2013 -0800

    altos: Turn on warnings for LPC products too
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f578d9455eec9ea0eccd2d5e21349e274ea4281a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 23:02:21 2013 -0800

    altos/lpc: Missing */ in definition of PIO0_4
    
    Would maek using these values pretty hard.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14790172e02d4e1624c35797f87ffd94345d54ff
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 23:00:43 2013 -0800

    altos: lpc exti setup was incorrectly testing mode
    
    Check for NOCONFIGURE bit was missing parens
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48f996a9d65631238b4de446530f31f83acb99f5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:59:42 2013 -0800

    altos: cc115l driver tone_run wasn't recording number of tones
    
    This would prevent the cc115l driver from ever sending tones.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e11fcc299f4a1a0461a3442ca13f8984d76c30ff
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:58:10 2013 -0800

    altos: Clean up warnings for LPC products
    
    Unused varibles, functions and parameters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ed108fb86676daea17264d7159c2cff9ea7a6e4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:45:56 2013 -0800

    altos/stm: Turn on -Wextra
    
    All of the warnings for STM projects are cleaned up now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1406a5b0721a135913a9801e9eea9e91f0a536b4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:45:01 2013 -0800

    altos: Add default button return value from ao_button_get
    
    This "can't" happen, but it's not unreasonable to have a default
    return value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 316d898715746a379068ac8511692bdb9da14b39
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:44:20 2013 -0800

    altos: unsigned value in ao_pyro_set checked for negative value
    
    No sense checking unsigned values for less than zero.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c9172ba5681ff93d63c9c263a453d0025170045
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:43:18 2013 -0800

    altos: Clean up -Wextra warnings
    
    Unused variables, mismatching signed/unsigned and a few other misc
    warnings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db8f3426ac1cf756a2e4974ca61a5ae9048c80ce
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:21:23 2013 -0800

    altos: Turn on -Wall for stm compiles
    
    The warnings are all cleaned up now, leave this on by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b31b4622d5bd92c0cc0851818f5b595dbdb60ead
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:15:25 2013 -0800

    altos: Clean up some minor warnings from -Wall
    
    Unused variables, functions and labels, missing enums in switch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 755082d36231c1b247bc0e1f13919dd9b5c362a8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:13:32 2013 -0800

    altos: mma655x also needs ao_sensor_errors
    
    TeleMetrum has an MMA655X but no IMU, so it needs an explicit addition
    for sensor errors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 758acb92cccbe4b64a35a1883b42713738c90630
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:08:11 2013 -0800

    altos: Complain about sensor self-test errors only in idle mode
    
    When the accelerometer says to go into pad mode, don't look for other
    sensor self test errors. Only look for sensor self test errors to
    choose between idle and invalid mode. This will prevent minor sensor
    self test errors from letting the rocket fly safely.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8b27410e45cc3d80ad4b896bffe70e9aec5e3aa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:06:52 2013 -0800

    altos: 3-axis accel calibration was invalid in explicit accel cal mode
    
    When explicit Z-axis accel calibration values were provided to the 'c
    a' command, the 3-axis accelerometer calibration values would get set
    to uninitialized values. Not so helpful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a912dcde191e2f750845c464611641a5abdc28a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 22:04:53 2013 -0800

    altos: Execute self-test on MMA655X part
    
    This doesn't check for fine calibration, just makes sure the part is
    within the broad tolerances specified by the manufacturer. The subtle fix
    here was actually getting reset working -- there was a typo in the
    bitpattern definition which caused the reset to fail, making it hard
    to self-test the part, as self-test is only valid before the part is running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b89fb51a963635e2effe3a31f803bfc29c2c46b7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 19:44:38 2013 -0800

    altoslib: Bump library version
    
    Prepare for next release by making sure we notice that the API/ABI for
    this library has changed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e5f3b922100f9de54b9650df14749e81b1a6562
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 19:40:31 2013 -0800

    altosui: Add imu and mag sensor values to plots
    
    Makes for a lot of potential graph elements.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f65880cf5bfcba5005c32db2b300448e585f3e45
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 19:39:40 2013 -0800

    altosuilib: Rearrange graph enable buttons
    
    Eliminate separate 'enable' radio button, provide for multiple columns
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 796cb90e3241103f79ae12565cf6f0dad21cb57c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 19:38:29 2013 -0800

    altoslib: Fetch 'orient' value from Mega Sensor packet
    
    The mega sensor packet had a spare byte to hold the current
    orientation value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91bcfae2e64ecb2e7de1292b264910382b635aea
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 20 19:37:08 2013 -0800

    altoslib: Convert IMU and Mag sensor values to useful units
    
    Convert from raw sensor values to metric units
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ad31bad20b20615e9d8b29088e2488fddc81ac9
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Dec 20 15:06:37 2013 +1300

    altosdroid: improve build system dependencies
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 0e3b3ce66035e8a90fd708d9a4bc01370174c9eb
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Dec 20 15:06:07 2013 +1300

    altosdroid: update to latest google play services
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 96f2ae5fc0d3bf88704d2ae1b4df5dc6aefc523b
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Dec 20 15:05:42 2013 +1300

    altosdroid: force older jarsigner signing algorithm for java 1.7
    
    (increment versionCode, re-upload to Play Store)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ac12e77e3dffc9e9ddb1578a38b32783ad64e940
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 19 03:22:21 2013 -0700

    updated notes from 1.3 release

commit 27528961457865acc3a38b822268df6d7cb86cfd
Merge: 4006eff a31629d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 19 02:00:10 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 4006effc538289c36a1563c1b717231991292c0c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 19 01:58:24 2013 -0700

    fix missing newline at end of src/test/Makefile

commit a31629dfceb5e9cf1d5c654b8bd87d575f73c34b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 19 00:58:50 2013 -0800

    altosui: Ship EasyMini firmware too
    
    Missing the FIRMWARE_EMINI define left all easy mini firmware out of
    the distribution
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc3610d8cecbfed40c62d4dcb93fc9a4d2a7c9e3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Dec 19 01:29:55 2013 -0700

    update ChangeLog from git

commit 701c26ed85c28ac59e338975f2a6ba6bd25f6493
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 19 00:16:16 2013 -0800

    altosdroid: bump versionName to 1.3 and versionCode to 4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f95ffbad918a73cfd5460d6ce037d680465c35d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 19 00:12:21 2013 -0800

    altosui: When device has no valid romconfig, set RF cal to 0
    
    This is intended to signal to the user that no valid value was found
    and that they'd best pick something sensible.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a04c1dd5df76c9127615bc797a9d9f764eec1234
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 19 00:08:50 2013 -0800

    altos/lpc: Stop sending SETUP IN when the requested size is reached
    
    The host won't keep asking for SETUP IN packets once it has received
    the amount of data requested, so check to see if we've sent that much
    and flip back to IDLE state if so.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ab12861c3e70d7c22b27d988546a925616a0adc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 23:27:34 2013 -0800

    altos/lpc: Reset less of the device on USB reset.
    
    This leaves most of the device configured across USB reset, which
    appears to help when sending a IN reply to the first SETUP packet;
    without this change, the IN reply would always get a length of 0,
    which is fine for SET_ADDRESS, but not for GET_DESCRIPTOR_DEVICE,
    which OS X appears to send before setting the address (go figure).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b13cc2ca035b13582cd2e59ba7286f872f43c6e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 22:00:13 2013 -0800

    altoslib: Remove some old debug printfs for self flashing
    
    These aren't necessary anymore and just slow down flashing boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 408b0dea338147382e94717dab85b4a204e7bdf5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 21:08:33 2013 -0800

    micropeak: Add micropeak man page
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b2ba87d5f68b9e052dddd49d69341f36d777122
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 21:02:15 2013 -0800

    ao-tools: Add man pages for ao-flash utilities
    
    These aren't very wordy, but these tools are pretty simple scripts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39cb8c2896317b7538353be979ac99baffc14489
Merge: 2a6016c ee42796
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 21:53:52 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 2a6016cfabc8cd56f5219871e3b3df316a639289
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 21:53:36 2013 -0700

    update Debian standards version we claim compliance with

commit ee4279613b4757453d0d8f8afc06037c61eeb520
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 20:32:05 2013 -0800

    altos: Try IMU self-test 10 times before giving up
    
    This should keep the device from failing to boot unless the IMU is
    actually broken. Oh, and if self test does fail, this places the
    flight computer in 'Invalid' state rather than panic.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bf84ec28a41f7bd1b11ba45b4639856266227bc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 20:30:58 2013 -0800

    doc: Add tables describing AltOS beeps and flashes
    
    Provide a convenient place to reference when listening to the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0673344289772ed89483948184d6608c272c7c26
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 18:20:55 2013 -0800

    altos/stm: Semantic error in STM usb disable caused it to not work
    
    The USB enable register wasn't actually getting rewritten with the
    enable bit turned off, so the USB device was still powered on in flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 122f491e459b6ff417932370b3f1aa2091c71aca
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 18:30:54 2013 -0700

    update release docs to include option for submodules

commit d9982c257463f23be940eea66bd4dc3aadff0043
Merge: 1b97ed2 b63fc05
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 18:25:35 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 1b97ed2b64bcbcd969124964f1e49837899f1c70
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 18:25:03 2013 -0700

    we're using packaged and local-to-our-tree ARM toolchain now

commit b63fc05481bf6d57e6385704ce53c1c19afa9c2e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 14:34:31 2013 -0800

    doc: typo in micropeak doc hole->hold

commit 6827961c002757f8e74de44f6eb9c9029d099ebc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 14:25:41 2013 -0800

    doc: Update micropeak quick start guide to note new boost detect
    
    Now waits for one minute and 30m of altitude change to avoid false detections.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c0966cd40f05f3a65b0c977b4b92586a58192f4b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 14:22:51 2013 -0800

    micropeak: Compile for java 6
    
    Don't a require later version as not all target OSes support it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eea036650e62bc0f8652155974b512686754fd13
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 14:08:41 2013 -0800

    Move pdclib build results to pdclib-root
    
    This makes pdclib easier to manage as a submodule
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1bfe09b6d3eb28d0c7cfe07a248843cf81bcd25
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 13:36:04 2013 -0800

    altosui: Remove some debug printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58ceb9c845d51547244538fe6beec27e9a232af8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 13:25:31 2013 -0800

    altosdroid: Use altoslib standard voltages to control lights
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbcf3264f950c4e1d450828c9f161b4c418bee97
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 13:22:45 2013 -0800

    altoslib: Define 3.8 as a good battery and 3.5 as a good igniter
    
    Use defined values everywhere instead of copying. Adjust battery up to
    3.8 to ensure there's enough voltage to not trip the comparators
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b19a648b667c298d2d9d5ed4ee9db661be058d1a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 13:09:48 2013 -0800

    altoslib: create eeprom download thread before telling monitor about it
    
    Telling the monitor too early resulted in passing a null thread
    handle, which meant that 'cancel' wouldn't ever work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 216405bc49ef2fc0e9941989f054e41f2fef9cfe
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 12:40:22 2013 -0800

    altoslib: Don't close telemetry reader at startup unless something fails
    
    Was always closing the file, which led to very little telemetry being received.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2e589c59ed0a4c586c5accca8772df15010c46a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 12:16:55 2013 -0800

    libaltos: Import newly build libaltos.dylib

commit 0484ca97828da0d56be7bf395fa4a4b09c591e02
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 12:15:54 2013 -0800

    libaltos: remove usb id filtering from darwin code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 36197a388a9ba1d1ee4acd96ac0079ad3af9d3d0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 12:15:22 2013 -0800

    libaltos: fix test harness main type
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 119dd56512404e0c39dd5001ba4da9373515c02c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 11:25:05 2013 -0800

    altosui: Add docs to Mac OS X dmg distribution
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6df58bb0115a8da13d35ab38861f6231bea7f2a7
Merge: 4383baf 02195f2
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 12:19:31 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 4383bafc6ccdde10f06882ba3e96126c61d5e988
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 12:18:30 2013 -0700

    a fresher changelog entry for test builds

commit 7db8e8190bc8b9a17a7b5107954e2362a0e9c7a2
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 18 11:08:55 2013 -0700

    need to include the Cortex toolchain

commit 02195f2970fb7243fd9a9992abb6ada6709db4e1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 11:14:40 2013 -0800

    fix git: path for pdclib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbca372edd5609bc253b622b55b7faffd19ae6cd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 11:12:44 2013 -0800

    Use git: path for pdclib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2635d07d0f0a91dd7d59f2c94765a40907d2732
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 11:08:11 2013 -0800

    Ignore .dll files in libaltos
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8fdbdebdbb4d1579fd2af47430807d0d2a78105b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 11:07:55 2013 -0800

    ao-tools: complain if st-flash is not available
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f529633cd4be8a0edb1b067bbf5d7cc055dcc1b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 10:55:06 2013 -0800

    altos: get stm-bringup building again
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 262ee65885d55902df96f4aec6a114f5ac6f2c61
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 10:53:09 2013 -0800

    Remove stale stm test apps from regular build

commit 90386115204bd3bfa55deb5ebe1972bacdba725a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 10:50:45 2013 -0800

    altos/stm: Update pdclib paths for flash-loader builds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb659fb0ee80c25312be36b3d8adb686813db125
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 10:43:16 2013 -0800

    altos: create target pdclib directories before building

commit 9c200c3bc742b4dd1a7e28bfce9d5b27e833aae5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 10:01:29 2013 -0800

    altos: Build pdclib locally if necessary
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbde0c3e4bdb419d6bd4dbcc96b0e01c59e9fa13
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 09:59:33 2013 -0800

    include pdclib in wrong place

commit 77b04d662a6704f5db10522a2f9b169d31df5bea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 02:03:15 2013 -0800

    altosui: Hide non-applicable altimeter config values
    
    This makes configuring EasyMini a lot easier...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 012abeda6ae846d74729e96e7ed7c8af2edca572
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 02:02:12 2013 -0800

    altos/lpc: Be a bit more resistant to toolchain section name changes
    
    Just add some wild cards on the ends of each section name in case the
    toolchain changes names in the future.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e26306c9350ef1d107d4257ef1c09d15165c9154
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 01:14:11 2013 -0800

    altoslib: Pass InterruptedException up the stack instead of hiding it
    
    When interrupting a thread that is talking to a serial device, it's
    important not to have that thread discard the InterruptedException so
    that it will actually terminate. This patch removes a bunch of places
    that were discarding InterruptedExceptions and lets higher level code
    see them so that they can exit cleanly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18852efa108ba6e6e69dfd5076d4f4c01f62b4ef
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 18 01:12:11 2013 -0800

    altos: Make TeleMega v0.1 work more like TeleMega v1.0
    
    I've still got one working v0.1 board which is useful for testing
    stuff, so make it work more like the released TeleMega:
    
     * Use E for drogue, F for main
     * Use on-chip eeprom for config
     * Fix ADC report printf to match
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f035ac2df1cfa6964ae904aba0aedde279ca921
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 23:50:54 2013 -0800

    altos: Use all 16 bits of setup packet len when limiting reply len
    
    We were only using the low 8 bits of the setup packet reply max len,
    which meant that if the other side sent a weird max len (as Windows 7
    does), then we'd truncate our setup reply to whatever was in the low 8
    bits of that value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1280ba2e51b36f417f3adb6d101405ee75e7e509
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 22:53:45 2013 -0800

    altosui: Add EasyMini bits to fat distribution images. Update telemetrum.inf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 212a1b66ae04317b7b42ba57573b910fde09ca6c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 20:24:19 2013 -0800

    doc: Publish images with HTML bits
    
    Otherwise the html won't render right.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ecb6a8276b2ce40d2a4da586dbc17581cfda26d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 20:23:00 2013 -0800

    altos: Broke TeleMetrum GPS reporting by holding the GPS mutex too much
    
    We can't hold the GPS mutex while waiting for the GPS receiver to load
    data as it protects the GPS data with the GPS mutex.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e44ce127ece149e7b07be49142bc0f9d50bbe97d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 20:05:12 2013 -0800

    doc: Add screen shots everywhere
    
    This has screen shots of every dialog in altosui
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4b223df372348718b74d2ecad4957f3e30f8d79
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 17:37:39 2013 -0800

    Add altosui image and attempt to add launch photo to title

commit 1d093383fe58fc8c8c11e1c7cd1cd929ae1bd9e4
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Dec 17 14:53:59 2013 -0700

    further documentation tweaks

commit 90c88bab305c43eb62f964fd3ff350b8b0b5320d
Merge: d5d6d10 dffbdd9
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Dec 17 14:09:30 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
    	doc/altusmetrum.xsl

commit d5d6d10ceb724081c7cf89a3885d7e6c3da14604
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Dec 17 14:08:12 2013 -0700

    capture my changes so far

commit dffbdd93d7a86a12d83a412de37dfd2a5f063995
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 11:38:46 2013 -0800

    doc: Add product pictures to manual
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d8da4ef325171960e16fc027c6039cb63eae942
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 11:19:54 2013 -0800

    Keep tables together on a page

commit 7acd0cf17c5ca7a00893f35c7fe9c657389070e0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 17 10:33:29 2013 -0800

    doc: Convert several more itemizedlists to variablelists
    
    When defining a term, use variablelist to pull the term out to the left.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8bb6dd75a602792936d623713fb009fea25ef491
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 16 21:21:24 2013 -0800

    Clean up reflashing section, include section on self-flash recovery
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1562affc4951e147eba20380ea5be2e9f7152789
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 14 11:47:31 2013 -0800

    ao-tools: Use st-flash for STM flashing instead of openocd
    
    st-flash, from the stlink tools, appears more reliable when flashing
    STM CPUs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d7ae63d8dfcc99a30285e0bd2411901941d1813
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 14 12:16:03 2013 -0700

    add serial number to ao-usbload call, pass SERIAL to cal-freq

commit c94ca50fd9f24f271c160f6e0e95cb7340289354
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Dec 13 18:37:29 2013 -0700

    temporarily force stlink location in debian/rules to allow complete build

commit 6545a72012e94a50d185e1c4ecff3c3769d60acd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 10 00:54:32 2013 -0800

    java: Missed libaltos java compile flags from previous patch
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8959c059ec67f5334e31abbe3f831dd571a0b464
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 10 00:51:01 2013 -0800

    java: Add -target 1.6 to all java compiles
    
    This makes sure the results can run with the old JVM
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4596c134aa5e7867f1ca1d86d36afb2af9b8999
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 10 00:39:52 2013 -0800

    altos: Remove ARM .ihx files on 'make clean'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50753e84871b2a01d270d28b8b77a19614d2180c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 10 00:03:20 2013 -0800

    Set version to 1.3 in preparation for release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54f7888dc65ffc27c6ee5ef93953bd9b8fc029ed
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 10 00:00:31 2013 -0800

    doc: More altusmetrum.xsl updates for 1.3
    
    Spell checking even
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a140b3ad689bcebdcf87caab1e64048f693a9b85
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 9 23:16:13 2013 -0800

    debian: .ihx and .map files are left in subdirs now
    
    Install them from the right place
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95c1a5a61267233cf2c16175aeb73bfb7d12ba8f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 9 23:14:55 2013 -0800

    altosui: Ship TeleMega-v1.0 firmware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b023c87e2b86ba57cbf97be1ab76b532e0a00fad
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 9 23:12:40 2013 -0800

    ao-bringup: Add turnon_telemega script
    
    And a few helper programs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ecb0465be76e9299511aeec663d267967834f6c3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 9 16:06:22 2013 -0800

    altos: Rename telemega-v0.3 to telemega-v1.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd91a5d5069ff940e07b8817a934ee65d4e8e235
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 21:08:36 2013 -0800

    altos: Oops. Was only filling out part of the TeleMetrum ADC record
    
    Because it's missing a return, we'd end up filling out one element of
    the ADC record per interrupt, and rotating through which one was set,
    hitting all of the even offsets within the struct. Yikes!
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1711890c002fe359bd6c3fdf4092b35d464c6d9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 21:07:17 2013 -0800

    altosui: When flashing to TeleDongle or TeleBT, match any .ihx file
    
    Let the user pick any .ihx file when using a device which can only be
    used as a pair programmer. Note that 'telemetrum' can be either, and
    we'll assume that it's a self-programmed device (v2) for now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 710343a23c7e6e9c079eafdf3aeea8a40cc2ce61
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:34:11 2013 -0800

    altosui: Match directories in hex file matcher
    
    This makes it possible to navigate around the file system
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd92bb8ff3be257925bf6e969d93a7f9dd941fb8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:33:22 2013 -0800

    altoslib: Don't require radio_cal or usb_descriptors in AltosRomconfig
    
    Not all products will have these values, so allow them to be missing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68adbf5bf08ed8af2f34c0d95d9c3d457574372d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:11:46 2013 -0800

    Add new tools to .gitignore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2cdb90d9214f8e66b3574cbd9c5ed073a7861681
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:09:10 2013 -0800

    altoslib: Add self-flashing code
    
    This adds the ability to use the AltOS flash-loader on both STM and
    NXP processors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70d0841b4017e7580c893c7033c04fb2964adab6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:07:23 2013 -0800

    altoslib: Add AltosNoSymbol exception
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e1b134e29313a1bdac18de57fe547299e5ded2a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 20:04:43 2013 -0800

    altoslib: Use symbols in AltosRomconfig instead of fixed offsets
    
    The new Hexfile symbol code automatically adds the needed romconfig
    symbols for cc1111 products, and ARM-based products have symbols in
    the .ihx files. This means that we can rely on using symbols when
    finding config values in memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1183417145de549b9281f9e210d216facf3a94ef
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:59:37 2013 -0800

    altosuilib: Don't match product_altusmetrum for product_basestation or product_altimeter
    
    It's been years since we've shipped boards configured with
    product_altusmetrum, but now we've repurposed that code for the flash
    loader. When matching an explicit product, go ahead and also match
    altusmetrum so that the flash loader will fit, but when matching
    basestation or altimeter, don't as that will avoid popping up the
    flight monitor UI at startup when a board is running the boot loader.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0af4569446b12c026aa0ffd52c55839d69af0e1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:48:27 2013 -0800

    altoslib: Publish mapping from product name back to USB id
    
    This lets us choose which device to flash based on the filename
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 88fa5fa6acbdd66d1338ca73cbbac219d62b5136
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:47:44 2013 -0800

    altoslib: Create AltosProgrammer class
    
    This provides an abstract interface to flashing boards, for
    dongle-based and self-programming boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b0c1fbccb4ef1ae2ed356292cc8762360532b7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:46:30 2013 -0800

    altoslib: Add symbols to .ihx files
    
    Create a new 0xfe record type to hold the symbols, and append them
    after the EOF record so that other tools might continue to work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1ffdaf1f5e9b6e8ff0d4e08d8c504f8dfacd3a4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:43:13 2013 -0800

    altoslib: Support binary reading/writing in AltosLink
    
    Binary reads require an explicit length, and do not work while
    telemetry is running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2cb7a96567e1302a699f78290fab5e29693940ab
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:05:01 2013 -0800

    altos/stm: arm-none-eabi-binutils now puts 'main' into .text.startup
    
    Change name of .text.ram to .ramtext, then load .text* into flash and
    .ramtext into ram. This ensures that 'main' and anything else in a
    random .text.* segment will get loaded into flash as appropriate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e22a0dce4248cce862147c985078de44c427b12
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 19:04:11 2013 -0800

    ao-tools: build ao-usbload by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1f3525afa801038f7087a3a2caf369f2460a5db
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:41:09 2013 -0800

    altoslib: AltosEepromMonitor had false import of altosuilib
    
    Not needed, and breaks the build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eded084c6caa1f9423d690c8b45c8042f8355987
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:17:28 2013 -0800

    altos: remove all versions of stm-demo executable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb72b4018dd6a422afe1916d9538bb9ff1e45353
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:15:37 2013 -0800

    altos: Change flash loader name to just AltosFlash
    
    Remove the software version string from the product name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52b19511222980138faddb2047707baceff0a596
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:14:29 2013 -0800

    altos: Build .ihx files for all arm projects
    
    The .ihx version can be processed by the java loader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1e4750a7d4af72e8e9086735885f48c9b56c18e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:11:41 2013 -0800

    altos: Allow products to override default 100mA USB current
    
    This will allow products to specify their own current limit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25aaf6122cbddcbc6a80460dac8ccb9f45743ae0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:10:00 2013 -0800

    ao-tools: Clean up ao-stmload and ao-usbload options. Add --raw
    
    ao-stmload only uses stlink, ao-usbload only uses self-flashing, so
    clear up the options in the two programs. The new --raw option skips
    the serial and radio cal rewriting when flashing the boot loader.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ebb36d56c732ffe9cdb8d2ea53d00e1d4ece8f97
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 8 11:07:46 2013 -0800

    ao-tools: Allow building without stlink and readline
    
    This adds --without-stlink and --without-readline options to configure
    to disable these features, and adjusts the build process and code to
    handle that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5fd0dc6f69e7614ba71bbc215b32260a11595af3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 23:27:30 2013 -0800

    ao-tools: Add ao-flash-stm and ao-flash-lpc scripts
    
    These use openocd to download boot loaders to the arm-based products
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eee9b3ce1e5adae5aa4566050b6d6048344e92c4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:54:17 2013 -0800

    altosuilib: Deal with AltosUnits API change
    
    The abstract methods in AltosUnits now pass the 'imperial_units' flag
    explicitly, so deal with that in AltosUnits itself
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 407696f11ac1736e840c9b702592c46197d14c2c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:53:10 2013 -0800

    altosui: Clean up serial close handling
    
    Unify serial close processing in a single function (close_serial),
    make everyone else call that. This avoids a couple of cases where the
    device would be closed and not removed from the devices_opened list,
    leading to 'device is already in use' messages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a47532f411488f003726aa9365ede5dc90c5b78
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:51:58 2013 -0800

    altosui: Don't try to report bearing/elevation without GPS
    
    If the distance from the pad cannot be computed (due to lacking GPS),
    then don't try to report it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44249a9262a16ed103aedf30a300003fc2a17579
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:49:00 2013 -0800

    altos: Nothing in altos uses AES decryption, so don't compile it
    
    Saves a bit of space where AES is used, and avoids some compiler warnings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdb32b1717db4e8cb8cf94d810e74ce2b569566b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:47:45 2013 -0800

    altos/test: Compute and plot tilt based on GPS track
    
    This lets us compare the gyro-computed tilt angle against the actual
    flight path.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fbf4829569d5edb476654f4e383b834af527dc6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:40:53 2013 -0800

    altos: Telemega uses eeprom, include it in main file
    
    ao_telemega.c didn't include ao_eeprom.h leaving a function undefined
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a9b0cdff5db03dc11b6ef69cf5436c834c3acc4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:39:41 2013 -0800

    altos: Add lots more GPS data to mega log
    
    There's plenty of space in the GPS log packets to hold course, speed,
    climb and DOP values, so just stick them in.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de2e812b02a99a2f6d85f15a9600265931f6f6b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 7 09:38:50 2013 -0800

    src/cc1111: Turn off RC osc after xtal is running
    
    There's no reason to keep running the RC oscillator after we switch to
    the crystal, so turn it off.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 473ae38ade0552c5ff3ca088b21345ed5dfad5d0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 15:21:26 2013 -0800

    doc: First pass for 1.3 finished; docs have most major sections updated.
    
    Final edits and corrections still required.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d9b93bfd637eb690159fc5efda0390eb602c6a7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 10:44:07 2013 -0800

    ao-tools: Split out USB loader to ao-usbload
    
    Leave ao-stmload using just stlinkv2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f27dff090c8f3a63bd932715643980703160bde6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 10:31:32 2013 -0800

    ao-tools: Split out altos symbol editing from ao-stmload
    
    to be shared with ao-usbload
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ef287723f8d8bfbfb3582d22bfb5c2a3129414a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 09:52:38 2013 -0800

    ao-tools: Missing ao-selfload.h

commit e6c9ca218d944443c86555e513534d82713af936
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 09:52:01 2013 -0800

    ao-tools: move 16/32-bit readers from ao-stmload to lib

commit d93a65a90f19e4816231e03b1f399af6e3742aee
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 09:46:13 2013 -0800

    ao-tools: Move ao-selfload into library
    
    This needs to be shared between ao-stmload and ao-usbload
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14204e3d147ad99cc249ad8de254809180fe5c38
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 09:31:02 2013 -0800

    ao-tools: Add ao-elftohex and .ihx symbol support
    
    ao-elftohex converts an elf file into a hex file so that we can load
    it with java.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee07f1a0f8e431bebb3b948f6249f5f33413e966
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 28 09:29:52 2013 -0800

    ao-tools: Add debug printf support

commit 95a8180f3d7929dbad65c80421f99c925f245af0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 27 13:59:06 2013 -0800

    ao-tools: Create general elf and hex library routines
    
    Pulls the elf stuff out of ao-stmload, change the hex stuff into ao_
    routines.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73b1a7e644e255558378ab66de6426a7dfd8a7dc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 25 01:15:36 2013 -0800

    doc: Work on AltosUI Pyro config docs a bit more.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82b42935d047d2f7c2f7a63a3efb72a3f1d5594e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 25 00:02:06 2013 -0800

    altosui: Handle units in pyro config.
    
    This lets you edit the pyro configuration using imperial units if
    desired.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8da565bbafa2925aa889cf9249497a709a814b7f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 25 00:01:20 2013 -0800

    doc: Add telemetry enable and APRS interval config docs
    
    Also starts working on the pyro channel config window docs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f743934ebd1a7c7c8b6db0223f0309e590aa15cd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 24 21:55:20 2013 -0800

    doc: use correct quotes in altusmetrum.xsl
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f4abc14065aebceaac9313e4dcd4300e19999cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 24 21:50:27 2013 -0800

    doc: "rocketry electronics" instead of listing products

commit 31a1c701bfaea97225e12ea0688b934790e3737e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 24 21:28:26 2013 -0800

    Use more 1/4 single characters

commit 96f33e780958adaaa4a9cc127caecaeb3f4c978c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 24 21:25:06 2013 -0800

    Remove duplicate log description. Describe pyro config.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3eaaefe6d746a2f53995a2470c5024f37c87c393
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 24 20:05:52 2013 -0800

    Extend the hardware overview chapter. Edit System Operations
    
    Extend the overview chapter to include tables describing the
    electronic and physical board characteristics of each board.
    
    Finish most of the System Operation stuff, still need to add pyro
    channel configuration
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ceed62fd97972b35f4cf6560625135723cb8610f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 13:48:18 2013 -0800

    debian: Build now depends on 'xmlto' for docs
    
    This wraps xsltproc, fop and xmllint for formatting pdf files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92753d4b8d6b17ebc7a9b65680abd46648726393
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:43:33 2013 -0800

    doc: Use system fo docbool.xsl instead of network one
    
    Instead of reading the master stylesheet from the network, just use
    the one installed on the system.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89fc38f2cf143bed1fe8c4a4972267b15c9aa467
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:42:38 2013 -0800

    doc: Make pdf files depend on local stylesheet
    
    Now that we're using our own, rebuild the docs when it changes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9bbca59a9034cf7e6df4577e627d7447f3a9d51
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:42:20 2013 -0800

    doc: Make micropeak.xsl validate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a3e27e3a392be4cfe03d200068a7e69bb2f3fdb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:38:52 2013 -0800

    Make companion.xsl validate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d212d782bff977d609a9da1b805de4a2615fb474
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:37:23 2013 -0800

    doc: Make telemetry.xsl validate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87fbe12bdaf10c9ba7ba43608b1e980cdc09d496
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:29:42 2013 -0800

    doc: Make altos.xsl validate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 963a61986ea4b48fdca0989479e9c50acb0f1a9d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:12:54 2013 -0800

    doc: Switch to xorg style to generate index
    
    This style sheet generates a nice PDF index
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9953a5f0440b269dac5c675f120e6a31dde8ec69
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:06:31 2013 -0800

    doc: Get altusmetrum.xsl to validate
    
    Mostly involved getting the listitem contents into para elements.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 152d978dc4be49b6b764e5e1966bd860c46054ea
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 18 12:05:10 2013 -0800

    doc: Start work on 1.3 doc updates
    
    Add 1.3 release notes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71705532374f222e51c66e2f1214dd01b3efc8bd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 15:02:50 2013 +0900

    Bump to version 1.2.9.4

commit 12481415c2e5fb03b003343c9499df711eb14f91
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 16:26:02 2013 +0900

    altos: include ao_eeprom.h in ao_telemetrum.c to define ao_eeprom_init
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf893a4149b05b97f18f9f487af805adef859d74
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 16:22:49 2013 +0900

    altos: Make sure flight erase log comes after config blog
    
    Oops. When converting from ao_storage to ao_config, I accidentally had
    the flight erase log overwriting the config block.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92eafd01f2809f39c5bc4058977c790d94a99df1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 16:08:50 2013 +0900

    altos: Move telemega to using internal eeprom for config
    
    And crank up the default per-flight storage to 1MB
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c53ad6f8222878a26efecebd3bb1d1fe054a4b6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 16:06:59 2013 +0900

    altos: Move TeleMetrum v2.0 to using internal eeprom for config
    
    This leaves the whole 8MB of flash for flight storage
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83437b2fe304599e22d0a98b5410808bcb67dc97
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 15:45:32 2013 +0900

    altos: Allow use of internal EEPROM for config storage
    
    This stops exposing eeprom as 'storage' and instead exposes it with a
    separate eeprom API so that it can be used for config storage without
    also using it for flight log storage.
    
    The config code has been changed to allow it to either use storage for
    configuration data or eeprom.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b57f1cabfe5052306cb4c28793bea477f4aeb2d2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 15:18:58 2013 +0900

    altos: Don't hold GPS mutex while waiting in TM v2.0 report
    
    Holding the GPS mutex while waiting for the GPS code to dump data into
    the GPS variables is rather counter-productive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0951b1ef83d8d741d65811fa23bde43ee843a939
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 15:18:53 2013 +0900

    altos: Build TM v2.0 firmware by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c40272713d93e79bb0989eefe191cd2bfe56a44
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 15:01:13 2013 +0900

    ignore "compile" script

commit 28327883d377896caddbad0f9efded56a227edd1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:59:40 2013 +0900

    Add TeleMini v2.0 turnon script

commit cffbc025532487bbd9b467476be05d0997b5133e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:56:47 2013 +0900

    ao-tools: add ao-mega man page, ignore executable

commit 40d3575a9365d77ca507ebee226d51d081e1ecc6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:54:57 2013 +0900

    altos: Clean up .gitignore and add a few random files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d2eb0b00a5a0faefce95bce949be7206b0aad37
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:48:21 2013 +0900

    Add ublox checksum generating program

commit d5367f20fa1ae71496fde071953c2cda89654071
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:45:51 2013 +0900

    Ignore mac .dmg files

commit 0093d5b368669e0c324f8d9dfcd2f004de85ee5c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:37:57 2013 +0900

    altosui, altoslib: Move eeprom download code to altoslib
    
    This should make adding eeprom downloading to altosdroid easier
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 45db3076b257adcf2c9f69ed0927f09d94af7a50
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:28:30 2013 +0900

    altosui: Make AltosEepromDownload not swing-dependent
    
    Will move to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6aa99c160f0695eb25ccc0598e4c36224c89dab4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:06:20 2013 +0900

    altoslib: Start moving eeprom download logic to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74d73a2cd0b6a228eb396552e1d16685669349c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:03:42 2013 +0900

    altoslib: Raise ParseException on invalid eeprom format
    
    Make sure the user knows when data are not downloaded successfully
    because the UI doesn't understand the eeprom format.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bdd6244d8b4a55c9aa4fb79b0cb1a0727afbc2ac
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 12 14:01:55 2013 +0900

    altos: Add orientation tracking to ao_flight_test
    
    Shows calculated offset from vertical in ao_flight_test output
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29b48b63305881471d9b97ef3fb236af03cb79f5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 28 00:36:13 2013 -0700

    altos: Don't hold GPS mutex while waiting for GPS data in report code
    
    Oops. This kinda breaks anyone else waiting for GPS data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3628bd2dd3612065792aef6c7ae5bc967b4f081
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 28 00:24:59 2013 -0700

    altos: sample profile address range was too narrow
    
    The range was cranked down at some point to diagnose issues within the
    task scheduler. Unfortunately, that change got merged, which meant
    that general profiling lost information outside of the lower 4kB of code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c1c6728bce4237ca3a8f6fde01356697a465dfd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:47:27 2013 -0700

    altos: Make telemega v0.3 compile with new quaternion code
    
    Adds lots more math code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e838bd2847e5684ce93b6f7cbe736ebed681c3c6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:46:54 2013 -0700

    altos: Make telemega v0.1 compile with new quaternion code
    
    Adds the necessary math code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b0ce8ca65d76b9cf55dfff002e13ce2fbb5f7fc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:45:48 2013 -0700

    altos: Add orientation test when HAS_FLIGHT_DEBUG is set
    
    This just dumps the current orientation to stdout so you can monitor
    it in real time
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d9e715d570b24ac124c30772b11923bd26ed670
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:44:47 2013 -0700

    altos: Update quaternion tests to check vectors_to_rotation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 195fd70cdc7f519cd8d4ac323088ed0b6c188280
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:42:58 2013 -0700

    altos: Change ao_mpu6000_gyro arg to float
    
    This lets callers pass more precision than just the original sensor value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d3fe7e9b6502432868f4430befac871dfea4869
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:42:26 2013 -0700

    altos: Fixup for 32-bit gyro averages
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4bebade9e9004bad81df1a423687f3e3f356f1c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:37:55 2013 -0700

    altos: Correct incremental rotation computation
    
    Trying to compute the combined rotation by taking the x/y/z rotations
    as a vector is a good approximation, but not accurate enough for our
    application given the large angles we sometimes see.
    
    Instead, use a correct-but-expensive function with a pile of
    transcendental function calls. The STM32L seems to be fast enough at least...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06b0c1b768a7d3eae57e66bc9aea25db49f9ea8a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:35:54 2013 -0700

    altos: Compute initial rotation from vertical
    
    This initializes the rotation with the angle from vertical, rather
    than simply recording the off-angle vector. Doing this allows us to
    accurately track the true orientation of the rocket, instead of just
    the offset from the initial non-vertical orientation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdbe8ce33e4a75e85caf07538ed7e997f462b758
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:33:11 2013 -0700

    altos: Fixup for ao_sample_orient rename
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d96fd33aa8a220d547512eb43c88fc8f5651e39e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:28:50 2013 -0700

    altos: Add sinf to math code
    
    Needed for the quaternion gyro tracking code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa7d0ba0efdde3ac9fb4df0589f9ead07b7ffff5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:26:28 2013 -0700

    altos: Keep 9 more bits of average pad IMU gyro data
    
    This reduces the offset error by a bit, minimizing gyro drift.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58f08c4b3cb9049d0c9cb02cde0d8dbdc3d33920
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:23:59 2013 -0700

    altos: Rename ao_orient to ao_sample_orient
    
    Keeps it clear where this name comes from.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c10cb9d31765e6ef0ba737bc484c5aed22a332f9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:11:37 2013 -0700

    altos: Add functions to init quaternions from vector pairs and euler angles
    
    Our low sampling rate means that the "cheap" hack for
    integrating quaternion rotations by using sin(x) ≃ x doesn't work, so
    instead we have to compute the partial rotation the hard way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b25860b5b3b69642928dd9c30dec4b4b937a88c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:11:09 2013 -0700

    altos: Add some comments describing quaternion multiplication
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 616977d2955da13383a1869b9ccdb07338172109
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 23:10:13 2013 -0700

    altos: Mark arguments to quaternion functions as const
    
    Lets us pass constants without the compile whinging
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e923e11e185fd42d2a83e18b3d13bd839a72b1aa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 27 22:44:49 2013 -0700

    altos: IMU accel calibration values need to be signed
    
    The MPU6000 reports signed values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 351d53836e201834a2d89773a08ab7c2dab2b2f4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 25 04:34:16 2013 -0700

    altos: Calibrate IMU accelerometers too
    
    Average the IMU accelerometer values pointing up and down so that we
    have a zero-g offset for all three axes. This can then be used to
    compute which direction the rocket is pointing while sitting on the pad.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08143a922fe27bc50a19924f46538f9476ab5fd1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 25 04:05:09 2013 -0700

    altos: Add gyro-based orientation tracking
    
    This tracks the angle-from-vertical as an additional input to the pyro
    channels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba99630f33440b993c69830856d2a7741ffdef71
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 25 04:03:39 2013 -0700

    altos: Fix GPS test frameworks to handle shared ao_gps_new variable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b83876718b1a535ee04ca0351ad57814454ec646
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 25 04:00:49 2013 -0700

    altos: Add floating point math functions from newlib
    
    These are all BSD licensed, so we can simply include them directly
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 039446f54ef6968a3f0b37ce32ca6bdcdbe62546
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 14 22:41:43 2013 -0700

    altos: Merge GPS logging into a single function
    
    Create a new global, ao_gps_new, which indicates new GPS position and
    satellite data.
    
    Use ao_gps_new as the new sleep/wakeup address.
    
    Merge the separate gps position/satellite logging tasks into a single
    function which waits for new data and writes out the changed values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c4b3658a96f1a64ccebf7bddda06b15b4ac4a6f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 14 21:49:39 2013 -0700

    altos: Use #define values for ublox packet types
    
    One case was using hex values instead of the #define equivalents.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db4cd8b3838d27bebdeb6a085a739a36f7634a91
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 14 20:42:14 2013 -0700

    altoslib,altosui: Be more robust when graphing bogus .telem files
    
    Deal with files containing multiple serial number/flight number values
    by preserving the boost_tick value across state resets.
    
    Check for invalid state when computing actual boost time for the stats
    window.
    
    Ignore invalid speed/accel values when computing averages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bd9786802751391cca3b83ac3045029e00e39ee
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 13 22:05:20 2013 -0700

    altos/micropeak: Increase boost detect to 30m
    
    This meant increasing the data buffering as well so that we could
    reliably capture the flight data back to the ground, even for slow
    flights.
    
    And, with the buffer extra large, we work backwards from the current
    buffer location to find the last ground location rather than working
    forwards from the first buffered location. This ensures that we don't
    capture noise before boost and instead capture a nice flight curve instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0e98597887a970f31b33895adb77d35e06b34ff
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Oct 10 14:35:54 2013 -0700

    updated turn-on script for telebt 1.1

commit 8af5dd05fe56768f225251bbc66831494d80048e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 10 10:02:03 2013 -0700

    Another try at skipping broken avr-gcc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2296175eff9e4286eaf44451690701a46595987e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 10 09:47:52 2013 -0700

    Make sure the AVR compiler can actually link stuff
    
    avr-gcc was broken for a while, causing all linking to fail. Check for
    that and don't try to build avr bits in that case.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa169b80039728e35b0dec3be66a8483d48a3458
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 10 08:04:22 2013 -0700

    altos: Fix stm-bringup demo build to use installed pdclib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8d3835fedf9b7c4d203f321e72c2b086ebb3b97
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 10 00:00:05 2013 -0700

    altos: Use installed pdclib
    
    Switch over to the installed pdclib everywhere
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f6cbfac7c1965add91ebfc28ca3eac4561b4fb6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 9 12:04:14 2013 -0700

    Bump version to 1.2.9.3
    
    Rocketober, 2013
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e947bc5e1abcd054a584d69240f91123bad2178e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 9 12:06:30 2013 -0700

    doc: Add easymini outline to distribution
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18cb5f0b8f0917cbd4ff80f0920e8e5b35c822a1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 9 10:14:16 2013 -0700

    doc: Add EasyMini outline drawing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c584b5fc1128c7bfd7fb921ddc3a8ec498803b53
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 9 12:37:30 2013 -0700

    altos: Messed up the ifeq syntax a bit so ARM bits weren't getting built
    
    $(x) is not the same as ($x)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74885d75621dad04984d8309c2618202f4d2b35e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 10:03:50 2013 -0700

    altosui: Binaries to package are only in per-product dirs now
    
    Each cc1111 project used to stick the binary in src/, but I got rid of
    that when we ended up with so much stuff in src that it was a mess.
    
    Building the release now requires looking in the appropriate directory
    for each binary to ship.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e5d1f3ce39495e3702ecd22cb45972e13a5c986
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 09:50:21 2013 -0700

    altos: avr-gcc appears to find the loader scripts without help now
    
    At some point, avr-gcc lost its ability to find the loader scripts
    necessary to link programs. That appears to be fixed now, at least on
    my machine.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7cccbb7a624a2a47b21682f416a135a28319b41
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 09:39:29 2013 -0700

    altos: Broken test for M0 compiler in src/Makefile
    
    Was causing it to try to compiler M0 progs only when *no* compiler was found.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 488a527267decece48e6682e0e0c7fc29cbed329
Merge: 6a1e398 f6661cc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 09:26:41 2013 -0700

    Merge remote-tracking branch 'origin/master'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    Conflicts:
    	configure.ac

commit 6a1e398e590121458176758858bb4210f3eb5a55
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 09:22:03 2013 -0700

    Add --with parameters to configure for compiler selection
    
    This allows the user to specify which compiler to use for each target
    CPU. Also checks to make sure the arm compiler supports -m0 and -m3
    cpu type flags. The build now actually uses the specified compilers too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16965716c02eb79b449d9d3b264814d775660134
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 8 09:20:12 2013 -0700

    altos/stm: New GAS version requires flags in APSR assignment
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 258d225df1f4afe1cfdc9c43208bcd75d18cdf2d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 7 22:00:15 2013 -0700

    altos: Rename easymini-v0.1 to easymini-v1.0
    
    The production boards are the same as the modified v0.1 boards
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f7edcee2db30652ce0b147f282de3396c3786ad
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 7 21:53:53 2013 -0700

    altos/lpc, altos/stm: ARM requires ISB after switching stack pointers
    
    This sticks a barrier in the CPU to prevent using the wrong stack
    register past the change.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4254de22864de2ed7ae5928c6b8bfd9df1c8a3fb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 7 21:51:30 2013 -0700

    altos: Don't require an LED for ao_flight
    
    EasyMini has no LEDs. Deal with it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71666409624bf544e8a55fa5ee91d2f8514a03ca
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 7 21:49:55 2013 -0700

    Change differentiation filter constants and limits
    
    Larger limits avoids clipping legit data. Using the same filter time
    for both ascent and descent makes the results look a bit cleaner.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6661cc015e1a92450dc3eede97d66005f69cc72
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 7 21:56:46 2013 -0600

    new toolchain for STM32L is in /usr/bin, not /opt/cortex/bin

commit 8bd218854e968d2b9407489359be0c4a1aefd2c8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 19 00:29:25 2013 -0500

    altos: Set TeleMini v2.0 USB ID correctly
    
    Uses 0x0027
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bf7ed1761e08d0cb43b0ed330226ec38c844591
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 19 00:28:55 2013 -0500

    Add TeleMini v2.0 telemetry support
    
    Includes AltosLib and ao-telem
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be7f56b86478ef4a23a2af77338c580b9c9e5e3b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 19 00:26:24 2013 -0500

    altoslib: Prefer averaged ground pres for ground alt computation
    
    If ground pressure is recorded (as from an eeprom file), then prefer
    that value to the average of the pre-boost ground pressures when
    computing the ground altitude.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56b577e55c264c8e3152bb2b2cca02fa8836ac1e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 14:29:46 2013 -0700

    altos/telemetrum-v2.0: Use red LED during boot time
    
    If the LED is stuck on, then the board has failed to initialize,
    so use red instead of green as a warning indicator.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1fa3ff9ba6d04303b3de6952675532492c85182f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 14:29:09 2013 -0700

    altos/telemini-v2.0: Change initialization order
    
    Make sure busses are running before devices are initialized
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ff5f0fbc4900ad45bb7910ffc0c5a4e4cc4b857
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 14:21:08 2013 -0700

    altos: Stop copying cc1111 binaries to the altos/src dir
    
    Just clutters up that directory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b86c69d56261da54745076b1f5a9c8e8e44787c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 14:13:59 2013 -0700

    altos: Add nanopeak-v0.1
    
    The same as micropeak, just a few different pins
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 690094e2d7d9cfe5eb4edb478fd79e5d133c6b4b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 15 14:11:50 2013 -0700

    altos: Move micropeak sources around
    
    This sticks the micropeak sources in appropriate directories, rather
    than in the micropeak product directory so that they can be shared
    with future micropeak-style products.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2449d123690746d0d0d5d66dfc4d3a05b9f5dc0c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 18:24:46 2013 -0700

    altosui: Include device name in Table view
    
    It's part of the telemetry, so we might as well display it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae675c66594d366774d8f7f9c78f1236d3810eed
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 18:23:06 2013 -0700

    altoslib: TeleMetrum v2 telemetry includes computes Pa/°C, not raw values
    
    Telemetry sends converted pressure/temp values as it doesn't include the
    MS5607 calibration data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e22b34bde421a9df090c9196fd4347468c8176a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:54:07 2013 -0700

    altoslib: Add receiver serial to telem file names
    
    Makes it easy to record telemetry from multiple sites and compare them later.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ad95614685a73856bb26a94866909e5fc025434
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:52:51 2013 -0700

    altosui: Set 'flight' value in AltosEepromMonitor window during download
    
    This feature was lost in the AltosState updates
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b66e0d4c107a0727279d03d1d0e1e40a9eaaa3bc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:52:06 2013 -0700

    altosui: Load Telem files in AltosDataChooser too
    
    Telem file loading was stubbed out from AltosState changes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1512255d20c8a395f30ed4914ddd3295842312b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:51:44 2013 -0700

    altoslib: Add TeleMini eeprom file to Makefile.am
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e52d34137626ca756ea01f317ef7c359e464a5b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:50:46 2013 -0700

    altoslib: Lock access to AltosLink config_data
    
    Prevents multiple callers from trying to get config data at the same
    time and messing up the serial line
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29bb16397f14ed617ca3fbf48f2a7b726fd627d8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:49:36 2013 -0700

    altoslib: Set 'valid' for valid TeleMetrum eeprom download
    
    Had separate 'tick_valid' value, which wasn't useful as the supertype
    didn't look there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a299a5a9a1b89c7ebc00ebd33a789793a6835181
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 6 16:48:52 2013 -0700

    altoslib/altosui: Add TeleMini-v1.0 eeprom support
    
    Got lost in the AltosState transition
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82b3e3e4889aa5d4d157df1ad82e28068fda9e2a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 23:31:22 2013 -0700

    altosui: Remove debugging printf from InfoTable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f4650990e8a7cfcf8461e8928dfc426c9a563cc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:57:19 2013 -0700

    altos: Set tick value in new TeleMetrum v2 sensor packets
    
    Was getting left with the old value, which wasn't very useful
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7314bf807544eecf2fd970e93c752ff15688bb42
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:56:57 2013 -0700

    ao-tools/ao-telem: Parse new TM v2 packets
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ffdf82445817d1c97699f7de82534420b87d0ea7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:56:11 2013 -0700

    altosui: Fix 'Graph Flight' button in landed dialog
    
    Telemetry file reading was broken (oops!)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e3edacceb169326b8f5727bb5737d8238e9e40b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:55:43 2013 -0700

    altoslib: Remove debug printf from AltosTelemetryMetrumSensor
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59f0deff6d7bae22fb1b9a0649f3481b3d287d8e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:55:09 2013 -0700

    altoslib: Rewrite AltosTelemetryIterable
    
    Sort while reading instead of sorting separately.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit effc62354fc82bb937c6f445a147fc92153a0731
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:54:02 2013 -0700

    altoslib: Record time_change in AltosState correctly
    
    time_change is used to make real-time playback work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b9ee58a7af839462680a0bdf1c1721017269986f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:53:14 2013 -0700

    altoslib: Update received time when replaying flights
    
    Received time is otherwise recorded as the time when the packets were
    read from the file, which doesn't work in real-time playback
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e17e3691d93636eebbd7381f2df1303dc46ea96c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 22:52:22 2013 -0700

    altoslib: Only open log file when both flight and serial are known
    
    Some telemetry formats include serial and flight in different packets,
    so wait for both before creating the file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9c495c7ca1e08b7ac76b0dab8b3bd9bd3a7edfc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 15:03:07 2013 -0700

    altoslib: Use AltosTelemetry.parse to pull telem lines apart
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f017b4837b106e8c422955a95762f1bf3c78016
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 15:02:47 2013 -0700

    altoslib: Remove more AltosRecord based files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 984515452f9ab56dad112d725469acfa54e2233b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 11:55:24 2013 -0700

    altoslib: remove AltosRecord based eeprom code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3325df306933f080619f13ba1db45de484613d5a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 11:50:41 2013 -0700

    altoslib: Remove AltosRecord-based telemetry code
    
    All of this is now AltosState based
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9e9c6592c49109288a4e02e780b130fadb97db7
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 3 15:11:33 2013 +1200

    altosdroid: convert rogue files to unix line endings
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 93e66b4911b7285f9095712ef746571153c3f088
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Sep 5 03:11:42 2013 +1200

    altosdroid: more updates for new AltosState
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>
    
    Conflicts:
    	altosdroid/src/org/altusmetrum/AltosDroid/AltosVoice.java

commit ee14ad16c242e8bd7a9d33ebf569211d1490b8e1
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 3 15:10:23 2013 +1200

    altosdroid: update to support new state code
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>
    
    Conflicts:
    	altosdroid/src/org/altusmetrum/AltosDroid/TabAscent.java
    	altosdroid/src/org/altusmetrum/AltosDroid/TabDescent.java
    	altosdroid/src/org/altusmetrum/AltosDroid/TabPad.java

commit 5b976a6651f4eb05d30afc08b9e1f27c7e52ae00
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 5 11:33:48 2013 -0700

    altoslib: Finish AltosState changes. Update version number.
    
    Removes all of the AltosRecord bits, changes the monitor idle bits to
    have per-object state updaters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b984ff81d6b8979574e0248ffe8876634b8e1942
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:42:42 2013 -0600

    altoslib: Set measured acceleration for measured acceleration
    
    Was setting computed acceleration even for measured data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96a651cc1b81b30f4cbde454e34cf80ed8825945
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:42:00 2013 -0600

    altoslib: Clear sat data when tick changes
    
    Sat data comes in multiple records, but the tick is always the same,
    so use that to tell when the set of sats is new
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4de934c283a839fcbb246b36aa15362f3cf8629c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:41:12 2013 -0600

    altoslib: Start integrated value at 0 by default
    
    Check for MISSING and start at zero in that case
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cfd8e4ebb3cb63937a71537095adb911d6211817
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:40:04 2013 -0600

    altoslib: Use first few baro samples for ground pressure on TM
    
    TM didn't record the ground baro reading in the log file, so pull out
    the first few measured baro samples and use those instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ee99c1861ef1898a77aead41d80383e697bd248
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:38:20 2013 -0600

    altoslib: Make Ascent/descent use different filter values. Always filter.
    
    In derivative code, use a shorter filter during ascent as the baro
    sensor is cleaner then. Then, make sure to always filter the values as
    the very first few baro samples can be noisy, which generates a bad
    starting speed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70e67925cff98984d49fbc3f60e880c91e6d5079
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:36:16 2013 -0600

    altoslib: Remove duplicate cmd/tick from TM eeprom file code
    
    Also replace tick setting with super call (which does that)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc54014cfd4dbca67fa9db66e906ab8212a2eaa2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:35:23 2013 -0600

    altoslib: Clean up metrum eeprom file reading
    
    Spurious tick setting, fix some local variable names
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d203a2da2641bec21a4257c8a7b03d9a1eba53a5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:34:41 2013 -0600

    altoslib: Correct mega/metrum eeprom years by adding 2000
    
    The files contain a single byte for year, which is always years since 2000.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 999c3c7866613e658a6c26374499bc516bbc944d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:32:37 2013 -0600

    altoslib: Correct tick wrapping in eeprom file reading
    
    Just need to signal that at least one record has been read to know
    when to start checking for wrap
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d3af3d74f70a0933829be91ad3e3be04b1f1023
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 3 17:31:58 2013 -0600

    altoslib: Ensure eeprom file body always exists
    
    Create an empty list of body elements if none were read from the file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 528e2e41112cad8a81bccbb89c3bd202b818a506
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 2 23:10:23 2013 -0600

    altoslib: More AltosState hacking
    
    EasyMini graphs are looking good now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 224a1e01bacb7db0076129906ed58e1c785e1b14
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 2 23:08:34 2013 -0600

    altos: Not all products have pins to control flash loader
    
    TeleGPS has no exposed pins for this function
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77dc89ed5b7bf8f5b3fa3b6131660f1a98f583ea
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 23:11:39 2013 -0500

    altoslib/altosui: Further AltosState transition work
    
    Parses most eeprom and telem records now; altosui updated to show from
    AltosState info.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c781469ff907a32bd43a5d781391b6859b14cd32
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 23:10:56 2013 -0500

    altos/telegps: Initialize logging system
    
    Otherwise, very little logging works
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ec1b97d278c7aec3199fb7270f0dcf9484c879f
Merge: 017ed54 4188153
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 08:22:09 2013 -0500

    Merge branch 'master' into new-state

commit 4188153548fca104bb49cda2d502c708fe4b49d7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 08:20:48 2013 -0500

    altos/lpc: Add bits for building flash loaders
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 017ed54ff69ef2f7740ea2578e22bf72e88deafb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 08:19:28 2013 -0500

    altoslib/altosui: Fixes for state changes
    
    Format for gps alt (now double).
    Use new code for csv file loading.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f07f6d55edf5b97020680b3ce1d9e00bb3df64a6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 31 01:48:02 2013 -0500

    altoslib/altosui: Get legacy telem working with new AltosState structure
    
    Make AltosTelemetry work without AltosRecord
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de8d9c5630ae46378c50faf97f7d2e97fe139e30
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 29 19:24:51 2013 -0500

    altoslib, altosui: Restructured state management now does TM eeprom files
    
    Removed uses of AltosRecord from AltosState, now just need to rewrite
    the other AltosState changing code to match
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce1378385ef273010498e81c205f42d8e32c7dc1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 29 19:22:18 2013 -0500

    altos: Split EasyMini and TeleMini log formats
    
    Same data, but EasyMini uses a 3.0V supply while TeleMini uses 3.3V,
    which changes the intepretation of all of the ADC values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 04d7d0f829ba953ffeca8ad9887a4b6b2b5d5087
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 27 21:28:07 2013 -0600

    altoslib: Start restructuring AltosState harder
    
    Make per-packet code update state itself rather than having all state
    updates done centrally. Will make adding new packet types easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcc51bb18985c24fa35bce0dd42ea3d847b960bf
Merge: 7c82acc a73b025
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:52:58 2013 -0600

    Merge remote-tracking branch 'origin/telemini'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    Conflicts:
    	src/core/ao_telemetry.c
    	src/core/ao_telemetry.h
    
    Added both Mini and Metrum telemetry defines

commit 7c82acc1c1c5b7b4da7c7ecb3b2fd90140e4c703
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:12:25 2013 -0600

    altos/stm: Make sure we switch to MSI during timer init
    
    Need to ensure that the CPU is actually using the MSI during timer
    init or all of the other clock changes won't work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6802b6a65b1fec06c2c873282be792c40b3c8f5e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:10:58 2013 -0600

    altos/stm: Remove stale timer defines
    
    Stuff from when we weren't using systick
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e9ed70f50e3f535c2580820771bb1bc3cd055fe
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:08:51 2013 -0600

    altos/stm: Make sampling profiler work again
    
    Disable the separate stack as that means we can't figure out the PC
    from the timer interrupt. Move ao_idle_loc after the interrupt release
    so that we see idle tasks correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2fa87754c5c11bb86e9b1878580c3d4f4b2463f5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:08:04 2013 -0600

    altos/stm: New compiler doesn't correctly build flash bits yet
    
    Use /opt/cortex until we make the packaged one work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4887af0bf90661a3fdca76f1797a704888edab06
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:04:18 2013 -0600

    altos: Force u-blox to 9600 baud for now
    
    The Max-7 parts just aren't happy switching baud rates, managing only
    about half the time. Someday I'll figure out why, but until then, make
    things work by just leaving the chips at 9600 baud
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61163980f096d555a843e25cd9fe1aec93bbbbba
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 22:02:48 2013 -0600

    altos: Add debugging to ublox GPS driver
    
    The new max 7 parts seem to be unhappy about switching baud rates, so
    I've added a pile of debugging to help out. Some day, I'll figure out
    how to make them work, this code is being left in place to help with that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44d4c66b21d6b5a0c656fdff6d01ef1d125c1101
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 21:54:31 2013 -0600

    altos: Update time for next alarm each time a task is added
    
    Adding a task with a sooner timeout than existing alarm tasks was not
    correctly updating the time to fire the next alarm, causing tasks to
    be delayed by the wrong amount.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39475c7b8da4f29936f73ffa2bff112f50ee9328
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 28 21:52:29 2013 -0600

    altos: TM v2 places the MMA6555 upside down compared to Tmega
    
    Means we need to invert the data coming out to make it work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f222e8504bfd01027e3c380c239a2cde2c367d74
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 27 22:00:29 2013 -0600

    altos/telemetrum-v2.0: Use 9600 baud for ublox
    
    Something is up with the Max 7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abde595116f6e8b60ec9ce81554c05de11fd456e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 27 21:36:02 2013 -0600

    altos/telemetrum-v2.0: Fix MMA6555 SPI pin assignment
    
    For TM v2.0, it's on PB 3-5, not PE13-15
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 454a41359b94e9bcf8582420abc359bbab9d8176
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 23 11:25:56 2013 -0700

    altos: Rename TeleMetrum v2.0 ADC sense members
    
    Use sense_a and sense_m instead of sense[2]
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6aade70be0a7669d65a8606753d21e4eef5592cd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 20 14:20:56 2013 -0700

    altos: Add TeleMetrum v2.0 boot loader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b0f9b25a56fa8b4aa1c2e9d79c43e6a97cab0c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 20 11:40:17 2013 -0700

    altos: Initial TeleMetrum v2.0 bits
    
    Adds new telemetry and logging formats along with code for TeleMetrum
    v2.0 design.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a73b02518fcbc9fc0807ed8e141d3a06e8ad8214
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 18:46:02 2013 -0700

    altos: Don't use ao_data on cc1111 projects
    
    cc1111 ao_adc.c supplies the needed globals at this point, and linking
    both into the program leads to two different versions of each at
    different addresses (yay SDCC linker!)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d54156caf856ab5570f050692b333a2c5d991265
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 18:44:23 2013 -0700

    altos: Make ao_wakeup reentrant
    
    In case we end up invoking it from two places at once.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e941695aa27e5eaf453ca1128b8d835472410a4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 18:43:20 2013 -0700

    altos: Check for MS5607 MISO low before sleeping
    
    If the MISO line goes low before we manage to configure the
    interrupts, we'll miss it entirely unless we check the pin explicitly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b9acb88aa97e8565cdf9342fc59a5aee08e3d34
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 17:18:57 2013 -0700

    altos/telemini-v2.0: Add ao_exti.h depend. Init beeper and usb.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7274b77666df9d2cab2854ec1a403d80e5fce73b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 17:18:17 2013 -0700

    altos: Use %ld and %lu for MS5607 debug output
    
    The value are 'long', so use the right printf format.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e3955a5b0ac125bd807920c467f959618449fbc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 17:17:47 2013 -0700

    altos/cc1111: Wake up non-ADC sensor code each timer tick
    
    Make sure the MS5607 code gets told to sample every tick
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b2f83a7d686b5fbc0aaa56d48cb734f353631c8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 17:16:54 2013 -0700

    altos/cc1111: Leave pin interrupts completely disabled at init time
    
    Don't even turn in the PICTL bits as that seems to cause the chip to
    be unhappy.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ca98dc8c868c47c372d6b666c36e691fa402824
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 17:15:55 2013 -0700

    altos: Get telemini to copy current MS5607 state to ring.
    
    The ADC code is responsible for actually inserting the non-ADC data
    into the ring, so do the copy there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af9f9cf0c21630562c74fae41773319229bf44d3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 16:42:45 2013 -0700

    cc1111: Hacky pin interrupt support. Only useful for TeleMini v2
    
    This code is designed to support the MS5607 MISO interrupt bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2380a4b9bd69629c78eec0a87ff8681a0524d8d2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 16:41:33 2013 -0700

    cc1111: Rework ADC configuration a bit, fix Tm V2 ADC usage
    
    The Tm v2 ADC code was not actually fetching and storing the ADC
    conversion values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aeb1c8a2aa533cb2805f0dbe848e098c8cae2b39
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 26 16:39:47 2013 -0700

    ao-tools: Use TeleDongle for default ao-dbg target
    
    Makes more sense than assuming we're still using the old TI developer board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 377a44cbfd5c8a659d2fecabb154726717a41900
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 25 22:34:09 2013 -0700

    altos: Build more products by default
    
    We keep creating more hardware...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e72147e215a982ce701099626424b9a856ac9d09
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 25 22:33:30 2013 -0700

    altos: Changes required by cc1111 multi-spi support
    
    These drivers got missed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af6f4205b00669af40acffc528cc8093b0236cf6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 25 22:29:46 2013 -0700

    Bump version to 1.2.9.2
    
    Set version for Airfest testing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 312f6194a4bc75473cb0d61a6d58b66fb1f7c068
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 12 00:43:31 2013 -0700

    altos/teletiny-v2.0: Support multiple SPI busses on CC1111
    
    Needed for TeleMini v2.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c2bbfd9a1a4b9de42cf566f21f179ff5ede0419
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 23 16:52:59 2013 -0600

    altos: Add exti and spi to telemini-v2.0
    
    No longer builds like this
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56911f27376b0fe91a464e369bb8aa1531b3c7dc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 23 02:17:51 2013 -0600

    altos: Make TeleMini v2.0 fit
    
    Mash lots of storage locations and code around to shrink stuff down to size
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb844328322fd7d9f4dafb58b322257a70b347e6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 19:20:54 2013 -0600

    altos: Add 64-bit subtraction
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ccd902d0fd2adc40c72982babb60fac4da6a087
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 17:08:55 2013 -0700

    altos: Add 64x64 multiply. Test 64 ops for dest same as either source
    
    The test change is to ensure that the destination may be one of the 64
    bit sources.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7602ae566a5cbf2d2cbb1d68bad7e2d1177a33a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 14:38:19 2013 -0700

    altos: Make 64x16 mul a bit faster
    
    the unsigned 32x32 multiply really does work, just use it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3114baef45803250a2e5cdd2ee4a9171f2045b0c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 14:32:50 2013 -0700

    altos: Add 64-bit add/mul/shift for SDCC
    
    SDCC doeesn't provide a native 64-bit type (sigh), so
    implement the minimal operations necessary for the MS5607 conversion
    routine.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0b4e926ecececa7499a301b6135189be119512e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 13:03:06 2013 -0700

    Initial TeleMini bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ded57394f6dfd7beb9526c031a5c6c6c9926917
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 25 22:22:55 2013 -0700

    altos: Explicitly list the linker script needed for AVR targets.
    
    Something changed in the binutils-avr package which makes the linker
    fail to find the script in the default location.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 203951f6e049ec7e95489849a2bfaa01aa19c0c9
Merge: 4babe73 b363a62
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 25 22:00:27 2013 -0700

    Merge branch 'master' into telegps-v0.3

commit b363a628fc6137c3395a48ef13de7a799ec3e2c3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 22 19:31:15 2013 -0600

    altos: MS5607 pressure computation for low temperatures was wrong
    
    Second correction only applies to temps < -15°C, not 15°C.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa2948803d33dbee6f1eab30370178252df2b56d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:45:06 2013 +0200

    altos: Wake up on LPC usart ISR only once
    
    Instead of waking up after every character, wait until the FIFO is
    empty to reduce overhead
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 10f88c46df9a266f62452dc25275c79a3bb0653d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:43:18 2013 +0200

    altos: Set default LPC stack to 512 bytes, Em to 384 bytes
    
    The default for lpc has been raised to 512 bytes, but Em doesn't have
    enough RAM for that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41428d1e1e44a17eea5fda2b34cabafbdebf1464
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:35:08 2013 +0200

    altosdroid: Add note to report TeleBT battery level
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e908eb090fc2aaa03b35dc37c3e008b05ad44d80
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 23 11:24:18 2013 -0700

    altos: Use installed arm compiler for LPC
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1aed2eb5c7d477a2f3d4fada22980041aba97cb8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 23 11:22:10 2013 -0700

    altos/lpc: Stop using burst mode for LPC ADC
    
    Burst mode doesn't stop after one round of conversions, so we end up
    getting incorrect values in whatever the last conversion register is.
    
    Just use single conversions and take an interrupt per channel.
    
    Also, slow down the ADC so that our values are more stable -- just
    need to make sure we get the whole conversion sequence done 100 times
    a second.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4babe7310f78338ca36ab9d31ac833eada27485f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 24 23:22:18 2013 -0700

    altos: Allow products to disable RDF entirely
    
    TeleGPS doesn't ever want RDF
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1ec15f4585e23eb67affbe7d9d97261576b198d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 24 23:21:53 2013 -0700

    altos: Add telegps v0.3 product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2f385946132690ca6dc141d7c7830ae0cfe3458
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 20 08:54:44 2013 -0700

    altos: various cc115l driver hacks
    
    Try to recover from TX_FIFO_UNDERFLOW by resetting the chip at idle
    time.
    
    Do a calibration phase during setup.
    
    Program power to ramp up to limit key down noise.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0dd55f66d79f54b450fd8122aecd84d68b810bf4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:45:06 2013 +0200

    altos: Wake up on LPC usart ISR only once
    
    Instead of waking up after every character, wait until the FIFO is
    empty to reduce overhead
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0dd93ccf0920260b41c4003955617fd0cd1c8b4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:43:18 2013 +0200

    altos: Set default LPC stack to 512 bytes, Em to 384 bytes
    
    The default for lpc has been raised to 512 bytes, but Em doesn't have
    enough RAM for that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a22a300009679a14d66214a5d61e9e6a177279f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:40:33 2013 +0200

    altos: Allow ublox to run at other baud rates
    
    Provides a configuration option to set the ublox serial baud rate to
    something other than 57600 baud
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0a0a747624c2df66ca4a73b5a0de014ea204dca
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:36:35 2013 +0200

    altos: allow projects to override default config values
    
    Override default radio power and APRS interval
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bed68ef5a6999b2e23853958502a689a7dbc15b3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:35:08 2013 +0200

    altosdroid: Add note to report TeleBT battery level
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0e126251360f050b7121f167771c057bda8747e
Merge: d95a2c5 4fe47ad
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:33:31 2013 +0200

    Merge branch 'master' into telegps-v0.3

commit 4fe47adc7aca54951a50b1c1ae95cb02e46f8d3d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 17:30:52 2013 +0200

    altosui: AltosDbm class was missing somehow
    
    This doesn't appear to have been added?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ff54bb96f6c00c0c2c7dd32f81403bac331621a
Merge: fa0859a 01f8df0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 16:03:26 2013 +0200

    Merge remote-tracking branch 'origin/master'

commit fa0859a51576efe231effcb5995f325f9e7e0fcb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 17 16:01:44 2013 +0200

    altos: Make FAT test program link explicitly against libcrypto
    
    For some reason, the MD5_Final symbol isn't resolved when linking only
    against libssl.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 01f8df088759ee7e6bc3900a013e0ea4fafaf984
Merge: e2ebe60 15063cb
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 30 00:15:06 2013 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit e2ebe60adf061479a1259a5c68b9cd5f5bacf644
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 30 00:14:41 2013 -0600

    add a note about callsign matching and case sensitivity to the manual

commit d95a2c5d1ddce913dcb1d1ab5dc59f6a588ab599
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 24 14:29:43 2013 -0700

    altos: Remove ao_radio_gpio_bits from normal build
    
    Only needed for the CC115L_TRACE code, and it only builds on STM
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c542a2ed0f222bd0ec84e4a9651585d441dd7ccf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 24 14:29:01 2013 -0700

    altos/lpc: Rename serial port to 'serial0'
    
    This lets existing serial port users find the right function.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 324ceea43c115f4bed3a5276e57559c6c76b07c1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 2 17:54:38 2013 -0700

    micropeak: Add Download button to menu bar
    
    It's the most common activity, after all
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 156e60954fae15bc090984f79cd5594f910ca913
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 2 17:53:51 2013 -0700

    altosdroid: Just use GPS location provider to build on 4.2
    
    Attempts to use the network provider cause the app to crash
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e148582217d6e02ac90a68e2bb2532947378d36f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 24 14:28:06 2013 -0700

    altos: Support mega-style logging without ADC
    
    Used for TeleGPS, just exposes the necessary log writing function
    without also including the ADC writing code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 261ec8fc7043e9314469e919aa96acc461f7e5f2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 24 14:26:23 2013 -0700

    altosui: Add EasyMini USB ids
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0dd148e388944d8d265da51d62806c4a00b2c13d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 24 14:23:53 2013 -0700

    altos/lpc: Add boot loader
    
    Support the USB boot loader, add USB pull-up support.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2568b36ae9d38ae1607ec08b84b06e0fe84bd3ba
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 22 00:53:38 2013 -0700

    altos/telefire-v0.1: Use same LED selection as the v0.2 setup
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58eda6f873f5d6e8e219f769bdf67ce4dbc96fd7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 21 19:40:59 2013 -0700

    altos/lpc: Don't disable all interrupts when disabling one interrupt
    
    The nvic iser and icer registers read value indicates all enabled
    interrupts, icer writes disable the set interrupts. Re-writing icer
    with the current value ends up disabling all interrupts, not exactly
    what we wanted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9081d881bc48bf7fdce617d300ac02c1a5962239
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 21 19:40:03 2013 -0700

    altos/lpc: Remove ao_usb_task structure
    
    It's not used
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23f11b188fc6aacd29e7f01a7d8a40853b7655df
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 21 19:39:27 2013 -0700

    altos/lpc: Enable brown-out-detector
    
    Make sure the processor does something sensible when the power disappears.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9e713bc8ab2080d5c1c38570b112f13c886bd11
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 19 22:45:54 2013 -0700

    altos/telefire: Radio status (no data, weak data, good data) on LEDs
    
    Instead of blinking RX/TX, report the radio status on the telefire
    nodes, just like telelco does. This makes the LEDs on telefire
    *exactly the same* as the LEDs on telelco, which seems like a good idea.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d90c2fa650de4cdb008d5e2559463c08da8db934
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 19 22:44:16 2013 -0700

    altos: PCA9922 LED driver needs Enable driven low to latch values
    
    Driving Enable high means anything going past on the clock and data
    pair is reflected on the LEDs, which isn't terribly useful
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 572faa19b9a496866e3b589d5eb9f37a680206ab
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 19 22:42:58 2013 -0700

    altos/cc1111: Fetch RSSI for TeleFire from correct byte
    
    Reading the status byte doesn't provide very useful RSSI info
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 025beb0fea011d0e3dab59b5d16e7ffae97c613c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 14:52:32 2013 -0700

    altos/lpc: Get rid of ADC filter
    
    Now that the source of the Vcc noise has been identified, remove the
    unnecessary ADC filtering.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 10f3d0084ff1c0b3dbf28c5d44727b514caeee20
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 14:00:43 2013 -0700

    altosui: Add raw pressure to the AltosUI graph
    
    A nice addition, and useful when diagnosing baro sensor issues
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 298e54856b5f8809b43f24407caa4a6be60822f3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 14:00:11 2013 -0700

    altos/lpc: Get the IRC turned off after boot time
    
    This involved carefully moving the USB away from the IRC before
    turning it off.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3ad488477def157e277e239e81f164b49725925
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 17 13:58:41 2013 -0700

    altos: Disable USB on all flight computers when in flight mode
    
    There was a check to only disable USB on boards with radios, but for
    EasyMini, we want to disable USB too for flight mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e2f3f2556e714833d8b7d0f65877b07b3dc2cb5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 16 22:32:16 2013 -0700

    altos: Declare m25 write-in-progress as 'ao_port_t'
    
    This lets us use port bits greater than 7 for M25 chip selects
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcf769198863c1b0f1b05f41d0c052a3dbfef247
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 16 22:31:58 2013 -0700

    altos/lpc: Remove spurious semicolon
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d040adeef9df4cda31dce603db81dc7ce19ec0d1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 16 22:31:31 2013 -0700

    altos/lpc: Don't disable all of the clocks just yet, USB doesn't work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1676c7dbc3dcce2962be9ef9a58d37c7b48e3c0f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 16 15:07:54 2013 -0700

    altos/lpc: Turn off more clocks, disable USART for easymini
    
    Try to reduce noise on the power supply.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be9ee9ed2d041c4ab4e77ee2010fe3c7a1ca6597
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 15 01:20:49 2013 -0700

    altos/lpc: Filter ADC inputs
    
    They're amazingly noisy on EasyMini, so just filter them as the only
    thing we use them for is battery and pyro numbers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7361371190bf3805b6d0414e61f697aca7c7cff1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 14 04:38:11 2013 -0700

    altos/lpc: Make ADC inputs work
    
    They're still very unstable (bouncing around a lot), but at least they
    seem to report useful stuff now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6827d0a7c59d606ea05387465f1ad4d914babd49
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 11 16:31:20 2013 -0700

    altosui: Use preferred units for main deployment height configuration
    
    Show and accept values in the preferred units; create a separate list
    of preferred values for each set of units
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15063cbb8f76bffea71575d295ca87b7ceca36d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 9 23:18:09 2013 -0700

    altos/telelco: Add 30ms delay in search after finding a box
    
    This gives the remote boxes time to get back to listening for messages
    after receiving the packet from the found box.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 988924b51980ad43e39bc4785a625ff25eb16449
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 9 22:09:13 2013 -0700

    altos: Add fast-timer API. Use for quadrature and button drivers
    
    This splits the fast-timer portion out of the debounce helper code and
    shares that with the quadrature driver which now uses it directly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72b6c699d355fcd41addb9919d846e63105b9db7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:34:19 2013 -0700

    altos: Add debounce helper. Use in button and quadrature drivers for TeleLCO
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47b7e1d819e48aaebf6ffda49effbee041ce8750
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 9 12:13:06 2013 -0700

    altos/telefire: Leave siren on all the time. Add siren/strobe debugging.
    
    The 50% duty cycle wasn't actually loud enough outside.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 187f661c2512e4260d0ca64134de8fad199f5944
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 9 10:00:54 2013 -0700

    altos: Add telefire v0.2 support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ba2035c78293bc312804722249df76dd4692d71
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 9 09:53:07 2013 -0700

    altos: Add driver for 74hc165 shift register
    
    Just reads one byte from the shift register using the SPI driver and returns it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e8b72a9dc5b6c3a0f6132dc2dec04f8c08a1deb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 22:38:56 2013 -0600

    altos: Add pyro operations to regular ignite commands
    
    Instead of having separate commands, just mix the two sets together.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4bc1f3390b9ebbe07af4bc0f0a1c0915193ddf42
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:41:22 2013 -0600

    Set version to 1.2.9.1
    
    Mark bits to be used on Monday of NSL 2013
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f131e740477d29b6623fa336da79e53f765a55b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:48:03 2013 -0600

    altos: Make manual pyro firing command work again
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ca472333a3587f0e47d54f5edc287494262ef98
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:47:02 2013 -0600

    altos: write pyro fired to correct log field
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 956f4dff1cc521059434743624b1271fb92b96ae
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:39:13 2013 -0600

    altos: Light pyro charges simultaneously if so configured
    
    Don't try to be nice to the battery, just let the pyro circuit deal
    with it and try to get all of the specified circuits going at the same
    time if they're configured to do so.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62547a042d042fadec652c5081f96816a8e66970
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:03:12 2013 -0600

    altos,altosui: Add pyro state logging for TeleMega
    
    Only in the log file (no obvious space in the telem packets), but at
    least we should be able to check for pyro failures.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 277577fecc71e3c52b823938f396cf42be403ebe
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 19:01:58 2013 -0600

    altos: Add pyro code testing to ao_flight_test for TeleMega
    
    This parses the pyro settings and signals when the pyro channels are
    fired in the output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1408c13f176f3f021e9face48c4cd33528ee96c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 18:58:41 2013 -0600

    ao-tools/ao-mega: Dump 'pyro' state from mega log
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8083aa731c99d09bdd4a8c216bb11f846734d7df
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 18:57:58 2013 -0600

    ao-tools: Add ao-mega tool to parse TeleMega eeprom files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21689ef744ddf43965ccad89dc1133a905011d7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 18:54:02 2013 -0600

    altosui: Missing 'break' after selecting 'mega' format detection
    
    Caused 'mega' logs to be dumped in 'mini' format which didn't work well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17e0ccccc8619f96d2cf56bd98d63a7e59f5301d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 26 18:50:10 2013 -0600

    altosui: Stop downloading mega eeprom on empty block
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 013cba5ed1fde72240a68ec648bd14977f5e48a4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 20 21:41:01 2013 -0700

    doc: Update description of graph window to note new tabs (config and map)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e711c708b0d2c8d8c2d72e34a795ad8e9b5ab5de
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 20 21:37:20 2013 -0700

    Create release notes for 1.2.1
    
    Move most of the 1.2 content to the 1.2.1 block
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2344ba81fa51215471099e56518112478bdf2e73
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:31:05 2013 -0700

    Separate out cortex-m0 compiler tests in configure
    
    The summon arm toolchain doesn't work for cortex-m0 parts, but the
    linaro toolchain does. Look in /usr/bin for the -m0 compiler but
    continue to use /opt/cortex/bin for the -m3 compiler
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85eb75c3251d8e141d7269fc7ffa6197174ea8c3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:30:44 2013 -0700

    altos: Can't use inline functions because SDCC doesn't do that
    
    Sigh.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd5567882b732f8947b44b217552077c82a3d28e
Merge: fd55c1f 57b4d82
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:16:54 2013 -0700

    Merge branch 'lpc'

commit fd55c1fe53adf5c50dcd3ce8296f80871cec73e9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:16:33 2013 -0700

    Bump master version to 1.2.9 to avoid confusion with 1.2 releases
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bffe8caf0294e9cfef2dab1c6b5a8d1d87ac3a2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:08:15 2013 -0700

    altos: Set the path for the STM32L compiler explicitly
    
    This makes sure we use the known toolchain for STM32L builds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7282fab337dc48d32606276e5f51c057a3bff8cb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 21 11:04:25 2013 -0700

    altosui: Add TeleBT firmware to release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57b4d82dee10b142b820aa306028a288a85214f6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 23:07:54 2013 -0700

    Add Mini logging format. Use in EasyMini
    
    This is a 16-byte record that includes all of the sensor data in each
    sensor record, along with records for flight state changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27e9b93f3d35890a49575b2ead1983ce3c2fc213
Merge: a4df257 d9cbef8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:40:42 2013 -0700

    Merge branch 'master' into lpc

commit d9cbef8cd364aae54855cc5bc64fb8c2b22057b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:35:42 2013 -0700

    altos/telemega: The last two igniters are apogee and main
    
    Not the first two. TeleMega v0.3 has these marked on the silk
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4df2575b4e782e83cc4e9b1d2e5cd2397a97dd8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:33:35 2013 -0700

    altos/easymini: Initialize beep and ADC. Declare use of igniter bits.
    
    This makes easymini actually work!
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a87a8e8067d7b2d0ff3a3274af9f1e919b5b7793
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:32:34 2013 -0700

    altos/easymini: Use different pins for igniter outputs
    
    Was using the I2C outputs which are open drain, which makes it
    impossible to force them high as needed to driver our igniters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16eb0b04df3d1db65bd40717133abe94db0f2a15
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:31:48 2013 -0700

    altos/easymini: MS5607 chip select bits were defined wrong
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 455802b7e853956180799c058e9561876d98d831
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:30:49 2013 -0700

    altos/easymini: Easymini doesn't have USB connect or VBUS wiring
    
    Disable these in ao_pins.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35b120c4154df0351c3a802f86dda224a7643068
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:27:53 2013 -0700

    altos/lpc: Force idle mode if USB gets an address during boot time
    
    This lets EasyMini be booted to idle mode by simply plugging it into USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1f01cd4406063191a51cb68fc4634eabfc60fc2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:27:05 2013 -0700

    altos/lpc: Reset SPI device at startup time
    
    Wasn't doing the reset sequence correctly (write 0, then write 1).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0ad8b5b5e1b4c7a9ffba9d25f3c32ce708c3ec5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:26:07 2013 -0700

    altos/lpc: Configuring wrong pin for SPI1 MOSI
    
    Was setting configuration for PIO1_21 instead of PIO0_21.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b9bb088a36fd351809f4c378356327ffa663c974
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:25:13 2013 -0700

    altos/lpc: Allow for alternate SPI SCLK0 pin usage
    
    SPI SCLK0 can appear on three different pins; let the application
    configure which one it wants.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 397109139fb9ff27ec7cfb0cafa65d1dbea053bd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:24:11 2013 -0700

    altos/lpc: Leave SPI enabled all the time
    
    Might be able to turn it off with some care; more experimentation required.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e383d7a28d01729c50f933ceda77ea767d1b8087
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:22:20 2013 -0700

    altos/lpc: Create TX/RX busy macros for SPI driver
    
    Check for both fifo status *and* device busy to make sure the device
    is idle before we touch any registers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07d261c08214837b5d5cac4d2be43e51a0c47868
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:19:15 2013 -0700

    altos/lpc: Fix beeper driver
    
    Set prescale limit, not current prescale value (pr instead of pc).
    Flip output 1 on PWM match (set emc toggle for channel 1).
    Don't hold counter in reset (turn off CRST bit).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fe11b277dd7268eb445d120c8f9537f95148891
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:18:44 2013 -0700

    altos/lpc: Missing parens around ao_gpio_set macro
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a78012782c779de3433b91e6b854b2fdbd7230fd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:17:48 2013 -0700

    altos/lpc: SPI runs off main clock (48MHz), not sysclk (24MHz)
    
    Update SPI speed definitions to match
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d51c9fda3478f205e4bcdf1b7bf21eb1e0a516bc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:07:52 2013 -0700

    altos/lpc: Pull ADC data from the correct registers
    
    Was just stepping through register space arbitrarily, which would have
    worked for EasyMini, but might have failed later if the ADC pin usage
    wasn't consecutive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6343bd774f542a4f915cf1fca2053d03e93bf2c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:06:03 2013 -0700

    altos/lpc: Don't use loader to place USB endpoint data in USB ram
    
    Instead, just assign a fixed address in registers.ld. This avoids a
    confusing section in the elf file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35a05041d3ca3e69a146bd3bf8038c0f1cbc1b42
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:04:29 2013 -0700

    altos: Add EXTI_PIN_NOCONFIGURE to exti interface, use for MS5607
    
    This asks the EXTI code to not mess with the pin configuration so that
    the MS5607 driver can get interrupts on the MISO pin while still using
    it for SPI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 098fd43a740ee2a782f82b6b71965b60cdba2d62
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 20:00:24 2013 -0700

    altos/lpc: Make EXTI code work.
    
    Clear rise/fall bits in ISR to avoid re-entering.
    Block interrupts around enable/disable bits.
    Create shared _ao_exti_set_enable function to control mask changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f794e6c95697b034be315632fddb3a5475c43b5b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 19:57:23 2013 -0700

    altos: Use ao_spi_get/put_bit in MS5607 driver
    
    Replace open-coded ao_spi_get/put and ao_gpio_set sequences
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b7ab41e4dc92dcd382f4c05459088d8df8b70075
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 19 19:51:32 2013 -0700

    altos/attiny: Fix ao_spi_get_bit/ao_spi_put_bit macros
    
    These were never written, so just use ao_spi_get/put_mask.
    
    A precursor to changing how the MS5607 drives the SPI bus
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49f9cdda5f1812687b82915acc78a9d9136255bf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:54:30 2013 -0700

    altos: ignore built files in easymini-v0.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c57e1630002c921739ff22395497d93027d381b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:53:32 2013 -0700

    altos: Build easymini-v0.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 278300b2bc98b92cc71ec016ab0fc93eb3696435
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:52:59 2013 -0700

    altos: Initialize SPI for easymini
    
    Doesn't work very well without this
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbe5eee76faf386eefe69539935ab318944ac452
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:52:14 2013 -0700

    altos/lpc: Stick USB control structure in USB memory
    
    No reason to have that in regular ram, and it means we've got space
    for large enough stacks now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3587bfd248e115bb1abb28f71b263575b4e8e367
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:22:10 2013 -0700

    altos: Add easymini-v0.1 product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4991db4809ae547fdb245e3cb42517fa7524de5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:21:43 2013 -0700

    altos/lpc: Use separate interrupt stack
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5311720525ac73e9d42067b68adf25fc2e054af5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:21:20 2013 -0700

    altos/lpc: Try a smaller stack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f5218e2544dcb659aec6c3adee50d61cab1bba3a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:19:41 2013 -0700

    altos/lpc: Add pin interrupt driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c0d0147251bfcebd753196b74c22c00c3116fd22
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:18:55 2013 -0700

    altos/lpc: Add beep driver
    
    Hardwired to our current beeper pin
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 166977c65bddb50d600a3c1e1f278c425b673697
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:18:19 2013 -0700

    altos/lpc: Add ADC driver
    
    Uses burst mode to get the whole set of values in one interrupt
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed25a46571d988ccf37ae915dff97b5f00bcf9cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:16:41 2013 -0700

    altos/lpc: add gpio int, spi, adc and ct32b defines to lpc.h
    
    Lots more devices
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b0b7bf1462341718e582223a880f2dfcd79e2ad
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:15:58 2013 -0700

    altos/lpc: Clean up broken IOCONF defines
    
    Missing comment closes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08887678f900adae81dcb1a7f5353d98d127aafd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:14:57 2013 -0700

    altos/lpc: Fix ao_enable_input, add ao_enable_analog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15ca452b60271e3a0f7327216df04eef5b985240
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:14:16 2013 -0700

    altos: LPC interrupt priorities are just 0-3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 935a7ff38010ec4ad19f315f8a2a1557c01ae554
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:13:17 2013 -0700

    altos: Add LPC spi driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d9b42470e8889b44bb08858a610285410a200ab9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:02:38 2013 -0700

    altos: Use ao_port_t in m25 driver
    
    This uses ao_port_t for all of the chip select masks
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28890aa5893898cd0bb0ac033e491eb307a84ca5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 03:02:01 2013 -0700

    altos: Use ao_data_pres macro in ao_log_tiny
    
    Now it works on easymini too
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82afe3a3b737c43dbeaad41ea5af1841357297a6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 02:54:55 2013 -0700

    altos: Check for packet mode before trying to disable it in flight code
    
    This is only relevant for telemini
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52063c2679752033135fff928c7686e368d2a825
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 02:54:30 2013 -0700

    altos: ao_data_get is in ao_data.c now, not ao_adc.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4385d29fc1b233b3ad56d4af68a175e760c1751
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 02:53:32 2013 -0700

    altos: Allow architecture to define the type of port registers
    
    LPC11U14 has 32-bit ports, STM32 has 16 bit ports.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca4f3161258356c06fe1270f7ccdf0d6939e2d34
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 18 02:52:49 2013 -0700

    altos: Move ao_data.c from stm to core
    
    This should be used on every processor
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac089d4fb930b7dbc4161259fd9bddba94395ebc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 17 03:36:47 2013 -0700

    altos/lpc: Get USB working
    
    The lpc demo now has a USB command line.
    Also allocates system stack so we know when ram is tight at build time
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 185e6d15bcda229949a984910d7394203d301db9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 16 18:58:24 2013 -0700

    altos: Allow target-specific USB endpoint specifications
    
    The LPC has only a small number of endpoints, and those are not
    configurable. Let the LPC USB driver pick the IN and OUT endpoints by itself.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c35e21a86ab32bc91eb10a60c071b702fc0f963
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 7 19:27:17 2013 -0700

    altos: Finish off LPC USB register definitions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 918342016705303baa1630c62c290aaf2dcc2801
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 25 20:38:32 2013 -0700

    altos/lpc: Start adding USB register defines
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91d201abcbe9373360919406427b7e4fb9e1b42e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 17:10:24 2013 -0500

    altos/lpc: Start adding USB register definitions
    
    Just the bare struct, no defines yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9bf67798b134ad796c2f4bc9240ee450722148ec
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 00:40:38 2013 -0500

    altos/lpc: Take advantage of USART TX fifo
    
    The USART has a 16-byte TX fifo; keep rough track of how full it is to
    avoid waiting for an interrupt after every TX byte.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e8f6ba8b779cd9635f82d6da5f113715c3ee4c7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 00:20:55 2013 -0500

    altos/lpc: Get USART running
    
    Adds a simple demo thread that spews data to the serial port
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9d0eb3f3154f98abb0c8952d7171f3e7d3de9b2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 18 16:15:52 2013 -0500

    altos/lpc: Get 100Hz timer running
    
    Use systick, which is built into the ARM core
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 04b243e6ef212f54ed284cfbde6d5abb637bf60e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 18 15:55:26 2013 -0500

    lpcxpresso: Add ao_demo.c
    
    Kinda necessary for the demo to build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bcc65597d3d20f1d58df784100af766cee5f0f20
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 18 15:54:13 2013 -0500

    lpc: Initial lpcxpresso bits
    
    This gets the LPC11U14 clock set to the PLL and blinks the LED.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6735a391c2a1e3be01ac9e68b44ec0974592c11c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 17 03:34:50 2013 -0700

    libaltos: use PurgeComm in Windows altos_close to abort in-progress ops
    
    Instead of manually signalling the related events, use PurgeComm which
    can then abort the operations itself. Also make sure all of the
    relevant handles are set to INVALID before closing them to avoid race conditions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd8d061d0f63158b5b03814d77cb76fdf5a0abad
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 17 03:27:20 2013 -0700

    libaltos: Build the linux library targets when doing a 'fat' build
    
    These are necessary for the fat release, so make sure they're built then.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a19805a6b079450b5afd5fa2334cede8495ae4a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 17 03:21:08 2013 -0700

    altos/cc1111: Hack on USB driver to make Windows happy
    
    The Windows modem driver is quite chatty at startup time, getting and
    setting the comm parameters each time the device is opened. Sometimes,
    when setting the parameters, the cc1111 would STALL EP0.
    
    Most of the time, Windows would happily pass this as an error back to
    AltosUI which would then re-try the open (and succeed, most of the
    time).
    
    Sometimes, Windows would stall for 30 seconds before passing the error
    back. This made the whole UI freeze, and I suspect most people assumed
    our app had died.
    
    A bit of analysis with the beagle USB sniffer and I discovered the
    STALL settings, but there wasn't any correlation between the data on
    the wire and when the STALL would be generated.
    
    So, I found a couple of other cc1111 USB stacks on the net and just
    looked to see how our driver differed. There wasn't anything clearly
    related, but there were a list of small differences:
    
     1) Other drivers didn't bother waiting for the hardware to
        ack the USBADDR setting; doing it this way means we can set
        the address *before* acking the setup packet. It'll get
        set eventually, at which point the device will start responding to
        packets again.
    
        Easy to fix, and saves a bit of code space too.
    
     2) The other drivers set the STALL bit for setup packets which aren't
        understood. This shouldn't have any effect on 'good' systems as
        those shouldn't ever be generating bogus setup packets anyways.
    
        The driver already handled the STALL state in the interrupt
        handler, the only requirement was to figure out when to explicitly
        set the STALL bit.
    
        That required moving the state updating code from the start of the
        ep0 setup handling to the end, after the setup packet had been
        examined and data queued in or out as appropriate.
    
     3) Our driver explicitly queued an IN packet for any setup request
        that wasn't waiting for an OUT pack. This appears to tie in with
        the USBADDR change above as before I made that change, this change
        caused the driver to fail to respond to most setup packets.
    
        This was simple once the above change was made, just move the
        generation of the IN packet inside the code that switched to the
        IN state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ef0136c27e8f47a1eb38f9cbcd2c61288732d78
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 15 15:32:59 2013 -0700

    altos: Generate unmodulated carrier for CC1120 test mode
    
    This sets the deviation to 0, enables the preamble and turns on the
    transmitter. It will sit there happily sending a bare carrier forever
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1931e028bebc3cd8df9392e30eb0e888d0799768
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 22:29:06 2013 -0700

    altos: Move MS5607 info from 'v' to 'c s'
    
    Makes more sense there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69b9f613ad36b8039f223ed30f8c75913916d82c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 22:19:07 2013 -0700

    altos: Remove some MMA655x debugging printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0571531066918fdefe9447f3b4192d0c6c477afa
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 10:48:24 2013 -0700

    altos: Grab SPI mutex until MPU6000 I2C mode is disabled
    
    If other drivers use the SPI bus, the MPU6000 gets confused as its
    sitting on the bus looking for I2C messages. Just grab the mutex
    before the OS is running and hold onto it until the MPU6000 has been initialized.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9beacd77b3e8106e036e50a67312dfee414fbc51
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 09:01:49 2013 -0700

    altos: Initialize MPU6000 CS pin for SPI mode
    
    Without this, we can't talk to the chip very well
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d553230903ddd0ec522c07be0df975b38ef23d3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 09:56:16 2013 -0700

    altos: Fix telemega v0.3 igniter order (drogue/main moved). Label ADC dump
    
    telemega moves the igniters around so that E/F are now drogue/main.
    Add custom labels for ADC values to make parsing possible
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4e4eec827d61a05fda52ddb68b55f17b6028d5e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 09:25:08 2013 -0700

    altos: gps serial routines are called ao_gps_*, not ao_ublox_*
    
    This caused the u-blox driver to use serial port 1 instead of the
    project-specified serial port.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 461215eea72ff9d64748304e76b08da37ee3dfe9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 09:21:54 2013 -0700

    altos: Give u-blox 3 seconds after boot before we bug it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5e9193f6375be27e5f7a0321fd34b6acfe81247f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 09:12:29 2013 -0700

    altos: Add 'g' command to ublox GPS code.
    
    Take the gps_dump function from ao_gps_skytraq.c and move it to a new
    file so it can be shared with the u-blox driver. That affects every
    skytraq and u-blox user as they need to include the new file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdad289a0803babecd30cbc0a95be99c5caadeb5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 15 01:24:56 2013 -0700

    altos: Add flash-loader for telescience-v0.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 116d8570766fbd3ef529111171935637a2e466af
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 08:51:22 2013 -0700

    altos: Set u-blox navigation settings
    
    Airborne mode, < 4g (as good as it gets)
    Only use 3D fixes (2D isn't very useful)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb0fb6f4beab484e7fe55b39d18c1f19778f1211
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 08:35:24 2013 -0700

    altos: Use symbolic names for ublox packet id
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ccfd2d2e4b84e72e5502cb72a7da6372b5e2b47
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 01:06:20 2013 -0700

    altosui: Generate useful KML files from TeleGPS logs
    
    Use GPS altitude when baro altitude is not present.
    Don't require flight number.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bdea4c88318a41ade3d3b6b2cbfc097ae3e4f3be
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 00:38:34 2013 -0700

    altosui: Use GPS alt + baro height for KML altitude
    
    GPS altitude is generally more absolutely correct than baro altitude,
    so use that as the nominal pad altitude when generating a KML
    file. This results in a KML file that has the flight trace start and
    end closer to the ground, which is always nice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43f94e923a6a87520edcbb8fb4829e6ddf708908
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 14 00:24:53 2013 -0700

    altoslib: Use sequence numbers to track GPS updates to AltosRecord
    
    State objects now record what GPS sequence ID they have to know when
    the GPS data has been updated. Record objects bump the GPS sequence
    each time new GPS data is recorded. This way, record objects aren't
    modified as they're iterated over to generate the list of state
    objects which makes it possible to iterate multiple times and get the
    same resulting set of states.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c88aa32b979f379e3cf316dcb651e264c32a5283
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:59:26 2013 -0700

    altos/test: ao_gps_test_ublox uses ao_gps_blox.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61f5183fb6aff63c1133011b5625814ee56e96da
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:58:18 2013 -0700

    altos: Struct used for u-blox testing had lat/lon swapped
    
    The structs in ao_gps_ublox.h are used only by the test framework, but
    it's useful to have that look right anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a730dd7a78b5ae428bcfe809257dabedc4338f5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:33:12 2013 -0700

    altos: Switch TeleMega v0.3 to u-blox
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2f0dcc73df612d10ed12d364fe661ccd831f037
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:32:25 2013 -0700

    altos: Provide a define for the number of sat infos in a telem packet
    
    12 fit, but it's best to use a symbolic constant
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50457f9983ec0a432f1050464382749436e3da94
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:31:31 2013 -0700

    altos: Add U-Blox GPS driver
    
    Uses binary mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 125ff0b7c74af4db98a81439ee9f1b92fe8b8833
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:29:22 2013 -0700

    altos: Don't bother fixing telelco-v0.1, just disable it
    
    Lots of stuff to do to make this old project build; just disable it
    instead of fixing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 672edb20434248038ef5fbb87f2c0984bd5ad513
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:28:27 2013 -0700

    altosuilib: Mistake in the MegaDongle listing -- was set to TeleMega
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80a6b0ea5c36c307a8edc79ad10ef7a8ff3d480e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 13 22:27:00 2013 -0700

    altoslib: Correct hexfile address ranges
    
    Stop trying to use sentinal values for addresses and just keep a
    boolean tracking whether they've been initialized. Avoids precision
    errors in the variables.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9bd717e71d69338b1af521b37e8bd975e503398e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 10 19:21:18 2013 -0700

    altosui: Wait for valid callsign/flight when graphing
    
    Wait for the data record to indicate that the flight value is valid
    before setting the graph callsign/flight/serial data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 106d212ff5920c39d95751ef6249dc141970412c
Merge: ecb1285 09d5d6f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 9 21:06:52 2013 -0700

    Merge branch 'master-fixes' into stm-flash-fixes

commit 09d5d6f546ccef2bfd4941e590f047485bb73d76
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 9 21:06:23 2013 -0700

    micropeak: Use new 'last logdir' preference for MicroPeak save/load dialogs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95a3a089f9c97684918937eecd94dcac77c47696
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 9 21:04:52 2013 -0700

    Information from configure about android build was misprinted
    
    A typo in the script caused it to print either 'yes' or ''
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17eada6e586731defa9fd75316670c2b2b1601ee
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 9 21:04:11 2013 -0700

    altoslib: Add non-persistent 'last logdir' preference
    
    This is used to record the last directory for reading or writing log
    files so that the UI can pop back to the same place next time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 271e8adbc9549c7b3b4d0ec14e4edb1a6ab715d1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 9 21:03:38 2013 -0700

    Add altosdroid notebook entry for imperial units
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ecb128579e7576fc27c8ca93708f316b9ac91630
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:06:24 2013 -0700

    altos: Wait after configuring boot pin before testing it
    
    Clearly the pin isn't quite ready just after it's been configured, so
    hang around for a while (100 nops) to let things setting down before
    testing the value of the pin. Makes booting a lot more reliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a90eec4b8ee4a35711aa74c13b3f30d12c0fe08
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 15:33:04 2013 -0700

    altos/stm: Create per-product flash loaders
    
    Split the flash loader prototype into pieces so that each product can
    build a custom flash loader with very little code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b131c5ac59bbd339a724892586023a43f97c7f90
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:37:15 2013 -0700

    altos: Add ao_boot_chain to telemega v0.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1695f6af46ea647119d651fc09c97d604d08c736
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:26:11 2013 -0700

    ao-tools/ao-stmload: Add --verbose flag
    
    This dumps out the serial communication so you can see where things go wrong.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6d6df03826083a244715b88a30ad681f17b4510
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:25:36 2013 -0700

    altos: Remove stdio from stm-flash
    
    This saves enough memory to fit in under 4kB
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a2e0676f476b0e2bdd5102315ebd5904b57f384a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:24:08 2013 -0700

    altos: Get rodata into flash, make sure sections are aligned
    
    .rodata* needs to be in flash; otherwise strings get left in ram.
    Failing to align sections makes the initialized data get dumped into
    the wrong place in memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e092b383d55bcf9e2a230ccfe85052adb18b254
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:23:14 2013 -0700

    altos: Make stm-bringup build again
    
    stm requires AO_BOOT_LOADER_BASE now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b1797312b34ba2b8121f82605f8d2c419167737
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:20:47 2013 -0700

    altos: Run self loader when application sets boot addr to 0
    
    This causes the flash loader startup code to fall into the loader when
    the application sets the boot address to zero.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2412e867138635d79ea0fa8d43efc0a6aa19784
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:19:13 2013 -0700

    altos: Allow STM usb driver to be used without stdio
    
    This lets the self flashing loader be linked without any of the stdio
    code, which saves a bunch of memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afad5ae893a48785f3b50ff4125dc78648343a2d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:08:35 2013 -0600

    altos/stm-flash: Check target flash address against AO_BOOT_APPLICATION_BASE
    
    Allows that value to change
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9ae987073f90402821120dbe962fceb4fc9f5435
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:59:12 2013 -0500

    ao-tools/ao-stmload: application base moved to 0x08001000
    
    And, use a symbolic name so it can be easily moved in the future
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9029722708b54826aa9374555470cb40922c5da5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:56:00 2013 -0500

    ao-tools: reboot to loader now uses 'X' instead of 'L'
    
    'L' is used by lots of other commands; switch to 'X' which is free.
    
    Sigh. Someday we'll have words for commands instead of just letters
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dfc268e0021e1cd3045f73339a749d292a6a6300
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:35:57 2013 -0500

    altos: Use flash loader on all STM products
    
    Includes the boot chain stuff
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ded61d59888c79ef1f94e664b5fb770841a801a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:33:33 2013 -0500

    altos/stm: Provide another 4kB of flash space for apps
    
    With the flash loader now < 4kB, we can use the spare 4kB for applications
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cd015b8b6b02bd8e0ce28f248426ae75c242b53
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:32:18 2013 -0500

    altos/stm: Shrink stm flash loader to < 4kB
    
    Saves 4kB of flash space for applications.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02681adbc5919bd3713788da352aa36ace619ef4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:30:31 2013 -0500

    altos/stm: Allow core timer to be excluded from build
    
    This removes all of the support for the base 100Hz timer from the
    system, saving space when not needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a453e2245996854e722346789f972fd088e33ba8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:29:56 2013 -0500

    altos/stm: Don't define task macros when not tasking
    
    The necessary data structures aren't defined in this case.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d0f4bc23eae4f1e085bfb853c995f1fb6b8b594
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:27:52 2013 -0500

    altos: Eliminate stdio looping when system has a single stdio source
    
    No need to loop if there's only one
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f3bbb11880f45284f1f094990ffa32a66bf4560
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:24:48 2013 -0500

    altos: Move ao_notask to core
    
    The STM flash loader wants to be taskless too, share this very simple
    implementation of sleep/wakeup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21356aec543dd85426a52469426351ce006a17dd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 16:16:55 2013 -0700

    ao-tools/ao-stmload: Remove IRC dregs in source code
    
    oops.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9df4e874b2785aec4aecce2f767543ee9f638b4f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 16:15:21 2013 -0700

    altosui/altoslib: Move more flashing code from altosui to altoslib
    
    Required a bit of refactoring to eliminate swing types from the
    flashing code, but nothing major.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09e0c304b420a12fa1616005db946523c6e5bef1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 16:01:08 2013 -0700

    altosui & altoslib: Move a pile of debug/programming bits to altoslib
    
    Prepare to create external Java utilities to flash devices
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9acd488c5f945511f813d84c3c6f69846d4601e8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:35:15 2013 -0700

    altosui: Support 32-bit ihx files
    
    This just borrows the same 32-bit ihx parsing changes from ao-tools.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9ba2d17b979410acfa41f9954674757f7f321fc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:33:31 2013 -0700

    ao-tools/ao-stmload: Fix ELF, add IHX, add self-flashing
    
    This splits loading into ELF and IHX paths, and splits flashing into
    stlink and self-flashing paths.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f30b1f14dbab6e6ea94177e459c80732e31e433
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:30:24 2013 -0700

    ao-tools/lib: Add loading support for 32-bit ihx files
    
    These place the upper 16 bits of the address in a special record. That
    requires handling records in file order, so don't sort them in address
    order anymore, instead find the bounds of the loaded data by scanning
    them all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d98fc5d3f106f3063608a2e5c69d9359061437a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:27:42 2013 -0700

    altos/stm: Add comments to the .ld files explaining how the romconfig stuff works
    
    Would be nice to be able to explicitly define addresses for the
    romconfig variables, but I can't figure out how to make that
    work. Instead, just explicitly load the files in teh right order to
    make things land in the right places.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab1cbc0f51ddf897a3a7a768862d9dfe26a6c14d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:26:26 2013 -0700

    altos/stm: Add .elf to .ihx rule
    
    Uses objcopy -O ihex to extract the initialized bits from an elf file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9362d400d06aa3badfc826d8edbd7c55406b4f7d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:24:42 2013 -0700

    altos: Switch ao_stm_flash to read/write binary blocks
    
    Change from development testing code to something that actually reads
    and writes data from the USB link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a3f668e71751608ea2e38519003446bc6ceb348f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:21:58 2013 -0700

    altos: Create ihx version of stm-demo
    
    Both ao-stmload and the eventual java loader will support ihx files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5db4d5e5b1272b161102e889e65b9c7bc7928352
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:23:03 2013 -0700

    altos: Add erase command to stm-flash app. Validate addresses.
    
    This also leaves the code writing fixed values and printing read data
    in ascii instead of binary. Useful for debugging, will want changing
    for the product.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac6b4fca0970faa0a537a813242585693b839469
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:21:27 2013 -0700

    altos: Fix STM flash programming
    
    Wait for flash to go non-busy after writing or erasing a page and
    before jumping back out of the RAM code.
    
    Export a separate 'erase' operation for testing.
    
    Re-lock flash after every operation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35ef1f17e3efaa6d586ab7bb301f8133d52023b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:18:55 2013 -0700

    altos: Validate boot chain start address
    
    If the first block of boot memory has been smashed, and the start
    address is bogus, don't bother trying to jump to the
    application. This makes the system more resiliant to flash failures,
    presuming the loader erases the first block, programs the other blocks
    and then finally comes back to program the first block.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db7f17980c303e442f88c8a4168351dbc2c0b1a0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:17:04 2013 -0700

    altos: Mark .boot section as (NOLOAD)
    
    For some reason, the silly linker marks things in section .boot as
    data rather than bss, so they'd end up initialized by default. Force
    them to be NOLOAD so they preserve values across reboot so that boot
    chaining works properly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit efc0898d824ebd0abe0b088ed9a8b40c34623ab7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:15:35 2013 -0700

    altos: Fix up stm-flash output file name. Use discovery LED pins
    
    Include the AltOS version in the file name, just like any other AltOS
    program.
    
    Switch the LEDs to the discovery board as we're using
    that. Eventually, we'll stop using LEDs entirely.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4bc55ee8fabc9f4c997c2a515d74baada590c93e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 11 18:14:28 2013 -0700

    altos: Add actual flashing functions to stm-flash app
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1a43ce313c85cb7f8f16f7f0647d9d4320ba692
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 11 13:21:04 2013 -0700

    altos: Clean up boot loader support
    
    Split out code into separate files.
    Add support for getting back to boot loader from application.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56a7cbbf51f5c9ebbfe17d1cc30ed807572af3cc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 11 00:01:52 2013 -0700

    altos: Add program flash function
    
    And get it loaded to RAM so it can execute correctly.
    
    Nothing calls it yet...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9c35b100c3fcae661501d2bf89eedc7fceb2e1c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 10 21:02:59 2013 -0700

    altos: Make stm-flash capable of switching to application
    
    This shrinks the base OS load down a bit as well so that stm-flash
    fits comfortably in the first 8kB of memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a6887032b4d217bca5236ea15389218f10d69545
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 00:18:14 2013 -0800

    Add STM self-flashing loader
    
    This allows the real application to get loaded at 0x2000 and jumps to
    that at startup time if the boot pin is set appropriately
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 887209b61ac3012d0fd2206cf1016c44f59cb432
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 7 19:29:06 2013 -0700

    altos: Sanity check barometer before going to pad mode
    
    Make sure the barometer is reporting some sensible value before
    letting TM try to fly the rocket.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 802ca114ca064a9dd557a82e992653b145f8e660
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 7 19:28:07 2013 -0700

    altos: Elide M25 debug output from storage info command
    
    This is just chip-specific info that no UI actually needs. It takes a
    bunch of ROM to write it though, making TeleMetrum not have much space left.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3876b5bfad383119339aea51e2cf301012a1f991
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 6 16:08:52 2013 -0700

    altos: Set APRS deviation to 3kHz
    
    I finally found a bunch of references to APRS on the net and they all
    appear to assume a 3kHz deviation. Let's see if this works better with
    Yaesu radios.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4458b5a3cd3f88188c820cd0763f4e1d99fff311
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 3 01:07:06 2013 -0700

    altos/test: Fix warning in ao_aprs_test
    
    Was not forward-declaring ao_radio_send_aprs, causing a warning
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 091582c446319fe4a79154153ece5372b2faec83
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 1 08:58:17 2013 -0700

    altos: Use SYSTICK on STM32L
    
    It's probably more power efficient than using one of the timers, and
    it's certainly easier to configure.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b7b0ddfddee3f8e21f21d67cd9f522fa50777265
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 1 08:56:57 2013 -0700

    altos: Mark GPS telemetry packets with GPS time stamp
    
    This provides a reasonable accurate indication of the system time when
    the GPS location data was received, and also makes sure GPS packets
    get some timestamp when no other telemetry is being transmitted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a6a5d0afa646564a9277ad3bd80c4225247a27b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 20:25:20 2013 -0700

    altoslib: Update GPS state even if new state is unlocked
    
    Otherwise, we can't see fine GPS details while GPS is unlocked, and
    that's annoying
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e9b405e939136d25d937334d1f14f06c7d6127b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 19:04:26 2013 -0700

    altos: Use separate exception stack on STM32L
    
    This reserves 512 bytes of memory for a stack, then makes sure that
    exceptions continue to use that stack while processes use the per-task
    stack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac72d1c298fc553808a8e04a65482d4990f177d7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 18:57:53 2013 -0700

    altos: Reduce stack usage of FAT driver and logger
    
    Move some large stack arrays to static storage.
    Also eliminates some printf error messages which don't seem that
    useful except for debugging.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df70e3e87874d80516c6d43cfe745d511d54f206
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 00:12:44 2013 -0700

    altos: Open up the DVGA gain to use all of the available settings
    
    We usually work in RF quiet areas; let the AGC hardware try all of the
    available gain settings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e18910659e56ea52ee493d8cc4bce4b219d5bb75
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 00:06:08 2013 -0700

    altos: Stop using telelco v0.2 top LEDS for radio TX/RX
    
    The top LEDs are now used for signal strength; a red LED indicates
    failed communcations, so we don't need to blink stuff and annoy the user.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8744fd5d541955b0920c7d8e2696039cdcfdf1dc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 30 00:05:33 2013 -0700

    altos: Make cc1120 driver return false on recv timeout
    
    Was returning an uninitialized value, which was often not zero
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4fe42801f42f2fc2688555f4585dbebc28bb2d61
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 29 23:53:43 2013 -0700

    altos: Reconfigure CC1120 receiver to match our usage
    
    Open up the AGC to the full range.
    Set the AGC ref based on our receive BW (100kHz).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb0e1720be2aa4fb6729ceada09c18947bfee2bc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 29 23:20:25 2013 -0700

    altos: Compute "real" RSSI value in radio code as needed
    
    Instead of dragging around the weird CC1111 RSSI values, just compute
    a dBm value in a signed 8-bit integer, ao_radio_rssi. Use that
    everywhere we need RSSI internally. We leave the weird CC1111 value in
    the packet reply as that's what the host expects.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 949700f276b80b4eb28f15b5559714f430f227f1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 29 20:24:16 2013 -0700

    altosdroid: Add Notebook entry for reloading telem data option
    
    This lets the user recover the rocket flight data after stopping the
    application but before recovering the rocket.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9f2e6471c11a1f9feb183e05f24c53968098bdb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:30:29 2013 -0700

    altos: More .gitignore bits
    
    stm-demo
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab99d71c4ba97a28ee463170d10712b2de94dc50
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:27:32 2013 -0700

    altos: Add a bunch of .gitignore files
    
    Ignore ao_product.h and built binaries
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85d32468210c9989ae52bd29f883c4380af43961
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:25:37 2013 -0700

    altos: Add ublox checksum app to generate ublox config lines
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 257500776935b5950cd7c49f9c799b3174d9232d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:22:41 2013 -0700

    altos: Add .gitignore to kalman test dir

commit 5a77a62bce5e5ab5998f24588839f3c8a1cc6221
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:21:17 2013 -0700

    altos: Build test framework for kalman filter
    
    This has some known flight data and generates kalman filter
    information for them to test
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24a03d0c64fc0b56ad5ccfd6588aa47690ea2a65
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:15:28 2013 -0700

    altos: Ignore ao_aes_test binary
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2c697af790d53c68154facc19e4096aed5de798
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:14:50 2013 -0700

    altos/test: Add telemega plot helper script
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 086217bbde6d549cad61bdde728c75d29023d1c6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:11:27 2013 -0700

    altos: Add nickle micropeak log parsing code
    
    I think this was just some debugging stuff, but it doesn't seem useless
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d46d26d714cc172b5ea493478d9dd3cad323152
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:09:54 2013 -0700

    altos: Add telelco-v0.2 project
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38d4110e59a44687d8a4743b8cd04cbf2761c9d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:08:03 2013 -0700

    altos: Allow LCD segments to not be multiplexed across digits
    
    This allows each LCD segment to be individually configured as to which
    COM and which SEG drives it, permitting maximum flexibility in wiring.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f09b2fc7fcfb1b3dcb1a46a8b9856092dd59866b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:05:18 2013 -0700

    altos: Clear any broken cc1120 TX fifo bits before transmitting
    
    This just goes and clears the transmitter before using it, just in
    case it got wedged somehow. It also clears the bits while waiting for
    the radio to go idle, otherwise it'd never make it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b878ca38045b1bee6ea4d649298727ac3fa197c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:03:57 2013 -0700

    altos: Make cc1120 driver wait for TX finished
    
    Otherwise, we may come in and try to use the radio again too quickly,
    causing it to go into a TX fifo error state.
    
    This change watches the MARC status until the transmitter is
    explicitly marked as finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f677a83348a9568679240ee9d731ab454f289831
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 23:02:12 2013 -0700

    altos: Provide timeout value to ao_radio_recv
    
    Instead of using ao_alarm around calls to ao_radio_recv, provide an
    explicit timeout value as needed by radio functions with more
    complicated system interaction than the cc1111. The timeout is 8 bits
    of clock ticks.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0488cd9cffc837e99490a0761216bbc5847ff400
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 28 22:52:23 2013 -0700

    altos: Build test framework for AES code
    
    Simple CBC-CMAC test with a constant 0 key and constant 0 data for now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3edbaa90fb7cb31fa0bd835a7c6c8930fd6dfeb6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 23:23:33 2013 -0700

    altos: Make telemega-v0.3 binary use the right name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 168188f6650dc9a777d57f9c7a8ff1be957bc892
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 20:23:48 2013 -0500

    altos/stm: Remove USB EP0 task
    
    Handl EP0 actions from interrupt handler. This allows USB to be used
    in a taskless environment, like the STM flash loader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b6128d634c49e1790675ae8111e970b1af1f141
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:29:32 2013 -0700

    ao-tools/lib: Deal with binary USB data in debugging output
    
    Dump non-ascii characters in hex format.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3cbec0292d5167bce5c23eeea95f7a2d13bccc79
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:20:09 2013 -0700

    altos/stm: Always declare all romconfig variables
    
    I haven't figured out how to assign addresses for specific initialized
    variables, so we'll just have to always declare all of them and make
    sure that we add new ones at the end.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4551be8b03a795ece94fd303a1f556c63c0a0096
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:14:12 2013 -0700

    altos: Call ao_task_init before initializing any drivers
    
    When using task queues, the sleep queues must be initialized before
    any invocation of ao_wakeup or the OS will crash. Just make sure
    ao_task_init is always invoked early in the task process to get that done.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6dea353e732b6e19586c844796bc3bb848cc92f8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 10 21:05:34 2013 -0700

    altos: Expose ao_put_string function
    
    This works like puts, except it doesn't add a trailing newline.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1629acba4a63baae2c687ed56a17d02faf45f5e5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 2 23:14:02 2013 -0700

    Allow build without SDCC
    
    The AltOS directory handles not building the cc1111 apps when sdcc is
    missing already, so don't require it, just whinge if it's missing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7cce6c205e4595894e033ab8f0acc8064bf9f561
Merge: 75f8229 5591509
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 29 17:24:43 2013 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 75f8229d4a8d7c9a28ea3d88fda72af0d1f1ccc2
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 29 17:11:48 2013 -0600

    add libssl-dev as a build dep since it's used in FAT filesystem test code

commit f2a8ac537d254cc08c0be9c16bf2d5cc03fd04fc
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 29 17:06:57 2013 -0600

    point to pkgconfig content in /opt/cortex so stlink stuff works

commit 55915098f2668e3a71568d51a9888dc4bdf40992
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 16:07:34 2013 -0700

    altosdroid: Add wish for persistent TBT and freq settings
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38a680e1407a80ff8ad19e1a90dd4e87b22fe922
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:37:36 2013 -0700

    altos: All STM ADC users need to declare HAS_ADC_TEMP
    
    Otherwise we can't configure the ADC unit correctly at boot time
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2717f14567c1fe1bb061024332c8022ef0e06049
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 27 00:36:11 2013 -0700

    altos: Build telemega-v0.3 by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cef4e3ee95037050ae859fb2fdc0a57373764bd8
Merge: fefc021 f3ee7de
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 25 22:22:50 2013 -0700

    Merge remote-tracking branch 'origin/master'

commit fefc021045089ffd00d03e4c4e6cf42a13692828
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 25 22:21:26 2013 -0700

    altos: Add TeleMega v0.3 support
    
    Includes adding SPI support to the MPU6000 driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38206dd71e70565ded505a1e86257cd49b10bf9b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 25 21:27:03 2013 -0700

    altos: Add MR25 everspin MRAM driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ed83e34d1163c7fae0a205528c60dc83973082a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 25 21:25:39 2013 -0700

    altos: Make SD card driver compile without radio support
    
    The SD card driver blocks the radio when trying to access the card as
    that operation appears very sensitive to RFI. This fix makes the
    driver work when there *isn't* a radio driver in the same device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3ee7deb6b2fbae7e3c66fe0af0cba36378793f1
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 25 00:26:39 2013 -0600

    document need for an ARM Cortex toolchain in /opt/cortex, point to build docs

commit 90b0db1ae53182c94bf12d661446fc369d916366
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 15:53:04 2013 -0500

    Re-add telemega outline pictures
    
    after the great renaming
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9a6c4f71e02bb0073dcd030de735904494da81f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 15:15:03 2013 -0500

    altos: Re-generate TeleMega bits
    
    Lost in the great megametrum rename
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa7eac32adf4c2cdf441991d02411758f2682d1e
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 22 13:00:26 2013 -0600

    name change from MegaMetrum to TeleMega

commit 8c05f608c8f103649c1e5ec0d5742621e233af78
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 22 11:06:36 2013 -0500

    Move cortex toolchain to /opt/cortex
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f92ab336a258e8b1ddf58de33d6883251b9532d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 21 21:04:50 2013 -0500

    altosdroid: Add request for sat images to AltosDroid Notebook
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 045da152fae82712b937bc81f02c9531e042cbe0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 21 20:53:14 2013 -0500

    altosdroid: Add a few more Notebook entries
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27afe30176051fca816d85c1be265ac663ef851c
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Apr 22 13:50:35 2013 +1200

    altosdroid: Bump APK version, and re-upload.
    
    Didn't re-build altoslib for the previous APK!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 759376cd0aac61c5afce31aed27ef98aba791173
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Apr 22 13:50:13 2013 +1200

    altos: update .gitignore files
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b4ffb3ed36fc8696603616bf5f31b07fb3829614
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 20 23:55:06 2013 -0600

    document my snazzy new 4-pin to MM v0.1 debug cable

commit 45d638634e389bab61b0ee792420609eb8a9ad97
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 22:30:23 2013 -0500

    altosdroid: Add Notebook to track feature requests
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e28d3541b8da31ebef5a199baf8f544d238298e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 22:16:28 2013 -0500

    libaltos: Delay after opening bluetooth device on linux
    
    Writes immediately after the open disappear sometimes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02a564bbc3a23b4f90685e8b29083ddb3e4b3563
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 22:05:01 2013 -0500

    libaltos: Try Bluetooth open 5 times on EBUSY
    
    After closing Bluetooth, it can take a second before the device is up
    for another connection. Hang around retrying a few times.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6348186397dbef6da912586cea58d6663c511501
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 21:40:47 2013 -0500

    doc: Start filling in details about Altos Droid flight monitoring
    
    This is almost all identical to AltosUI; I think we'll want to share
    the two sections.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d49c16c6c33264952854b9f24bc737d92036449
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 17:38:15 2013 -0500

    doc: Add a bunch of Altos Droid material to the docs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6055ee0b7fb99f1b41ece8ba912bdd201ea35b1b
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:52:56 2013 +1200

    altosdroid: Release v1.2, push to play store.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 49caac78786014d443d9c05f47b5eb3070ec9bd3
Merge: 5b7bbf1 cbf38c5
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:51:07 2013 +1200

    Merge branch 'altosdroid'

commit cbf38c557a2046b6d6af3a9aebc0cef8e0dc5f11
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:46:41 2013 +1200

    altosdroid: Make the service class implement locationlistener
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c5b31a14e1ceeb9a33e0016f345832344d24ced7
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:44:07 2013 +1200

    altosdroid: fix up 'send last' code.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit cc674d8f991a3a055236ad8b51fecd99080540e1
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:41:50 2013 +1200

    altosdroid: check for mAltosVoice being null.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 7701e142f9e3a81c536c546c9a0abfb3ba709abc
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:41:28 2013 +1200

    altosdroid: set tab height based on screen density.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit a9e02e32cb10e5b5f17cd555bb28fdc205ac3612
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:40:58 2013 +1200

    altosdroid: Add filters for TeleBT bluetooth devices.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b0d6e2000d1b48859f5a276a5af254cc1a6cc9ad
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:40:33 2013 +1200

    altosdroid: incorrect property syntax in pad xml
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d1ca6b5805cb5e934e013463448b75dd4a3c864f
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Apr 21 14:40:03 2013 +1200

    altosdroid: whitespace and import tidyup
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ecfc8a08147cfd179b341475333d68a39c978f0f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 20 17:16:50 2013 -0500

    altosdroid: Update distance/bearing on map tab
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b7bbf183e558330d27702aa1bebf205f0e094aa
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 20 12:22:38 2013 -0600

    improve text in telebt turn-on script

commit ff332e640b27c6be37dabef58ebac350ac2347b2
Merge: b300060 87d6ed2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 17 10:41:05 2013 -0700

    Merge branch 'master' into droid-gps

commit b3000609e4010ff4d29debe72ea1866e775af539
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 17 10:38:54 2013 -0700

    altosdroid: Fix integer formatting in tabs
    
    Was trying to use AltosDroid.number for integers, which didn't work as
    it expected doubles.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87d6ed24f3650981ae1ff9bfdb0298d2c01e7575
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 16 17:47:17 2013 -0700

    altosui: Disable main deploy setting for TeleGPS
    
    Just like all of the other flight computer settings, disable the main
    deploy altitude configuration for TeleGPS.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a03aaaca60ccb4b44595e5e1c1047d07d8b6d60f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 16 17:33:42 2013 -0700

    altosui: Handle broken network in map tile loading
    
    Handle missing pngfiles in AltosSetMapCache by checking ImageIO.read
    for null return.
    
    Do incremental map tile downloading asynchronously so that the UI
    doesn't lock up when the network is slow
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2640c09c76ce32e471dcf6df83095d146bb39a2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 16 14:22:23 2013 -0700

    altosdroid: Check for missing values
    
    When displaying numbers, check for MISSING values and display nothing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d5a557004c00d1ae25da04dc63c78b816562a236
Merge: 6592a5b 5b04176
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 15 23:26:33 2013 -0700

    Merge branch 'master' into droid-gps

commit 5b041769dc926f0aa18072f46abca60b11ede44b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 15 23:25:55 2013 -0700

    altosui: remove debug message from AltosFlightUI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6592a5be127a9c95d3b2e7d5aa6ffba71c6748b9
Merge: c6f85cb eba3aa9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 15 23:19:44 2013 -0700

    Merge branch 'master' into droid-gps

commit eba3aa949decacd5592472a3cda920aa6a06d96f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 15 23:14:22 2013 -0700

    altoslib: Check for null state.gps before accessing it in eeprom records
    
    Used to be we'd set state.gps to garbage before seeing the first GPS
    record; now we leave it null, which will cause crashes for code that
    doesn't expect it. The code for reading and replaying eeprom data was
    not checking and was nicely crashing as a result.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6f85cb149dff8732104521cb62b355e8a0d7148
Merge: 3cd8ff1 58dd4b8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 14 20:02:10 2013 -0700

    Merge branch 'master' into droid-gps

commit 58dd4b88fe738e005a13dfd69651853ea7f79205
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 14 14:54:52 2013 -0700

    micropeak: Oops. Lost the call to actually start downloading data
    
    Lost when adding the 'help' text somehow; presumably a debugging issue.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3cd8ff18a7546c1e251747ba26240cb130003ef1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 12:13:18 2013 -0700

    altosdroid: Update UI even if no telem has been received. Center map.
    
    This allows the receiver location to be displayed even when telemetry
    is not.
    
    Center the map on the first valid location, either receiver or
    rocket. Update center if a significantly more precise location is received.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 192bc28fbe2a8613d0b42e4fb3f7674a1a50abc7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 11:45:23 2013 -0700

    altosdroid: Get rid of a couple of startup messages
    
    These are just annoying
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4b6fc3238ad9911fd40ef25accf82a401cb190f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 11:39:14 2013 -0700

    altosdroid: Show our position in the map tab. Squeeze to fit phones
    
    Shrink everything to fit on phones, then add phone location to the map tab
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f7015afcca7c6042365d2124d3a5b7219e8e588
Merge: 5077f3a 778daf0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 10:51:04 2013 -0700

    Merge branch 'master' into droid-gps

commit 5077f3ad1967a33712e9ff411e3b2a0b4e1a5c4a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 10:50:26 2013 -0700

    altosdroid: Shrink text so it fits on my phone
    
    Yes, this is a hack; will try to figure out how to make it resizeable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 778daf0ccbd8a073da33497e33c29400d0ecc464
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 13 10:39:14 2013 -0700

    Windows: Add all of the AltusMetrum USB IDs to telemetrum.inf
    
    This should make Windows load the driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25c01719f17be8da73a859867c14df0fc29b5441
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 11 22:16:03 2013 -0700

    libaltos: Retry Windows serial port open five times
    
    Maybe this helps?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 679401fff981b675dd5a188c64e8940254588800
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 03:09:16 2013 -0700

    altos: Make sure the packet format is set reasonably for radio test
    
    Dunno if this matters, but it might as well be set reasonably
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1430c48cfef1ef21831205f4fadd26ca6c7f5dbe
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 00:55:59 2013 -0700

    altoslib: Remove spurious debug message
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdbf8053658c71a657005af68202023d0b4af1fe
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 02:42:37 2013 -0700

    altos: Don't include bufio debug commands by default
    
    We shouldn't need these
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c54bd59780275ece87eafb8143cf0637b35e794c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 02:35:15 2013 -0700

    altos: Stick a mutex around FAT operations
    
    This allows the command line and logging operations to occur safely in parallel
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e6e2ca60c65a4fe2bee0bd8b9b89d45a7dbcfb3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 01:55:33 2013 -0700

    altos: Delay while waking up SD card a bit
    
    This seems to make bringing the card from idle to ready mode more
    reliable. If you spam the card with requests, it will eventually
    whinge and shut down communications.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 19ef593be9ff3f329e44472735d90c80129d2795
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 01:04:55 2013 -0700

    altosdroid: The Map already draws our location; no receiver marker needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ec6fb3b9cec0f864d6e65d0cc6b4dd42edd3e16
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 01:00:36 2013 -0700

    altosdroid: Check state.gps != null before using it
    
    Avoid crashing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02243463adbdfb860f69580f544da9026dc7cbd4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 00:55:59 2013 -0700

    altoslib: Remove spurious debug message
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9212ce268f3a4a9f3f019f23f6eef8b57207d340
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 12 00:19:24 2013 -0700

    altosdroid: Compute course from android device to rocket, display it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f02bb1df132443fc27b69f23f382ea87e610f533
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 11 23:56:47 2013 -0700

    altoslib: Add range and elevation to AltosGreatCircle
    
    Move the computations from AltosState here so they can be re-used elsewhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a8cc23de5776ea3fa2bdc96cbe63422eb555d63
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 11 22:39:14 2013 -0700

    altosdroid: Mike was right -- only need one LocationListener
    
    I mis-read the docs and thought we needed two listeners, one for GPS
    and one for network position. Looks like we don't
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83ce46c73b0e876f9f630943af19ea97b3a21d3c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 11 22:34:36 2013 -0700

    altosdroid: Send LOCATION and CRC_ERROR messages to UI.
    
    This collects all position changes and crc error increments and sends
    them along to the UI for presentation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f88d345c407e409611448d0e8813ab5a6de0a0b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 11 22:16:25 2013 -0700

    altosdroid: Hook up the position listeners
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81730670b6848bebb2c6a8ac7813419112f2779a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 9 14:53:25 2013 -0700

    doc: Add an outline of an AltosDroid chapter
    
    Not much content yet, but I think this is pretty much the sections we need
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07fb6efc54b8575627572a2113bdbc62914bafb5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 9 00:38:25 2013 -0700

    altoslib/altosui: Adapt monitor idle to new AltosListenerState
    
    Move the receiver battery monitoring to the new spot
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 398c02b945a58634c8932f07df2c2be8438da7d1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 9 00:28:05 2013 -0700

    altoslib/altosui: Carry receiver status around in AltosListenerState
    
    This moves the crc_errors into the new structure and adds a receiver
    battery voltage value there as well. Now the receiver status can be
    monitored separately from the flight status. That also means that code
    receiving state updates should be prepared to accept missing listener
    or flight state values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08eb1e3e1abb1aa4f5ea92b781a2ff8f480006c5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 8 17:42:18 2013 -0700

    altos: Monitor battery voltage on telebt
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ba0df9b440b69bf5bc5f4e435b431adf303fee2
Merge: 1d3ab47 28adf55
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Apr 8 18:02:37 2013 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 28adf5541354715b185dbb45b28c97c7d9cf8bcd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 8 16:48:40 2013 -0700

    altos: Create telebt-v1.0 product. Remove old telebt products
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d3ab47d82fe005ab6854386c0ffa5771ee49bf6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 8 16:48:40 2013 -0700

    altos: Create telebt-v1.0 product. Remove old telebt products
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c0dc761095a5a77c87c3b4dcd1d42a4e79f6604
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 6 23:48:36 2013 -0700

    altos: Try RDF mode for TX calibration
    
    Trying to get the radio to stop modulating the carrier when
    calibrating the radio, we'll try RDF mode which says no preamble or
    sync data. This might shift the frequency though?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30c397296bcdaceb4c2c9d0509dc591b489ece02
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 17:44:06 2013 -0700

    altosui: Graph TeleMini flights without crashing
    
    Adding maps to the graph UI failed to check for missing GPS data in a
    couple of places causing crashes when fed a TeleMini file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 67b8bdb4ea8c22688d4f18416593346585595cfa
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 17:29:40 2013 -0700

    altosui: Display current GPS in 'pad' tab for 'startup' staten
    
    This is the state for telegps, so just display the current GPS info as
    we don't know where it started at.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 907cc6c50755c0d19b93c15678d6f3022a6ee10b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 16:48:05 2013 -0700

    altosui: Hide flight-related tabs for telegps
    
    Products without a flight state don't need ascent/descent/landed tabs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e747156d0ea4b62eea30a8f486ee105ee35dcaf5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 16:47:07 2013 -0700

    altosui: Don't display missing sensor data
    
    For devices without sensors, don't display temperature, barometric and
    accelerometer-derived values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 997cdef3fe04acdd566d287e70981f7b7934d0c8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 16:44:58 2013 -0700

    altoslib: Make any incoming telem packet update the RSSI value
    
    Every packet has RSSI info, so use the latest one available. This
    makes telegps RSSI available as it never sends sensor packets (having
    no sensors).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0cd203e418e73a1f11460425985b7575c2f0a76c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 16:43:53 2013 -0700

    Set telegps USB id to 0025
    
    It was accidentally using the same ID as megadongle...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96c32125a780ad6b39c015f4abbae07fead68582
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 2 16:41:29 2013 -0700

    altos: Shorten SD initialization timeouts.
    
    This makes failure when no card is present much quicker.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 985df526ec142258ef990d0b55b0a14e13c099b4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:39:35 2013 -0700

    altos: Horrible kludge -- disable radio while talking with SD card
    
    The SD card really doesn't like the RFI generated by our enormous
    radio, so just lock the radio out while working with the card.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14c63f94f36a95272d91695039abf54efb423a91
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:10:14 2013 -0700

    altos: Add defines for the specific pins used for telegps SPI
    
    These aren't needed at this point, but who knows?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b34370cea662eb245e43aca20a6650b84b55ef6f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:08:18 2013 -0700

    altos: Retry SD card I/O. Use time for timeouts instead of counts
    
    Sometimes I/O operations may fail; give the card a chance and retry
    the operation in case it works the next time.
    
    Replace the loop counts with loops that check the clock so that
    they'll have consistent timeouts even if the CPU or SPI speed changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3a41bed39ec1abfc3ab74e9be7dd393e975542b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:07:06 2013 -0700

    altos: Provide build hooks for sampling profiler in telegps
    
    Might prove useful if the CPU is ever doing anything?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fae116fbebb9658fe15690ff43dfe8568a58c2a9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:06:03 2013 -0700

    altos: Add a FAT test that re-writes the same file multiple times
    
    This caught a bunch of FAT cluster chain allocation bugs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79d01a571935138b24b86a7181307ee014d248ed
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:03:57 2013 -0700

    altos: Support open on multiple simultaneous FAT files
    
    Need to be able to see the contents of a log file, even if the logger
    is running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0838b6c8797b84cf8df8f92ee20fb6ae79e434d7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:02:14 2013 -0700

    altos: Make sure FAT cluster allocation works for size zero files
    
    There were some rounding errors mis-computing the number of clusters
    needed, and the logic to figure out how to re-connect a chain was broken.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 76bd204de744c34e5cbf6efa93adb89bc2cb08b3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 02:00:21 2013 -0700

    altos: let FAT tracing work in ao_fat_test as needed
    
    This allows the FAT DBG hooks to be enabled even if some other module
    turned DBG off.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a764bf06d0975cbf1620b079351c7437053ea1a8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 1 01:58:37 2013 -0700

    altos: Flush the on-board mega log after every sample interval.
    
    SPI flash parts don't need flushing, but the SD card does. Make sure
    the SD card contents are sane after every logging interval has passed
    by flushing all dirty blocks to the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2de64b10894b366398a8b37ebd2305d9be46d46
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 16:11:27 2013 -0700

    altos: Create the log file if it doesn't already exist
    
    open will return failure unless the file already exists.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 659a6915f5ba5129096e55ccc04c975d216546ae
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 16:10:33 2013 -0700

    altos: Make ao_fat_readdir return real error values instead of 1/0
    
    This way, we can distinguish between 'something bad happened' and
    'you're at the end of the directory'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 182ceaac7d91dc6e9ebac6455d5de0c10687796b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 13:55:16 2013 -0700

    altos: Increase SD card timeout at startup time
    
    Sometimes the SD card takes 'a while' to go into idle mode at first
    power up. Just hang around waiting for a long time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d813566cdc4d43a43ed988dde4a3ceeccf24efe6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:46:41 2013 -0700

    altos: Fix command-line FAT filename parsing
    
    Pad extension with spaces
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db01557ce493c435db177fda78653697ba2afa51
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 23 02:10:38 2013 -0700

    ao-tools/ao-stmload: Be smarter about ELF parsing. Retry open on failure.
    
    Figuring out what goes where is tricky; turns out we want to pull all
    of the sections that map inside any program area that is supposed to
    be loaded from the file.
    
    So, we walk the program headers, then walk all of the section headers
    looking for those that suck data from the same portion of the
    file. Compute where in ROM each relevant section goes and build a full
    ROM image in memory using that.
    
    This patch also adds code to close and re-open the device if the first
    open failed to do what we want. Much nicer to have the computer figure
    out when the open succeeded rather than having people re-run the app.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 144b44e13ce3361ff59cbb555e84d542455a4e17
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:39:32 2013 -0700

    altos: Unmount file system after each testing pass in ao_fat_test
    
    Otherwise, we use stale data and 'bad things' happen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a70139c9a8a177df8f20f525703b13c0aec0fbc7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:29:37 2013 -0700

    altos: Don't add fat commands when building ao_fat_test
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b2f211758dfa97230a730b8c4b31e0e711c19c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:04:57 2013 -0700

    altos/stm: Always check for idle IN buffer before sending
    
    Unlike the AVR and CC1111 USB drivers, the STM usb driver queues IN
    bytes in a local buffer instead of in the driver; this means that the
    driver is queuing bytes while the previous IN packet is queued for the
    host, which allows for overlapping execution.
    
    It also means that when the local buffer is full, we must check to see
    if the host has picked up the previous IN packet before trying to
    queue another IN packet for transmission. This is done by always
    waiting for the IN buffer to be ready before sending data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de199601a177fc2d45ad9bd7357111111844d40a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:03:59 2013 -0700

    altos/stm: Add debugging mechanism to STM USB driver
    
    This adds a pile of debugging hooks to the USB driver to try and
    isolate various lockup-related issues. It's all disabled by default,
    of course.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f1f3e836393304434130d362771a39f6f8f859a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 15:00:20 2013 -0700

    altos: Do not release interrupts from any pollchar function
    
    getchar relies on interrupts being blocked across the pollchar calls
    and into the sleep call or it may go to sleep with data pending.
    
    This prefixes all pollchar functions with _ to indicate that they are
    to be called with interrupts blocked and eliminates all interrupt
    manipulation calls from within the pollchar functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7afcec1a1dce140dfa569469df4ef42ed407a742
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:23:31 2013 -0700

    altos: Add sdcard read/write tracing
    
    This just dumps info in trace mode about read and write commands
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0595d94c7deea29d9e3d4bcbc106b9bed5ee103
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:22:28 2013 -0700

    altos: Move fat mount information to separate command.
    
    This makes the mount report precise error information and then prints
    that with the 'M' command.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0628541e1bfc3e4a122cc824188ed53fddf733e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 12:21:03 2013 -0700

    altos: Disable CC115L debug commands
    
    now that it appears to work, leave these disabled by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8826b1ad5487de9345b7dcaf6c75a45117ff538
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 31 10:35:47 2013 -0700

    altos: Add SD card writing function
    
    Now that the FAT code seems to be operational, go back and add
    SD writing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 649999863c7228ead0225968752d068dc0d30091
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 30 01:33:49 2013 -0700

    altos: Add logging and telem to telegps
    
    This turns on telemetry, APRS, RDF and data logging for telegps.
    
    Data is logged as soon as GPS has a date to create the right
    filename, using files of the form YYYYMMDD.LOG which just barely fits
    in a FAT filename.
    
    Telemetry/RDF/APRS are all separately controllable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3d8956df3a3ecb3918b5db4d78b057d68541c33
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 30 01:32:30 2013 -0700

    altos: Export ao_fat_sync and ao_fat_full functions
    
    ao_fat_sync() flushes the bufio data to disk along with any fsinfo
    changes. ao_fat_full() returns whether the file system is full.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7455a892e8bf5402e7ff2c4bd2ddad05dfe76638
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 30 01:31:12 2013 -0700

    altos: Lock cc115l radio mutex when using global radio values
    
    This moves the locking up above the global state variable uses so that
    multiple radio users (as if we had any) won't collide.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd32140df2a595ce66d603b98516bae519327c5d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 30 01:30:18 2013 -0700

    altos: Configure cc115l sync byte count for each radio mode
    
    two sync bytes for packet mode, disable sync for rdf/aprs mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93a9aa703a0173e13b327ed432e6d52e90ebfa1b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 29 17:05:36 2013 -0700

    altos: Get CC115L radio working.
    
    This involved figuring out which GPIO signal would reliably indicate
    that the transmitter was finished; I ended up using the PA_PD bit for
    this.
    
    This also converts all of the radio users to the long packet support
    as the CC115L has only a 64-byte fifo, not large enough to hold either
    an RDF tone or a regular AltOS telemetry packet.
    
    This also renames the public API for sending APRS packets from
    ao_radio_send_lots to ao_radio_send_aprs, which is at least more
    accurate. The workings of that API haven't changed, just the name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9aeed244879f90b5b6dab1c7ca095cc001b03fe5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 29 12:13:59 2013 -0700

    altos: Add temporary RF power settings
    
    These expose the raw cc115l and rfpa0133 register settings so that we
    can calibrate them against measured power outputs.
    
    I've tested them to verify that they change how much power the board
    consumes, so they're clearly doing something...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 86e1039e14304ac13db540f2ee3afd4ff170b8b4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 29 00:32:23 2013 -0700

    altos: Add FAT32 support. And lots more testing.
    
    Generalizes the FAT code to deal with either 16-bit or 32-bit
    versions. The testing code now runs over a variety of disk images to
    check for compatibility on all of them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44e418bbecd3a3deae942803141cf115d92f29d2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 28 17:38:14 2013 -0700

    altos: seek forward on FAT cluster chain instead of restarting
    
    This improves sequential file performance by taking advantage of any
    previous cached cluster/offset pair and starting from there when the
    cluster changes rather than starting from scratch at the begining again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8101e4af199a3d79bff434f788cce9f97aeac53a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 28 16:57:02 2013 -0700

    altos: Add a simple cache for the FAT position->cluster computation
    
    This improves read/write performance with large files by not
    re-walking the cluster chain for every operation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7b606e93a4e4fbd2c0e883352ed74619ee24cf7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 28 16:05:24 2013 -0700

    altos: Clean up fat driver API. Improve fat test
    
    Make FAT api provide reasonable error return values, change the tests
    to write and then read a pile of files, checking that the contents are
    correct (using md5sum).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1fe0654b45cc8f944394308cf29945b537becc4
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 28 15:55:35 2013 -0700

    altos: Add sanity checking to busy counts in bufio driver
    
    Make sure the busy counts don't underflow or overflow.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fe32e0fc407522101e805cf2653253cb3cee291
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 22:11:53 2013 -0700

    altosui: Don't deref null pyros when saving altimeter config
    
    The check for no pyro config is to compare npyros against zero rather
    than check the length of the pyros array as the latter may be null.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 985cd22b941415b1ae2709ae1ab6b60c3d815ec1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 18:43:42 2013 -0700

    altos: Use FTDW, clear DATA bit. Disable backup write protection
    
    The newer(?) chips in telegps didn't like the previous programming
    scheme, so go back to fixed time for write, which does an implicit
    erase before every write. Also clear the DATA bit, which is only
    needed for double word erase/programming.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4a68878a66508e6f1523cd813b2e37bcf2e90ab3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 01:25:24 2013 -0700

    altos: Teleshield has a radio, set HAS_RADIO in ao_pins.h
    
    Otherwise, lots of random code won't know about the radio..
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 561175afebc63ec3d2f8f7305235c9812ceaf501
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 01:15:04 2013 -0700

    altos: Add new panic flag for bufio misuse
    
    Allow the bufio code to signal a fatal error if someone misuses the API
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd43955ff0c4d39a685b79e91cb62898a5f1b875
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 01:14:15 2013 -0700

    altos: Hook up the FAT16 and SD card support to telegps
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e14834817f78a04b4d9b44a8373119dffd42c966
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 27 01:12:33 2013 -0700

    altos: Add SDCARD and FAT16 filesystem support
    
    This adds a fairly primitive FAT16 file system implementation
    along with support for SD cards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 747114786512339211d4981a7828c8c6f1f46c20
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 26 14:28:37 2013 -0700

    altos: Fix config to not abort radio recv when no recv is available
    
    Use the new radio recv define to skip disabling the receiver when
    there isn't a receiver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 237e853b820b01409562b93b82684e5147286806
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 26 14:27:46 2013 -0700

    altos: Allow radio recv and xmit to be separately configured
    
    The CC115L is xmit only, so split out the functions and provide
    defines to check for xmit or recv separately as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d187460bdcb97bf6d0a3550e4e03c4c223e4cc1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 26 14:26:38 2013 -0700

    altos/stm: Ensure SPI always sends 0xff during receive
    
    SD cards require 0xff when fetching data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 136ca0922e968d650e9e420a47d228611a3cb45e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 26 14:25:48 2013 -0700

    altos: Improve CC115L driver. Generates carrier now.
    
    Still no data, but at least the carrier comes up on frequency now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4889b33af9700b9d872364f0cadaf9425cf84a7d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 26 14:24:45 2013 -0700

    altos: Add RFPA0133 amplifier driver
    
    No configuration of power level yet, just the bare driver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fe1e32f5361e901b88b63a30f070e67d460ada1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 23:52:14 2013 -0700

    altos/telegps: Hook up cc115l driver
    
    Doesn't actually do anything yet, but should initialize the chip at least
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ddfb3ea07c2073f8c4d79feaf262c9fb910cfce
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 24 23:51:11 2013 -0700

    altos: Add cc115l driver (untested)
    
    Includes support for sending telemetry, RDF and APRS tones
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15bc83a0eaaa9a43d67fdc3e9f412d5b2c1f06dd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 20 23:22:37 2013 -0700

    ao-tools: Make library support µPusb
    
    Set baud rate to 9600, look for FTDI-style names
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50dd268a715224a01f8a6b481670a4ae6621cb28
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 20 23:21:37 2013 -0700

    Add telegps initial version
    
    Just lights up the GPS and USB
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 548cf57d5a5ea323bbfc3605b44c23fc48dec96b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 18 22:12:48 2013 -0700

    ao-tools: add ao-dump-up
    
    Dumps out a µP log. Useful for µPusb bring-up
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d171d10d97307a1a1a62e660e9194121b79a09be
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 11 18:16:55 2013 -0700

    micropeak: Improve download docs and UI
    
    Add text explaining that the LED and phototransistor must be
    touching to both the doc and the UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 90ee11542b111befa0e96e27292dc548e5c37396
Merge: 97efce5 d7973de
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 10 11:43:06 2013 -0700

    Merge remote-tracking branch 'mjb/altosdroid'

commit 97efce5f7ff227aaa8990529217d3d10db3443dc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 10 11:41:49 2013 -0700

    altos: re-enable optimization for stm-demo. remove unused bits
    
    This makes stm-demo run on the discovery board again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7973de32adff5402844cc1e1da3eced05265074
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 23:28:26 2013 +1300

    altosdroid: Add map polyline between pad and rocket
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b691fc48f5e879045e68e070162af56cd08f03b4
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 23:27:28 2013 +1300

    altosdroid: Add rocket and pad map markers
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b7c82b867b12ca016164725f3736bc5b55048999
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 20:40:13 2013 +1300

    altosdroid: programmatically create map fragment
    
    * Allows reliable fetching of a GoogleMap handle.
    * Set map options, initial location (NCR North for now, temporarily)
    * Add some info fields below map, and update them accordingly
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 8adadf6bd2ba623642675e4beafac4ac98b1916d
Merge: d029aca 0c0c6d6
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 20:24:56 2013 +1300

    Merge branch 'master' into altosdroid

commit 0c0c6d60cdce39582fa5350e9b016a08e76f27a1
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 20:24:15 2013 +1300

    altosdroid: Add SDK checks to configure.ac
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c2d966a8ca9dcf6ccf5c268c616cf1384d45002d
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 20:22:51 2013 +1300

    altosdroid: adjust clean targets to get rid of automake warning
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 988e9079e20133554acfecc74a109195688c2752
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 20:22:09 2013 +1300

    ao-tools: Add ao-edit-telem to .gitignore
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d029acad6a992be9b7b4498e70605f8a1e1a4ef6
Merge: eba7b2e 72c5b14
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Mar 10 19:07:01 2013 +1300

    Merge branch 'master' into altosdroid

commit 72c5b1429bdfd6e9d2185bad7d0adb281fdf659a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 9 20:40:52 2013 -0800

    ao-tools: Add ao-edit-telem
    
    This lets you edit a telemetry file. The only current editing
    available is to change the pad location, allowing a flight to be
    replayed anywhere in the world.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b460d38bc2685bca7f530b7749c0e0381f6264c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 9 20:39:31 2013 -0800

    ao-tools/lib: Add cc_telemetry_unparse
    
    This takes a telemetry structure and generates a string version
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0803da851e2e061affc172fdde6301652d1be755
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 9 20:37:38 2013 -0800

    altosui: Add N/S and E/W to info table lat/lon values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eba7b2ef8ef23bdb61b0390e47be6f27ffde31dc
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Mar 8 19:41:32 2013 +1300

    altosdroid: fix side-to-side scrolling in map tab
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 84d35e4cbd7ea2f681c43496b9b9db84f9dd923f
Merge: 760b1f0 e0d9128
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 7 13:00:44 2013 -0800

    Merge remote-tracking branch 'mjb/altosdroid'

commit e0d9128b7219b4c8ee68245a44b3428e796ca2f1
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:37:51 2013 +1300

    altosdroid: Auto tab changing
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ecfc568574ababd23b2c4dc1323cb7265c097933
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:37:22 2013 +1300

    altosdroid: implement Age field updating
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 86b742743b26693cf8e56034d4ea68ff277931c1
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:35:43 2013 +1300

    altosdroid: implement UI updating on tabs
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2a81d637308e680b99d7218ba9e03c9ade6626f1
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:33:27 2013 +1300

    altosdroid: implement tabs interface
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 59dfcbe14622c20aaa7d5b131eece9f4c8db6887
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:28:45 2013 +1300

    altosdroid: Import initial versions of XML and Java for Tab content
    
    * Includes TabsAdapter class borrowed from Support Library sample code
    * New "GoNoGoLights" class for dealing with the red/green/gray LEDs
    * extra required strings in strings.xml
    * Couple of support functions in AltosDroid.java
    * rudimentary Maps tab - does nothing at present.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d6f1b176f4005af3b6fd16d8c7d22260a3ccdfd8
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:20:47 2013 +1300

    altosdroid: whitespace cleanup
    
    DAMN my OCD.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d229d702c8532f477e2ace2af36f2d0cc6e728d3
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 21:20:06 2013 +1300

    altosdroid: make AltosDroid.pos() static
    
    * Will be used from tabs that display lat/lon
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit cf03ddb42042002bfb88e13ecfb89b27e7aeb91e
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 20:53:26 2013 +1300

    altosdroid: convert spaces to tabs in strings.xml
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 89f8bb52ea858f059374474c0adda3cd5095a589
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 20:49:41 2013 +1300

    altosdroid: adjust release Makefile target
    
    * Rename target
    * Add dependency on unsigned release APK
    * use $(ZIPALIGN) variable
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 6ff45bef719bafd2c827e479186c8fadf6f779aa
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 20:48:16 2013 +1300

    altosdroid: Symlink red/green/gray LEDs via build system
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 795fba09a3ca273cd2daeeb7d9fed6bae6fa6a86
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 19:23:39 2013 +1300

    altosdroid: Adjust build system for GMaps & Tabs support
    
    * Use SupportV4 library for Tab support
    * Use Google Services Lib for Google Maps
    * revert to a standard Android target, not Google API's
    * Add permissions required for Google Maps to manifest, and API key
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b7dc6045892b33b04ec7c27bdc940b4d3e1b9cbf
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 19:05:43 2013 +1300

    altosdroid: adjust Makefile rules
    
    separate altoslib linking and, making of external lib directory.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 353372425550177cf0531a05706491a96414d12c
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 19:02:48 2013 +1300

    altosdroid: use a glob for source files
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 1c9a3a5080ca0e21f45c2b7ea889793645796751
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 18:59:30 2013 +1300

    altosdroid: Only update BuildInfo.java when other source files change
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 10042fed36d19c1b21b8f04c57da708afc085b25
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 18:54:45 2013 +1300

    altosdroid: Fix up some formatting in manifest
    
    (And add flag to allow settings backup by google services)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 760b1f02c178c600226f39b5e66d8cbadbf4a29b
Merge: afd2674 cbad587
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 6 21:53:22 2013 -0800

    Merge remote-tracking branch 'mjb/master'

commit 5560148ffea1a718a303d999a0f8a625deceef23
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 18:51:27 2013 +1300

    altosdroid: minor whitespace cleanup
    
    (damn my OCD!)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9a54e278298540582b91ff3eda476265082e890c
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Mar 7 18:46:32 2013 +1300

    altosdroid: update copyrights/licensing
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit afd2674261e128a0ecff8fbf5dd6a64196b026f6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 4 19:44:30 2013 -0800

    altoslib: Invalidate GPS new data bit when updating state
    
    Somehow this line got lost when the GPS ground altitude fix was made.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3605e97ee918b3f87e4c471906f708c3ea027eef
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 3 16:53:52 2013 -0800

    ao-tools: Add ao-dumpflash program
    
    This program dumps the entire flash contents of an AltOS device to
    allow for external analysis.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 784edcda52d681bbc9302fbc7efb80cb214f71b8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 2 17:46:29 2013 -0800

    libaltos: Open FTDI serial devices twice on Windows.
    
    Looks like the Windows FTDI driver has 'issues' and opening it only
    once doesn't work correctly. Just close and re-open the device and it
    seems to be perfectly happy.
    
    Who knows?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb09076fe16d28e25f5b20b2178cfad10adbeddb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 1 20:48:28 2013 -0800

    doc: Add version 1.2 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9cba68049f957d69a88150470c086dd6f4a42c0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 1 20:45:43 2013 -0800

    doc: Document how to get TeleMini to 'emergency recovery' mode
    
    TeleMini needs emergency recovery mode in case you forget the radio
    parameters and need to get things back to a known state. Add
    documentation to describe what this does and how to get it enabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 113b1146f6ac0ecd423f3fb409e02730604b8aca
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 1 12:34:04 2013 -0800

    altosuilib: Disable graph element notifies for each add()
    
    This reduces the number of notify calls made and dramatically speeds
    up graph creation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 351e4110f519d18bb36747955578e9e5b9aeec7b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 1 12:28:34 2013 -0800

    altosuilib: Add setNotify/fireSeriesChanged methods to AltosUIGrapher
    
    This will let the data adding functions disable notifications while
    adding all of the graph data, and then send a single notification when
    the data sets are complete, which speeds up creating of the graph
    elements quite a bit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0bd0093a65b73a178da6ddcafcc4dbaa3caca39
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 01:20:41 2013 -0800

    altos: telescience-v0.2 is an ARM product
    
    Move it from SDCC to ARM targets as Jenkins doesn't have an ARM compiler.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9230f0a5b119044235c0c419e85a83115aae924d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 01:20:16 2013 -0800

    altos/driver: Make HMC5883 driver build again
    
    Adapt to changes in OS interfaces
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2120d362cefceba69e75996b6391d9558978c01d
Merge: 5246acb a04c4f7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 00:20:54 2013 -0800

    Merge branch 'telescience-v0.2'

commit 5246acb70b79980de36bd5d0ba0d017529ae9a78
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 00:20:36 2013 -0800

    Update build version to 1.2
    
    Prepare for 1.2 release
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25435dcbc6416935aa432fc090ea977bfff5d153
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 24 00:19:49 2013 -0800

    altos/stm: Add more bits to NVIC register definitions
    
    This cleans up a few values, adds more comments and a few more NVIC fields.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbad587b49c565edd2c9356a015d6cfd52df93a3
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Feb 15 22:09:16 2013 +1300

    altosdroid: excise old code/xml
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5e53a485310cc11e6add077fb4bd0b0267734ff0
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Feb 15 21:59:08 2013 +1300

    all: clean up .gitignore files and Makefile clean targets
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit be8eecc4117a14139e4421ce86b67d29a0f0c3d4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 11 11:40:38 2013 -0800

    altosui: Fix AltosLanded call to AltosGraphUI
    
    Changed the argument from String to File but forgot this one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59365eb4e1f63a1ced1667ac233058a06a8eecef
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 11 10:34:47 2013 -0800

    altosui: Remove graph series which aren't available
    
    Make sure all graph series have actual data underlying them by
    checking the available data before creating the series objects.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a9ca1dcd00da2cfdd0a2ea616308dfb64ee80d4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 11 10:31:24 2013 -0800

    altosui: Stick file basename in graph window title
    
    The title was empty before, this seems more useful than that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a4cd7b9b318ddea5d1dcc71918819f11256ca94
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 11 10:24:34 2013 -0800

    altosuilib: rescale axis when enabling data series
    
    This makes sure new series are visible when you enable them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 169a6d51718d6b9fae757df9950d2e960d1c8c1d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 19:33:50 2013 -0800

    micropeak: Remove Info.plist
    
    It's built from Info.plist.in
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64399500ad1a7ad70452cbda4d60723b5904ca3d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 19:01:41 2013 -0800

    Build Windows .nsi files in configure script
    
    These need the library version numbers embedded in them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbd9dd989a662f41ddcb0c9e0f4453840687fd4a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 15:34:56 2013 -0800

    altosui: Add map and GPS data to graph window. Trac #50
    
    See where the rocket landed without having to replay the whole flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0a125503e502d213711df0d7774d837d4d98447
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 14:56:10 2013 -0800

    altosui: Display count of erased flights along with their numbers
    
    An attempt to clarify what's going on by providing both a count and
    the flight numbers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17455da530833d3db03ee2ace7b15130ed307670
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 14:51:46 2013 -0800

    altosui: Display block number while downloading flights. Track #51
    
    We don't know how long the flight log is, but we can at least provide
    a block number in the pacifier to let the user know it's not wedged.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9cf50c9f29f42cc3ca0daff3c69a4087cf9aa1c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 14:40:48 2013 -0800

    altoslib: Fix available flight log storage computation
    
    number of flights was off by one as it was initialized to -1
    storage erase unit wasn't getting fetched correctly
    flight_log_max is in kB, not B; need to multiply by 1024
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 504cf412e8b60b5ff2dea93ed3336f0e058dea62
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 14:18:16 2013 -0800

    altosui: Display callsign in connecting message window
    
    When waiting for the remote end to respond, display the callsign along
    with the frequency so that the user remembers that it's important to
    set that too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2701ae646124f0668c5f2d1df3fc80f0075a9d7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 14:17:04 2013 -0800

    altosui: Interrupt MonitorIdle when changing frequency/callsign
    
    When switching radio parameters, the local device needs to have the
    parameters switched, so interrupt the current operation and start
    over, the frequency and callsign will be set the next time through.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc0ea39fee73417ecd69c020d9eca723ebb2cf65
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 11:58:36 2013 -0800

    altosui: Add callsign to Monitor Idle window (Trac #62)
    
    This makes it a lot more obvious that the callsign is relevant to the
    Monitor Idle process.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf88c5f829ea5d32043431945e862a9f6c96740a
Merge: 3227029 d05a779
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 01:21:52 2013 -0800

    Merge remote-tracking branch 'mjb/master'

commit 32270296671aac3b3ba15f9c1777bcdd77b9c36c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 00:40:59 2013 -0800

    altosui: Adjust graph voltage tool-tip value format
    
    Voltages are always small, so use more of the space for the
    fractional value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5fb03421751b342dcd450caee49a608d8828175
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 00:32:26 2013 -0800

    altoslib: Fix a couple of unit functions to make them public
    
    Nice to be able to use these outside of altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2efd3ad80d4fefa8ccc1b80a2e657dbf9ba0c60f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 10 00:29:29 2013 -0800

    altosui/altoslib/altosuilib: Switch altosui to shared graph code
    
    This adds a configuration tab to the graph window to enable/disable
    various plotted values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0169e56ad030c0096b1068d00f06957990dfb31f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 20:24:33 2013 -0800

    altosuilib/micropeak: Add state markers to micropeak graph
    
    I think this makes the micropeak graph as functional as the altosui graph
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 518b16f64f4be096ceff13ab31b96d6909fe3ae2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 19:24:18 2013 -0800

    altoslib: Fix altoslib install
    
    Was using AltosLibdir in several places still
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41ede0267250a1d3b26e19cc9dd78f32609f7f0f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 19:23:27 2013 -0800

    altosuilib: Initialize graph axes units
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d3da1530c1007d5d1f28062b3947f4aa981bfa8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 02:00:13 2013 -0800

    altoslib: Add AltosUnits.graph_format
    
    This describes the format of numbers used on a graph axis for use with jfreechart
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab9caa22ea905844a99e08b5f6d3b072f094283e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 01:59:18 2013 -0800

    micropeak: Use altosuilib graphing functions
    
    Move these out of micropeak and into shared code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9839b0b62d797a8616fc66038e3f3c68e2a214d0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 01:58:23 2013 -0800

    altosuilib: Add graphing routines from MicroPeak
    
    Make these available for AltosUI too
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd5e6b80a8be5fac7d913b97570f7e11f70a60ba
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 9 01:55:51 2013 -0800

    altosuilib: Remove duplicate AltosUnitsListener.java
    
    This lives in altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6d7776bbe0b7f84e51af88d1ac2b7d35133a0ad
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Feb 9 09:09:36 2013 -0700

    various updates to the text .. more SMA to BNC adapter references, etc

commit 033c2c4c018343b0e86d5e231bc2dc56e643f8ee
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Feb 9 08:47:10 2013 -0700

    update copyright year to 2013

commit ed200884f3e4fb895ee17ef38a9b6d3371b59625
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Feb 9 08:44:11 2013 -0700

    add pcb overall dimensions and screw sizes the holes are intended for

commit e374f8e5a5f12602ef62518fcf672a231080baee
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 8 23:37:49 2013 -0800

    doc: Add TeleMetrum and TeleMini drill templates
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3024b759fcdf8b84a2139c1535c573a31eb5c95
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 10:51:49 2013 -0800

    altos: Add atmosphere.5c
    
    Shared code for building pressure tables
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e982294961205bef525ecad7172a1f3ab66677f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 09:56:18 2013 -0800

    test: Accept micropeak CSV files for micropeak testing
    
    This interpolates the missing values to provide a reasonable testing
    environment for the Micropeak flight firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9aca92a20343a2cf7e05abc7b100852d81f86c0d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 09:51:30 2013 -0800

    altos: Document which MPU6000 revs have broken accel values
    
    From Tridge -- MPU6000 rev C4 and C5 are broken, having accelerometer
    values in the wrong range. This commit just adds comments which note
    this; experimentation will be required to actually sort out what's
    going on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 809eb5b1252a75d489e3ad2fd2a4af701fa0aa52
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 09:50:07 2013 -0800

    micropeak: Update Makefile to versioned Java libraries
    
    Library names have changed; deal with it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7afd76e70c086003a2cd87ce459fda4188c76ad6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Feb 4 09:49:07 2013 -0800

    altoslib: fix Makefile JAR target
    
    Was referencing stale classAltosLib.stamp instead of new classaltoslib.stamp
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d1d8d2a3c129cdbd55427bcda0f26715b02f1ee
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 29 17:00:43 2013 +1100

    Add version numbers to java libraries
    
    Make our private java library names include a version number so we can
    ship and install multiple versions at the same time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a3c5de6657d1c26e52015a8acec0cd05e294cef
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 29 14:52:23 2013 +1100

    Change AltosLib to altoslib
    
    Follow Java conventions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d05a77992df983b9fa79f0e2b20d2c6b387c180c
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Jan 29 01:34:48 2013 +1300

    altosdroid: initial release to Play Store
    
    * Add release keystore (encrypted)
    * Turn off debugging in UI
    * add 'sign' target to Makefile.am
    * Update version string in AndroidManifest.xml to match released version of altosui.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5eb52f54a616f4e89b718d50d77a7b68cf7a4354
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 24 14:18:39 2013 -0800

    Mark MicroPeak as a recording altimeter, not a peak-recording altimeter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b62097c9d79f848042485234dc46ade60deabc02
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 22 18:50:02 2013 -0800

    micropeak: fix 'make clean' and .gitignore
    
    Make git status clean in micropeak dir
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96193d8c09159b81e60851ed90682b9120e15f55
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 22 17:49:25 2013 -0800

    micropeak: Add mac build file Info.plist
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5c988fb59c1e48baa81b56be9b7b4ab0eebabea
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 22 17:34:44 2013 -0800

    Add documentation for the MicroPeak USB interface
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9da66ca607664bb81b0986c121518faa4c1cb9fd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 22 17:29:37 2013 -0800

    micropeak: Respect font size preference in MicroPeak stats tab
    
    This uses the font size preference to adjust the size of the text
    shown in the Statistics tab.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3454592169dcb61b81de9af2b631b87e7dd86231
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 20 15:42:05 2013 -0800

    altosui: Make initial AltOS window position configurable
    
    Give the user a choice of nine locations on the screen
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf03ab3383b679e6617e8ab7004be91e5a727562
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 20 15:39:53 2013 -0800

    altosui: Remove duplicate AltosUIPreferences.java
    
    This lives in altosuilib now. Several files needed imports of
    altosuilib added as a result.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e1133481f2208fd16be8196977696da2cce430f3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 20 15:37:40 2013 -0800

    altosui: All of the Altos class is actually in AltosUILib now
    
    Remove all of the duplicate content, shrinking AltosLib to a simple alias
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d35fd843299b5ff09a36220e6ecd8aefceb9b2c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 19 18:04:08 2013 -0800

    altosui/micropeak: Let native window system place windows
    
    Instead of forcing windows to our choice of positions, let the host
    window pick reasonable locations. This avoids having all of our
    windows appear on top of one another.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aed990c3a37249a111c783336afade7ecdda7546
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 19 19:30:38 2013 -0800

    altosi: callsign could not be configured for AltosUI
    
    An extra local variable called callsign_value was hiding the object
    field by the same name and preventing it from getting set to the right value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4646beb421ab5bec612dfe5e3c57e790b1f41203
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 18 21:53:54 2013 -0800

    Tag version 1.1.9.3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce3c9e6be6fde51fb02d692f1ef1222fb5ada8c9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 22:05:32 2013 -0800

    micropeak: Fetch Mac and Windows drivers when creating packages
    
    This downloads the FTDI drivers from FTDI during the build process
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a04c4f7b07e97d568f8f6f56dd363329817fb52c
Merge: 0c2fa96 bd84dfd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 15:22:46 2013 -0800

    Merge branch 'master' into telescience-v0.2

commit bd84dfd8e53d8939281993e062015f67c0dd9fa2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 15:18:31 2013 -0800

    micropeak: Show decimeters in stats window
    
    We're promising this kindof accuracy, so we'd best show it off
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 540309240a8515116120dbd4403902282ed8c27b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 15:15:49 2013 -0800

    altos: Add Kalman filter to MicroPeak
    
    This filters altitudes more accurately and also allows tracking of
    acceleration, which is used to discard height data generated by
    ejection charge noise
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 249ee968305ae6e8fcf0a10e5cf9cc5826bd81dd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 15:13:31 2013 -0800

    altos: Add computation of MicroPeak Kalman correction coefficients
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd60d85d07b881ac03294a8cf607e469f2e69610
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 15:01:12 2013 -0800

    altos: Correct model error covariance matrix
    
    Finally found a couple of decent references on how to set the model
    (process) error covariance matrix. The current process matrix turns
    out to be correct for a continuous kalman filter (which isn't
    realizable, of course). For a discrete filter, the error in modeled
    acceleration (we model it as a constant) needs to be propogated to the
    speed and position portions of the matrix.
    
    The correct matrix is seen in this paper:
    
    On Reduced-Order Kalman Filters For GPS Position Filtering
    	J. Shima
    	6/2/2001
    
    This references an older paper which is supposed to describe the
    derivation of the matrix:
    
    Singer, R.A., “Estimating Optimal Tracking Filter Performance for Manned Maneuvering Targets,”
    IEEE Transactions of Aerospace and Electronic Systems, AES-5, July 1970, pp. 473-483.
    
    This change has a minor effect on the computed correction
    coefficients; it should respond more reasonably to acceleration
    changes now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c2fa9614ffe22901ba0fd089e1e02c362f9fbe0
Merge: 456120d f2b59cf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 10:40:28 2013 -0800

    Merge remote-tracking branch 'origin/telescience-v0.2' into telescience-v0.2

commit 456120d201d72c89576a0c8d69b2fcba44169507
Merge: f24c421 994ff76
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 10:39:40 2013 -0800

    Merge branch 'master' into telescience-v0.2

commit 994ff76a064dcbd3113db771cd9cd9591fd68dea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 16 10:37:55 2013 -0800

    doc: Add simplesect headers to release notes
    
    This makes it easy to see which changes are from each version of the software.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f64fe671b7b4e2389219d672bcea978d0539d4ae
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 16 10:46:04 2013 -0700

    document what the 'Age' value in the AltosUI display means

commit f2b59cf3d30425bc4b12f37e86832e40b7702d3d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 16 10:46:04 2013 -0700

    document what the 'Age' value in the AltosUI display means

commit f24c4219de9563cf0ef24b763ce54d961c182696
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 13 21:38:26 2013 -0800

    altos: Change CC1120 SPI speed to 4MHz.
    
    Most of the chip can run at 8MHz, but extended register access is
    limited to 6.1MHz. Instead of pushing things, just run the SPI bus at
    4MHz.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a866431e9a063830b407f749ff97a730831e5e4e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 13 20:50:10 2013 -0800

    altos: Crank fast SPI on STM to 8MHz
    
    With the GPIO pins set to 10MHz now, we can run SPI at the maximum
    possible speed (8MHz).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d885616e2e522b8aea5e7d5398f16d330a0cffa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 13 20:48:47 2013 -0800

    altos: Set STM GPIO output speed for SPI pins correctly
    
    The GPIO pin settings affect the output impedence, and hence the
    maximum speed for SPI. Cranking these to suitable values allows SPI to
    run at full speed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2810aa33fc6fe254761a0044c62c7b23e59e6bc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 13 20:48:08 2013 -0800

    altos: Build telescience-v0.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3645cb6578ec2a11ab7b0f6d435c6de22ca02a9f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 13 10:31:59 2013 -0800

    Update avr ao_spi_slave code to match API changes
    
    Made the interface use void * for pointers and uint16_t for lengths
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7883744526156879ad63256ab12d959df56d5252
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 12 20:11:38 2013 -0800

    altos: Initial telescience bits
    
    These might do something, and should at least bring up USB
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 670034eef48d63cdaec8d271fa93da984ffe2ea9
Merge: 8c5ebaf d374d6b
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jan 12 10:57:22 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d374d6be7eb040457f4df6c38b5d057f26ee741c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 12 09:45:31 2013 -0800

    micropeak: Record samples before boost detect
    
    This saves a ring of 16 samples while waiting for boost, and then goes
    back through those looking for the first sample higher than the ground
    and writes the remaining ones to the log so that we get a more
    complete log of the flight
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85baf657e7ea6debbed9effc6f8daff7ef09a5d8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 23:42:41 2013 -0800

    altosui: Reference altosuilib.jar and altoslib.jar from original dirs
    
    The symlinks may not be created when the build is getting run as the
    dependencies aren't in place (thanks, automake).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 962e3bd0461f187cd599ba54e7129c84f97d4c4d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 22:11:36 2013 -0800

    altosui,micropeak: Link altoslib.jar and altosuilib.jar before compiling
    
    The symlinks for the libraries have to be present before compiling stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f6b1570277c326c00d5da274f608fbdeb91c911
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:42:23 2013 -0800

    micropeak: Note when libaltos fails
    
    Not getting any device list back from MicroUSB means the library
    wasn't found, so pop up a dialog box explaining the situation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3e807ffcd34d514f36bc11adbae9337991a1743
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:41:35 2013 -0800

    micropeak: Create 'micropeak' script correctly
    
    Add altoslibdir, remove -cp argument
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98e74150040e444ed6480ef3d107caa54c205ef9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:38:15 2013 -0800

    micropeak: Demonstrate how to hide various parts of the graph
    
    This just shows how to disable a series and axis; it's not used here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 505ef49a041740fe7cbb5c537b68d22e5fb6c0be
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:37:18 2013 -0800

    micropeak: Report recorded apogee instead of searching flight data
    
    This makes sure we report the true apogee value instead of looking for
    the maximum height value in the flight data, in case the flight
    recording ended before the apogee was reached.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e94f9547a566c74c30b6321bc073b8bdcb071604
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:34:24 2013 -0800

    Fix up 'make fat' to build all libs and micropeak too
    
    There are now three libraries to build for both altosui and micropeak.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 12a9bd0479db25cbe45c0385913315cc1e0bc892
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:26:20 2013 -0800

    libaltos: Need to check for tty/ttyACMx before ttyACMx
    
    Otherwise, we'll find 'tty' when looking for 'ttyACMx' and no good
    will come from that
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ed6b13e87c1cc2d6618b6ba3a293ea6e3b5752e
Merge: acff2f4 d409417
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:48:12 2013 -0800

    Merge remote-tracking branch 'origin/micropeak-logging'

commit acff2f466031fd1a8533fc315411c3734a8bacc6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 10 21:27:32 2013 -0800

    altos: Time out reading packet data from cc1120 after 100ms
    
    Sometimes the radio will give a spurious wakeup indicating that a
    preamble seems to have arrived, but no packet data will appear. In
    this case, abandon the packet reception and go back to waiting for a
    preamble again. This releases the SPI bus for other users and also
    avoids missing packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f715b5da3424adacc5a7f1e001e1dd7fa6f50385
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 9 15:29:01 2013 -0800

    altoslib: Clean up AltosRecord clone methods
    
    Make the AltosRecord version abstract and then implement suitable
    versions in each subclass by creating copying constructors for each
    class.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42733d2823b1ecf54c03881fc120067868c0ff4c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 9 15:23:46 2013 -0800

    altoslib: Don't smash existing GPS pad alt after boost
    
    Leave the existing GPS pad altitude value in place after boost by
    checking to see if it was ever computed before resetting it to the
    barometric pad altitude. This makes GPS height values relative to the pad.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c5ebaf88b459b09924753a8077393a7b0639133
Merge: 59f355f d7d259c
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 8 22:12:17 2013 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d409417ff8e9ed9d406bf1c04542a4ecb574768b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 6 13:20:25 2013 -0800

    altosui: Create .dmg file for Mac OS X installations
    
    Easier for users than a zip file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2582e9b45bb81ff70fbd5c8581370c8c1b5bd5e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 6 13:00:00 2013 -0800

    micropeak: Add ReadMe.rtf to Mac distribution
    
    There are *two* steps to installing MicroPeak on Mac OSX. Best help
    out the poor user by explaining that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f05b1996122b6c6bce81ca33e85c2a65c3ded18
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 6 12:52:25 2013 -0800

    micropeak: Create Mac OS X package
    
    Includes the FTDI driver and the MicroPeak app
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d663da13db60e1200535282ee1a0ea6305cad98c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:59:26 2013 -0800

    micropeak: Suggest filenames for saving data
    
    Uses the format '<year>-<month>-<day>-flight-<number>.mpd'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c9eecfae02e8499e7c3d53a4386f026c54b04cd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:38:20 2013 -0800

    micropeak: Create .dmg file for apple. Create micropeak-jdb script
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20d54cae1eeca6c5d05bfacbafd77c8aa72247c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:37:30 2013 -0800

    micropeak: Use new libaltos entry point for FTDI devices
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7e71e2042f2bfc24adcc57cecfe26368eb03e8a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:36:50 2013 -0800

    micropeak: Move raw view caret to top. Make raw text uneditable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70c7674b53d77e9995a235bb2dc455cb53d9e81e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:36:40 2013 -0800

    micropeak: Remove debug printf for command line
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 746ae98829a0fc15577ae0f7b506112178f481e3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 5 10:35:20 2013 -0800

    Add separate code path for listing FTDI devices
    
    This lets the library do different things for FTDI devices, as is
    required on Windows (for instance)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca284d8bef2f4bd360eaec58048ba9abdafc55bd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 18:14:40 2013 -0800

    micropeak: Use data.export for Raw display. Change to MPH
    
    data.export already knows how to format stuff, so use that to
    construct the raw data presentation for the GUI too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81088b42b3ea899c8d1b3f09ee4fe24378fa03c9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 17:40:19 2013 -0800

    micropeak: Export in lots of units
    
    meters, feet, mach and gs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f20781010a6560b7b359af269c502d098917c446
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 17:31:01 2013 -0800

    micropeak: Add command line export option
    
    micropeak --export <foo.mpd> will create <foo.csv> full of useful data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 36e9603f74b85776ac049758021b51909161aeb1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 3 17:30:29 2013 -0800

    micropeak: Add Mac OS Info.plist file
    
    needed to build a Mac OS X application
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 722dc277dee915dcd09d3d65c0ee19173b114ef7
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 16:30:44 2013 -0800

    micropeak: Change graph tooltip units on the fly
    
    Make sure the tooltips show the right units when they change
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e4c5b0a6ed3594cff6ab71398c172daa7c67177
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 16:19:33 2013 -0800

    micropeak: Use JTextArea instead of TextArea
    
    Looks nicer and doesn't appear to have the same weird clipping problem
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1979063928f1cdfc75c01ec098164c2822a5138d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 16:07:49 2013 -0800

    altosuilib: Fix install issues on Linux
    
    altosuilib.jar wasn't getting installed
    micropeak was using the wrong name
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31fa139578a86821844e3e2efb1a84bdea4f1370
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 12:24:44 2013 -0800

    micropeak: Add view of raw data in GUI
    
    Looks just like the export file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c423d9287c6b9ea7233f5e3430682cb1c865da1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 11:44:32 2013 -0800

    micropeak: Add CSV export
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93d640de65a1ecedfef89c96521c21632f96f372
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 11:22:11 2013 -0800

    micropoint: Add MicroDataPoint
    
    This holds height/speed/accel data all in one place
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0933f2ed5791cfdc28242cd60be3942556f4ed20
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 10:48:56 2013 -0800

    altoslib: Remove unused fake product_micropeak_serial
    
    Code cleanups have made this no longer useful
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb670e9b7576563d747ae5c9416371f145455ec1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:50:09 2013 -0800

    altosui: Remove duplicate AltosUSBDevice
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc404bee7163a369eb1d95e0942b676bd3f95574
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:41:42 2013 -0800

    altosui: Use shared AltosUIListener
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0bbd3e2571336b5f5872759b5010148325efbaa
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:40:13 2013 -0800

    altosui: Use shared AltosUIFrame and AltosUIDialog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae09bd641a86970763380f3028f987ffcb791020
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:33:36 2013 -0800

    altosui: Use shared AltosFontListener class
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8af405f1ac4d1b930f10465fd0270a49176f16d1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:31:35 2013 -0800

    altosui: Use shared AltosDeviceDialog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 605b752080827bb59fcff5af9f1eab9fd5dad76b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:09:10 2013 -0800

    altosui: Remove AltosVersion.java
    
    Version data now stored in AltosUIVersion.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ce43661834920c3a8f3a1b6e1c555fb952b512d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:06:41 2013 -0800

    altosui: Use altosuilib for configuration
    
    Start moving to shared UI code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a5666bcf4949b846589c000e1620afe39593f57
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 2 09:06:22 2013 -0800

    libaltos: Remove a couple of spurious debug printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9efc57e4052e3c11218973f7666ad18ea5cf2a5a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 23:15:14 2013 -0800

    Rename AltosConfigureUI to AltosUIConfigure
    
    Leave AltosConfigureUI for AltosUI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 103eaa674be7582437aa850f0fd82788e10f244b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 23:10:04 2013 -0800

    micropeak: Check CRC on downloaded
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4dae5b876b089c17c87c72df2ad2fa5ec4f1657c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 23:03:29 2013 -0800

    Build micropeak by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ac109132d1878abbd277ae21215716326404781
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 18:20:23 2013 -0800

    Build installable versions of MicroPeak GUI
    
    Makes windows/mac/linux versions. Windows version appears to work on
    Wine at least.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d94ceed48be439f368d597bf06ed1e8adc4ef46b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 17:10:55 2013 -0800

    micropeak: Add 'Close' menu item. Fix start location
    
    Let the window system pick a spot to place the application
    windows. This avoids having them all sit on top of one another.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 982b272920fcb444fd399941cabe613d8ac7104b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 16:57:31 2013 -0800

    micropeak: Fix chart colors
    
    Need to apply custom colors after setting the theme
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d83587c3c66b730cc54ca153714eee520ee40b2c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 1 15:30:11 2013 -0800

    micropeak is code complete now.
    
    Added save and download functionality. Removed 'new' from file menu.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65b512c890a3ccf487655b79305ab1cfcf49259c
Merge: 434e946 d7d259c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 14:24:59 2012 -0800

    Merge remote-tracking branch 'origin/master' into micropeak-logging

commit 434e946aa79b5a7e60799f996887bc6467889b92
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 14:22:37 2012 -0800

    Allow CC1120 to sit on other SPI busses
    
    Reading the incoming data bypasses the SPI API and touches the SPI
    data register directly; which port that is needs to be specified in
    the pins file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2bd6aca54fc465995d6985c8799cd0d016c9a543
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 14:17:26 2012 -0800

    micropeak: Add flight stats pane
    
    Shows graph or stats in alternate panes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56a1210a7b04a3623d19ec282f26fecc79c126dd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 11:42:57 2012 -0800

    micropeak: Use altosuilib
    
    This removes a pile of code stolen from altosui
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6db192898eebf750c4d51516eff7916bc4da493b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 11:38:53 2012 -0800

    altoslib: Add units change notification list
    
    This allows the UI to automatically respond to changes in the
    preferred units.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03496dc47372c40f7faae1766b0e729a1feeab7c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 31 11:32:56 2012 -0800

    Create altosuilib to share code between altosui and micropeak
    
    Need to convert altosui to using it, but that shouldn't be hard
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7d259c7b3eedcc1c185d2b7e3c33e829bd7ce96
Author: Keith Packard <keithp@gag.com>
Date:   Fri Dec 28 23:05:31 2012 -0700

    altos: megadongle radio int is C13, not C14
    
    Hard to get interrupts when listening to the wrong pin
    
    Signed-off-by: Keith Packard <keithp@gag.com>

commit f7a56152808c7838c1886884bb77de2705ab076c
Merge: daf8776 b70ca5e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 28 21:50:13 2012 -0800

    Merge remote-tracking branch 'origin/master' into micropeak-logging

commit 59f355f5288b42b2e47743d06e41e55819a55f64
Merge: 099d2b0 b70ca5e
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Dec 28 22:30:26 2012 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit b70ca5eaf1c3d60bd9adf6835e1247f4147ca9c8
Author: Keith Packard <keithp@gag.com>
Date:   Fri Dec 28 19:35:46 2012 -0700

    altos: Fix MegaDongle CC1120 chip select pin
    
    It's on A0, not C5
    
    Signed-off-by: Keith Packard <keithp@gag.com>

commit a6e116515f5e4522adbfcd1900885c2a6034b57c
Author: Keith Packard <keithp@gag.com>
Date:   Fri Dec 28 19:34:33 2012 -0700

    altos: Fix cc1120 debug code to build on megadongle
    
    RDF function had changed, and APRS isn't available on megadongle.
    
    Signed-off-by: Keith Packard <keithp@gag.com>

commit daf8776f8646ba187f1a17f7aae797503bed3f2a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 28 16:34:48 2012 -0800

    Lots more work on the MicroPeak application
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 099d2b0ea59d825bd69a3fbb5523b9cbb9430ce8
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Dec 28 15:36:24 2012 -0700

    update stlink-pins document to make it clear 4-pin MicroMaTch is our
    standard STM32L programming connector, and the big MM thing was v0.1 only

commit 9da9adc2718928de2af65a68cddbcc636cc3e9e8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 25 14:45:49 2012 -0800

    Add file chooser for MicroPeak
    
    Needs reasonable directory tracking
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf8e1b6eecb2bae12ffdbd730bd6ec12ccdaf23a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 25 14:23:29 2012 -0800

    Start building MicroPeak GUI tool
    
    Download, save and analyze MicroPeak flight data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 868ef0c9c4b208c02a87180b0eede329369bdc77
Merge: 669cde8 57487e7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 25 14:20:42 2012 -0800

    Merge branch 'master' into micropeak-logging

commit 669cde8a87d88ceae89e369c1d38b88c9f8198cf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 25 14:19:19 2012 -0800

    Move libaltos to top level
    
    This will let it be shared by the new MicroPeak gui
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57487e78b90465a21c87cf30deb0aeaba0887332
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 18 23:15:20 2012 -0800

    altos: Actually record ground averages for 6dof sensor
    
    This gets the long-term averages for the 6dof sensors recorded into
    the first flight log record.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 244415c515f21328cffe88d1369949a4af49a177
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 18 22:59:36 2012 -0800

    altosui: Clean up graph a bit, remove shapes, improve tooltips
    
    Sometimes graphs would get shapes at each datapoint which was
    annoyingly cluttered. And, the tooltips used a format that was
    difficult to interpret.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7d35b0bd86b912c43a21a275347fca201079847
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 18 00:39:37 2012 -0800

    altos: Add distinct LED pattern before writing log data
    
    Otherwise, the whole log looks like a an extra altitude digit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23dc9a63ae8bc982d9352cfb7a3f508d8a08c374
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 17 22:58:49 2012 -0800

    altos: Make micropeak 'serial' interface work
    
    I prototyped the mpserial interface on a breadboard and tuned the
    circuit to register the LED correctly. Then adjusted the serial code
    to send bits at the right speed and format.
    
    The logging contents are now in hexdecimal with a CCITT CRC-16
    computed to verify correct reception.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b1d37be4c024e9690107c693d9819229025966fa
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 17 17:03:41 2012 -0800

    altos: Average MPU6000 values on ground for later use
    
    Having long-term ground averages recorded to the eeprom file will make
    post-flight analysis of the data better.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b6c9e8ffc87481a23ba90fa22df7c9421e2cd6a6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 16:52:15 2012 -0800

    altos: Re-enable beeper on megametrum
    
    I turned it off during radio testing and forgot to fix that before committing...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd7c30324461b2aed83b86bfe4323180664123cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 16:08:33 2012 -0800

    altos: Add new MARC status pin interrupt bits to megadongle
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dfff41c2bec16fe4c7b198a4720eb40d8e740ac4
Merge: 22a58b0 00bc1a0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 16:06:41 2012 -0800

    Merge branch 'aprs' into 'master'

commit 22a58b0f9b82ea8c7abeda79ca7a4cd21c3dc93c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 16:04:05 2012 -0800

    altos: Wire up another CC1120 GPIO to get MARC status changes
    
    When the radio drops out of RX or TX mode due to an error, it changes
    the MARC status, and sends pulse down a configured GPIO. Use this to
    tell when something 'bad' happened during TX or RX so that we can
    recover from losing the SPI bus in the middle of transmission or
    reception.
    
    Without this, the radio would change state and we'd never know,
    leaving the radio code waiting for an interrupt that would never arrive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e3ac3f2038cc3a43252fc8f820a1373a637ab83
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 13:31:45 2012 -0800

    altos: Test APRS rounding by using coordinates near the boundary
    
    This selects lat/lon and altitude near the rounding boundary to check
    that the resulting APRS data is correctly computed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9bc701ce1132f04ec90ef22e6a7a90c67918737b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 13:30:20 2012 -0800

    altos: Document what HAS_BOOT_RADIO does in the m25 driver
    
    HAS_BOOT_RADIO causes the m25 driver to abort any ongoing receive in
    case that is holding the SPI bus.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b4cfd8719e3fd4a2904369e176182c870a3b43c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 13:29:31 2012 -0800

    altos: Round APRS data correctly
    
    Apply rounding once at the start of the computation, then truncate
    after that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00bc1a090a294e103370b8ab0a0fe5d7a2acfe92
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 16 13:25:54 2012 -0800

    altoslib: unconfigured radio frequency data is now -1, not 0
    
    This changed when AltosConfigData was cleaned up, so now frequency
    settings must check for positive numbers rather than non-zero.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 034dfc4f9bef049b1fb5704873dd76f6a3a9949d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 15 15:07:07 2012 -0800

    doc: Add warning about matching battery voltage.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4925a6f2f4edd5b54641a5240030e5c0e3e95db6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 15 14:47:22 2012 -0800

    doc: Add paragraph noting differences in JST polarity
    
    Looks like the 'standard' polarity for 3.7V lipos using JST connectors
    in RC aircraft is swapped from what Spark Fun uses. Note that in the
    docs to try and keep people from wrecking hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6fa1ec0dbf2a4eda8d061c67b3779b83b88f29f0
Merge: f140931 73422bf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 14 19:29:50 2012 -0800

    Merge branch 'micropeak-1.1'

commit f1409311761d65e85ac08c38c9b9a0114cc8f535
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 14 19:28:49 2012 -0800

    altoslib: Discard previous flight state on SN change
    
    A previous change discarded previous *telemetry* state, but failed to
    discard any previous overall flight state. This would reset some of
    the data fields, but wouldn't reset the GPS state and max measurements.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8dbe8abd034a2d1ee2ec0380ec376722a4ecbd71
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 14 19:27:56 2012 -0800

    altoslib: Only list flight logs for boards that we know have them
    
    Boards that don't have flight logs will generate a nice 'Syntax Error'
    and fail to initialize.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc2e5beb9173663e1e37a9b5a7b6eea1046222f7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 14 11:11:39 2012 -0800

    altos: Log baro readings for MicroPeak
    
    This logs barometric data every 192ms (more or less) to the 504
    remaining bytes of internal EEPROM storage in the ATtiny85. This
    provides 48.192 seconds of logging.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73422bf72e07b169bfe37b02518b9e7479931971
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 22:53:36 2012 -0800

    altos: Note that Lithium battery may be included with MicroPeak
    
    I'm not willing to say that we'll always be able to include a battery,
    but we can certainly try, and they're certainly cheap enough that we
    should.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 688a9458bb03a81e71554c14295d1baacbbbd530
Merge: 816c6b5 c8866fb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 22:36:59 2012 -0800

    Merge branch 'micropeak-1.1'

commit c8866fbae2b00b1d7a7ddf89a3f971a75d3dcd60
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 22:35:05 2012 -0800

    doc: Update MicroPeak doc to include EEPROM and programming info
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 816c6b5d087694a9db9c34cc5ec7671a1487d9b9
Merge: a4a8418 a4678cd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 11:10:14 2012 -0800

    Merge branch 'micropeak-1.1'

commit a4678cd848da994dc893b75790e4c9a86e54d895
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 11:01:48 2012 -0800

    altos: Log in-flight data for MicroPeak
    
    This logs the low 16 bits of the pressure value to the remaining
    on-chip eeprom. It can be read out with a standard AVR programming
    dongle.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07a45c50429389ae7b51e12bc847d34fb1577bc6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 12 10:57:03 2012 -0800

    altos: Add load-slow target for MicroPeak
    
    This sets the programming clock to 1/4 of the 250kHz clock used by the
    MicroPeak firmware, allowing the device to be reprogrammed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69447d8ad3f5a1e1f59939477afc7720a437fadc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 11 23:43:30 2012 -0800

    altos: Tim Van Milligan suggestion for µP -- delay before showing last flight
    
    This gives the user time to move their finger out of the way of the LED.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4a841828924ee37f5201d4ff0aec38459f2d802
Merge: b26e837 d309fcf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 11 14:42:43 2012 -0800

    Merge branch 'micropeak-1.1'

commit d309fcff54fe6904fb860f33c15fcb7d1c96e91b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 11 14:41:53 2012 -0800

    altos: Increase MicroPeak blink times a bit
    
    make the 0 longer (1 sec now), and make the time between digits longer
    (also 1 sec now)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b26e837a6f18641aae9372aab22168849ff10812
Merge: 1489c7f c233ef6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 9 18:33:31 2012 -0800

    Merge branch 'micropeak-1.1'

commit c233ef67f42c14cb1d0e0542a9523b279f826af5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 9 18:28:33 2012 -0800

    altos: Use alt_t value to hold displayed height in micropeak
    
    Heights are 32 bits (to get .1 meter resolution) in micropeak; make
    sure we have enough bits while blinking out the computed value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit defd5d0784a754be30e3295067fbc85a108ad172
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 9 18:27:49 2012 -0800

    altos: Make sure pa to altitude conversion is done with 32 bits
    
    We need 32 bits to hold intermediate values, even if the final
    altitude is reported in only 16 bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24948ea1d41f2a7c96ac09e35d1250909e5726ae
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 9 14:32:35 2012 -0800

    altos: Store altitude in 32-bits for MicroPeak
    
    Needs all 32 bits to store .1 meter resolution
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf47efdc86f0b421fcf4389669fbecf6fa3f5934
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 22:49:34 2012 -0800

    altos: Stop including profiling and stack guard code in megametrum
    
    These take CPU time and memory and are intended only for debugging
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4339d5c8e6373119e5377fe5c883b6b0e6ce37f6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:38:17 2012 -0800

    altos: Fix aprs test to not allow callsign configuration
    
    There's no configuration to take a callsign from...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abf82991b8e69754ebc4857ce78ac4a4b01f16e4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:35:15 2012 -0800

    altosui: Add APRS interval configuration to UI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd05421991b596fe9cf73ee25c9046b0fb4e32f7
Merge: 1f79706 1489c7f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:34:10 2012 -0800

    Merge branch 'master' into aprs

commit 1489c7f75f7b9ce547ac49c157b440c4f9131ef4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:27:48 2012 -0800

    altosui: Call config UI from AltosConfigData directly
    
    Don't make AltosConfig have a pile of config code, stick that in
    AltosConfigData instead. This uses a new interface, AltosConfigValues
    to get from AltosConfigData to the UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f797066857b171b19829e2bb7187b8faf37d07c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:20:02 2012 -0800

    altos: Use configured callsign in APRS packets
    
    Instead of hard-coding my own call sign...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b28323ce91d23db5e1c3cbd1309c72aafcfbe235
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 17:18:32 2012 -0800

    altos: Make APRS interval configurable
    
    This provides a separate configuration value for APRS, allowing the
    interval between APRS reports to vary.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f8a704268f0978a39b9c7983e049ef55914f7280
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 10:15:25 2012 -0800

    altos: Fix up APRS packet sending code in cc1120 driver
    
    This fixes the FIFO management, ensuring that the data are streamed
    into the radio fast enough to keep the packet continuous. Sounds like
    it works, but testing with an actual APRS receiver is required.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 748e42ebf1dfb1efd5dec6ddd93f5c7aeedeb01d
Merge: 75912f8 c10f9a4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 10:14:11 2012 -0800

    Merge branch 'master' into aprs

commit c10f9a438ed5789479d21c78153ca7f14c05534c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 10:05:51 2012 -0800

    altos: fix functions calling pollchar to use 'int' to hold the value
    
    AO_READ_AGAIN doesn't fit in a char anymore now that stdio is 8-bit
    clean, everyone using pollchar must use an 'int' variable to capture
    the whole value from pollchar.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16fd9009d8b034fd8d208115317f65fabe10072a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 7 08:32:22 2012 -0800

    altosui: Use AltosConfigData for altosui configuration dialog
    
    Instead of a separate config language parser, share with altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e572651b36ad557d716fb14e76e3eec132e5ebdf
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 17:08:39 2012 -0800

    altoslib: Make AltosConfigData parse all of the config data
    
    It was missing quite a few. This also speeds up parsing of config from
    TeleScience, TeleBT and TeleTerra by not listing flight info on those
    products (where it doesn't make sense).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb4f2b62d50aca615bd4f9f230a1736880125e3e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 17:07:25 2012 -0800

    altoslib: Make AltosMs5607 capable of parsing ms5607 info lines
    
    This moves the parsing from AltosMs5607Query
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4e86af6de52ea0bacf80e3936b6cd17c1cbf898
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 17:06:17 2012 -0800

    altos: Change 'flight-number' to 'current-flight'
    
    Avoids ambiguity with stored flight info, which starts lines with 'flight'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d095eb1987f35d0d4e6540bf335e1faaa7c86ec
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 16:29:36 2012 -0800

    altos: Shrink 'ao_version' by calling printf fewer times
    
    Each printf call costs quite a bit of code space on the cc1111, so
    instead of making multiple short calls, make one longer one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75912f8af04cecc0bbffecb2072d465c3744d4e8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 10:30:46 2012 -0800

    altos: Send APRS packets even during ascent
    
    If you're using APRS, presumably you want to watch the rocket going up too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f84c0adbfa494ddc7dbe276796d999560be9438
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 10:28:14 2012 -0800

    altos: Allow telemetry, rdf and APRS to be individually controlled
    
    But, only when APRS is available so that TeleMetrum and TeleMini don't
    change behaviour
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f661da527fb4a3a492f5322e2a718d441e1cde83
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 10:23:39 2012 -0800

    altos: Hook up APRS to telemetry loop
    
    Send APRS packet once every 2 seconds
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1e6fa32b856b91afa355cd272d2d7287d3ccca1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 6 10:12:11 2012 -0800

    altos: Hook APRS up to the radio
    
    This adds an arbitrary-length packet writing function to the radio
    code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51ef826372f466f44901c4c609ed6a987d30fda4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 23:39:47 2012 -0800

    altos: Prepare APRS for use within altos itself
    
    Make all variables static, const-ify constants, change the public
    name of the single entry point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74969483736381858484dca9ebb528d9d2d73f5b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 22:23:46 2012 -0800

    altos: Start restructuring APRS code to create and send packets
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 933d654ec917d9794e87407a7e579438bb738d54
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:37:47 2012 -0800

    altos: Remove a bunch of time bits from the APRS code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 684f53d67379cf2ae696fab93d81e49208dfa43c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:34:05 2012 -0800

    altos: Remove APRS sine-wave table
    
    We're generating a lovely square wave, which appears to be decoded
    just fine thankyouverymuch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b79f448818126258174044a23db5b4f330fd5986
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:25:29 2012 -0800

    altos: More APRS trimming
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bb7200f85db1bc6e39e72e671be9a7aef9c8f09
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:22:55 2012 -0800

    altos: Remove more unused APRS code
    
    Getting down to a reasonable amount of code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d717edd18a35376811d6be0d0c7522ee8cc426f9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:13:37 2012 -0800

    altos: Reduce printf calls in APRS packet generation
    
    Merge all of the data into a single printf call
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e1254c4f3261f66d8070250898fe906eb80d8f2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:08:19 2012 -0800

    altos: Strip out everything but the basic position reporting from APRS
    
    Any useful data will be sent over the digital link; APRS is strictly
    for position tracking
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe820a8a2dc6248b5edb96a9521536d41b936116
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 21:01:59 2012 -0800

    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    altos: Switch APRS to standard position reporting form
    
    Stop using NMEA sentences for position

commit 03f844ddcd95166211451fda0b20f9b15496294e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 20:11:35 2012 -0800

    altos: Add missing ao_aprs.h file
    
    This has defines for the planned APRS interface
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b1f186a574c22cebd9daba9d352ec82556c3b28
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 20:10:54 2012 -0800

    altos: Generate all of the APRS messages
    
    Note that two of them are in NMEA form, which some receivers appear
    not to parse
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c2c47dd7af2fc95de852178c4244daba02f44ed
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 19:44:09 2012 -0800

    altos: Add test scaffolding for APRS
    
    This moves some test code out of ao_aprs.c and into ao_aprs_test.c,
    and then adds Makefile fragments to compile and run the resulting
    program, creating a wav file as output
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d65751fded3321b8a350e4140c44f87fec95aab2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 19:30:27 2012 -0800

    altos: Make aprs code output encoded packets to stdout
    
    This generates a .wav file containing a single APRS packet. This has
    been tested and appears to be successfully decoded by an APRS receiver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 024e35dc6a0356adfc801a023d5ec208cf3996cb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 5 09:59:16 2012 -0800

    altos: Add Pico Beacon code as ao_aprs.c
    
    Pico Beacon hooks a GPS to an AD9954 DDS radio chip with a PIC. It
    directly synthesizes the necessary AX.25 packets to do APRS
    reporting. We're going to appropriate the code for use in Mega Metrum
    to (optionally) broadcast APRS packets.
    
    	http://ad7zj.net/kd7lmo/aprsbeacon_code.html
    
    Signed-off-by: Keith Packard <keithp@keithp.com>
    (

commit ce12787b56f699166cafe4cdee9e2a4d8e66ebed
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 4 09:45:01 2012 -0800

    altos: Break out GPS speed resetting sequence
    
    To set the GPS speed, we delay for 1/2 sec, change speed, then delay
    for another 1/2 sec.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1778937e136fdecf8607dd9b358cf972d87ca34
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 4 09:43:56 2012 -0800

    altos: shrink ao_companion_status by merging printf calls
    
    Multiple printf calls are longer than one big one, so merge these
    together to save some code space
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6f440767eece896507903e6e58849f11088829f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 4 08:48:05 2012 -0800

    Another ao-mega addition which shouldn't be here
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f52e8afce514a6b943c92aaa6d7189d11d9fe76
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 4 01:34:03 2012 -0800

    ao-tools. Oops, let 'ao-mega' slip into build.
    
    This is a tool to parse ao-mega eeprom files; not sure it'll be that
    useful, and it's certainly not usable *yet*.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4d5d411679d074295d4722f4887fd1cf4f0906c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 4 01:30:39 2012 -0800

    ao-sky-flash: Clean up debug printfs a bit
    
    This makes debugging output a bit cleaner
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f6b3790667d9b92370b4fe0dad5626929fea2ba
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 20:51:47 2012 -0800

    altos: Make skytraq reflashing code try both 9600 and 4800 baud
    
    This lets it communicate with the ROM code which boots at 4800 baud
    instead of 9600 baud.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd8b2eadab12965d232640449b1d1c9f2484238c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 17:36:40 2012 -0800

    ao-tools: Add ao-sky-flash to update GPS firmware
    
    This uses a new feature of AltOS to directly connect the GPS chip to
    the USB link to reprogram the former.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 860d0526737295c695f8e6a790d72b49eb4a686d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:10:43 2012 -0800

    altos: Add support for reflashing skytraq GPS chips
    
    This simply switches the skytraq port to 115200 baud and then
    essentially connects it directly to the USB port by forwarding bytes
    in both directions.
    
    Once started, the only way out is to reboot the board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c90ece979f3c95cc6c557c5a2ba8f4a0ce78e173
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:08:41 2012 -0800

    altos: Expose GPS serial fifo on MegaMetrum
    
    Necessary for direct access by the GPS reflashing code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae0ddb0f866a26867f0147e0811717810f74c9ef
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:05:19 2012 -0800

    altos: Add ao_task_minimize_latency to reduce IRQ delays
    
    When set, this causes the task switching code to avoid blocking IRQs
    while looking for an idle task as that can increase IRQ latencies
    enough to drop characters at 115200 baud on the cc1111. Note that this
    *also* eliminates the ability to use low power modes as we cannot know
    at any point whether some interrupt has come along and woken a task.
    
    Has no effect when using task queues as those require IRQs to be
    blocked while looking at the queue. Shouldn't be a problem there
    though as the check for no running tasks is very cheap.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2c2d04f07253a90c4f7da49df43c3969119516b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:04:24 2012 -0800

    altos: Use ao_xmemcpy in ao_log_telem.c
    
    This eliminates the libc generic version in TeleTerra
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7db14905af5cbbfa47d1a2026cce6aea9e5aae7a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:03:45 2012 -0800

    altos: Add support for 115200 baud serial rates
    
    Necessary for flashing skytraq chips
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b65402361f36a0c722977bcb63edb26fda0db28
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 16:01:07 2012 -0800

    altos: Make stdio 8-bit clean by making pollchar return int
    
    We were stealing one value (0xff) in the return value from pollchar to
    indicate 'not ready yet'. Instead of doing that, use the integer value
    -1 and have pollchar return an int instead of a char. That
    necessitated cleaning a few other bits to make sure that 0xff wouldn't
    get promoted to -1 on accident.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0fa9ce23dd63846337872d6d666a469512614d07
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 15:10:59 2012 -0800

    altos: Share cc1111 reset/debug-start code
    
    These sequences are very similar, differing only in whether the dbg
    clock line is toggled while holding reset low for a while.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb01d968f21a171682e6358641edaf5eef815a66
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 15:05:31 2012 -0800

    altos: Shrink cc1111/ao_dbg.c a bit
    
    Share code for osequence of ao_dbg_long_delay(); ao_dbg_send_bits()
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81648829defbaf49fc98c4520540f7a20c50c417
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 30 15:04:21 2012 -0800

    altos: Share getnibble function
    
    Two implementations of the same function, one in cc1111/ao_dbg.c and
    the other in core/ao_send_packet.c.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 289ead258e217bc10493caab12a8b477f1bc2865
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 29 20:36:51 2012 -0800

    altos: Make TeleBalloon v1.1 build again
    
    This is untested, but at least it builds now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ceea0e75ac42acac4a20bf88f34bb93fd2768f4c
Merge: 7738ddc 285fccf
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Nov 20 12:37:38 2012 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 7738ddc5dcf4a9609ae2b066a783e3c9fa03d3be
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Nov 20 12:36:26 2012 -0700

    let upstream version rule, don't force use of Debian version in firmware

commit 285fccfa82d89b0decc3b44f413eef9d0c8f1e63
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:36:17 2012 -0800

    altos: Slow down micropeak report timing
    
    This makes reading the LED a lot easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ff0db3979405357003b52022e564a3da75ec3fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:35:39 2012 -0800

    altos: micropeak LED is orange now, not blue
    
    Change the names around to match
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba3532a8ca7083b09fde5827faeb95f0c2f3b07c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:20:52 2012 -0800

    doc: Minor updates to the micropeak docs
    
    Mention light issue in quick start guide. Update run-time estimate to
    40 hours (measured over 44 hours)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1df3e6402489480e30600304bf024481902f9425
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:15:14 2012 -0800

    altos: Clean everything, even if we don't have compilers
    
    This ensures that stale bits aren't left if PATH isn't set right when
    'make clean' is called.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4737c81ee2da826b38cc52efbfb09017e6825ca
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:13:49 2012 -0800

    altoslib: Reset telem tracking state when switching altimeters
    
    This discards any local state when the new telem packet has a
    different serial number
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcb801b145e1ae6f1c0b3418a99245d34dbf5aa4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:10:29 2012 -0800

    altoslib: Allow flight number to be zero
    
    It's zero when there's no storage space on the device. Instead of
    waiting for non-zero flight number, wait for the seen_flight bit to be
    set in the telem tracking state
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c494eecc51f7d80e24e5db7af0021c56cb6871d4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 10:08:38 2012 -0800

    altoslib: MegaMetrum data telem packets have sensor data, not flight no
    
    Setting the seen_flight bit without a flight number leads to bogus
    file names
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70c9fc74a68fdb92569eb73295cfa154cf3768f4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 09:50:54 2012 -0800

    altos: Make Tm recovery mode set RF cal and callsign too
    
    This lets us connect to Tm even if someone messes up the RF
    calibration or callsign info
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa3beed645c7bff08d22a657daffe75059dc7b88
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 18 08:46:31 2012 -0800

    altos: fix cc1120 radio test - state wasn't made static
    
    so whether the radio got turned on was random.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e037fbc004e1aa7d631ae999e587bdde2f6b71c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 17 17:34:01 2012 -0800

    altoslib: Add (disabled) conversion for MS5611
    
    In case we actually end up shipping an MS5611-based board at some
    point, it will be nice to have the java code on hand
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0606dc013d8b89fd5de0548af0de20fdab5c27d4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 16 22:19:17 2012 -0800

    doc: Start updating AltOS documentation for multi-arch
    
    Now that AltOS supports many processors, start updating the
    documentation to match.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3205a1d246e5ed229256aa787f26e6e122b7a2f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 1 17:52:22 2012 -0700

    altos: Build megadongle when possible
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 793b950083d09ead4f6230e041ad43aa9f5f2179
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 1 10:51:41 2012 -0700

    altos/megadongle: Add megadongle product
    
    Looks a lot like teledongle from a feature perspective.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f74d724f92b335d6c0674d0f1fcc650b729401df
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 1 10:50:03 2012 -0700

    altos: Remove legacy telemetry from ao_monitor when not needed
    
    For products not supporting LEGACY_MONITOR, remove the (undefined)
    structs from the ao_monitor union.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4d931cd99a7c91803584b71670e30c0d00217df
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 1 10:49:17 2012 -0700

    altos: Remove 'volatile' from ao_rssi.c globals
    
    No need for this, the variables aren't changed at interrupt time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 86f8b92149d1027b1d6d6b1cae097cfe47b02090
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 1 10:48:08 2012 -0700

    altos/stm: Support LEDs on multiple ports
    
    Split out the bits in a fairly simplistic fashion so that we support
    no more than 16 LEDs still.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcdaa0d748058a7f52a1bdc1a1627dc394762e5a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 30 19:56:51 2012 -0700

    altos/attiny: Remove debugging code which frobs PB1
    
    This was clearly stuck there to debug something; not a good idea...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af8cb40851a5cf5e3bd06ddd85e4e2df16bfbad2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 30 19:44:45 2012 -0700

    altos/micropeak: Run MS5607 at max resolution for micropeak
    
    We've got lots of time, so get the highest resolution baro data available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 371da0c909098092db7b596496df9d58eed43703
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 30 19:41:08 2012 -0700

    altos/micropeak: Clock micropeak at 250kHz to save power
    
    This reduces average current consumption from 2mA to .4mA. This
    makes the battery last longer, but also gets the current under
    something that the typical CR1025 battery can support. Would be nice
    to reduce current even further; cheap CR1025 batteries still seem to
    fade a bit at this current level.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e8a4a00a5bb333d4ee9601d53242a82dfe0372c2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 30 19:39:55 2012 -0700

    altos/attiny: Don't initialize the CS pin in the general SPI setup
    
    Let the CS pin be configured by the driver, which can set the correct
    value before enabling the output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7d2613bb0a6ab1c63e3f6252a3a2358fdfbc691
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 29 17:07:05 2012 -0700

    altos/micropeak: Set boost detect to 10m. Add 30s boost delay.
    
    Wait for 30 seconds before even starting look for boost. This provides
    an opportunity to close up the airframe, potentially causing pressure
    gradients seen by the baro sensor.
    
    Also, require a 10m vertical motion before triggering boost. This
    should limit accidental boost detect while capturing any actual flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d0ece403028e8a4453cc380575ed95c5e00ddb7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 29 11:49:23 2012 -0700

    doc: Add micropeak manual
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 424638446b7c7bb3f4aa6b4764d3e68175dcbf8c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 29 11:48:58 2012 -0700

    altos: Build micropeak when avr-gcc is available
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9ea0ad4024532fd6f87bb6708bf76b0c7aa1c5b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 29 11:47:17 2012 -0700

    altos/micropeak: Switch to MS5607 sensor. Require 4m for boost. Elide dead code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0623bc06a77536b903da09acbd12999d0ed05360
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 29 11:43:02 2012 -0700

    altos/attiny: Update to new interrupt macros
    
    Add ao_arch_block/release_interrupts macros to attiny architecture
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a46c9398a5f02ff4b52b7a4309a51498560cadb5
Merge: e57ab2a 56023cf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 26 14:08:32 2012 -0700

    Merge remote-tracking branch 'mjb/altosdroid'

commit e57ab2a7bfb69c0ef9b5b7fa8e53e20a500e7c6c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 13:42:10 2012 -0700

    altos: Provide ao_task_alarm_tick to reduce per-tick cost
    
    Cache the next wakeup time and check that before jumping to the task
    code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ccf0faa7d26d56deca7928b521d07be40504466a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 13:40:54 2012 -0700

    altos: Leave interrupts disabled while checking for task to run
    
    Otherwise, we run the risk of an interrupt waking a task after we've
    decided to idle the CPU.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b978cd467f9128f3069765dd8fbf8abad3459a4
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 13:38:13 2012 -0700

    altos: Clean up stm arch macros a bit.
    
    Turn a bunch of the macros into inline functions.
    Clean up the reboot method to use the stm_scb structure.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ee031bdab33cc6a1e2a7995a7c3a43f3a64b687
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 13:35:47 2012 -0700

    altos: Clean up cc1111 architecture macros a bit, removing cli/sei
    
    Just reformatting changes, aside from the removal of cli/sei
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff6a439cd24e239abd97107ecedf12dca71e59a5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 13:33:43 2012 -0700

    altos: Wrap ao_container_of value in parens
    
    Keeps the cast from being separated from the value when used
    in expressions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f221c78e6237e0a118ebe85c25e433fe16a7735d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 11:25:42 2012 -0700

    altos: Switch drivers to ao_arch_block/release_interrupts
    
    Stop using cli/sei, which are avr-specific
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56023cf5da9deede9fe627fe327783eceecf08f7
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Oct 25 20:39:20 2012 +1300

    altosdroid: more restrictive commit no. matching
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit bb3f42daffafb497639c2c678f6106ce54523ff3
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Oct 25 20:31:59 2012 +1300

    altosdroid: more reliable branch detection
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 963f7715be6c67056bbd8bbe898639adac64fc29
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 00:12:57 2012 -0700

    Bump version to 1.1.9.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 282f0451dd141db3304ab73e4020a849e59721eb
Merge: 0680d62 78e1de4
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 00:09:01 2012 -0700

    Merge remote-tracking branch 'mjb/altosdroid'

commit 0680d62d57496cea7ae4f1ef317c46e689b28e21
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 25 00:04:27 2012 -0700

    altos/megametrum: Depend on Makefile contents for build
    
    This ensures that everything is rebuilt when the Makefile changes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b49c751749dcd3e78991463c098f8d916f52179d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 23:50:55 2012 -0700

    altos: Add task queues.
    
    This replaces the array-based scheduler with a queue-based one
    instead. It should have the same basic scheduling semantics, but it
    walks shorter lists for each operation, making it much more efficient
    when the system has a lot of tasks.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b13d3c659240e5a8347b1ba7ab0bf1d8355eba3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 22:46:55 2012 -0700

    altos: Add stack-guard code. Uses STM MPU to trap stack overflow.
    
    This marks the lowest portion of the stack as inaccessible to the CPU,
    causing the processor to fault when it reaches it. The fault then
    generates a panic message so that the user can know what happened.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e80fa6de4ccc5c4851eab9fb941f9282d2e3eb16
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 22:35:32 2012 -0700

    altos: Replace __critical usage with ao_arch_critical as needed
    
    sdcc offers __critical as a machine-independent way to block
    interrupts, but as gcc doesn't, we need to use a compiler-independent
    construct instead. ao_arch_critical has been around since the AVR
    port, but some old __critical usages remained.
    
    This fixes a bunch of random hangs when communicating with MM over USB
    or the radio as the various stdio loops were running without
    interrupts blocked between the test and the sleep.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b119e19604aa557a40e848c60d98a67b5f259bbd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 23 22:17:49 2012 -0700

    altos: profiling on STM32L
    
    Add sample-based profiling, using a 1kHz timer
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d34811ba035367bbf26a8510265754f3fbb5a95
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 23:21:38 2012 -0700

    altos: Add ao_arch_block/release_interrupts to avr and cc1111
    
    Stop using cli/sei for AVR, add replacement to __critical for cc1111
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09aa379fc57cd4f30c18c7bda2532a79109354c2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 23:55:00 2012 -0700

    altos: Force beep timer regs reload when enabling beeper
    
    Without this, there can be a long delay between asking for the beeper
    and having it actually start sounding.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 097c931c979d3652ef8e279ba66bb7ce758f37a3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 23:52:49 2012 -0700

    altos: When slave mode first starts, accept any packet
    
    This eliminates the packet sequence matching for the first packet,
    allowing outstanding send data to arrive from the master instead of
    ignoring packets with data until they match the seqno
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 978c16105dd334a4a2807140dbbcc7f306a6b581
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 24 23:55:45 2012 -0700

    altosui: Allow AltosConfig to abort before serial line starts
    
    Check to see if the serial line is active before trying to close it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 78e1de481bfdbf7c7bb908c317b23c8ee275c84f
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Oct 24 20:54:18 2012 +1300

    altosdroid: Add version information to UI
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5ad62b07bef41921b46cb7251072dc24290ee4c9
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Oct 24 20:52:09 2012 +1300

    altosdroid: Add branch to BuildInfo
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 055f3232decc07e064d596469b81cf9869411c2d
Merge: 8ca58e2 9e60fa2
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Oct 23 09:38:36 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 8ca58e20208495ce63b8256a8ffa43932867e8d5
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Oct 23 09:33:17 2012 -0600

    remove local copy of launch-sites.txt and reference to old web location

commit 37a09f1edc57924dabcf2a71794a42e37b5a354c
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Oct 23 19:22:52 2012 +1300

    altosdroid: match only the current version tag
    
    Don't match non version tags - and always return the long format of
    git describe, rather than just the tag (when the tag is on the current
    commit).
    
    Split the commit number/hash more reliably by removing the version tag
    from the result first.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9e60fa214ad2c48fbe8f7e5c437681aa35d249fa
Merge: 27c3157 4b41561
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 22:39:31 2012 -0700

    Merge remote-tracking branch 'mjb/altosdroid'

commit 27c31572f4f63c2282e1cc583f4402337fcb548a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 22:38:46 2012 -0700

    altosui: Allow any non-basestation to be configured
    
    TelePyro has some configuration bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79f4e684713cff6bf999cac52f5d9525a6f7d278
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 21:39:12 2012 -0700

    altos: make check-avr-mem utility executable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4ea2e7c3ed84fb6f4e880da6c5ddf2a83d3ef61
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 21:38:18 2012 -0700

    altos: Allow pyro flight state config to be set
    
    Without these lines, flight state compares can't be shown or set.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e80d7cd18fa4dac98d941e86b5956403a7170966
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 21:37:25 2012 -0700

    altos: Let AVR products override the stack size. Set telepyro to 104
    
    Otherwise, telepyro doesn't have enough ram...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20496608ca287e65302193ee1afe9f0cad3a36e1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 21:36:12 2012 -0700

    altoslib: capitalize 'Invalid' state name appropriately
    
    It shouldn't ever appear, but it seemed wrong to have it not match the
    rest of the strings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe00d1169c65cb289f77093cf281efbd0a5d4e64
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 21:35:06 2012 -0700

    altosui/altoslib: Add support for configuring pyro channels
    
    This provides a UI on devices which have pyro channels other than
    main/apogee.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd619a01bf3489b1df017aca20362757b087ec11
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 22 08:52:08 2012 -0700

    altos: Add state comparisons to pyro channel conditions
    
    Let pyro channels block waiting for flight state changes. This
    allows for pyro channels to be synchronized with the main iginiter
    channels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b41561abf9144e73995ccc18eadad7936d1dd15
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Oct 22 11:55:07 2012 +1300

    altosdroid: add autogenerated BuildInfo.java
    
    * Generated by shell script that parses git describe
    * Makefile rule to call script on every run
    * also includes eclipse hooks to call shell script on build
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 8cb09f8a3e2dae5f7f3d2d3dbbc81ba40b491e75
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 20:57:21 2012 -0700

    altosdroid: AltosState now has speed and max_speed funcs
    
    These pull out the appropriate baro/accel speed values and may use
    some fancier values in future.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4ee3a35dbb1586f65adada0eaf34b7b4e5432eb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 19:51:02 2012 -0700

    altoslib: Add AltosRecordNone.java
    
    oops. forgot a file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e16c33545640f745cec8dc595b2343359efced57
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 17:26:16 2012 -0700

    altos/test: Use MMA655X in ao_flight_test_mm. Add run-mm to plot mm data
    
    Pull MMA655X data out of eeprom file when available. Switch build to
    using MMA655x by default.
    
    Clone run-one to plot a single mm flight
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f789b0b94eb01e3875f7711ce053658c31e75fad
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 17:00:08 2012 -0700

    altosui: Handle .mega files in Landed tab 'Graph Flight' button
    
    Need to check for .mega files here too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a1a1dae3e00bfcddf31c447f915245a7d42e566
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 16:55:00 2012 -0700

    altos: Document mega log packet types
    
    Just add comments to ao_log.h so it's easy to remember which labels go
    with each record.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89c621be35e1a6d3394b0e143391fcf2d94d7b41
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 16:53:23 2012 -0700

    altoslib: Parse GPS .mega file entries for reply/graphing
    
    The .mega file parsing had a pile of leftovers from when it was cloned
    from the .eeprom file parsing code. Replace all of that with the right
    parsing bits so that GPS data will be presented correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7894c27b2b2c3c46a7c107c8acd5977830f006cf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 16:13:14 2012 -0700

    altoslib: Move computed state from AltosRecord to AltosState
    
    Make AltosRecord simply track the raw data and have AltosState hold
    all computed values, including cross-packet averages and computed speeds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dec2e455935a71dec13b84bb886252b7f4a1a641
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 14:11:07 2012 -0700

    altoslib: Compute accelerometer speed from megametrum eeprom data
    
    Duplicates code from the TM eeprom state tracking code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcadf5e55f076604b0b168be0060026110e263ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 14:10:32 2012 -0700

    altoslib: remove a couple of TM log record types from MM log parsing
    
    PRESSURE and DEPLOY log records don't occurin MM eeprom files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f5a453cb4650fc97cc990a9e42242278c29cc04
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 13:42:00 2012 -0700

    altoslib: MegaMetrum eeprom never loses GPS date
    
    TeleMetrum had a firmware bug that would fail to record the GPS date
    and time correctly, that was hacked around in altosui, but isn't
    needed for MegaMetrum. Remove those hacks from the MM path.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84a144e8b479550406323bc3b2cf89026b770746
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 13:02:40 2012 -0700

    altosui: Correct megametrum eeprom filename date
    
    Was fetching day-of-month from the year field
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit db0bbf76b5d739b5d7628bc9139dc8fecd501ac3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 13:02:05 2012 -0700

    altosui: Add new filename filters
    
    Allow the user to restrict filenames to telem, eeprom or mega files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eea141b2f35722bad4cd31d9484d6d794646f815
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 21 13:01:03 2012 -0700

    altos/stm: Stop spewing clock out PA8 pin
    
    This was used to debug the clock bringup, but is not useful anymore,
    and probably a bad idea to boot.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f664da148ae15d46d179d8ecede6fc0bc710ffb
Merge: 3aba5eb 23b0c2f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 18 16:49:28 2012 -0700

    Merge branch 'master' into pwmin-new

commit 23b0c2fe95dbfaa4a8ce603b56b75d12d2c17d8c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 18 16:19:38 2012 -0700

    altosui: Re-add a couple of "unused" values
    
    The values in these calls aren't needed, but the side-effects are, so
    add them back in.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05173876d5984a54929db486c9ce1e19bde79526
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 18 16:02:59 2012 -0700

    Bump version to 1.1.9.1
    
    Prepare for Rocketober/Thrustration
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ceb42f4c96076b01ac05577c9fe461b66e72d30d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 18 15:34:41 2012 -0700

    altos/megametrum: Switch back to using the MS5607
    
    We're planning to ship the MS5607
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a55501660ebab3b858a48483c5df1cfb4e858e4
Merge: 0361235 440365b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 18 15:18:52 2012 -0700

    Merge branch 'master' into mm-ms5611
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3aba5eb5a75dff3e7c8778561c533903eacb110a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 22:33:34 2012 -0700

    altos: Build telescience-pwm product when possible
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f34f0ac7f355149446374a4c82dbf004919bc2dd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 22:21:04 2012 -0700

    altos: Add telescience-pwm product
    
    Split out special PWM-sampling telescience product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 14698c424f833dc6d2fb38f69f5f661804cf8303
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 22:17:25 2012 -0700

    altos: Only enable PWM on telescience_pwm product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac318c19594569532f1fa53b639eefa28d9b7c34
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 18:41:00 2012 -0600

    telescience: correctly calculating rate values with higher resolution

commit da7ac5e95575f6aa1d2514748869771b7686c0e1
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 14:24:05 2012 -0600

    ICP3 working

commit ed5aa2329985ffbaba74514e0555f67fc378a8d8
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 13:41:27 2012 -0600

    Timer 3 working with slower clock and all 16 bits.

commit 1d7e6f5dcb29535cde9b7dfd6998d7889baf835b
Author: Robert Garbee <robert@gag.com>
Date:   Tue Jul 17 13:23:48 2012 -0600

    first work on PWM input to TeleScience, 'p' command displays timer 1

commit 1747ab07dab6f4e977e0c3e83b57510cd668e369
Author: Robert Garbee <robert@gag.com>
Date:   Thu Jul 19 11:40:20 2012 -0600

    telescience: steal last adc channel for icp3 most recent value
    Make the ICP3 rpm counter use in ao_adc_avr.c optional
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 440365bd17d804c2f574c35164612cf1682397d7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 21:54:23 2012 -0700

    altosui: Accept serial number of zero for eeprom download
    
    AVR-based products don't have a valid serial number, and so usually
    report 0. Accept this by making the 'no serial number' case check for
    negative values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d6d90e15db30991bf81060a0876ae8adb843c75
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 21:08:58 2012 -0700

    altos/avr: Use ISR_BLOCK to disable interrupts during slave ISR
    
    This avoids enabling and then immediatly disabling them
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8d8b23ca5e6c2d3a19f8aeda2764b43d25eb9d6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 17:14:05 2012 -0700

    altosui: Print exception stack trace when tracking flights
    
    More useful in fixing the problem
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef9cb19d8b210e02eaa1c657833c1bd5fc619ad8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 16 17:13:04 2012 -0700

    altosui: Handle missing pad distance in descent tab
    
    When the GPS isn't locked, the distance from the pad cannot be
    computed and is left missing. Not crashing in this case is more useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 60880bda2153ba3122c7102cd2bacbcca73b9e0d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 15 00:24:57 2012 -0700

    altos/telelco: Make the RSSI led turn red when no packet is received
    
    This involved splitting out the notion of ever having received an
    answer and having received an answer from the last query.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f31f6652f4b0898214d06d009af823a1ed3b96a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 15 00:24:28 2012 -0700

    altos/telelco: 10ms is not enough time to get a packet back
    
    Not reliable, so bump to 20ms
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fdc00ec143022356bf8cdbb28812f045b439c549
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 15 00:07:57 2012 -0700

    altos/telelco: Only display every 10th box number during scan
    
    This reduces the scan time to about 4 seconds, which seems tolerable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6069e38d6d2f9b37aa8671c41b4a470d92996a4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 15 00:06:57 2012 -0700

    altos/telelco: Crank up SPI speed to cc1111
    
    The cc1111 can handle up to 3MHz, so use 2MHz. Also, crank down the
    packet wait time to 10ms, which should be plenty long for the remote
    box to receive and return a packet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80227c08444d5c82fd43320644cdeec6f34fee1b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 15 00:06:10 2012 -0700

    altos/stm: Declare all SPI bus speeds
    
    Just list them all so users can pick what they like
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44c13005f34fdf7d4831e86e1f3e8729e9b67a68
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 14 23:40:58 2012 -0700

    altos/telelco: Actually set pad when it changes
    
    Oops. Lost the actual assignment to the current pad
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b042f3d6e6b3241cd5e55cf893242ea599d3c0e9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 14 23:24:49 2012 -0700

    altos/telelco: Handle case where no boxes are present
    
    Don't infinite loop looking for something which isn't there
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56ebb0a2f50fd56f4f0b0c695e516bee8fae36fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 14 23:16:45 2012 -0700

    altos/telelco: Only present valid pads
    
    Limit pad display to valid pads, skipping missing ones.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84c56b1e92fca181207c468ea6351db3c2f196fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 14 23:04:44 2012 -0700

    altos/telefire: Report valid channels instead of valid pins
    
    Now that pins don't match channels 1:1, make sure that the report back
    to the LCO names the channels instead of the pin numbers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91b8c8b20cead2836ec835f44b4ca0cf06cbf518
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 15:04:46 2012 -0700

    altos/test: Display MPU6000 values in ao_flight_test_mm output
    
    No computation yet, just making the values visible in the output
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6eec0bec06d2e246ea3c9552818ad3180c1e318
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 15:04:00 2012 -0700

    altos: Define full-scale gyro and accel values for MPU6000
    
    This lets other code convert MPU6000 readings into canonical units
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5caf56e89678637c1afa79700a2fa09aa67dea9b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 15:02:42 2012 -0700

    altos: When missing MMA655x, create fake Z accel value
    
    This avoids overwriting the MPU6000 y acceleration value so that other
    computations using that value can work unmodified.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 321d0f68c04a5a9c6ea7874081e6245d44c48bb4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:39:03 2012 -0700

    altos/test: Add ao_flight_test_mm
    
    This reads mega metrum eeprom files and runs the flight code over it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0ec77f5c90e0b930488ae2ab75efcbba8a3bd1d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:37:29 2012 -0700

    altos: Eliminate implicit 1 byte offset in uint16/int16 functions
    
    Make callers explicitly compute the full offset
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2733d1b71bbac2c5ef4a2c3a1992ba448e981267
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:35:42 2012 -0700

    altos: Split out ms5607 conversion code for use in ao_flight_test
    
    Makes the conversion code available even where the driver isn't needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46abd248fb2eb84f161672ffce121b2203d42be0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:34:28 2012 -0700

    altos: struct ao_log_mega doesn't have a ground temp value
    
    There's no averaged ground temperature recorded in the flight system
    to save there, so just remove the field
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eea1c8da986f9dbd0ca58c926a2bbe01721c1bda
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:33:45 2012 -0700

    altos: Document a few member offsets in struct ao_log_record
    
    Incomplete, but useful even so
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c607bd1442e60fec1421955c996f6aad1d98647a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 13 13:32:56 2012 -0700

    altosui: Parse .mega files from command line
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 162a21dc423c2883a54f7d2a154871ae714d1552
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:27:14 2012 -0700

    altos: Add .gitignore for micropeak
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cfb2d3b1c75916ee69d069519edc675e37e1aa1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:26:08 2012 -0700

    altos: Add (untested) driver for AT24C i2c flash parts
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b9bf8e01e243508297f28b102cb2477dc1bc74df
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:22:41 2012 -0700

    altos: Add initial micropeak implementation
    
    Blinks out max height in decimeters, stores previous flight data to
    internal eeprom.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c732effeb2ef4a4d8bc9599febed74a6ec2f466
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:18:37 2012 -0700

    altos: Allow products to define which LED to panic with
    
    Continue to use AO_LED_RED by default.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 767b74e1466ad4e31746340081d6d60e40359425
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:08:19 2012 -0700

    altos: Megametrum uses altitude-pa.h, not altitude.h
    
    Make sure megametrum gets rebuilt as needed when the various
    altitude-pa related files change
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64500ab11ab76d2309608f8e02a1dd9658963b3e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:04:57 2012 -0700

    altos: Add attiny architecture files
    
    These are designed to work with the ATtiny85 processor, but can
    presuambly be easily adapted to others in that series
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16bad3b6ab65cf31b19152127cb6af69142c5c12
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:03:28 2012 -0700

    altos: Include struct ao_data declaration only when used
    
    Leave it out for products that don't have a ring of sensor data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7751c9cbc630f7251b8988f8da68be9a54ff552c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:02:29 2012 -0700

    altos: Clean up types in Pa conversion testing code. Only test to 40km
    
    A couple of missing 'int' declarations.
    Only test to 40km as above that there aren't enough data points to do
    anything reasonable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 866d10b3faa96f6c5a2c495a2c12a0d2bc8259ef
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 14:01:16 2012 -0700

    altos: Elide ao_altitude_to_pa in flight firmware
    
    Only the conversion testing code needs to get back from altitude to
    pressure, so don't include that code in other environments.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68308908afbd1f04b17056d2be408c89b3578c86
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:59:50 2012 -0700

    altos: Parameterize altitude table access and initialization
    
    This allows projects to store the altitude data in different
    representations or with different access modes.
    
    By default, altitude data is stored in meters, but the initializers
    include decimeter values so those can be used instead if desired.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 175380a436efa35bbfae2ee5e29e12e9ef86fbde
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:57:49 2012 -0700

    altos: Use alt_t for all Pascal-based altitude data
    
    This allows alt_t to be overridden for systems using the MS5607/MS5611
    sensors
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be0a28ee7a6fbd98fc8113db8501bb791a112fa0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:55:33 2012 -0700

    altos: Allow for other mutex implementations
    
    Allow projects to replace ao_mutex_get and ao_mutex_put with macros
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a3ee911353291b04e161d50a181ed4211d467a2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:54:37 2012 -0700

    altos: Allow projects to specify clock at other than 100Hz
    
    Leave the default at 100Hz, but allow it to be overridden
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7795d8309b3e1147bc37d31a0adde42d7dee6cd1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:37:07 2012 -0700

    altos: Prepare ms5607 driver for use in non-tasking products
    
    Micropeak doesn't have tasking, prepare the ms5607 driver for that
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a07b8ba166e05e7d1722c59651ef00e9fb7580d5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 12 13:31:17 2012 -0700

    altos: Split task definitions out to ao_task.h
    
    And only include them if using tasks
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f059f8878a79b3154a19b6803fbc367eda80dc9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 10 14:28:07 2012 -0700

    altos/telefire: Add siren/strobe support
    
    This also involved hacking up the code to allow for non-zero offsets
    for the pad firing and continuity pins.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0361235c9ef56738ba0e97be88a85afef0ce8268
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 8 23:24:19 2012 -0700

    altos: Fix up ms5607 and mma655x commands to work again
    
    These just display the most recently fetched values
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39c5738acdfdf0c87b64de6135fe107971cfa12b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 8 23:04:16 2012 -0700

    altos: Go back to recording sensor data in globals
    
    Instead of trying to get things into the ring from a variety of
    functions, go back to the simpler method of storing them in globals
    and having the ADC code just pluck out the most recent values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 422799d9be36ef71b63c1c0fd80d5e76da802949
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Oct 8 21:59:55 2012 -0700

    altos: Compute desired frequency when upgrading from pre-1.1
    
    Instead of just smashing the frequency to 434.550, compute the
    frequency from the old radio channel value
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16bbe9d25856259d2694751c364b668638e4a971
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 7 15:40:41 2012 -0700

    altos/megametrum: Try running accel and baro in parallel again
    
    Now that the baro sensor appears to be working, try running
    conversions in parallel to see if that makes the accel cal happy
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d47dd1d9104745cf68bef23b066c5033ca30a84
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 19:39:15 2012 -0700

    altos/stm: Set SPI clock high for disabled SPI busses
    
    This should avoid an accidental low->high transition when switching
    between multiple SPI busses.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4b1dffeef3e9ea96e143f74782e4da7d116c0d4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 18:25:15 2012 -0700

    altos/telefire: Make sure armed alarm goes off on time
    
    Instead of turning the alarm off when a packet is received after the
    deadline, just do it in the thread which is awake all of the time.
    
    This prevents the alarm from sticking on when the LCO box is turned
    off while the arming key is on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35cb2dc51708ab572a4c72422e5902a313eda58e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 17:56:23 2012 -0700

    altos/stm: Clean up SPI pin configuration code
    
    Make sure none of the pin configurations are being used at startup
    time. Split out the pin configuration into separate functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41add569413bf3ec564195963277c81f2d2da798
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 17:21:55 2012 -0700

    altos/drivers: Use data ring values for MS5607 presentation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b28eefe6b32033a0e85731aa38af7e07a8b45f5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 17:21:10 2012 -0700

    altos/megametrum: Make MS5607 driver hold SPI bus for whole operation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c676ad8048d10ad9da22ea3acf19e4e1872103ff
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 6 17:05:59 2012 -0700

    altos/megametrum: Use mma655x for acceleration measurements now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82fdc42d61340e6b76580ff12a9e1bea59eb8079
Merge: 6b8881a 2cac8c5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 3 10:44:28 2012 -0700

    Merge branch 'master' into mm-ms5611

commit 2cac8c572ce533ded89dae9a412b4d1b5c748342
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 3 10:43:28 2012 -0700

    altos: Re-enable the ms5607 and mma655x acquisition threads
    
    These were disabled to help with testing in Argonia
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b8881a7bdb9f89306a700e9a8853b00df29bf5d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 3 07:50:48 2012 -0700

    altos/megametrum: Commit for boards with MS5611 baro sensor
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fdd08cc093134c5f87dab9533b99a042a699381b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 28 22:39:55 2012 -0700

    altos: Provide MS5611 configuration option, HAS_MS5611
    
    MS5611 and MS5607 use slightly different conversion functions. Alas,
    there doesn't appear to be a way to tell them apart in software. This
    patch adds the necessary conversion changes and makes them depend on a
    compile-time configuration option.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc7216d286cc7fe8007f5208ad97a630166572f3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 21 13:29:17 2012 +0200

    altos: Shrink Pa to altitude table
    
    This improves the computation of the table enough that errors from a
    470 entry table are almost all < 0.5m.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c6231ecef2e4f978a0de452a17a2a24e6e68827
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 20 11:33:24 2012 +0200

    Bump revision to 1.2 development branch
    
    With 1.1 out the door, this now starts the 1.2 development series
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f2734bb418f5c3a89fa3f1bf1b98ce4cfe432e1
Merge: e69a433 3fe5c2f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 20 11:30:19 2012 +0200

    Merge remote-tracking branch 'mjb/altosdroid'

commit e69a433fd93b9f6bd2297d8045eb075fee29e73b
Merge: 19243ec 6e0d672
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 20 11:30:11 2012 +0200

    Merge remote-tracking branch 'mjb/prefs_interface'

commit 19243ecc9b5bbdcc069ae24acf1ca807322c84d8
Merge: 90c1b6d 0ef8b71
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 20 11:29:55 2012 +0200

    Merge remote-tracking branch 'mjb/altosui_mjb'

commit 3fe5c2f9fc01258d45c20070e9874d76bc6c8c07
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:47:50 2012 +1200

    altosdroid: initial implementation of telemetry logging.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 0541201d4afe3e5d7913465e1db10e586d7182bb
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:47:06 2012 +1200

    altoslib: make parts of AltosLog public for usage outside altoslib.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c058ec2d6070458a0b7d3ef56041e985412ee565
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:46:17 2012 +1200

    altos{lib,ui,droid}: move OS specific code out of altoslib
    
    This is to allow the usage of AltosLog on Android - no swing, so
    we need to push the "home directory" code used to pick a default
    telemetry logging path - using the PreferencesBackend interface
    for now.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 36e684724e327dbd4319411ef0602fafb4d0c073
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:43:18 2012 +1200

    altosdroid: cosmetic re-order of methods
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 8f11a6d2c3de228c3cefb95a7d1a76d53e532acd
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:42:11 2012 +1200

    altosdroid: simplify keys() method
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f79b445cc29fc1e424f99c97e71c7d3637bf4ba6
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Sep 18 23:38:12 2012 +1200

    altosdroid: Update Makefile.am
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 90c1b6db8d1f401a992fe44983b3df64739fe263
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 16 15:12:26 2012 -0600

    further refinment of Releasing document

commit 7a0cce7fa0c802b1597fef94cfaf00aa0c28c988
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 16 13:59:21 2012 -0600

    releasing 1.1.1

commit 0cd443d5e55b2c3b97ecf53389ff76bc4bc6018f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 16 12:38:33 2012 -0700

    Add release notes for version 1.1.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe8ab96e8727c25c04cac473cafb264cf7e80156
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Sep 17 01:29:33 2012 +1200

    altosdroid: implement AltosPreferencesBackend, and initialize.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 52d3cad4f744140e1aa06fdfc0d49a0cf8734fd4
Merge: 31f5a02 6e0d672
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Sep 16 22:27:04 2012 +1200

    Merge branch 'prefs_interface' into altosdroid

commit cb48dd0b03b445437f751028e8383610b65b0a68
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 16 02:39:25 2012 -0700

    altos: Fix telemini sdcdb init file
    
    Set the driver source path for the debugger
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3520bbf1ed6461d1ce7af001c529563a3cffa3c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 16 00:58:20 2012 -0700

    altosui: Gather Tm sensor data in Monitor Idle mode
    
    Tm is pretty much the same as TM for the analog sensors, it's just
    missing the accelerometr. Use the same code for constructing an
    AltosRecord for it
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31f5a02654cbf172beed25f4c518dfb7be8c714e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 16:56:04 2012 -0700

    altos: Need to use 16-bit counts for ao_xmem functions
    
    Trying to use 8-bit counts is a nice optimization which fails when the
    count is larger than 255, as is the case with clearing the flash block
    in the AT45 driver. This bug resulted in the inability to erase
    flights on TeleMetrum v1.0 boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b898cf0a2abf2b0478d5afc5aca030c6b4c8bd0b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 12:59:31 2012 -0700

    altosui: Show over-ground-distance in Descent tab
    
    Helps to know where the rocket might land.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f36f73b2d02b72201683cf5795851034bbd6f28e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 12:58:54 2012 -0700

    altosui: Remove debugging from KML export
    
    Left in from testing the Eeprom export bug
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97ab77d548964115e4b41ad5952194fcd1455c96
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 11:13:02 2012 -0700

    altosui: Fix Landed tab units
    
    And clean up the whole flight value reporting code base. It would be
    nice to create a separate class to make this easier; at present
    there's a bunch of customization embedded in how values are presented
    in each tab.
    
    Reported by: Bdale Garbee <bdale@gag.com>
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43e646657502f6162fa02f37fd2bd5aa3e29a1a8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 11:08:57 2012 -0700

    altoslib: Update GPS seen_values in AltosEepromIterable
    
    Otherwise, KML export won't ever get GPS data to write.
    
    Reported by: Bob Brown <prefect@kloudbusters.org>
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b6dd9105ba36aa11d6d0ee6e0823965b9beffb9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 14 11:08:19 2012 -0700

    altoslib: Remove duplicate seen_ values in AltosEepromIterable
    
    These are defined in AltosRecord; duplicating them is not a good plan
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e0d672b8a516a604d8ea1abd2bed113c608143f
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 12:43:21 2012 +1200

    altosui: remove un-used import
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f985ea055d935b10ae9ae8441fe808ba2c13c99e
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 01:27:22 2012 +1200

    altosui: revert AltosUIPreferences init() method
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9335a74694df00c4876055e7c98661236646f6e5
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 01:08:53 2012 +1200

    altosui: Add return to try/catch.. duh
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d5e199c34ff5a02a4c4cc917c3f0eec32eae72a9
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 01:06:59 2012 +1200

    altosui: add missing try/catch
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 26c83bc0981036651a89c29771b2ad52c8fb0396
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 01:03:53 2012 +1200

    altosui/altoslib: bug fixes, update Makefile.am
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 08345b8909922f2ff8f9ed8b4497b9cbea6b26e9
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 00:53:56 2012 +1200

    altosui/altoslib: Add call to …Preferences.init() with backend object, remove static init()
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 17127847300de9a6782b901926a3fcb9ef021b78
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 00:46:34 2012 +1200

    altoslib: Add AltosPreferencesBackend.java to Makefile.am
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d875b459b5e9f7bcbbbbe318f947b0451ce6738f
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 00:44:59 2012 +1200

    altosui/altoslib: add methods to interface, fix imports/exceptions in BT code
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 67b618409a0d34fff26cac6025bc159ff92ede9c
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 00:40:16 2012 +1200

    altosui: add missing methods for Backend, fix BT code.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ec036e8fe057f4b641ba9ee17d6dce2689816047
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 00:25:49 2012 +1200

    altoslib/altosui: begin moving preferences "backend" into interface
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 0ef8b7148784ed5bcbea21dde313fb02f50ef734
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:17:24 2012 +1200

    altosui: comment out obsolete code - could probably remove the file.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 6daf71d0af7ffdbbfdb7436edd536bc811850d42
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:16:48 2012 +1200

    altosui: add type to … implements Comparable.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d3d69bdecfcb45d1e3a8c6b10c80eef1afcc2310
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:16:16 2012 +1200

    altosui: comment out/remove dead code
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c9fa8faabb6f7fb59714c42e1029ce3d71c52ff8
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:15:36 2012 +1200

    altosui: access class variables by class, not instance
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f9e1c5949a24e27897587b0b0ca00e089f362215
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:15:07 2012 +1200

    altosui: remove redundant catches
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 38fb6c070ffaf820d524fecce540d91fc6dda57b
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:14:31 2012 +1200

    altosui: comment out un-used classes and associated imports
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ce1b19a012a2c1c623b03efb93b881e297736718
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:13:35 2012 +1200

    altosui: comment out un-used fields and methods
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 382c54a0d052c8975b57c995ef83bc8934bde242
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 14 13:09:58 2012 +1200

    altosui: remove un-used imports
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit eefcfa94f360f8c5a7233370d4178525bccbb22f
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 13 16:13:42 2012 -0600

    add note about checking doc copyright date and revision history to Releasing

commit 2441090f26c3df66a6ce48d64e64384ce9e5ef82
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 13 15:12:33 2012 -0700

    doc: Add revision history for 1.1. Update copyright date
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 320d90c376dccfe1599505e3b485df8d46e34bb3
Merge: 9a7d643 2e6c6a6
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 13 15:36:37 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 2e6c6a6c15a7cff9f20b70a4cf58697da1302f01
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 13 00:35:27 2012 -0700

    doc: Document imperial units and groundstation configuration
    
    What it says on the tin.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a7d6431777ce3377b788ddac6cb9fadd53c039c
Merge: 2439f53 9728b20
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 13 00:58:30 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 9728b20a4ad9576ac1022dc9a5771f5a3eb92b3d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 23:56:18 2012 -0700

    altosui: Exit with an error status when file processing fails
    
    If the user provides any files on the command line, and if processing
    them fails in some way, exit immediately with an error indication.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0564f9b13d4e3050b0a45fc1c4f710ab2b1f9d81
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 22:40:57 2012 -0700

    altosui: Leave new_gps indication until gps value is used
    
    During replay, AltosState may not see a new GPS value as soon as it
    lands in the state field as additional records with the same timestamp
    may come in after the GPS record.
    
    Instead of resetting the new_gps indication when the new record is
    created, wait until the new_gps indication is seen by the AltosState
    update code and have that clear the new_gps indication.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e237920abb582d7ceb3e1925b11a848575ac68a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 21:32:25 2012 -0700

    altosui: Stop downloading eeprom data on a block full of invalid data
    
    When no valid records are found within an eeprom block, we assume that
    no more data will be found within the entire storage area.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2439f53ea21c84f7c510dc191dde025ada24281f
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 12 21:50:25 2012 -0600

    document workaround for 'make fat' not building altoslib

commit 07d9ba938f2742da1bce5d8df55cbc236207a981
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 12 19:50:07 2012 -0600

    update Releasing for non-native versioning and builds on debian branch

commit fe009534ce6846b6db96cac8f6c2d53ba8010d91
Merge: 69d42b2 8ee29fe
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 12 19:49:51 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 8ee29fe48771dd22a0c5428761ee53a728495d11
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 16:07:41 2012 -0700

    altosui: Serialize data access in TD config code
    
    Setting the values was being done in the UI thread instead of the
    Serial thread, which left the serial thread with uninitialized values
    when it went to update the displayed value for the current
    frequency. All fixed now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 19e35de47157923670b1864ce7b04f8d82f3bdea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 16:06:59 2012 -0700

    altosui: Lock access to preferences data
    
    These are accessed by several different threads, so keep things sane
    by just holding locks across all access.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b5340c2b75c500011355c4889da443c4b9c4891
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 13:07:01 2012 -0700

    altosui: Add multi-sized icons to all windows
    
    This lets the window system pick a better size for presentation
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e4fc0b3953655eb720372d9b4274cd4bca19556
Author: Tom Marble <tmarble@info9.net>
Date:   Wed Sep 12 10:05:42 2012 -0500

    Reference specific dependent jars in the AltosUI launchers

commit f0f4f907042e12815284abe1b63ae2d4a5a2d598
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 02:30:59 2012 -0700

    doc: Mention changes to flight data download UI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42bbe15512533f2d958b8219a02fbd256593092a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 12 02:26:32 2012 -0700

    altosui: Initialize flight velocity to zero when reading eeprom files
    
    Otherwise, the integration of velocity will start at MISSING and get
    stranger. Fortunately, we know the initial velocity of the rocket when
    sitting on the pad.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3c3c6eabd6837f0e72acee3906c8f71c6f0030e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 23:37:20 2012 -0700

    altosui: Don't say a decimal point for distances in meters
    
    Useful for distances in miles, but not meters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87f9a8923656f275f74cfb6c8c6a57bbe59e74f8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 23:36:26 2012 -0700

    altosui: Initialize imperial units checkbox with correct value
    
    Use imperial units preference instead of serial debug preference. Cut
    & paste programming failure...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69d42b26223b45df4167aa3baafba100ad71baab
Merge: 3e9078c 3fa5fbd
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 12 00:26:21 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 3fa5fbdfd1ab257028f272fbc32759b39608ddaf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 23:04:19 2012 -0700

    Clean up Windows event handles on com port close
    
    This avoids having to wait for the receiver to timeout before we can
    open the same com port again.
    
    This patch also adds a bit more debugging -- it prints Windows error
    messages to stdout along with the file/line where the error was generated.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a154ce0b9fc3ea360d6bc7e17d6debb2da94438
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 22:03:17 2012 -0700

    Include AltosLib.jar in windows install
    
    Otherwise, altosui doesn't do much.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e9078cb1077e7ad0d845f10c2ad0a007df76d29
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 11 22:17:22 2012 -0600

    releasing 1.1

commit 4563624638884b7b2f16cd4d396c00690e045999
Merge: 11fbcf5 e5a55db
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 22:50:18 2012 -0500

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 11fbcf5e30e0cd09f2d6b448911d2ef62b7f29c7
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 22:48:04 2012 -0500

    Added the feature to AC to default --with-android to $ANDROID_SDK (if set)
    Fixed typos in altosui/Makefile.am (had removed JCOMMON, but it's from AC)
    Jenkins changes:
    - added android sdk
    - will now record artifacts: altoslib/AltosLib.jar,altosui/altosui.jar,**/*.apk

commit e5a55dbf265354e7c94be3e2be53c2d5c8fba056
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 15:53:36 2012 -0700

    Use ft/s for imperial speeds
    
    Bob Brown thinks this unit will be more useful than mph
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73d05650eae1d3958e02e9ffde2020a2438eccbb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 15:30:45 2012 -0700

    Add Version 1.1 release notes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ae3e4cea1cd180ff18b5293a67b4520cc8292be
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 01:00:05 2012 -0700

    altosui: Imperial units for graphs too
    
    Just to be consistent
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95268d681c9a6652d84db383f55a4fe8a4ac5173
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 12:54:31 2012 -0500

    Reverted package name to 'altosui' from 'AltosUI'
    Also added emacs backup regex (*~) to .gitignore

commit 13c64f6fb5764c6a0f3520cf4e48a75d78e163db
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 12:44:24 2012 -0500

    Add appropriate Java build deps as given from autoconf

commit 8e506274a35eccacd2d4523faa08d279a201753f
Merge: 0bc3ed5 1fc97dd
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 11:39:22 2012 -0500

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 0bc3ed53aa8972c7080d6335f609cd9d0df1c79d
Author: Tom Marble <tmarble@info9.net>
Date:   Tue Sep 11 11:37:14 2012 -0500

    Use explicit build deps for altosui (avoids * wildcarding)

commit 1fc97dd9875a7639533a34438c4c7c999412eb3a
Merge: 8397d2b 4420d4a
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 11 10:35:04 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 8397d2b041824ddf1cc0b82926f10da8aae3264f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 11 10:34:00 2012 -0600

    update Debian build-deps in preparation for 1.1 release

commit 4420d4a9fc011ed970af506ef771dfb81580b666
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 11 00:49:48 2012 -0700

    Fix Latin-1 encoded copyright symbols in AltosDroid java code
    
    Otherwise, we get complaints when compiling these files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 708e7937cba52982b91244cf89bfbff46d346135
Author: Tom Marble <tmarble@info9.net>
Date:   Mon Sep 10 16:54:27 2012 -0500

    Changed package name from altosui to AltosUI

commit c2ebebc4967043b16380b8ec8800862993005358
Author: Tom Marble <tmarble@info9.net>
Date:   Mon Sep 10 14:50:37 2012 -0500

    Test commit (comment) to confirm push works

commit 67da878f740a387d0092631ad672e024d26e4192
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 10 09:16:04 2012 -0700

    altosui: Use units conversion functions everywhere.
    
    Provide a configuration option to select imperial units and use them everywhere
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 66a1e07efcac9324d33a1eca0dfb58a2724b667a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 10 09:14:03 2012 -0700

    altoslib: Add imperial units conversion support
    
    "Redneck" mode support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51836cedce41d8b36eac34c69370489162aaa2b5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 14:02:57 2012 -0700

    Bump version to 1.0.9.7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e45c47c52f9cc9c43b81148e0e58fdedb3af1eb8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 14:01:21 2012 -0700

    altos/telelco: Search for available firing nodes at boot time
    
    Query for available firing nodes, limiting device selections to those found.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77775711d414227b3ed97859d1b21ab1c689a724
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:58:29 2012 -0700

    altos/telefire: Add steady warble when the LCO arm switch is on
    
    And make debugging a run-time option too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2933103be122414a9b1795b37003b7a2aa9f3d7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:57:16 2012 -0700

    altos/stm: Fix basic time interval to 10ms -- was 10.1ms
    
    Counting from 0 to 100 takes 10.1ms, so count to 99 instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0339583996fc57a666f8d3007a0f4b1034039a73
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:56:35 2012 -0700

    altos/spiradio: Label LEDs so that the radio code can use them
    
    Mark which should be on for TX and which for RX
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fa71c497a5bf576974e70af06762f75734e6699
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:50:56 2012 -0700

    altos: Try to get remote cmac time closer to reality
    
    Record the time after the packet was sent, but before the return
    packet arrives to try and more closely approximate the time the packet
    arrived at the other end.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27ab744c6eec9243b7aa14161eec2fbf7003531e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:46:23 2012 -0700

    altos: Clean up flight data definitions
    
    These just shuffle the various definitions of data macros around to
    make the include files more sensible looking.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ced6a020d6d94b1c63837a7ab5b0091b7b8ea3c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:43:45 2012 -0700

    altos: include ao_arch_funcs.h at the very end of ao.h
    
    Move it below the definition of the ms5607 init function
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e053da3e7cb5a4c9ebbffd245cb5d83932183b22
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:11:57 2012 -0700

    altos: Allow products without MS5607
    
    The define for a missing MS5607 was wrong, so anything using the fancy
    multi-sensor data code would break without an MS5607 in place.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb5ab29b6744b382bb2f09486a7a6db7d12a3608
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:10:07 2012 -0700

    ao_tools/ao-send-telem: Only start real-time on valid states
    
    Check state to make sure it is < ao_flight_landed to keep invalid
    states from switching to real-time playback mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47d87872c11a63a435fe5b703a4ce33503790d96
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:09:27 2012 -0700

    altoslib: Add in a bunch of java files mising after Mike's cleanups
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2b458a448106ba1ab207f0ea6824b56927d8547
Merge: 9682e9e 3fe9322
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 13:03:47 2012 -0700

    Merge remote-tracking branch 'mjb/altoslib_mjb'

commit 9682e9e6fe730417a77b47795fbe1f06c9a51177
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 12:29:32 2012 -0700

    altosui: Use helper functions to access arrays in AltosLib class
    
    These deal with out-of-range values correctly, instead of causing
    exceptions that will just break stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d65d921b9b2340fa23d3b55b4ae755324d392303
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 9 12:20:08 2012 -0700

    altosui: Catch errors in state value when saving flight logs
    
    Use AltosLib.state_name() instead of directly accessing the
    state_to_string array so that any invalid state values are caught and
    replaced with 'invalid' instead of raising an exception.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fe932206f40f4d6f83a4ef49e064109a7a3de92
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:19:43 2012 +1200

    altoslib: move distinct classes to separate files.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit da053875c12b25b627e83430c3a956a994b435d5
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:19:07 2012 +1200

    altoslib: remove obsolete class
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 218c73b5bd5bd5673dc6f259f62b39541c52d6ff
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:11:13 2012 +1200

    altoslib: move distinct classes to separate files
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 42170d0e3a3b68a9d3db69714e043f7273a714fb
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:10:21 2012 +1200

    altoslib: remove duplicate AltosGPSQuery class
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 82f798e7b1343a56203af2e89790f6de9ab9f98d
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:09:37 2012 +1200

    altoslib: remove duplicate AltosIdleMonitor class
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 88667f7b7dff52eaf5e30f8f83fed0d7f767268d
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 18:07:45 2012 +1200

    altoslib: rename AltosIdleRecordTM.java to AltosGPSQuery.java
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit bbbe1846346b4ba61330f535a12b7a5029877ee6
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:53:20 2012 +1200

    altoslib: remove dead code
    
    (if object creation fails, an exception will be thrown - not return null)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 02d31db3d3255568cc348a41aa37a461d63ffde2
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:52:27 2012 +1200

    altoslib: resolve argument/variable ambiguity
    
    (and comment out set_flags() which had no corresponding variable anyway)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 639f3e5e5171769429eac9e2f17a7b315fd62135
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:39:25 2012 +1200

    altoslib: comment out unused methods
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 369c5e23ac6d65bab4b456ed86737576ac61102f
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:35:29 2012 +1200

    altoslib: access static variables via class, not instance
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b02c17b26e028a6f3a46781211a86a18272da4d0
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:34:17 2012 +1200

    altoslib: comment out un-used variables
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 20bc23ddb90f8a6da1f7ea70f02cf3a038059d32
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Sep 7 17:32:07 2012 +1200

    altoslib: Remove un-needed imports
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c5e98d2b226824f2012e5710ac4b1596b9f0bfb1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 6 18:07:33 2012 -0700

    altos: Fix radio slave to run lights in the normal way
    
    These were left in a debug mode, toggling instead of flashing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 01820c3e95fe85d2bee648d41809f1a753f81020
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 1 00:15:16 2012 -0500

    Revert "first work on PWM input to TeleScience, 'p' command displays timer 1"
    
    PWM bits not suitable for master
    
    This reverts commit e93c6bcc799d76d4ff425815e2601a25e6796229.

commit 3ccc4a13e3f76bec864d61b0cdfd57c76c6baadb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 1 00:15:02 2012 -0500

    Revert "Timer 3 working with slower clock and all 16 bits."
    
    PWM bits not suitable for master
    
    This reverts commit 49b1ff4c614d24977b33cd17b583acc87acff476.

commit 8c743857525eff778d067068356dec486b9fefa2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 1 00:14:49 2012 -0500

    Revert "ICP3 working"
    
    PWM bits not suitable for master
    
    This reverts commit 75d6aa6f798606f1a6c5a46542065dda81e63b2a.

commit 294b1ec85a37e375a0ac70cbffc6398309d63a7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 1 00:14:27 2012 -0500

    Revert "telescience: correctly calculating rate values with higher resolution"
    
    PWM bits not suitable for master
    
    This reverts commit ada6f2dfc045e77cb9499f20cdec1b4a54ef0db1.

commit ec9e1186dce079a2f2b7be8050216ddb1bc1af66
Merge: 503eabd 6d31f8d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 31 22:24:16 2012 -0500

    Merge remote-tracking branch 'mjb/freq_menu'

commit 503eabd0e351ecdffda1416b7d00f8ef1d6913c9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 31 22:19:40 2012 -0500

    altos: Get mma655x driver limping along
    
    This appears to drive the chip correctly to see values from the accelerometer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 48a3e6e073e927e456ef4e456e512f6fb8e3b9ee
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 31 21:02:13 2012 -0500

    altos: Fix mma665x pin assigment for mma655x
    
    It's on PE13-PE15, not PA5-PA7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9af7819de086d9179c3a4d1df7c88ab67a7d7c7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 31 21:01:21 2012 -0500

    altos: Add custom panic noise for self-test failures
    
    Make it easier to tell which component is failing self test
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d31f8d15ef4bf75ae039dd7b1a6a615d00eb215
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Aug 31 17:53:53 2012 +1200

    altoslib: add missing manufacturer parsing for AltosConfigData
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 4e3ac2b624f68dd5a8f6dd7a33eb10cd78497964
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Aug 31 17:42:22 2012 +1200

    altosdroid: invert channel/freq ordering
    
    Matches Channel Selector in altosui
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 80bc985f79e616e5327aed4f7acc9bca71b8db54
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Aug 31 16:50:53 2012 +1200

    altosdroid: also display channel numbers
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b6a21856c68ca8cca93eb755285be1927acb91e7
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Aug 31 16:39:10 2012 +1200

    ao-send-telem: fix frequency set command
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 543ecb530d6fdf188a746ac59b72544e69bad830
Author: Mike Beattie <mike@ethernal.org>
Date:   Fri Aug 31 16:38:21 2012 +1200

    altosdroid: complete frequency change dialog
    
    Also implement Service IPC to action request.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f1a9fff865e0b226a97ad5d6eaaac64bd5e5d410
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 23:07:43 2012 -0500

    altosdroid: Start a hacked-up frequency dialog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d8858ca1899c8b64f107ebb45711efbb7b8d62a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:30:04 2012 -0500

    altos: another .gitignore file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab9d5bf13e6f1735a0463f4bcab13d65170b7015
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:28:53 2012 -0500

    altos: ao_cc_spi.h isn't necessary for telelco
    
    The SPI radio defines are in ao_radio_spi.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b635cb26ba54c8f5c6a958e0ab0bc4d34d33b635
Merge: 354c1fe a8ecf3a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:24:38 2012 -0500

    Merge remote-tracking branch 'mjb/master'

commit 354c1fed7f06c2c45c661e7265c2ac4bc47e2750
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:22:51 2012 -0500

    altos: Add a bunch of .gitignore entries
    
    Clean up the git status output
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c59954fdf204f443d9bb28c4a66a30f925ef348
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:16:52 2012 -0500

    altos: Shuffle LCO functions around, add telelco first cut
    
    Pull LCO functions shared between LCO UI and command line into
    ao_lco_funcs.c.
    
    Import bits for telelco.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72d44d14aefcb754b871835aec8d265771357212
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 30 16:14:57 2012 -0500

    altos: Disable debug printfs and fix pad ignite time for telefire
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a8ecf3aa4e88d4c76643fb541fb1d5535a454aba
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 21:08:41 2012 +1200

    altosdroid: Implement voice just like altosui
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2e6af70c87e7cc62a92b09bbbde745a31d83b5eb
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 21:08:06 2012 +1200

    altosdroid: Move bluetooth check to first task
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 519887571cee2840024c5c8f4b7f0e5c352d3323
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:23:29 2012 +1200

    altosdroid: add rssi/serial/flight, and re-work UI ordering
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 14022b002d2201fb3ca28292d976c90e2d9a15a2
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:23:04 2012 +1200

    altosdroid: rename ambiguous TextView name
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 91606c89828e60d8cf9a5ea4ff75b951d6fc042a
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:21:38 2012 +1200

    altosdroid: formatting/whitespace, correct ids
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2137a112b4217d84041f749b8aa5eb8f4d330ba0
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:20:10 2012 +1200

    altosdroid: rework lat/lon to more common format
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c32325af6605e78c1d1147d466f3ea12ce94124a
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:19:41 2012 +1200

    altosdroid: rename azimuth/altitude to elevation/height respectively.
    
    (Matches altoslib, altosui, altos)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 8ffa4f9a474026f5a6523b26919a78565e0ed74c
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 13:13:20 2012 +1200

    altosdroid: move units into code, to match altosui
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 583458772746317b98fced907ec780edff465888
Merge: aea10c1 17b6ffb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:29:24 2012 -0700

    Merge remote-tracking branch 'mjb/master'
    
    Pull in Mike's fancy new AltosDroid bits

commit aea10c107dff2643677a9c8d1fc41e14f4a66049
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:25:36 2012 -0700

    altos: spiradio debug serial is port 1, not port 0
    
    The SPI link uses port 0; it seems like the having the two try to
    share the same wires is a bad plan.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e7e8e21f2bb823cb6e74c73d0feddbc3a891107
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:23:13 2012 -0700

    altos: SPI radio - use 1->0 for 'done' and 0->1 for 'ready'
    
    This changes how the SPI radio protocol uses the interrupt
    line. Instead of a pulse indicating operation done, this now uses a 0
    value for done and a 1 value for ready. The key distinction is that
    the master can tell when the slave is waiting for the next command
    instead of hoping that it got done 'soon enough'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b6ed262460ee75fb5bb684d13d19c26c7ea750b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:22:02 2012 -0700

    altos: fix ao_pad debug output for query command
    
    Igniter status is an array these days.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 442f1bfc89528103e2c28f768c954b956e39afc5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:21:09 2012 -0700

    altos: Use updated pad protocol for lco commands
    
    Stop using the older single-channel protocol and switch to the new
    multi-channel protocol
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f64e62356bcfcd6ba8a88b09251793481bcd56c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:19:17 2012 -0700

    altos: Note changes to configured AES key for SPI radio convenience
    
    Keep a sequence number to mark when the AES key is changed so that the
    radio code can avoid sending the key before every CMAC radio operation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a7d2faf76a46271532102e217c2dd5515e38b72
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 29 11:16:42 2012 -0700

    altos: Wait for IN dma complete on slave SPI send
    
    SPI send double buffered, so the DMA completes one byte too early. Use
    the recv DMA to know when the SPI transfer is complete.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17b6ffb6c090112367eac944494f0fa58da453c7
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 30 01:01:06 2012 +1200

    altosdroid: initial attempt at a UI.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 98f65994ee547feb8cca63ff4ed0fefd3fb2d37d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 23:05:02 2012 -0700

    altos: Oops. forgot ao_data.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a3982ceb721910c6a4f75badebb62baa6c6568e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 22:43:10 2012 -0700

    altos: Add spiradio Makefile
    
    git add doesn't add Makefile by default.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc9841ee5e92318471b6bec09b7075a788ab8872
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:13:02 2012 -0700

    altos: Mostly working SPI radio link
    
    This includes long delays to avoid overrunning the cc1111 input,
    otherwise it works pretty well. The delays mean that we can't capture
    the reply to a cmac command though, so more work is needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27a879b4069ccedf8bbe39d7dbecf45000f29d8c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:12:27 2012 -0700

    altos: Include the radio_cmac debug commands in telefire
    
    Just temporary debugging
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb1a9a8c3f3d3993d5986925bc4ad112c2bbc119
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:10:34 2012 -0700

    altos: Explicitly erase memory in STM eeprom driver.
    
    This seems to make the STM32L152 happier
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3fe5a70d9ac2114ee554813b1dbb3019a3e4aff7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:08:59 2012 -0700

    altos: Track protocol changes to ao_pad debug messages
    
    Make the debug output build again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18b5021e99c1eef32d2d85f619c84e89cecae7a7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:07:55 2012 -0700

    altos: Stop providing debug commands in seven-segment driver
    
    The radio_cmac debug commands use the same letter, and this code works now...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 78cd26eec77adda23ef1b5ca2d91027f1e059868
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:07:05 2012 -0700

    altos: Move radio_cmac test funcs from ao_lco_cmd.c to new file
    
    These are useful in the firing node for testing as well, so move them
    to be shared.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2d919a2147025daa332957cda6d91959e4731ab
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:05:10 2012 -0700

    altos: When sharing radio DMA for AES, use it for in instead of out
    
    We look at the out_done value, but not the in_done value; if we use
    the radio DMA for out, we would have to use ao_radio_dma_done to check
    for completion. This way, we can ignore that value and use the
    existing ao_aes_dma_out_done value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31b42b99edbb976534ac432c07e218f13d1f5f9b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:03:52 2012 -0700

    altos: Fix ao_delay function and move from per-chip code to ao_task.c
    
    ao_delay hasn't been chip-specific for a long time, and it had a bug
    in not calling ao_clear_alarm.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac5d053e6d766d243b7a425ae19779810c350125
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 28 18:02:25 2012 -0700

    ao-stmload: Always round up load amount to 4 byte boundary
    
    The flashing code doesn't deal with partial writes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68df2b1173e82d48f7857ad2e9325e6a9cbbedfd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 22:45:47 2012 -0700

    altos: Enable STM SYSCFG when routing EXTI
    
    The EXTI routing information is in the syscfg unit, so that needs to
    be powered up or writes to its registers will be lost.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c677f26852b70bcbb303382c306ce06664fde028
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 22:45:20 2012 -0700

    altos: No need to initialize EXTI priorities at startup time
    
    They all get set to the correct value when enabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ed88fb72c3e3ecf3333c700d838667db71cfbdc
Merge: adbe64c 621d093
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 28 23:39:53 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
    	debian/control

commit adbe64c5a9402b7c5075a444a12629131b663877
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 28 23:37:00 2012 -0600

    libelf-dev added to build deps

commit cb8f01745c9e8f258f96358b46e1caf17d6b0c9f
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 23:20:04 2012 +1200

    altosdroid: update Makefile.am for source file changes.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c220369953d351f49a5f45bfb5e317859d3a9843
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:26:12 2012 +1200

    altosdroid: Add Dumper class for testing
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 6c985c2b0433a08add3bbf55fdb30102157b4ede
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:10:26 2012 +1200

    altosdroid: add timer to stop service
    
    * Stops when no UI clients, and no bluetooth connection remains
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 781bdb6c15b7dd3cc2280b08a2f47ce0f92cf53f
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:09:34 2012 +1200

    altosdroid: do service start/bind/unbind in start/stop, not create/destroy.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ea5fe9e95a888d623329d17d048ee360ea114ad1
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:08:49 2012 +1200

    altosdroid: move methods around
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c6d667a6ac0decfde5bc8a180b14774e9942dd0c
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:08:19 2012 +1200

    altosdroid: tidy up old messages
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5c7370dcd7a65c81a3c903a71167e07cfcbade53
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:07:39 2012 +1200

    altosdroid: stop sending device name, just send config data
    
    * Kinda complicated, but ultimately more sensible
    * Just send the config data as an arg to MSG_CONNECTED
    * keep retrying connection till we actually get config data
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5ce8c63850dbc6462d7c41ce917e0e06672ec0ab
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 22:00:14 2012 +1200

    altosdroid: whitespace
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit df7b74909c3794b7b2397275e7fce9226cb99489
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:59:40 2012 +1200

    altosdroid: override add_reply() to add android based debugging
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9d0f187f06c411f0d82e13ee4f2faea789ed9e79
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:59:15 2012 +1200

    altosdroid: more logical name for connection_lost() method.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 7664ecc0003151d3f05537f17914df2bf48e4275
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:58:47 2012 +1200

    altosdroid: rework ConnectThread
    
    * Start input_thread after connection, otherwise it's painful to kill
      on connect failure.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 502b24eb2c9c76e4e2bdcc79be0b71a869488b37
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:55:40 2012 +1200

    altosdroid: fix a connection retry having a null pointer
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c7bef83fd553987f83c0bf7ff37ef941872564fe
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:54:05 2012 +1200

    altosdroid: fix double call of stopAltosBluetooth()
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 150a726e125aa7d181c00348ddd1791fd84164e5
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 21:53:01 2012 +1200

    altosdroid: Miscellaneous comments/debug/etc cleanup
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 162c640d382b9f823573578fe97584adc94cd9b6
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 17:37:45 2012 +1200

    altosdroid: miscellaneous cleanup
    
    * Copyright info
    * whitespace
    * comments
    * unused imports
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ae03d8e87985b9f746e9e22b2394a0a5b4f39f1c
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 17:36:41 2012 +1200

    altosdroid: Add passing of Device Config at connect
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 03563c765d8b0ab3689c91b2b533c68e11650577
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 17:35:11 2012 +1200

    altosdroid: Add new "TelemetryReader" class to handle Telemetry
    
    * Add MSG_TELEMETRY messages to both AltosDroid and TelemetryService
      to handle passing of AltosState object all the way back to the UI.
    * Remove linkedblockinglist from TelemetryService
    * (MSG_TELEMETRY is a rename of MSG_INCOMING_TELEM in AltosDroid)
    * commented code in case statement inside AltosDroind - won't work with
      the objects it is currently passed.
    * Add new "MSG_DEVCONFIG" message to AltosDroid - allows TelemetryService
      to pass information about the connected device back to the UI.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ed653a1e6dc8884cb171af1406fd0999ef125a4d
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Aug 28 17:26:09 2012 +1200

    altosdroid: create connected() method
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 621d0930244f25165d2ac5da596dcc87e253b965
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:52:11 2012 -0700

    altos: Add spiradio product
    
    Implements the SPI radio protocol
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 61d094f281431e9f11f806454981da8e1245fb5c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:51:53 2012 -0700

    altos: sdcdb rc file for telefire
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c31d07fb35a5b4d283facf649bed3f0f9802d1fc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:49:07 2012 -0700

    altos: Add SPI linked radio API
    
    Forward the necessary radio functions over the SPI link
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f3483f93137f41a61f3fcbe06afcaffb1b9e17b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:47:16 2012 -0700

    altos: Clean up radio APIs
    
    Move api to ao_radio_cmac.h include file.
    Expose ao_radio_test as standard API.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85fd7ab504a9fac1de90bbe7df8ea477a092c2b0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:45:56 2012 -0700

    altos: Build telelco and spiradio when possible
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 467acda662de8b96e7d0df729c2e4761686b82a1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:44:35 2012 -0700

    altos: Expose a signed version of the tick count
    
    Useful when doing time comparisons.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7443bf350afe273e87a884915ea1e7662630cd3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:42:38 2012 -0700

    altos: Specify the LCD duty cycle for stm-demo
    
    This is the demo for the large 7-segment displays and needs static drive
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 708d49e498bbdc59bb5af9bf4ca5fcea5689547a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:41:13 2012 -0700

    altos: Test multiple quadrature devices. Export quadrature count.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8bfe8157cd9fe488d1ee961f200ffa0866322f2c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:38:44 2012 -0700

    altos: Seven segment display driver
    
    Hex numbers and the decimal point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28c3923b6180e24a77aecc7162bb2852cec7d770
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:37:14 2012 -0700

    altos: More SPI slave changes for cc1111 driver
    
    Don't enable DMA in the other direction when doing slave transfers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a27b9b5c36cf748e415ba210c8d8ae72d8227a98
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:35:39 2012 -0700

    altos: Add SPI slave get/put macros to cc1111
    
    Theese don't try to drive the chip select line
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 304909b7534768bfc8da62954effb37ba86806ea
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:34:12 2012 -0700

    altos: Provide interface for STM LCD driver.
    
    This provides a simple function interface for driving the LCD segments
    in the STM chip. It also uses the update complete interrupt to block
    LCD users during flush.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1168f40223ca09df23215f2e2fc445a8a03aea9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 27 13:32:41 2012 -0700

    altos: Rename drivers/ao_lco to drivers/ao_lco_cmd
    
    These contain command line functions for testing the cmac and lco
    features. Now that there's a telelco-specific ao_lco interface file,
    it's useful to have both for testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa8668931cbbc1506560222f2db7e427b514a351
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:41:47 2012 +1200

    altosdroid: Let a freshly connected client know what the device name is!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9a41508d92f95012a37bb75603e6e48a2c405204
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:41:29 2012 +1200

    altosdroid: Add Connected/Connect_failed messages
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit e121ec3ae634f41979717281a28af5e4a38e8f3a
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:40:30 2012 +1200

    altosdroid: don't need keys for Bundles anymore
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit afac4d6c82916eea67ac838cd22806bd73db00a9
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:39:53 2012 +1200

    altosdroid: Toast() requests don't need Bundles
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 18c380120fe37a4bdc8f295e86c6c4413d1aa037
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:39:09 2012 +1200

    altosdroid: really don't need to store a local copy of the device name
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 6441437d3b0e848b225a3d6c78ab00e2590c6988
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Aug 27 19:37:16 2012 +1200

    altosdroid: remove complexity around message passing
    
    * Don't really need to use bundles
    * TelemetryService: Use a local variable to store the bluetooth device object
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f89e7de20374141b367205aa517a08ee203bfaf3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:53:16 2012 -0700

    altos: Trigger sample complete when all data are ready
    
    This has each sensor mark a bit in the current data record which is
    then sent for processing when all of the data are present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dec1481786ad54e22634e32109b5ed6e5483938e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:52:27 2012 -0700

    altos: Shrink STM stack size
    
    512 bytes should be enough for anybody.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d13d0fbfcb0fd6d8a1af46f6270a968d746c830e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:49:34 2012 -0700

    altos: Make ao_cur_task_index track ao_cur_task in ao_yield
    
    This keeps the two main task references (index and pointer) in
    agreement during task switching, avoiding an extra assignment at the
    end of the task switching loop.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c9baa88d6cd931c66d453674322908eb267ba4c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:47:05 2012 -0700

    altos: Make 'pad' driver useful with telefire v0.1
    
    This reports correct status bits over the radio and to the LEDs for
    all four channels, and also makes the firing test command control all
    four relays.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea4db73328e865fd658b573da256ca0004c69c61
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:45:03 2012 -0700

    altos: Add debug command for 74hc597 driver
    
    This dumps the current state of the 74hc597 chip.
    
    Note that this shows that the 74hc597 driver doesn't work, and that
    the circuit used in telefire v0.1 can't work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89f1a685a02c7808cf03853aa9a5ee50c6baf49e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 26 09:43:34 2012 -0700

    altos: Allow sharing of radio DMA with aes engine
    
    otherwise, telefire doesn't have enough DMA channels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58d2b70575f3616a056d2356a737b3be15ed3d66
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:38:33 2012 +1200

    altosdroid: begin adding TextToSpeech support.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 11896d22b7bc6e34e3f6109d28f8b6a2d37e6c25
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:38:10 2012 +1200

    altosdroid: whitespace cleanup
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit f8211fee3c8a5de6925eadca2679441801ac793e
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:37:58 2012 +1200

    altosdroid: Send device name and connected state back to TelemetryService
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 8fdde3e74c6dce35f90f4575ce6914516fc56aba
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:37:33 2012 +1200

    altosdroid: re-work connect/thread handling in AltosBluetooth
    
    * Much more resilient to failure
    * handles multiple blocked threads better
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit dba71db022ae4a9f7c5fd128b90caa73aa4e99da
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:34:59 2012 +1200

    altosdroid: remove old commented code
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 38827db5131a2681243649c76bfd1d7d9801f9ba
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:34:45 2012 +1200

    altosdroid: add handling when restarting BT. delay start after stop.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 30d107882b62edf4e6d48923209da6ce3dabeef7
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:34:28 2012 +1200

    altosdroid: set devicename and pass on to clients
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d95b84b56c63002788939b93b6ce949d921a4892
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:30:45 2012 +1200

    altosdroid: Send current state to client on connect
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit cf94a86f37284b53e89b13a7eeb871db647c61ba
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:30:00 2012 +1200

    altosdroid: add missing break; (just in case!)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 24fe48f66f94c99b8197a612afe6f98e980e9796
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:29:25 2012 +1200

    altosdroid: debugging statements
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2ef1723091b0c491ef445474844376185ca4102b
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:28:59 2012 +1200

    altosdroid: forgot change to IncomingHandler constructor call. oops!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d40f96fcc961cfbf6af67fc84591d2660d065ca0
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:28:26 2012 +1200

    altosdroid: Strings and Layout changes
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 3d6fc5fe462531e05ca4b9be1a421490e067a28b
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:26:58 2012 +1200

    altosdroid: lots of debugging statements
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 31bffa435cec2098c7ab5c42c829ba6e1578b5d2
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:24:13 2012 +1200

    altosdroid: need sendMessageToClients() for setState().. oops!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit a9ec3c96288b7ea4e40586321a0a98edf0c8fee5
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:23:33 2012 +1200

    altosdroid: Need access to handler inside AltosBluetooth
    
    * Also move add_monitor() call
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d7173e814c49826f39bba1ff6b024819c555860c
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:20:01 2012 +1200

    altosdroid: reflect change in message name
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 215d78f06093bd8a8b08a85cae0f1f34aee2a6ec
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:19:06 2012 +1200

    altosdroid: begin adding state support
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit fe6680dd3b4c31b3d4edc3f06a142f02bcb879df
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:16:49 2012 +1200

    altosdroid: init device variable... oops!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2c5513c51b187ad26a59b193b401f38c35141d27
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:16:04 2012 +1200

    altosdroid: Rename Connect message, add connected message
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit a6373e84393312ed0fbf22285c704819c2011588
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:14:09 2012 +1200

    altosdroid: init telem blocking list.. oops!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 21359f600354e8ee840e839e61ef97d30f3586fc
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:13:33 2012 +1200

    altosdroid: disable NotificationManager stuff for now
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 54baecc208a40606e3242b2cbd5e66567053646f
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 23:12:48 2012 +1200

    altosdroid: Convert handlers to use weakreferences
    
    * Also renamed bluetooth start/stop methods
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit bf7def1a7b93867dfe16fe6499ee028747634c41
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:28:58 2012 +1200

    altosdroid: Remove Binder import from TelemetryService
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5f4c47389a3d0d10d659a2e00fc74a150b5fed88
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:28:36 2012 +1200

    altosdroid: Add State constants for future usage
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 6ffcc82d8d18d3f05d4f5881e50dda298b43c114
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:28:09 2012 +1200

    altosdroid: begin adding IPC to TelemetryService
    
    * And add imports for LinkedBlockingQueue... oops!
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit a33333b97e810f50db36f345aab71a3200feccc3
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:24:19 2012 +1200

    altosdroid: remove old Binder from TelemetryService
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b69796991c1da6baf245349fcc4392668b9b5570
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:23:17 2012 +1200

    altosdroid: begin adding IPC to main thread
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit bcd53483ccf4bbb2f163a011faae6d19a7bbed0d
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:22:23 2012 +1200

    altosdroid: Add TBT initialisation to AltosBluetooth
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ef29a197ce3318404f37e8a0b24d235e8b024a1f
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:21:57 2012 +1200

    altosdroid: Add debugging statements to AltosBluetooth
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit fb8cd14cca61ca59b95c23e71505607b4509d4ed
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:21:36 2012 +1200

    altosdroid: Add input thread for reading from TBT
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 5ce132b3366cd120499fcbe22b5fbe96d21b8584
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:20:42 2012 +1200

    altosdroid: Move constructor for AltosBluetooth
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b59e7d0b201290f2cb0fd494ef28c1402e11ba3b
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:18:44 2012 +1200

    altosdroid: clean up stub functions in AltosBluetooth.java
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit d184638be79dafd6fb43df21040eb52402f54ea5
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:11:12 2012 +1200

    altosdroid: AltosBluetooth.java
    
    * clean up variables/comments
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit bad155538c4630c62ade80afd20830aad37c287e
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:10:15 2012 +1200

    altosdroid: AltosBluetooth.java
    
    * Clean up imports
    * Convert from reflection to using Well Known UUID for SPP.
    * clean up local variables
    * Add debug conditionals to logging
    * remove references to socket type
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c9689a3ef65ea9da5a7009834add789737ffb6a9
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:03:54 2012 +1200

    altosdroid: Clean up imports in TelemetryService
    
    * Begin adding AltosLib usage
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit ffdfc08c317f503e30604d058749b24c3ca7bafa
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 15:00:23 2012 +1200

    altosdroid: Add service start/bind/unbind to AltosDroid
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 95a34caa8343997bcf7d8969ee8ae3124efcb573
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:57:04 2012 +1200

    altosdroid: Remove AltosLib import from main thread

commit cfe93315fc0e4b01a95b8e59f24aca96b5a66daf
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:55:19 2012 +1200

    altosdroid: whitespace
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 3f3da6626ef41b2cab116d6299d2a89cbf7718a9
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:54:54 2012 +1200

    altosdroid: Re-locate TextView initialisation
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 917f519a4e876087590a3a260fbbccf4c0ac3e31
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:54:06 2012 +1200

    altosdroid: remove UI components/imports no longer used
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 80bf63702175322053f2b38c4fff56b653ab7c70
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:52:30 2012 +1200

    altosdroid: excise BluetoothChatService example code
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 372840b4ebfd3da3cd713b6bc6a8ffc8cd6b6b8c
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:48:48 2012 +1200

    altosdroid: remove TelemetryService activities
    
    service start/stop will be handled by AltosDroid/itself now.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 24503eb330bf887f5c76afe2aaa9c9f2ce177460
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:44:09 2012 +1200

    altosdroid: whitespace (spaces to tabs) (part2)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 7aab6e6b6e361455a7515fe6db7b0e9a6e4c786c
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 14:29:36 2012 +1200

    altosdroid: whitespace (spaces to tabs) (part1)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 0f3597389977f86a8c1bdff1b7f46107c43ef306
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Aug 26 12:41:24 2012 +1200

    altosdroid: Update copyrights
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 7ecb429fe4682faf209452b1738ff3c8096fc5d5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:46:55 2012 -0700

    altos: Configure telefire SPI and LEDs correctly
    
    This places the telefire SPI bus on USART1 option 2 and
    marks the various LED functions with symbolic names.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 310c1d0bf83448eb12e5d64ac09a4279c25fd258
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:44:35 2012 -0700

    altos: telelaunch doesn't need ao_radio_cmac_init
    
    This function was used to initialize the LCO functions, which were
    moved to ao_lco.c a few commits back, so ao_radio_cmac_init doesn't
    even exist anymore.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6581fa1641882198c870c2f7b1340794b9d47f29
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:42:32 2012 -0700

    altos: Get ao_pad.c working on telefire v0.1
    
    Monitor all four channels, allow any channel to be fired.
    Turn on power LED at startup time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83e0d4352041b3964ea7a133b0f67da9ebaa1c77
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:40:27 2012 -0700

    altos: Split out LCO functions from ao_radio_cmac.c to ao_lco.c
    
    These functions are not used in the telelaunch or telefire nodes, so
    don't force them to be included.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c64999c39d6d9242f98bdc9312436c3333115bfd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:39:46 2012 -0700

    altos: Have radio_cmac turn on LEDs as appropriate
    
    Use AO_LED_RX and AO_LED_TX defines if present to control LEDs during
    radio operations.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a8e9906513227600599da12b268ff5f807ae98c7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:34:55 2012 -0700

    altos: Add 'ao_led_set_mask' in the PCA9922 driver
    
    This lets a subset of the LEDs be controlled independent of other LED settings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50b58d703b8b48005a3ca9ad4e3603d6f7ac1430
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:33:38 2012 -0700

    altos: Make cc1111 SPI pins configurable
    
    Allow either USART in any configuration. Still only supports one SPI
    bus though.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a0ed0ff4192060854d69e640de2c30105eb2f62
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 24 00:27:13 2012 -0700

    altos: Disable telefire 'pad' listener when testing radio
    
    Ensures that the radio testing won't block waiting for a firing mode
    packet to arrive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 659c0cd3ee4b9581c12ac2cd1b4162bf07a921ce
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 19 10:02:16 2012 -0700

    altosui: Check for JRE 1.7 in Windows installer
    
    altosui runs fine with version 1.7 (on Linux at least), so allow that
    version to satisfy the java check instead of requiring the user to
    down-grade to 1.6
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab1279cc6a683595631d7ac8bed7b36e0c8a691c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 18 22:51:47 2012 -0700

    Here's the button driver and event queue logic
    
    These were neglected in the commit which was supposed to include them
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93db8febda03d9a02c5c1ccdc6ad44eaf00a433b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 18 21:26:34 2012 -0700

    altos: Add MMA655X driver
    
    Just debug code at this point, will complete on real hardware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8457ca81adc9d62a7ffe56a7c0c36f2fcadaa682
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 18 21:25:34 2012 -0700

    altos/cc1111: Document SPI bus pin options
    
    Just a comment in the source code about which pins each option selects.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f46d94ca5c969c88dd307d1b684d6fafa2157020
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 18 21:24:16 2012 -0700

    altos: Use split SPI bus for MS5607 sensor
    
    Leave CS low while releasing the SPI bus when waiting for conversion
    complete -- other SPI bus users will use another set of pins.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1a48aa9ee0bf7fa6720b34c0f544485caea7cac
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 18 21:21:58 2012 -0700

    altos: Allow STM SPI bus on multiple pin sets
    
    This allows multiple STM pin groups to be used for each SPI
    bus. Useful for the MS5607 sensor which signals conversion complete on
    the MISO line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00abbbb79de67dc95176fe48b23ce3e8614e8d3a
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Aug 8 07:07:49 2012 +1200

    ao-send-telem: make --realtime work
    
    (add "break;" to the case statement for options)
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 9456332fc16269270a2e9b7ef0b54523800cfe27
Merge: bd02349 4d4ad34
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Aug 8 06:49:15 2012 +1200

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 4d4ad34aec0c75c66162b992f1e52947e4685730
Merge: c7f2285 8e4ebd1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 7 11:48:20 2012 -0700

    Merge remote-tracking branch 'mjb/master'

commit bd02349111ae0f39b320e6a10a330051ddc39fdf
Merge: 8e4ebd1 c7f2285
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Aug 8 06:46:56 2012 +1200

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 8e4ebd1f6eb928b5cb7bcda4ed88851aa9e61bdf
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Aug 8 06:45:03 2012 +1200

    Add ao-send-telem to .gitignore
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c7f228503870c44dfd278ede8b0980dbac73d3c7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 7 11:32:16 2012 -0700

    altos: Fix .sdcdbrc file for telebt-v0.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c58f3d1a373b20fac3f51037008bcc40955f1348
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 7 11:30:47 2012 -0700

    altos: Oops. Serial 1 stdin was busted by typo
    
    A typo in the symbol used to enable stdin wakeups from serial1 caused
    the input to pend until some other wakeup occurred.
    
    This also makes the serial1 hw flow control pin selects in config 2
    work right, although those aren't used by any current product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46f87373bc8c28442273ee4f8da3a352223150f5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 22:53:52 2012 -0700

    altos: Add button driver and event queue
    
    With this, a single task can wait for any button or quadrature input
    device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11046bc89b3ce6386f1005fc8476b08f54d6f5fb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 21:54:58 2012 -0700

    altos: Support multiple quadrature encoders.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f7e61c749b02ed16e368502062e39b0471e9257
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 20:20:32 2012 -0700

    altos: Fix up quadrature driver
    
    Mostly works now, should work reliably with a bit of input filtering.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab379493dbe9923db8e458d2f4e0344df17d331c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 19:35:02 2012 -0700

    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    altos: Test quadrature driver

commit b0b52ca73bc836336ecc70247a9ed1dd633920d9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 19:34:34 2012 -0700

    altos: Add quadrature driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6171892fa32e8a662a494ec6ba28a82fddc68589
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 6 19:33:44 2012 -0700

    altos: Add ao_gpio_get and ao_exti_set_mode
    
    Needed to support general GPIO interrupts
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit de701d5a234cd21930cf92c9cabebb0e230da9b5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 14:58:40 2012 -0700

    altos: Build ao_kalman.h from cc1111 subdirs as needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc9aed1ef3485d259722c9b89e19969e0afe257c
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Feb 26 22:30:09 2012 +1300

    Adjust service to be persistent.
    
    * Run as a foreground service -> high priority
    * Notification set to display as "Ongoing".
    
    Changed logo to be in colour at keithp's request. Greyscale logos still present as *_g.png
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit b80d1f4e8a2df3ace64468a38a815a4f982aa179
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jun 10 20:04:24 2012 -0600

    move from Debian packaged sdcc to new cc1111 package forked from 2.9.0-5

commit 0f82021186565fda10df7893b95deae4a1f32778
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:17:25 2012 -0700

    src/cc1111: Enable SPI slave mode
    
    This is untested...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39594fdb3e30a1a25dd894c217e3d9d773bab972
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:16:25 2012 -0700

    src/cc1111: Allow serial0 without serial1
    
    The ao_serial_speed structure is needed by serial0 too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2610b316eb939c1532061646b05207fcd54d984f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 5 12:15:36 2012 -0700

    src/cc1111: Add ao_gpio_set macro
    
    Allows general GPIO-using code to run on cc1111
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82a37d70e3cacf792c1aa18f8c0d2a19d6f321ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 4 22:58:48 2012 -0700

    altosui: Move 'implements Runnable' from AltosSerial to AltosLink
    
    AltosLink is the class providing the 'run' method, after all...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af34baf5dc587bee4cffa699ef383f85dde8c7cd
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 2 23:38:26 2012 +1200

    Reduce size of textview.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 359d7353fd7b7d4d537db04c5e89724502333ff8
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 2 22:09:24 2012 +1200

    AltosDroid: Begin re-working Bluetooth code
    
    * Move to using explicit 'magic' UUID, rather than java reflection
    * Re-work UI to make it more useful for testing
    * Use Insecure RFCOMM only, and remove code that differentiates.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c5304ac976dd44344a0b70ae3622e1f2d112a147
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 2 21:20:23 2012 +1200

    Fix min/target SDK versions
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 7481d06bebc2dc1473f451971d8b744c9da4e726
Merge: 599e28b c56dead
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 2 21:18:15 2012 +1200

    Merge branch 'master' of ssh://mjb@git.ethernal.org/~/git/altos

commit 599e28b2242c79bdd0960ef16e580e51a2fa3795
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Aug 2 21:16:54 2012 +1200

    Re-work external lib support for newer Android SDK
    
    * Remove older *.properties methods of locating lib dir
    * clean up Eclipse classpath file
    * adjust Makefile.am to link AltosLib.jar into libs/
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit c56dead72f65e7468017656347dba531ab2ca480
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Jul 31 20:05:35 2012 +1200

    Ignore autogenerated file: altosui/Info.plist
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit fb79f8fb358f8df25674336cd558fc3998cb7d9e
Author: Mike Beattie <mike@ethernal.org>
Date:   Tue Jul 31 20:04:34 2012 +1200

    Don't build ao-stmload if stlink is not available.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 2e7e304e67bc1e094282c8668fa8cccf09f9c9b4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:48:08 2012 -0700

    altos: Add driver for STM internal flash
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 843fcab46d633e5bb6959286adeb68e41a4c30a3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:44:56 2012 -0700

    altos: Add telefire-v0.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4d244eefa4c779cd9c8a91389bf998c54705b72
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:42:53 2012 -0700

    altos: Add software AES implementation
    
    This is untested
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21e39811bd234c6f66ab7644864fcc1b8c316998
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:36:50 2012 -0700

    altos/cc1111: Fix serial 0 option 2 pins definitions
    
    tx/rx are 4/5, rts/cts are 2/3
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 743dca54012758d3ae54312d542b34afa88495cd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:35:15 2012 -0700

    altosui: Remove duplicate values from info table. Add altitude
    
    No need to have state/call/serial/flight data, those are all in the
    header. Having altitude makes Monitor Idle slightly more useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bf21399d3d47d58410df4c6ce89fc20fcd42c89
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 19:34:00 2012 -0700

    altosui: Handle Monitor Idle errors better
    
    Deal with missing data by checking for MISSING in more places.
    Handle serial communication failures during send by reporting back
    from libaltos.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 59588ba34159b27c02e1a886b46497ecfa0cf4d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 29 16:22:23 2012 -0700

    Add ability to re-play telemetry through TeleDongle
    
    This adds a new command to TeleDongle to send arbitrary data, and then
    creates a new tool, 'ao-send-telem' that replays existing telemetry
    files through TeleDongle.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52e920bc7a98edf5c6f2ad0bd59d581011dcd5c9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 22 15:18:27 2012 -0700

    altos: Move ao_radio_cmac.c to core (it doesn't depend on hardware)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 233ab58df8ac8e1fdeab8d4c2f6c8c9d3f6e7be1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 22 11:53:44 2012 -0700

    altosui: Move AltosIgnite.java to altoslib
    
    To be shared with altosdroid eventually
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38f66a31174dd367e39d717c527f555add60a9d4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 20 12:04:17 2012 -0700

    tools: Use pkgconfig to find stlink for ao-stmload
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e033a72d3f420e18ed24354c7dfc7e1317a03fb6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 20 11:08:22 2012 -0700

    Add stlink pinout
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15ebd9c75aa57572040e3b1ee41e6f3eb8cf92ee
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 19 09:46:20 2012 -0700

    altosui: Delay starting KML output for flight and GPS coords
    
    Don't start outputing KML data until the telem record containing
    flight number and GPS coordinates are present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ada6f2dfc045e77cb9499f20cdec1b4a54ef0db1
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 18:41:00 2012 -0600

    telescience: correctly calculating rate values with higher resolution

commit e2b472bbb2418fc13be42dbc7c52beb88479c46d
Merge: 75d6aa6 b242f27
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 14:25:27 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 75d6aa6f798606f1a6c5a46542065dda81e63b2a
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 14:24:05 2012 -0600

    ICP3 working

commit 49b1ff4c614d24977b33cd17b583acc87acff476
Author: Robert Garbee <robert@gag.com>
Date:   Wed Jul 18 13:41:27 2012 -0600

    Timer 3 working with slower clock and all 16 bits.

commit b242f2756a8d9419a9bdba890b9e6b73560bdc19
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 18 00:03:54 2012 -0700

    altosdroid: Start adding an AltosLink subclass for android
    
    Will talks over bluetooth while providing an AltosLink APi
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f164e48cbeff521d45737794e2046a08322951d6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 18 00:01:51 2012 -0700

    altosui: Make scan UI handle incremental telem data
    
    The new telem format doesn't send everything in each telem packet, so
    we need to handle updating information incrementally in the scan
    results. This involved clearing old scan data when switching
    frequencies and then updating existing entries with new data as it arrives.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a698cd68968fc0be5f96b1729cdea2f65d2ccbf6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 23:59:13 2012 -0700

    altos: Toggling telemetry monitoring would replay the telem queue
    
    Using the 'm' command to turn telem off and back on would end up going
    around the whole telemetry queue replaying everything there as the
    wait loop would exit when disabling monitoring even if the ring was empty.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9fd5e3c28fb0fd6da8641e7dd18b9912866d1b75
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 21:06:07 2012 -0700

    altos: With debug cables disconnected, CC1120 seems happy at +16dBm
    
    Let's see how it goes...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 700818c8ff0518e79bff2f0e80b2cc3cb3b48bf0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 21:04:58 2012 -0700

    altosui: Accept variations in spacing for igniter status reply
    
    Megametrum uses different white space; just deal with it here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6921c9040b1f1fc4408d163532b0695a3611195
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 21:04:23 2012 -0700

    altoslib: Move idle monitor managing code to altoslib
    
    More stuff to be shared (potentially)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4be63627e146c7c868b5b3468d34880a561cfba
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 20:44:55 2012 -0700

    altos: Megametrum ADC values are 12 bits, discard low 4 for telemetry
    
    We've only got space for 8 bits for the ADC values for pyro channels,
    discard the low 4 bits instead of the low 8 bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97c1cfee929a35dd1596dc02ce519b80132f3c5c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 20:43:31 2012 -0700

    altoslib: Don't use MISSING values in max computations
    
    Early telemetry state may be missing critical data, don't use MISSING
    values in computing max ranges.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99b7eaf8d1b312443b842d078fb8464032b3a39b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 20:42:42 2012 -0700

    altoslib: Fix MM conversion functions
    
    Pressure is already reported in Pa, no need to convert that.
    Voltage divider computations were backwards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e93c6bcc799d76d4ff425815e2601a25e6796229
Author: Robert Garbee <robert@gag.com>
Date:   Tue Jul 17 13:23:48 2012 -0600

    first work on PWM input to TeleScience, 'p' command displays timer 1

commit a5d873d47b3b16ca32559b4de668bf07b25eddb0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 01:24:52 2012 -0700

    altos: Place STM config values at fixed addresses for re-use
    
    Just like cc1111, stick the serial number and radio calibration values
    at known fixed addresses so that when re-flashing the board, we can go
    find the existing values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20877ae9de8bb5d3a29e2a96024e53afbd396f55
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 17 01:18:45 2012 -0700

    Add ao-stmload tool
    
    This loads an ELF image through the STlink programming interface using
    the stlink utility library
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eda636c5f309b85282b4142118ee65673d28d137
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:36:20 2012 -0700

    altosui: Skip unknown data when parsing ADC for idle monitoring
    
    This resolves an infinite loop when talking to megametrum.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52196975c447851f14619213c1de5101d334eebc
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:35:11 2012 -0700

    altosui: Move serial datastream parser to altoslib
    
    instead of having it in altosui
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0edb5616a70fd480317acc99ec3c28c662aa8556
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:34:01 2012 -0700

    altos: megametrum depends on ao_companion.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5860f75677ee20fcf35ab89a6b62f3e14a1c32f5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:32:26 2012 -0700

    altos: Enable pyro channel control in telepyro
    
    This should make the board actually work now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ce645a79b54e22d7835c6e390a22a5ad501a339
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:30:29 2012 -0700

    altos: Add manual firing command for extra pyro channels
    
    In parallel with the existing igniter commands, this tests the
    programmable pyro channels
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6581eefbdbd8d3e94f615bdf11652a000d131c8e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:27:58 2012 -0700

    altos: Use 'HAS_ORIENT' to enable orientation selection in pyro code
    
    Don't expose orientation options when no orientation data is available
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1887ca3d7d4a0259686f8c1e68d1e47c47b4ab84
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:25:47 2012 -0700

    altos: Pass flight dynamics to companion boards
    
    Necessary for TelePyro
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 90507d4f7ef77b0870a032b1d9809898c2924721
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:24:21 2012 -0700

    altos: Make ao_tick_count visible
    
    Necessary to fetch it when interrupts are already disabled as we can't
    call ao_time then.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 184e2ff4790974733df57facdeeb96bfe692ab54
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:21:21 2012 -0700

    altos: Remove some debug code from avr ADC driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7ca3a7849b3cbbb38143d35fe86972290bd4e61
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 15:18:12 2012 -0700

    altos: Make sure telepyro ao_product.h is built before .o files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4de789331098abc24abcb9390a35aef889a41784
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:47:53 2012 -0700

    altos: Make storage addresses datatype configurable
    
    No sense using 32 bits for tiny hardware
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84d5e00d417af4924594908d19346bb965089cdd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:44:40 2012 -0700

    src: Add driver for AVR internal eeprom. Use for telepyro config.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a23030031c31267fc4f14accd9220f285c03b61
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:40:49 2012 -0700

    altos: No space for pyro help on TP v0.1
    
    AVR doesn't have enough ram to hold the help messages, and we can't
    use them in flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 366217e86a4c353012b5102322ee6927f7b27a21
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:39:05 2012 -0700

    altos: Remove unused 'func' from ao_config_set
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81b7b58c9df01847fa47747deeff8c3c91304ad1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:37:58 2012 -0700

    altos/avr: Remove debugging command from USB driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 42a51becf4b76f23dbd4f5f80f8879ce696aa543
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 16 14:36:51 2012 -0700

    altos/avr: Remove debugging printf in avr stdio startup
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0cfd22baa6af44e053428c30c1a95cf5551b68af
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 02:44:17 2012 -0700

    src: Add explicit 'pin' argument to ao_enable_output
    
    This lets the cc1111 use the atomic bit operation instead of a mask,
    which is immune to interrupt issues as well as being a shorter code sequence.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 37032e4b0cbac4c823e3dd18e60ad8900e9ceff1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 01:29:50 2012 -0700

    altos/megametrum: Support the four additional pyro channels
    
    These use the new pyro code to allow for some flexibility in programming.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82b50fc1b7f2c6af7264fbad2c35508abc15e81e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 01:28:55 2012 -0700

    altos/stm: Expose ao_gpio_set which sets a specific GPIO pin
    
    Will need versions for other architectures
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 726e0f2c547b6bae1f1e640e2c1155c0b9631a9b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 01:28:31 2012 -0700

    stm: running out of memory in MM -- reduce stack to 668 bytes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d90587535676f9492f0fde6b974353158104ef88
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 01:26:38 2012 -0700

    altos: Add arbitrary pyro channel support
    
    Programmed by specifying a conjunction of flight conditions that
    trigger the igniter to fire.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09633cac697e37d770b2b666ab20cab30628484f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 14 01:24:14 2012 -0700

    altos/stm: Force STM stack to start at the top of RAM
    
    Using a fixed size means crashing if there's not enough space for
    that, or wasting memory if there's too much.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5f6d4e5251a825395c93916afa3af659c678498
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 19:15:32 2012 -0700

    altosui: Abstract remote connection timeout stuff
    
    This moves some of the logic for managing when to present the 'cancel'
    dialog for remote operations to altoslib.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f078a591cf2fafe89bb1bb883f49d80750129d44
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 14:28:53 2012 -0700

    altosui: Remove a bunch of debugging printfs
    
    These aren't useful at this point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 846a6298e4a8bfbe87bb24d7b0802c0bf6f233be
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:53:30 2012 -0700

    Report RSSI values in monitor idle UI (trac #44)
    
    This adds a new 's' command to TeleDongle to report RSSI value from last
    received packet, and then has AltosUI request that value when closing
    the remote link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf44ea354c2d1780cee343132c6058e11e9eefa3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:52:32 2012 -0700

    altos: Fix gcc compiler warnings in GPS code
    
    unused variables and mis-matches in printf format codes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe70611c3c7d4b8cce3b5292f0ec549f3191bf86
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:50:56 2012 -0700

    altos: Create macros to convert from/to radio RSSI representation
    
    AO_RSSI_FROM_RADIO and AO_RADIO_FROM_RSSI.
    
    Removes a bunch of open-coded versions of the same function.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18431c88c8a6cb267922b97192e8b7ddb88d0e7e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:49:26 2012 -0700

    altos: Have 'make clean' remove all programs, even old ones
    
    This makes sure that changing version numbers doesn't leave old
    compiled output lying around.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 726f47c8a07f060aed930e1d102a1e8b5a5c7aed
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:47:25 2012 -0700

    altos: remove optimization for 'help' that confuses cc1111 compiler
    
    The cc1111 compiler gets this very wrong and prints piles of garbage
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7be98836e69a222b2f9f4baacddcf12d168e2207
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:40:54 2012 -0700

    Add megametrum outline to doc dir
    
    And install it alongside telemetrum-outline
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc5d106f014f714a9a2d5f595a2de0da8f7da80a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 13:40:07 2012 -0700

    altos: Ignore megametrum built files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 675ccd41e3b668cd4e1d2dd282dd317a00d00151
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 11 00:35:21 2012 -0700

    Get AltOS version numbers into Mac 'about' dialog
    
    Generate Info.plist from Info.plist.in to correctly set the VERSION
    information. This also changes some strings around to make them look better
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46407f7f3e4d2b6e74b3a2e90b38736a792cfc54
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 22:41:59 2012 -0700

    altos: Force 434.550Mhz by connecting  debug gnd and clk (trac #41)
    
    Check for pin P2_2 low at startup and set the frequency to
    434.550MHz. This value won't get written to flash, so rebooting again
    will restore the configured frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa305da7e5dc182c99c09e422c053d85ed48d5d5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 22:09:44 2012 -0700

    altos: Continuously update ground state while on pad (trac #42)
    
    Average data for 5 seconds, wait 5 seconds and if still in pad mode,
    replace the existing data with the new data. This should avoid
    averaging in boost data while still keeping things reasonably current.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b92164143aaf0d2aa3d5d742484391c16545289
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 22:08:28 2012 -0700

    altos: Set HAS_FLIGHT_DEBUG=1 to include the flight debugging commands
    
    This leaves USB enabled, and adds the 'F' command to dump
    internal flight state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb60d87b02c0fc83a0b4268212f0b6b740c984e3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 20:35:19 2012 -0700

    altos: Signal continuity over radio in pad mode (trac #40)
    
    This is especially useful for telemini which has no beeper, allowing
    you to hear the continuity signal while at the pad over the air.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bca72b782a2909ecedef15ad589292647221ca56
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 20:34:02 2012 -0700

    altos: Add 'void' parameter to ao_fec_decode callback parameter
    
    This keeps the compiler from whinging about the lack of a prototype.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aafa8859ecb27383f697b98f6991643b44f4721a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 20:32:31 2012 -0700

    altos: Save some memory.
    
    A few minor space savings in ao_cmd.c and ao_config.c.  Don't build
    unused conversion functions ao_altitude_to_pres and ao_temp_to_dC
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a60c5a728530e4659a6750d8d5b87000735d4531
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 15:15:00 2012 -0700

    altos: Improve ao_flight_test a bit
    
    Add -i flag to include flight description
    Have run-tests know how many failures to expect
    Add run_baro to plot a single flight using the baro-only mode
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b89d37d357273b97050c00d7fe12022e32799fa8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 15:13:55 2012 -0700

    altos: add some (unused) test code for different soft-decision sizes
    
    This lets us experiment with hard-decision and other possible
    soft_decision bit depths.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6694cedd560a7ea9520ef11472c2770b489187c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 15:13:18 2012 -0700

    altos: Eliminate compiler warnings when building ao_flight_test
    
    We turn on a pile of warnings for that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ae3f467a1d7be2fc3b1a45ba12568a3a25a0099
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 15:11:36 2012 -0700

    altos: Rename *_mm.c back to *.c
    
    Was just a temporary hack to keep cc1111 products building during MM development.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 702ca87983594880d7926d2317d63802af82746e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 10 15:07:34 2012 -0700

    altos: remove stale ao_flight.c and ao_sample.c
    
    The mega-metrum versions are now the official versions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31b05454ec8d90b89fa3039563ff0e86ae80b2a0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 3 21:02:20 2012 -0700

    altos: Move profiling settings to Makefile
    
    Instead of splitting the changes across Makefile and ao_pins.h, put
    them both in Makefile to simplify enabling profiling.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 939ad8bfd640ed55116703a58f87af06e75ef87e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 3 21:01:01 2012 -0700

    altos: Crank up the gaussian noise in the FEC test
    
    This lets us check to make sure our receive performance isn't
    degrading at all, instead of just making sure we can receive
    perfect packets well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e8ab00cc45e48230e3b2018ce959114d3fedd228
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 3 20:59:35 2012 -0700

    altos: Viterbi performance improvments. Down to 5.7ms for command decode
    
    Stealing more of Phil's good ideas, decoding a command mode packet has
    been reduced from 9ms to 5.7ms. Lots more comments to help future-me
    figure out how this code works.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea957f9e6144f8411ac84ee2905700f55f5a6e8a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 3 00:29:43 2012 -0700

    altosui: Fix flight data download for TM. Look for MM flights when graphing
    
    A couple of minor fixes, the first to not force the log format so that
    TM/Tm data will be downloaded correctly and the second to expand the
    set of files to include '.mega' files when plotting data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 933fc7e4c2f617e49e1cfdf45b83695290b51456
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 2 23:44:10 2012 -0700

    altos: Do not block igniters on the radio mutex.
    
    Blocking igniters on the radio mutex fails when doing igniter testing
    over the RF link; the packet receiver task will never release the
    mutex and the CPU at the same time, causing the system to lock up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50b343d389039eae082e82b8ac0b76ae3e2b3ad4
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Jul 1 23:24:20 2012 -0600

    extend cross-compiler availability logic to all target CPUs, not just ARM

commit f0ec8416f2e308e40e1b9f34a7c2549989fee5fb
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jun 30 13:00:33 2012 -0600

    conditionalize build of ARM binaries on presence of arm-none-eabi-gcc in PATH

commit edbc5d27c8c2936b59ff5289276d9198b501ebc8
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 28 17:43:36 2012 -0700

    altos: Declare cc1111 accel_ref as unsigned so the math works
    
    If accel_ref is signed, then the careful shifting and dividing dance
    necessary to correct for changes in the relationship between the 5V
    and 3.3V supplies always generates zero.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ccf64117662fc800a07b3a25e52255b80f8b5eaf
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 28 16:42:59 2012 -0700

    Update version to 1.0.9.6
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca1bc20735a170a77066f5f37e0ad728899a3989
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 28 16:05:56 2012 -0700

    altos: Disable MS5607 interrupt in the handler
    
    Avoids having the interrupt re-raised multiple times until the reading
    task finally wakes up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 572e1664938c7ce6c308b36779f6a412959e03f1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 23:11:27 2012 -0700

    altos: Track missed HMC5883 interrupts
    
    When it fails to signal conversion complete to the CPU, keep track of
    that and report it with the rest of the current data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 79dbe1a5e46d7f0b8929400897631ab969cd2bc0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 23:09:16 2012 -0700

    altos: Increase default STM stack to 648 bytes
    
    512 seems cozy given the printf implementation we're using and the
    extensive interrupts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aab7b31b71aa7c87c5a5003084e4b7773c30835f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 23:05:36 2012 -0700

    altos: panic if MPU6000 self test fails
    
    Don't try to fly if the board isn't working right.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9f65211c378849270a6138fda05ed2a166f7d82
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 23:04:25 2012 -0700

    altos: Disable mag sensor for megametrum
    
    It doesn't work unless USB is connected or occasionally while the
    debug port is enabled. It's mystic.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd623b21cb904238c6d903b6936ff2f8ebf6f339
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 23:03:33 2012 -0700

    altos: Allow megametrum to be built without using the mag sensor
    
    I'm having trouble getting it working reliably, so we'll like disable it
    for now. This patch makes that possible.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd21c050fd8b96b33ab6859c942bf55cf2b91868
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 19:47:52 2012 -0700

    altos: Make profiling Viterbi decoder more useful
    
    This blocks starting the decoder until all of the data have arrived so
    that the time spent in the decoder is easily computed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 407cefae9cb95c5910b3bd79851776c48729e06b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 19:45:22 2012 -0700

    altos: Unroll viterbi state loop for >30% performance boost
    
    9.3ms vs 14.7ms, a clear win.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f258fe565dc3e58b83761bfa1a2276946012163
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 17:18:57 2012 -0700

    altos: Clean up STM I2C clock computations
    
    Fix both clock time and rise time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84f9a525c64491afa9b7a565e3c10a4cee106e14
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 17:17:44 2012 -0700

    altos: Clean up radio CRC handling
    
    Make the FEC code just set the CRC_OK bit like the cc1111 radio does;
    eliminates a bunch of weird conventions across the FEC API.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0b7f5da2d29716959c6793d744e47a3d435c247
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 14:38:35 2012 -0700

    altos: get MPU6000 I2C link working reliably
    
    This slows the i2c bus to 100kHz (yuck), sets the rise time to spec
    (it was way off) and adds more delays during bus setup. I've run this
    for hours now without trouble. Will try to adjust things back to fast
    mode and see if I can make that work as 100kHz isn't fast enough to
    reliably get data at 100 samples/sec.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e63d624f9670b5e2e002fcd5f24b80cf7f1effdf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 14:35:56 2012 -0700

    altos: reorder stm USB state stores to avoid races
    
    Must set ao_usb_in_pending before telling USB about new data or an
    interrupt could arrive at the wrong time to clear it.
    
    Same for ao_usb_in_flushed.
    
    Without these changes, I've seen the USB bus lock up on occasion,
    waiting for an IN packet to consume data, but with no IN data pending
    in the hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08a4ed8fe794a2b2b52147bd5535fe0954822e95
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 14:34:53 2012 -0700

    altos: include targe SPI speed in get request
    
    STM needs it to be provided when enabling the SPI device, so just fix
    AVR and cc1111 to do the same.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a1d4a557a30e2e743936b828b654187ec562ca8
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 02:46:27 2012 -0700

    altos: Wait for i2c START condition before setting interrupt bits
    
    This seems better than the random loop that it replaces, but I still
    have no idea why this is required; it doesn't coorespond to the docs
    at all...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9695a217e13f9d194b6dc40e2696017e5f8e8176
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 01:22:32 2012 -0700

    altos: disable FEC debug on MM
    
    Seems to work; we'll leave the code around in case something bad
    happens later.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b96eece8e42df0713fc92d47b6bb27604c0168a2
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 01:22:00 2012 -0700

    altos: Clean up cc1120 driver a bit
    
    Make some variables static, remove stale debug code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a00aff5ee93ea9763b5c0466fcecc823cad135ef
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 01:20:43 2012 -0700

    altos: Don't try to grab radio while firing MM igniters
    
    If you're in idle mode, you stop forever as the packet mode receiver
    will own the radio mutex forever.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8fc643c9768f0db31a248331681af9490f5715af
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 01:19:05 2012 -0700

    altos: stm i2c debug code was calling flush() even when disabled
    
    The fancy stm i2c debugging code had calls to flush() that were
    invoked outside of the conditionals leading to all kinds of fun --
    flush() may re-enable interrupts, yield or do all kinds of wacky
    stuff, none of which is appropriate from the middle of a device driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0285696e5280fc64774b6c3a2fcdaa36bd36ae7c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 27 01:17:51 2012 -0700

    altos: mpu6000 requires a delay during start
    
    I have no idea why this is required, but the mpu6000 will not come up
    and run if this isn't present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4847595e0383e5ff9c5a373f3c7f2af8c210c50a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:25:00 2012 -0700

    altos: ao_ignite.c is no longer cc1111 specific
    
    Move it to core
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8efac8eb99a9aabb45d9fbf742e4be91e4b331a5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:21:04 2012 -0700

    altos: Add debugging code to check for stack overflow
    
    Stack overflow often happens from interrupt handlers sitting on top of
    a task stack. Check for this during ao_wakeup as that is often called
    during interrupt processing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ebeac02a990da3fa6dd71487141d0bc6f78b42de
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:20:17 2012 -0700

    altos: Enable full flight computer functionality in MegaMetrum
    
    This turns on everything that currently works
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb2b83fcd28199d8c686e676d46d6ecfbf706f37
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:18:44 2012 -0700

    altos: Create a 32-bit 1MHz timer for use in profiling execution
    
    This provides a simple method for getting high-resolution timer data
    to use in performance tuning code. It's not used by default anywhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 097b337eb9b7deff13d5dcdafddec9bec3868b93
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:17:00 2012 -0700

    altos: Abort radio receive when using flash memory on megametrum
    
    Radio receive camps on the SPI bus, making it impossible to access
    flash memory. Abort any pending receive operation when trying to get
    to the flash part.
    
    Yes, this is a total hack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ae69a1c2ce7e45db9d9c175bc63867eff68ebe5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:15:54 2012 -0700

    altos: Make gcc happy with ao_telemetry_set_interval
    
    Using unsigned locals made GCC sad as it was compared with a signed value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4036bf6e7997b618f89a05dd1214c16066ba2b2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:14:13 2012 -0700

    altos: Turn radio-related bits of ao_flight_mm.c
    
    Now that MM has full radio functionality, we can make it work right.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5f5fd92109ac6f4909a81303d52bc9220cc2520
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:13:14 2012 -0700

    altos: custom hex printer for telemetry packets
    
    Using printf is way too slow with pdclib; just hand-write hex byte output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f1ae622eff60e05c1f5d8f822a3cf6a85750c6cc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:11:10 2012 -0700

    altos: Optimize FEC encode and decode
    
    Integrate interleaving, CRC and padding within the decode/encode
    functions.
    
    Provide for ISR priorities so that the 1120 RX interrupt takes
    precedence over the other interrupts or we risk losing bits.
    
    Optimize the viterbi decoder a bit (goes from 10ms per packet to 7ms
    per packet).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 936ecad62596f34773afb7460b10f63df7d0896d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:07:38 2012 -0700

    altos: Add GPS logging code for MegaMetrum
    
    MM uses a different logging format with larger log blocks, so
    restructure the GPS logging code to fill them up
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33f8f7add27a02d24b0671da353b59762224c1ee
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:05:42 2012 -0700

    altos: Make cc1111 radio control functions static
    
    No need to publish these; they're all private to cc1111
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03dc80d15a2f8fe9d7340351226dadd8bc3cfdb9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 23:01:58 2012 -0700

    altos: Clean up usage of port parameters
    
    Make stm port parameters always be pointers; this avoids the confusion
    where some macros took '&port' and others took a bare 'port', and also
    unifies code to run on other processors in a consistent fashion.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f11f05c5d634de2a80c34d0d3dc93925980f52e6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 22:20:50 2012 -0700

    altosui: Make libaltos recognise new USB ids
    
    libaltos has a small range of 'AltusMetrum' products to avoid opening
    other devices. We've got more IDs, so open up the range.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9dcb4e2ab60ecf0cc7371c1b1a620be952fa8776
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 22:19:01 2012 -0700

    altosui: AltosSerial and AltosLink both tried to provide frequency setting
    
    AltosLink owns all of the device configuration, so remove that from
    AltosSerial and make sure that AltosLink provides the right function
    signatures (wasn't using the new direct frequency setting command).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eab18714ed9eabbcef0ff81b07427da042a58ccc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 26 22:16:44 2012 -0700

    altos: rename ao_viterbi.c to ao_fec_rx.c
    
    Keep it parallel with ao_fec_tx.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09761fe0f6ed40ff74317fbb47d6a74068fb4ce4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 25 06:51:36 2012 -0700

    altos: Incremental viterbi decode
    
    Decode radio input one interleave block at a time. This overlaps the
    decode computation with the packet reception, leading to lower latency
    in an attempt to keep up with the transmitter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 628076aa90e7bc9a894646e417dd8e1fe149b60d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 25 06:38:34 2012 -0700

    altos: decode cc1120 received packets
    
    Call the fec decode function, compute RSSI and check CRC
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 70cf32e89df19bde5185339fc703532c8a5b8be6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 25 05:03:34 2012 -0700

    altos: Get cc1120 packet reception working
    
    Interrupt-per-bit, but it seems to work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 246174b32bb6cf827d240c32d6a51c3513a08c37
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 25 05:03:16 2012 -0700

    altos: Forgot ao_telemetry.h
    
    Not much builds without this...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b292c14790fc225029cba3f80ce8ad6c5652bc4e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 16:05:42 2012 -0700

    altos: improve FEC apis to reduce data copying
    
    Integrate interleaving and whitening into encode and decode steps.
    Add CRC checking function for receive.
    
    Make ao_fec_test program round-trip the data and verify correctness.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74f6a1a8c8fa9d5bb8d74c99782310b431dd4727
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 02:24:30 2012 -0700

    altos: Add ao_viterbi.c to megametrum build
    
    It's not used yet, just wanted to see how big the resulting object
    file was (492 bytes).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 566a0c277de01963922cabc80db8ec3a129923bd
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 02:23:08 2012 -0700

    altos: fix comment about decoding last byte of FEC data
    
    There aren't *any* forward bits to use when decoding the last byte.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83549f8bde42c3fddbdc817540c869dc8aefd013
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 02:13:52 2012 -0700

    altos: Make ao_fec_tx_test build cleanly with -Wall
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7bf07dfdad260c1f219064957ef08fb480bf20f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 02:12:58 2012 -0700

    altos: optimize Viterbi implementation
    
    Minimize data usage, make data arrays static
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff8de3af193839de4bacfd07ade7a5f9ac0bf5b3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 23 00:54:42 2012 -0700

    altos: incremental viterbi decode
    
    Decode bits incrementally. Don't bother decoding the last byte; it's
    always a pad byte.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 047e95421c87c5d056038797b48f759bedabf245
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 22 23:31:11 2012 -0700

    altos: Start optimizing viterbi decoder
    
    Only need two cost arrays (previous and next). Create constant
    full-width decoder table instead of expanding bits into bytes for each
    decode step.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbf79a0f9cb859d04e8e03d627219cb2bf49611f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 22 23:12:02 2012 -0700

    altos: Add the simplest possible viterbi decoder
    
    I think I understand how it works now. It's not exactly speedy, and it
    uses a lot of memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75e4521ec42a368cebc67a07f8713d7a854ea265
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:52:37 2012 -0700

    altos: Move FEC code to core
    
    It's not a driver as it's not specific to the 1120 chip
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b5548d6ced67201311e1072d37fbedd3d9929c9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:51:17 2012 -0700

    ao-tools: Support MM telemetry packets in ao-telem
    
    Parse the new packet formats
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f421818fd7062f03bfaf9e606d6a4cfdcb13b49
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:50:18 2012 -0700

    altosui: Support MM telemetry packets
    
    Required restructuring the whole telemetry system to provide abstract
    interfaces to flight data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff5b0ba90e73a83360a2e8a7e9969ed2c3ce1514
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:46:50 2012 -0700

    altos: Crank down STM SPI speed for MM
    
    The cc1120 is noisy enough to break SPI data transfers at 4MHz, so
    crank things down to 1MHz. It's "stable" now, but clearly needs a
    filter and shorter traces.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2bd95edb6f77daeb1e8f043c4a239c248728e0c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:45:42 2012 -0700

    altos: Add full MM telemetry
    
    Create two new telemetry packets to hold all of the MM data.
    
    This patch also splits the telemetry structures out of ao.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 419a801131c1034f1fa149a67850290431cbda72
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 21 09:39:10 2012 -0700

    altos: Configure STM LCD driver for giant LCD digits
    
    These devices require static mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 611f37607fadcdc9908d67456f844a452ad4a87a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:11:35 2012 -0700

    altos: Make sure ao_storage_config is set before reading config block
    
    ao_storage_read does in fact call ao_storage_setup, but we need the
    value of ao_storage_config *before* calling ao_storage_read, so call
    ao_storage_setup first.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae3662c56effda9f0516c7d6ffd2d5f56b859593
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:06:08 2012 -0700

    altos: hack STM serial number to 58
    
    otherwise altosui won't record telemetry
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 976a8375932ddb46ca3100863b0a892732c0923e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:04:53 2012 -0700

    altos: make cc1120 ao_radio_send re-entrant
    
    It gets called from multiple tasks, so put local data on the stack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 629f43e7c7abbff33e14b168a08a4b6a9c88b937
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:04:22 2012 -0700

    altos: Add telemetry to megametrum
    
    Now that the radio works
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b24f413da0b6d989b32e8654a91c8deee4c81dd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:02:50 2012 -0700

    ao-tools: add rudimentary support for MM telemetry to ao-telem
    
    Just pretends they're TM packets for now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4cb46b8a84a0dd5b8fcb479d7aa5157480e1bc67
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 19:01:24 2012 -0700

    altosui: Add rudimentary MM support to altosui
    
    Decoded the MM sensor packets as if they were TM packets.
    Add the USB ids.
    Add class of 'altimeter' devices and match those instead of just
    telemetrum as appropriate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55747ce210d7d80d5b4fdaaf9dc7ee0f7bc8b0a3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 18:58:56 2012 -0700

    altosui: Move product definitions from AltosUI to AltosLib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6d236fdc615625fbbf28377453f920729e49b0f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 16:17:00 2012 -0700

    altos: Software implemenation of CC1111 radio encoding
    
    Add CRC, whitening, FEC and interleaving routines for transmission
    path to allow cc1120 to send telem packets to cc1111.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a294852b3607947f0f86bf236785456d8719e5f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 16:14:33 2012 -0700

    altos: Be more careful about register save/restore in ao_yield
    
    Make sure the general registers are all saved before messing with any
    of them. Then, explicitly use r0 to save/restore apsr and primask.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d3fe2a80d0925e3eded6d738d05c5b4ea61504c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 16:12:18 2012 -0700

    altos: Don't lose IRQ disabled state in ao_sleep
    
    Using ao_arch_critical around the wchan setting will force interrupts
    to be re-enabled before ao_yield records the state of that bit,
    potentially causing problems with functions not atomically testing and
    sleeping.
    
    Tasks that need to set wchan with interrupts disabled should have
    interrupts disabled when entering ao_sleep already.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e6d96816e6604ee8d9bb49345a1c1211699a655
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 16:11:23 2012 -0700

    altos: ao_storage_read already calls ao_storage_setup
    
    No need to call twice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca310342d7b0bd1b78318cae38d920b8690dfd36
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 16:09:43 2012 -0700

    altosui: Catch timeout errors when setting up TD telem monitoring
    
    Close the port in this case so it can be used for other things.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 58e005375ca29dec6091d87159055004e7f19605
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 12:43:43 2012 -0700

    altos: Use interrupts to wake up after RDF transmission.
    
    Also clean up the debug output
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5df94f74522357e062f4ec2786ff825381b2fb10
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 17 12:42:32 2012 -0700

    altos: Crank cc1120 power down to 0dBm to avoid crashing CPU
    
    Looks like RFI from the transmitter is confusing the CPU; lower the
    1120 power output from +14dBm to +0dBm to keep the CPU happy.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e856df474c386b8df3d2bd9e87b766ae0439efbf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:41:17 2012 -0700

    altos: Reduce STM SPI data rate to 4MHz
    
    cc1120 doesn't want more than 6.1MHz, otherwise it gets very angry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e09e35471e788b88909ff01037fb8e0e4eabcd7d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:40:30 2012 -0700

    altos: Start making cc1120 radio work
    
    RDF tones and radio calibration work now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2949ea15c59215834fedac7646f50c8a09f716f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:38:37 2012 -0700

    altos: Fix cc1120 packet mode datarate and config
    
    Was using the wrong function
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b7e4c29bf9608bfc972ae28b53cc823f4c37f92
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:32:10 2012 -0700

    altos: Make sure cc1120 is initialized correctly at startup time
    
    Check to make sure it pulls down MISO when CS is enabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27c95adf35e646840b9bd562497eea0dc96bb9bb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:31:36 2012 -0700

    altos: use 'b' command for radio beep
    
    'B' is used by the baro data dumper.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93e6d0a2c0b60e7bedd34f06ba63b468dcc8e013
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:30:03 2012 -0700

    altos: Fix RDF mode data rate and PKT_CFG0 value
    
    Changes tone to the desired 1kHz frequency and ensures the PKT_CFG0
    has the right value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c96e60bedeb00d28c36436c12b803fd8cbadce26
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:28:55 2012 -0700

    altos: Actually write cc1120 register values
    
    Helps to not use 'read' mode when writing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97d163c88ed8c8f64a9714018863d0b6eedab38f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:27:48 2012 -0700

    altos: Configure cc1120 frequency
    
    Set default conversion value, and pull the selected frequency
    calibration data out of the config block.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5a7df405c242593cbc828d5b66bbfc141a35947
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:26:06 2012 -0700

    Temporarily disable packet and telem on MM
    
    While work on the radio code progresses
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit baf1be1def01266512e67068948bf19b04ead6aa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 15 22:23:10 2012 -0700

    Allow product to override maximum number of command lists (NUM_CMDS)
    
    Just in case some product wants to save memory, or have more.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bfbd1d82f4c25120a97840a1bd4787680823afd8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 5 15:15:25 2012 -0700

    altosdroid: Add files necessary to build application
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8c363d9411fd5e79e3f806894dbc12bcc106b88
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:56:25 2012 -0700

    altosui: More changes to migrate code to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5634192a6036c6c7b47d224e2988e81bb71a4557
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:55:33 2012 -0700

    altosui: attempt to get ms5607 data into .mega files was misinformed
    
    The ms5607 'p' command also means 'go into packet mode', which nicely
    broke attempts to communicate with teledongle
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 705891be53e298ac6ced4ba02b87d2f6d1085b34
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:54:36 2012 -0700

    altos: Make cc1111 products all depend on ao_arch.h and ao_arch_func.h
    
    Ensures that files get recompiled as needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9ad342ae4c34626df4f2891da4c7f6d2c14d73e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:53:53 2012 -0700

    altos: Other half of the ms5607 prom reporting patch
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dec5cbee22f13c47690b0c6bf7ca724ef132fe5e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:53:06 2012 -0700

    altos: typo in ao_monitor prevented ground station from including code
    
    This created ground station software that couldn't actually receive
    and report telemetry packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e687a9bafc696998b47fd0300fbc89dece09509c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:52:38 2012 -0700

    altos: Make 'v' command dump pressure sensor ROM values
    
    Avoids needing a new command
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1832e2f76c844e97a2bd11226b003fb2af8057db
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:51:35 2012 -0700

    altos: fix test builds of non-accel flight code
    
    Remove references to accel variables when building baro-only flight
    test code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06afa2c3e78ea5bc9f1eb4913ee35c0eab0ac1bf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:50:10 2012 -0700

    altos: Legacy telemetry needs original ADC record
    
    The legacy telemetry packets included the raw ADC structure directly,
    so make sure that doesn't change further, allowing teledongle firmware
    to remain compatible with old TM firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f1b14932149153a096961fff94191778f88581d9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:49:15 2012 -0700

    altos: Remove unused AES code from teledongle and tidongle
    
    Leave this out as neither of these products need it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 718a8affe1df98eacfd707b5c8c34f9456dcff14
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 20:47:14 2012 -0700

    altos: Remove accel_ref from pre v1.1 TM firmware
    
    V1.0 needs RAM space for flash buffer, leaving too little room for
    this extra data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a19d6790a9800f925c8de24aac71796351e2c04
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 4 19:28:58 2012 -0700

    altos: More cleanups for moving files to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f86dac643081987c8994ab57a96640d5e91b342a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 19:59:40 2012 -0700

    altoslib: Clean up random rebase failures
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd43a2ae7594f062a8980d1756a07488ee54b447
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 19:42:47 2012 -0700

    altoslib: Move new sensor library code into altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0772020c969a69c3b0a705de7362340a9732daab
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 20:27:45 2012 -0700

    Build altosdroid

commit e81163ed875dc93a618baf9278f43ed7dd0f730e
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Feb 23 16:43:04 2012 +1300

    Add local.properties to .gitignore
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 392c878000e9909d37dae6342df3d6cb8f217a1b
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Feb 23 16:41:26 2012 +1300

    Add TelemetryService.java and associated files
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 69e6df07976a56b49e07c242cd6e5b2cbd2a578d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 23 17:00:48 2012 +1300

    Move altoslib sources to top dir
    
    No sense having them live deep in the file system.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b659904109f992b8a3e61efb94e81cdb19af1c9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 23 16:37:24 2012 +1300

    Demonstrate using AltosLib from altosdroid
    
    Get things hooked up so that we can use AltosLib functions from the
    android application; it's a bit of a hack at present, but appears to
    work. Some more 'official' technique would be nice...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a018724e40f2a4c0bae8b3d5c77bb90328ad4314
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 23 11:15:23 2012 +1300

    Ignore generated altoslib files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 025eb09b5de9b50de143da9f36bc02818e018ba9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 22 23:39:01 2012 +1300

    Build Android local.properties from local.properties.in
    
    Make sure the SDK path is set correctly
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a80545d4ecedc4b98a9ee8296ab6abbbf64312d
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Feb 22 23:40:25 2012 +1300

    Add $HOME/android as an SDK location
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 091affece185dcd0832a55b0befeacaa182a57bb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 13 10:40:30 2012 -0800

    doc: Add companion SPI message protocol doc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bb5b5312a0c6102b12f3d4710ef213f0f6c67412
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 7 20:56:49 2012 -0800

    altosui: Clean up a few 'fat' build rules
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc86ae58c3a296730fa99010cc27b8b3c2c3b780
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 5 16:30:41 2012 -0800

    Add altosdroid/Makefile.am

commit dfa059b22bf15de3f25328aeef4fdb8e5ca664dc
Author: Mike Beattie <mike@ethernal.org>
Date:   Wed Jan 4 21:01:44 2012 -0800

    Add AltusMetrum Logo as app icon, and change app name
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 402f1e76909229fc0c3b54743ba577b657495faf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 4 20:54:40 2012 -0800

    altosdroid: build android bits when possible
    
    Locate android sdk automatically
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a48e4d40729e736929632ec422fd189ecdfba33b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 4 20:33:06 2012 -0800

    altosdroid: import code from mjb
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81465a20049da40cd8d3cda920d6585ffe87bfe3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 4 20:28:42 2012 -0800

    altosui: Move java altoslib to top level
    
    This will be shared with other (android) java code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6df16525927d8096d1c0cccf4c86bf4c6599d53
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:43:48 2012 -0800

    Add altoslib/.gitignore

commit 02b53b7f592b78b2fec4f4a17b6b3e114d2bf3c5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:42:18 2012 -0800

    altosui: Fix AltosTelemetryReader move
    
    Lost the provided link value causing a crash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9fb15d397890c7e78bf3c1438f142f62bfc2bd35
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:41:48 2012 -0800

    altosui: Remove unused files
    
    Left around from development, these aren't useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5270a0f1416baef5fde08547c6c98d97f973ae95
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:35:41 2012 -0800

    altosui: Move telemetry reader &c to altoslib
    
    Move all of the device and file reading code into altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93305717ac4c993c88d9144d797ca64d26db97c5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:13:38 2012 -0800

    altosui: Move AltosState.java to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5ac5c37ea385e3a2b2703c6f125b4e3b55e867a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 22:05:47 2012 -0800

    altosui: Pull most of AltosSerial into AltosLink
    
    Share basic command processing across java users
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18914b9a84bbd8c4364a1568bb07dcc2b04ad7ba
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 21:12:45 2012 -0800

    altosui: Move AltosGreatCircle.java to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 027863b737190bccc3b5cd032d77587396d0c5c4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 21:08:34 2012 -0800

    altosui: Move AltosEepromTeleScience.java to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 346df410f570a67cda057550a067fa2b451b785d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 21:05:02 2012 -0800

    altosui: Move more eeprom stuff to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a4ccdd253a9873c16f194a63a79f0c26feaafa29
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 20:57:57 2012 -0800

    altosui: Move eeprom managment code to library
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89aa06cfdcb02de1894ccb01aed97782f9eec9b2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 20:47:16 2012 -0800

    altosui: Move AltosEepromChunk.java to lib
    
    Also fixes install issues with split lib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b273b8b298540b1a6d0a87b1cf61df1fbf62e013
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 20:39:16 2012 -0800

    altosui: Finish moving AltosConfigData to altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c88b0ca96758b663c82395e63b338043d1c1a10
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 20:34:38 2012 -0800

    altosui: Move AltosConfigData.java to library
    
    Create a new 'AltosLink' which exposes how to talk to the remote
    device abstractly via 'get_reply' and 'printf' methods.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ead8f1cfca2c454d18dce56479899f2b423d8bdd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 20:32:35 2012 -0800

    altosui: Add back in the split-out Altos constants as AltosLib
    
    These were pulled out of Altos.java, but not added back to git
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c2f601139d36761de6a8a2210545d082ef16133
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 17:26:59 2012 -0800

    altosui: Complete split out of separate java library
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 40ee170753f4fd422c848e34a8da104683b7c8a2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 16:16:51 2012 -0800

    altosui: Clean swing/awt bits out of altoslib
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71636c1ed7cbe075921391605d1ac4edaa6ee52b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 16:13:46 2012 -0800

    move a file back

commit 6510e8495fc5e8057b6092963def4d78978625a0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 16:09:29 2012 -0800

    altosui: Split out lots of the altosui code to a shared library
    
    To be shared with the Android application eventually
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97663f922e236f4ee7bd08277ca80d419b5cd10f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 2 15:45:14 2012 -0800

    altosui: Split out UI-specific preferences
    
    Prepare to create library shared with android application.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9e52287751867d9e451146ccde78109609d30d7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 19:06:08 2012 -0700

    altosui: Fixed width format for new IMU values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9aa7993ee31bdfd6890ad7262a0375c07464ee76
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 17:09:00 2012 -0700

    altos: Intgrate hmc5883 sensor into adc ring
    
    Creates a task to poll the mag sensor and place the data into the
    sensor data ring.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69a8907ecbb7ca0e8526aeea0dc7490a191a0f8b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 16:57:22 2012 -0700

    altos: Get HMC5883 driver limping along
    
    Not pushing data into the ring yet, but the chip appears to work now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97317d332f21c42860747c4ecde633bd0228ef52
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 16:56:41 2012 -0700

    altos: Reset i2c controller at boot time
    
    In case it's wedged.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64e2e66a5239541b15f43172655cfb3560bec79b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 16:54:42 2012 -0700

    altos: Fix broken EXTI edge mode selections. Clear pending exti on enable
    
    Make sure the edge mode registers are set according to the requested
    mode.
    
    Clear any pending interrupt when enabling to avoid spurious isr call
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d425ffba84ec6f632e8c0d44105de73242a86a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 16:53:46 2012 -0700

    altos: Route correct GPIO line to interrupt controller
    
    Which GPIO a particular pin interrupt comes from is selected by the
    SYSCFG EXTICR registers; set these when an exti interrupt is configured.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1353b277f8314fbddef81c743bd6ea229364fd18
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jun 2 14:58:00 2012 -0700

    altos: Enable some debugging during flight mode on MM
    
    Until we've got the radio working, there's no way to see inside the MM
    state without using USB. Add a diagnostic command to dump out the
    internal flight state variables.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c04af7533bd3fd3f3260338c0753fde966131720
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 23:07:38 2012 -0700

    altos: Add support for MegaAccel daughter card.
    
    Switches all acceleration computation to using the MegaAccel
    accelerometer to ensure support for high-g flights.
    
    MPU6000 values continue to be logged as normal
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1824761f5b98e92485e2dd347b1c4d043ec207e2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 19:51:25 2012 -0700

    altosui: Quick hacks to download megametrum data and convert to CSV
    
    Very little useful data crunching is done, but at least we can save
    and convert files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab85337aa942cb73a08bd3b783771179773b9a67
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 19:35:33 2012 -0700

    altos: Timers clock base depends on perhipheral bus prescalers too
    
    For some weird reason, a non-unity perhipheral bus clock scaler
    affects the base of the various timers; this left the 100Hz tick
    running at 200Hz.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff4f3a56e09d595abbe32293cbdf1fe368633c49
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 19:35:01 2012 -0700

    altos: megametrum has logging
    
    This makes sure the various other subsystems know about it, like the
    'v' command.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6806103bad98385c0ec122d400f981eb81c59dd3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 19:34:17 2012 -0700

    altos: add high-z accel and mag sensor to megametrum logging
    
    These nicely fill the 32-byte sensor log record
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e5aebfe0203de9e69712fac291c8cd0d3a96a385
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 1 19:33:18 2012 -0700

    altos: Mark full and mega logging correctly in 'v' command
    
    Make sure megametrum reports 'log format 5'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7fce3ddf5e7e92a14cefb7fcf35e4014df744987
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:48:04 2012 -0600

    Bump to 1.0.9.5
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47bc9b2a39b7a8d3ef3fe8acc7fbf0512695e548
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:47:28 2012 -0600

    altos: Clear stm i2c transfer timeout alarm
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8164cd95db62e4564b3a9ba5c06a74c870c03841
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:46:51 2012 -0600

    altos: Remove debug printf from accel auto-cal
    
    Otherwise, this goes way too slow
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee61fb8ccb47f94b7c39e803f5a0248840d1eea6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:45:53 2012 -0600

    altos: Clean up ADC selection for cc1111
    
    Depend directly on product defines instead of trying to guess
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2df9113a22f4f67707d9ee777bd6b23ff671b105
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:45:30 2012 -0600

    altos: All cc1111 products have a radio
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a53b8b84283eb62157b0f8ecd8061f61a4b6bd6f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:44:45 2012 -0600

    altos: Shrink telemetry generation code
    
    otherwise TM doesn't build anymore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43e558738c76afd72fc01660884be3158f44470d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 28 11:44:07 2012 -0600

    altos: Try to get hmc5883 working
    
    No joy yet
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f5e4cf7d8204016e023cf439d93de1203dc406e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 18:23:39 2012 -0600

    altos: Make teleterra v0.2 compile with new ao_data struct
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5dd5e0284c8b26b0d4ce69c64bb7864e0ae83db7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:45:09 2012 -0600

    altos: Make telepyro-v0.1 build with new ao_data struct
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29edf6d901432a1afc65900ff599c963edac5a2b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:44:01 2012 -0600

    altos: Make telescience-v0.1 build with new ao_data struct
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5fd869b244f8f2b76258dc31a5507a73fd47cf1d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:31:12 2012 -0600

    altos: Make telenano build with new ao_data structure
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 627b904b36e129ff2ead436a626699abfc3b3211
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:29:27 2012 -0600

    altos: Make stm-demo compile with new ao_data structure
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 090dc9aecdf4cfd1ac727325ae141d441c5b28aa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:26:43 2012 -0600

    altos: Make telemini-v1.0 compile with new ao_data structure
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98e992b65d366d9f79d7d2dd2dd4d1886dd1d9c4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:25:17 2012 -0600

    altos: Make telemetrum-v1.0 build with new ao_data structure
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce8153472069ed56b24ac36f297ac569d1f767d4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 17:24:09 2012 -0600

    altos: Make telemetrum-v1.1 compile with new ao_data structure
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed635545e0b965901032ed2c3474ffe997c73de3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 16:52:45 2012 -0600

    ignore pa to altitude conversion file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd73c9b441f7672fb9982c4caeb5178df30f5d2b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 16:47:30 2012 -0600

    altos: Split out mm-specific versions of sampling code
    
    Avoid breaking telemetrum (too much) by splitting this stuff apart.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9eeba439ce8c9dc1def8528f96b6a67c6578d656
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 16:46:00 2012 -0600

    altos: Don't start ADC ring until the other sensors have a valid value
    
    Yes, this is still an ugly kludge, but it's easy.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d01c10eff4b70af13347969a7cece8730cf1a3f1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 27 16:44:38 2012 -0600

    altos: Data packet tick count does not live in adc structure
    
    It was moved to the global structure. Having two is confusing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 78423f3fc5164ea9fd428606419784c1700ad5c5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 25 23:18:06 2012 -0600

    Get megametrum ready to at least log flight data
    
    Doesn't track flight state changes correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0239e4dfe587528524b6380bbf6d9583047e52d6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 18 21:23:47 2012 -0700

    altos: Poll mpu6000 values every tick and stash them locally.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 34bb17bc1a3d8a1c95b5e57f059e7a1747e17a03
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 18 20:16:35 2012 -0700

    altos: Finish ms5607 support
    
    This has the MS5607 polling once each tick for pressure and
    temperature and then saving that in a global variable. The command UI
    provides for dumping the prom data so that an eeprom file can have
    raw sensor data along with the conversion factors necessary to compute
    useful values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d8b9d524d6424ff98dcc4155fe8b8bd892b6d8f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 18 20:04:57 2012 -0700

    altos: Add conversion between Pa and meters
    
    To be used with the MS5607 which generates data in calibrated units.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1541fc0bde71f503b1ae5757497e9e1e6d023111
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 23:14:57 2012 -0700

    altos: Check MS5607 CRC. Clean up MS5607 API
    
    It's not ready for flight yet, but at least it's sensible now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a62edd4a1f01a6ee380c3aabaff3f437e8d6f1e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 23:14:14 2012 -0700

    altos: Conditional byte swapping in mpu6000 driver
    
    Only needed on LSB machines.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a973f788563ccc66b01cc7557a004dabef18d09
Merge: d387f24 da2c920
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 16 09:13:53 2012 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d387f246b24502642b76aad04eb3e0f1a5b78a05
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 16 09:09:44 2012 -0600

    build-dep on default-jdk instead of openjdk-6-jdk, closes: #655580

commit da2c920b9f3378d5a18551e008c1da5dace1e0ef
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:53:53 2012 -0700

    altosui: Try to make telem tick counts match eeprom
    
    telem files can have an extra wrap or two of tick count if they start
    recording a long time before the flight. Account for this so that the
    CSV file output from each have matching tick values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5b898264077fcada29e73efa28dcbe4729f2709
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:53:11 2012 -0700

    altosui: Output recorded clock tick in CSV files
    
    This allows eeprom and telem files to be correlated accurately
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73c26f39b1a08fcc13e23a5b1a4293bc7df9f163
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:52:12 2012 -0700

    altos: Hacking at cc1120 driver
    
    Still doesn't work, but this adds a ton more register definitions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 318b564486aa9965bbad54c71e51fcb32b414162
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:51:25 2012 -0700

    altos: Get mpu6000 working
    
    This initializes the device appropraitely, and provides a command to
    dump the current values in converted form.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af949c67eeb9dc310b1430d3435d241adccfc0a9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:50:26 2012 -0700

    altos: stm: pass DMA buffer index to DMA completion callback
    
    This lets the user know which DMA has finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd7699cf8daded17ac41abf5c5170cfb599b6ff5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:49:24 2012 -0700

    altos: stm: delay during USB config with pull-up off
    
    This makes sure that a reboot will reliably cause the device to
    disconnect from the USB bus.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 744d05e6037ffc11688a9faa9c7b5dcda4065ee3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 7 21:47:17 2012 -0700

    altos: stm: share i2c_stop code between send and recv
    
    This waits for the stop signal to appear on the bus, necessary before
    starting another transaction.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ddaf501ddcfc1a5f74a1ef1b6b76e1c82d89c77a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 23:54:13 2012 -0700

    altos: stm i2c DMA for large recv appears to work
    
    Transaction appears to be clean on the i2c bus now; correct number of
    bytes received, and the nack and stop at the right time. This tests >
    2 length reads; should try that too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fad6cda3d081d438b18305611f37fe05335aa372
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 22:53:25 2012 -0700

    altos: megametrum needs ao_mpu6000.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f66f5de7a6cae71948da777ad0638bc6267a710f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 22:52:56 2012 -0700

    altos: Switch megametrum compile to -Os
    
    Looks like gcc has compiler bugs with -O0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f0cc91ce8e9807dca48a5c0c53d821f5060e245
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 6 22:47:33 2012 -0700

    altos: STM i2c work.
    
    Start now driven by interrupts
    Send now done with DMA and interrupts
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69feb1e3d94a028d04529edb015654bafd06353b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 1 18:12:41 2012 -0700

    ao-tools: Add GPS and rssi printing to ao-telem
    
    This prints all of the basic telemetrum messages now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b08095b3d41e21684a10bddfb54431019da5af6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 1 11:08:49 2012 -0700

    altos: Report latest telemetry data, rather than using the oldest
    
    ao_sample_adc points to the *next* ADC entry, rather than the most
    recent one. Step back one entry to get the latest valid data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b0b6bcc40891d8dd106d091d3af8107b2941c66
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 25 23:29:20 2012 -0700

    altos: Add hmc5883 and mpu6000 drivers to megametrum build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0b8c614ec4d11f432963e48d94e4497d31a9ddc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 25 23:27:58 2012 -0700

    altos: Add mpu6000 and hmc5883 stubs
    
    No real drivers here yet, just some testing stubs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0266e08dbf19e2204fb5f758d5d0f944d2afff7d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 25 23:26:57 2012 -0700

    altos: Add STM I2C recv and stop funcs
    
    Recv doesn't appear to work with more than one byte
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 962476911aaab17fd482593a0e8b95fe47de2f29
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 25 23:25:43 2012 -0700

    altos: Oopsed the STM DMA channels for I2C1
    
    TX is 6, RX is 7
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f55d0490017faa19b8d70b1742e4a45266c7e79
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 20 22:26:16 2012 -0500

    altosui: Mac OS Lion Java default heap space is too small (Trac #37)
    
    Increase it to 512M in the Info.plist file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1489263b895a2a825e29d0560c9b1dbba8a3f431
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 17 11:01:18 2012 -0700

    altos: Starting to write cc1120 driver
    
    This does "something" in radio test mode, appearing to generate a
    730MHz signal.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc305ea231ae22278abf91c0d9925f5992945369
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 14 13:53:36 2012 -0700

    altosui: Add apogee lockout configuration
    
    Provide suggested values of 5/10/15/20 seconds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4ab9f5dfa9f2a50e0528acf0a1fdeaa1f9bc523
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 14 13:52:37 2012 -0700

    altosui: Read frequency from device while configuring ground station
    
    Missed this when adding the TD config UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c8af6d35ebfc8fd896dfbf9928ec8f9dbfa531f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 14 12:05:28 2012 -0700

    altos: Remove debug printf from cc1111 check-stack script
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cb744e305116a738b5d71686c6748f6f08c12ea
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 14 12:02:14 2012 -0700

    altos: Respect apogee lockout time in flight algorithm
    
    This prevents any apogee detection from occurring until the specified
    number of seconds after boost. This also prevents the switch from
    accel+baro to baro only mode in the Kalman filter.
    
    The test frame work is also changed to look for Apogee lockout: in the
    eeprom input file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a8fec1b6d8f3346f988882ffb03d7d0e45b3c81
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 14 12:00:32 2012 -0700

    altos: Clean up test scripts
    
    The flight test scripts were using invalid bash syntax. Clean that up
    and also switch the default flight directory to my new
    ~/misc/rockets/flights directory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9f6fca7cfe796cbd86ae9d8f1ebe31bba7251db
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 13 18:38:29 2012 -0700

    altos: Correct STM USB driver
    
    Configure endpoint registers correctly now.
    Restructure code to make sure we send the right IN packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a84d34fa08f43a5f79b1a5f8d8de7674d04647d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 13 18:35:46 2012 -0700

    altos: Check all USE_SERIAL_*_STDIO when computing AO_NUM_STDIOS
    
    AO_NUM_STDIOS is allocated based on the total number of possible stdio
    values. Now that multiple serial stdio are possible, make sure to
    check all of them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c67543f3e5fddc6a8850f33ac519ccd55b607f0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 13 18:34:52 2012 -0700

    altos: Set USB Interrupt endpoint interval to maximum allowed
    
    We don't ever send anything over this channel, so there's no sense
    asking the host to poll it very often.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0667261e03b3fd403e97d02ea6204b007bb13f58
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 13 09:39:20 2012 -0700

    altos: Pull more interfaces out of ao.h and move to separate files
    
    This moves the aes, btm, companion, lcd and packet interfaces out of ao.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2b4a53342980618b193cbee5b803e56f7c937893
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 13 09:36:00 2012 -0700

    altos: ao_telelaunch.c got left in src directory
    
    Should live in product/ao_telelaunch.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 040a6eb119451026e1ec7c3a6a8e76b439c632d5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 12 14:51:07 2012 -0700

    altos: Massive product config cleanup
    
    Support multiple serial ports more cleanly
    
    Split out parts of ao.h into separate feature header files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f952f9c285e2718a433c8c720c9b5d9c369e7036
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 12 14:50:12 2012 -0700

    altos: Start adding apogee lockout support
    
    Remove radio channel support too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d1606895f70c6bca20c25084107f90bd0b613ec
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:31:28 2012 -0700

    altos: Switch stm-demo to HSE clock, add USB
    
    Requires that SB17 be soldered shut so that the MCO from the STlink
    CPU is available the target for HSE input.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49ac2828510e8b5fcba7e31631dac0580a455011
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:30:13 2012 -0700

    altos: Rework how STM clocks are initialized.
    
    Clean all of the RCC configuration up after turning on the clocks.
    Use the MSI clock during initialization to avoid messing around with
    the HSI clock temporarily.
    
    Allow for an external clock on the HSE line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93ef7e4a23d13540615f1a9782e1d58ddb7f258e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:29:38 2012 -0700

    altos: Use new USB driver in megametrum-v0.1 product
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d432307a3c2709634350eaa1262b935028d073d3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:28:45 2012 -0700

    altos: Add STM USB driver
    
    Emulates the usual CDC-ACM device
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afd52a8b54fe31577d939a161ea9cf5ad48e3a43
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:26:30 2012 -0700

    altos: Add STM ao_arch_reboot implementation
    
    Uses the AIRCR register to force a reset
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 150881f86f8d90b5867507889441990d18223e62
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 11 23:25:36 2012 -0700

    altos: Add register definitions for STM syscfg and usb
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0dd9e1dd62656a931f9559af6da9131f704f83f9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 23:27:43 2012 -0700

    altos: Add support for multiple SPI busses and sharing device drivers
    
    The STM32L151 has several SPI busses, and we want to use more than
    one, so add a 'bus' parameter to the SPI interfaces. To avoid wasting
    time on AVR and CC1111 processors which only use one SPI bus, elide
    those parameters from the actual functions by wrapping them with
    macros.
    
    Configuring chip select is now all macroized so that each chip can
    have its own version, allowing the STM to share the various SPI device
    drivers with the cc1111 and avr processors. Note that only the M25
    driver has been ported; porting the others is 'trivial', but not
    necessary at this point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35e3c47da895bdd868b9b66b98bca64bd82db862
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:25:59 2012 -0700

    altos: make megametrum beeper test keep beeping
    
    Used to measure the beep frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9804528e249db256e020d4b5340ba6216d3474f0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:25:13 2012 -0700

    altos: Check for cc1111 flash overflow
    
    The linker is supposed to do this, but it ignores the static
    initializer data added after the code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d15c4976ed9c23c861e620eb9c429d1cb7eedbee
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:24:36 2012 -0700

    altos: Increase STM SPI speed to PCLK/4
    
    The pressure sensor seems happy at this speed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0cd682ef0c8cdcf364b7e173ff3a9f84e485c113
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:23:52 2012 -0700

    altos: Move MS5607 configuration to ao_pins.h
    
    Which SPI port and where chip select is to be found are product specific.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3909fca0a3f918121888a415f9bf9bca99505366
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:22:58 2012 -0700

    altos: Add missing parens in ao_ms5607.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c5bbfc7244faaae41c7b581644c3c253e9b7f462
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:21:46 2012 -0700

    altos: Reduce MS5607 reset delay, increase conversion delay
    
    Reset doesn't take very long, while doing a conversion seems to take
    more than 10ms.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51aef5d4fc29986353ad887f4a67ed2fe35f8c8e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 22:17:33 2012 -0700

    altos: Make STM clock configuration per-product. Fix 32MHz CPU speed
    
    This moves all of the STM clock configuration into ao_pins.h so that
    each product can configure it separately. While doing this, I
    discovered that the flash memory mode (64-bit, prefetch, latency 1)
    wasn't actually getting set, which is why the CPU refused to work at
    32MHz.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1dcfbb05531767e67df45c2799a2fe533834fb71
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 20:28:19 2012 -0700

    altos: Add beeper driver to STM arch
    
    Drives the MegaMetrum beeper
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 67044cca5b463772491d0712d0ce07a8f897a476
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:10:43 2012 -0700

    altos: Test I2C code on discovery board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a198dfcd1b0defe194feaf301f4586e5573d6e9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:10:01 2012 -0700

    altos: ARM -O0 flag appears to generate buggy code
    
    Use -Os always, which is annoying...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 597c3df668ccf656d8c014f665c154a03166577c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:09:18 2012 -0700

    altos: Make ms5607 driver do something
    
    It's loading prom values and converting sensor data, but it's getting
    the wrong answer at present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9362841b1075a2ae59eecc73137b20e700567a8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:08:20 2012 -0700

    altos: add STM I2C driver.
    
    Not well tested yet...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e027247a9ef82746c26bcb8d0a851a0fa06511de
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:06:35 2012 -0700

    altos: Slow STM SPI down a bit so the MS5607 returns values
    
    It's still not working right, but at least it returns something other
    than all zeros...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 059f09dbca4703c25b42389b54c6510331c39485
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 9 00:05:18 2012 -0700

    altos: Allow STM DMA channels to be reserved for one use
    
    This allows a single user of a DMA channel to reserve it for use
    without needing to lock the mutex; this is required for DMA from the
    ADC to work on megametrum as it wants to start DMA from an interrupt
    handler, which cannot block on a mutex.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7cfbbce2b94b5ac0094a0e34e1766fe1ceb12c8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 20:35:17 2012 -0700

    altos: Show temperature in stm-demo
    
    Use the ADC to show current temperature
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98aa481741b8fbc617545beda3d295b53de90716
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 20:33:27 2012 -0700

    altos: Use 384 cycle ADC sample time
    
    This is plenty fast, and provides nice stable readings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bce68e6a0abc19f49c573331164d13643c9bee5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 20:31:58 2012 -0700

    altos: Add STM temperature sensor calibration data
    
    Each stm32l has two-point factory temperature calibration data.
    Provide access to that for displaying temperature data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a41628c97e90770890cce1d6f580e92c1cad1a7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:55:53 2012 -0700

    altos: Add ADC support to megametrum firmware
    
    Measures all MM igniter and battery voltages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b9357f48597a034211affb3f18fc6089816456d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:55:20 2012 -0700

    altos: Add ADC tests to stm-demo
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b5e9d14b4e3e8f29ad8a7bb9b339890be4bcfa2f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:54:32 2012 -0700

    altos: STM SPI is not using interrupts itself
    
    All SPI transfers are done via DMA, so the DMA interrupts suffice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5e41d1e03680af9806c599aad80b9b64dd719f9b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:53:12 2012 -0700

    altos: Add support for STM ADC
    
    DMA-based driver for the STM analog to digital converter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa96ee3db9b57cc2a88e9edd74bb9efcc228ccf3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:44:11 2012 -0700

    altosui: remove debug printf from AltosFlightStats
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e56038b65ba1c6413ba9942be3c092644986f126
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:36:36 2012 -0700

    altosui: When computing flight stats, auto-detect boost time
    
    Detect when boost actually starts by looking for the last low
    acceleration value before the recorded boost time. This improves the
    computation of the boost state data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20066268d8d1853055d0afe108584db34b425fcb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 18:35:26 2012 -0700

    altosui: Integrate accel speed from very start of eeprom record
    
    Don't wait for the flight computer to have detected boost--that's
    often several samples after boost actually occurred, which can leave a
    bunch of acceleration out of the speed computation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d35c4df12a3d8e2dab5d41f8d918ff4237f91e46
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 01:01:33 2012 -0700

    altos: Add ability to change radio frequency in TeleTerra
    
    Provide a way to set the frequency locally.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4700f63937786e8f6e9b4882363234a33eb54c46
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 01:01:06 2012 -0700

    altos: Make ao_config_set_radio public
    
    Allows other bits of code to reset the radio parameters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0a650a2be007b0436bd527d6c18f36eef6fbe2b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:25:50 2012 -0700

    altos: Force radio channel to zero when setting frequency
    
    Otherwise, the actual radio frequency will include the channel offset,
    which is not useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7119405a3dd7128120374a2a001bc98ef523619
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:25:26 2012 -0700

    altos: Make ao_freq_to_set reentrant
    
    Save a bunch of data space this way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0d0d20c20e5eeacbc9a1ec1c93141a2044830fb
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:24:59 2012 -0700

    altos: Shorten help strings
    
    Save a bit of code space
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8405efb6ca68c8216413b94e7acbdf51af00554a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:23:55 2012 -0700

    altos: Save memory in ao_config.c
    
    Shorten help messages.
    Stop setting aes_key on products not using aes key.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41a8383ccd29351f3a88a374f9456d6efb71b9a0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:22:41 2012 -0700

    altos: Save memory in ao_cmd.c
    
    Shrink a couple of help strings
    move a variable in ao_cmd from data to pdata.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f63065a16b65618b39314880c72074f0a8b5550
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:22:02 2012 -0700

    altos: Add fake install/uninstall targets for stm-bringup
    
    Keep global 'make install' from failing.
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5569e4df50648a3ec131ba5e244da9b67d1a67db
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 7 00:21:03 2012 -0700

    altosui: Radio channel gets set to zero by altos when frequency is set
    
    Just remember what the channe is going to get set to.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2db6b0f58811ffc44a468c8fbcacc08d37edd26c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 6 22:40:49 2012 -0700

    altos: Shuffle stm-demo SPI test code around a bit
    
    Move a debug printf beyond the chip select boundary to
    allow for more accurate timing.
    
    Send four bytes instead of just one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 89201cdf2062b7319a0da4e266e4d6edba1493f8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 6 22:40:17 2012 -0700

    altos: Declare stm DMA address registers as volatile void *
    
    Eliminates a cast when assigning to them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bcc23c3be1a20a362fea268901c600f9f0d287a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 6 22:39:45 2012 -0700

    altos: Disable DMA unit when idle
    
    Should save a bit of power
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20926b62a87154a846cb950dc542c737cd54826d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 6 22:39:12 2012 -0700

    altos: Disable STM SPI transceiver when idle
    
    Should save a bit of power.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b12bc445fe482306e4587ad60c6d2daf65a60f3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 6 18:07:07 2012 -0700

    altos: Add DMA, SPI and MS5607 drivers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a04ac8dff1bfc3efba8c7e4dc9c1a827496dbdf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 2 23:00:29 2012 -0700

    altos: megametrum builds an ELF file, not an IHX file
    
    Name it appropriately.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf1e4d60e1fcd75fa734365a2666ea8930938128
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 2 22:58:54 2012 -0700

    altos: Move SPI functions to architecture-specific location
    
    Some architecture specific stuff needs to use core altos code, so
    create new ao_arch_funcs.h files per architecture that get pulled in
    at the end of ao.h
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c09d155328bd446bb84ac1068d380cceb884df22
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 2 19:27:53 2012 -0700

    altos: Oops. Set per-USART STM baud rate register instead of usart1
    
    Was accidentally always setting usart1 instead of the per-usart
    register. Didn't work too well for other usarts...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 440226df03a85cd0047d876b57b2a3410bfb2b02
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Mar 31 17:53:25 2012 -0600

    be explicit in a couple places about only using single-cell LiPo batteries

commit 4ca52908c8b3f98a79588981f6878025250f0924
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Mar 31 16:43:39 2012 -0600

    use explicit path not $(HOME) to find ARM toolchain for now

commit 246618baf9b8803e5ae4e650eb46740d1128a010
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Mar 31 16:43:11 2012 -0600

    add config file for gdb use with MegaMetrum via Olimex dongle

commit b89f11139fae7ae722ed78d342a169ed2bf5c948
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 31 12:44:14 2012 -0700

    Build megametrum-v0.1 by default

commit bbf31b8591f89e2a1fcc7dac5f42d730a81473d2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 31 12:43:58 2012 -0700

    altos: Add stub cc1120 driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f2b75518169c4f2da9762de46bf1d9a71a04d17
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 21:54:32 2012 -0700

    altos: Move cc1111 DMA engine interface to cc1111/ao_arch.h from ao.h
    
    It's hardware specific
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47a9925f16f6a13b173c49d3873d91fc7cf6d46e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 21:53:30 2012 -0700

    altos: Move cc1111 AES driver to cc1111 directory
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93ae5f6ce09fa71ebd34f77a884684b3670c8b44
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Mar 31 13:29:15 2012 -0600

    openocd config file for MegaMetrum

commit b711768da6310a1b06f3b995a280587fed5f26cd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 21:45:44 2012 -0700

    Bump version to 1.0.9.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0993595035a2813deba6991fa25bc0d475f2e6bb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 21:45:02 2012 -0700

    altos: Add ao_freq.c to megametrum build
    
    I think this will be needed to compute radio settings on the cc1120
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a157edbe1bf7fffd5a6041f7b1760674addd2229
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 25 13:08:05 2012 -0700

    stm-demo does not use altitude.h

commit c1531fb26461b9f4ec39672bbfaeb70e6f4d1056
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 01:42:32 2012 -0700

    Use -Os for STM apps. Fix altos.ld to matchall .rodata* sections
    
    Without .rodata*, it would stick the flash copy of the data on top of
    any further .rodata* sections. Fortunately, the linker catches that
    and complains...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2c110fb4531144f18f62200e4127738c84e87f1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:55:53 2012 -0700

    Get config stuff hooked up for MegaMetrum
    
    This stubs out enough stuff to let ao_config link and work
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bda768c2be5b81bec13f21d4d3bb6a11a8e88fa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:43:47 2012 -0700

    Add preliminary MegaMetrum v0.1 support
    
    This turns on an LED, enables the internal R/C clock, hooks USART3 to
    the GPS chip and USART1 to the console.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c27e211796a64b6bbacfe6a1516e9872fdb0853e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:43:17 2012 -0700

    Use new Makefile.defs in stm-demo
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7ddfd4e6d75e50ca64a342181f5c52e9f4919af
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:42:13 2012 -0700

    Use 16-bits for STM32 LED mask. Export serial I/O functions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 606d866153cb639a2400cbedbc45046372ad1b30
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:40:48 2012 -0700

    Allow skytraq to be on non-default serial port
    
    Provide ao_gps_getchar, ao_gps_putchar and ao_gps_set_speed hooks to
    let product specify functions for serial access.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25184baa36c20e3d661f94e642a33e8aae179d60
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:40:09 2012 -0700

    Allow for more than 8 LEDs
    
    Provide hook for architecture-specific LED mask (AO_LED_TYPE)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87ca5c9c5f9cea1b9e14468e4694ce6acc21955a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:19:06 2012 -0700

    Clean up STM build by moving common defs to Makefile.defs
    
    Shortens default Makefile a bit
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41a3fded116a3101789df44647d0eb06be07a25b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:04:47 2012 -0700

    Make stm-demo display a scrolling message
    
    Instead of trying to frob the LEDs, which are now owned by the serial
    port.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b5e98a3407b369803109bfc1409e4f8b6e848ba
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:04:21 2012 -0700

    Flush LCD changes each time the text is updated
    
    Rather than requiring the caller to do it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6337b5f522be11926a6490d7bb27a4f7795da569
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:03:29 2012 -0700

    Automatically set ALTERNATE pin mode when setting alternate function
    
    When selecting an alternate function, set the pin to alternate mode as
    well; there's no sense requiring two separate calls everywhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c9e61a4f1f0ce5e5177a2252e8b7a02a578e77f1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:02:38 2012 -0700

    Allow any STM usart to be used for stdio
    
    This also adds the alternate pin configurations for the other two
    usarts
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf060b3e3ed655bbb8464f342d0a0b1745a06173
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 23 00:01:50 2012 -0700

    Allow for more than one serial port in core AltOS
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d236a5c7cd6e9b1d7192e801d63b4bd348cc2f12
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 22 20:02:30 2012 -0700

    Move LCD string output code to ao_lcd_font.c
    
    It's all very specific to the 14-segment display, so
    stick it there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6da2f5846f2d28ea1f09f60ef2cc3f68113ac62a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 22 19:43:29 2012 -0700

    Add LCD device driver to STM32L port
    
    This enables the 6-digit 14-character display on the STM32L discovery
    board and provides an ascii output to it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a953ac32033ded18adf0cb3ca20134385fcd0a6d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 22 19:42:18 2012 -0700

    Add defines for LCD controller and RTC clocking
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6e557bc2f0bd6d4272ed00dd09554d27a83be89
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 22 19:41:23 2012 -0700

    Actually enable usarts with the new usart code
    
    And move USART1 to PB6/PB7 to avoid conflicting with
    the LCD pins.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03fbc18ea17a9e77a1d4d8e0ddb97abbe5da3658
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 21 16:24:06 2012 -0700

    Clean up multiple serial port support for STM32L
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f560c961ae4fedec0c9f11d5b3635fcb0d67ed8e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 21 16:18:26 2012 -0700

    Add support for multiple serial ports on STM32L
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit faf2bea4fdb3dca7fbed35423a4fe4459ee92ceb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 19 11:25:40 2012 -0700

    Save/restore PRIMASK register on Cortex-M3
    
    This preserves the interrupt-enabled bit across context switches
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a14bee42a8431c909bcd74b0acec57329bc0284
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 19 11:24:43 2012 -0700

    Don't disable interrupts before saving interrupt flag on AVR
    
    This ignores the interrupt disabled state, so we'd always leave
    ao_yield with interrupts disabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7662a0096a860cddac413a310305fe842830c3b5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:29:51 2012 -0700

    Add .gitignore file to stm-bringup
    
    Ignore generated binaries
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4be74ef0d13114707fd8217907a5ec457f886160
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:26:43 2012 -0700

    Fix STM LED driver and blink LEDs on discovery board
    
    This adds a task to blink the LEDs, after first fixing up the LED
    output code to enable the GPIO and talk to the right pins for the
    discovery board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab6ea9043b592c25948a70b6204d613756a9a250
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:10:02 2012 -0700

    Basic OS running on STM32L
    
    This gets stm-demo working
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0cc01d378ae96325e429ad608b953661582939b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:09:20 2012 -0700

    Add AO_PANIC_STACK
    
    Provide a panic code for stack overflow.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ca46760cf903860dccb4864578558a1abb6e0fa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:08:48 2012 -0700

    When debugging, send ao_panic message to ao_debug_out
    
    Use the low-level debug hooks to get the panic state sent to the
    serial port.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4bfce11873f34af9621c60f83a8355f85769f6d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:07:07 2012 -0700

    When debugging, send pre-init output to ao_debug_out
    
    Before tasking is running, send output to ao_debug_out to help debug
    system initialization.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93481fd3d9305a107b88c8a64de4194a6d94dc0e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 18 22:05:46 2012 -0700

    Incorrect type in ao_task_info for wchan
    
    Would truncate 32-bit pointers on arm.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ba5344514f8ed51f6fd69ca09f6c7035c4fd0da
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 17 00:06:59 2012 -0700

    Add stm-demo program
    
    This runs AltOS and talks over the serial port.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d1b24bb20dec09145fbaa6fe6897898d47dd16e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 20:24:29 2012 -0700

    These were moved to the src/stm directory
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8100ea5042013bb4eed67907b4e9d4e5c196df2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 20:23:31 2012 -0700

    Add stm bringup timers and move most of the setup code to the stm dir
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9279fd42793123784ce83ca151df6f4630487722
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 20:21:09 2012 -0700

    Add STM platform and stm-bringup demo program
    
    The stm-bringup doesn't run altos, it just initializes the device and
    writes stuff over a serial port. Works on the STM32L Discovery board
    at least, should do stuff on other boards too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e2f13aa43ba79becbff6c9bfc18c665a58d96185
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 16 14:25:37 2012 -0700

    Add example STM32L programs
    
    This loads to flash and sends data over the serial link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3c7d1f6cfffb43299041f2850a48177f4e9b83a5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Feb 22 23:26:03 2012 +1300

    'stdin' is a special name in some compiler environments, don't use it.
    
    Switch to 'in' in the prototype for altos_serial_set_stdin.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bdfcc9112c41c494de23594963980a730b625cc4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 00:49:29 2012 -0700

    altosui: Disable launch controller button
    
    The launch controller should just be a separate program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf1e95810559584705d0b8a787375938c68e07c6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 00:37:52 2012 -0700

    altosui: Add Configure Ground Station dialog (trac #29)
    
    Allows the user to configure the teledongle frequency without opening
    up the flight monitor window, and also shows the teledongle fixed
    values like radio calibration, serial number and software version.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d60862fce6ac27a97ad6337eea32a4b48645d158
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 28 00:38:37 2012 -0700

    altos: Make sure config values are loaded in 'c s' command
    
    ao_config_get may not have been called when ao_config_show is invoked
    by the user, so make sure the config values are loaded before showing
    uninitialized data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b98f75dbcccd40c8cbf32c3bfd21bd6f5648b861
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 22:54:17 2012 -0700

    altosui: Sanity check values from device configuration
    
    If someone has down-graded and re up-graded the firmware, the config
    entries may be garbage. Sanity check them to avoid crashing the UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b6c7ae2c1f8cba7351cd139c49322280d9d3af47
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 22:53:08 2012 -0700

    altos: Reset config version if it's too large as well
    
    Any future config values will get trashed if we down grade the
    firmware, so we must reset the firmware version whenever it gets
    written.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f0379db7067eaf104892a82b9c49142087adece
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 22:02:13 2012 -0700

    altosui: Make 'monitor idle' work with older TeleMetrum firmware (trac #28)
    
    Older TM firmware did not have the 'done' line at the end of the GPS
    report, rather it would just stop after showing the Flags value. Check
    the TM version and stop looking for GPS data when the Flags line appears.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a9baabaf33db5e30eb4ef8f923a4fd96fd28fb4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 21:49:58 2012 -0700

    altosui: Mark data 'Age' in monitor idle UI too
    
    Just like with the flight monitor UI, it's nice to know how old the
    data in the monitor idle UI is, in case the data link to the TM isn't reliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f19f9a0eaba22789fdc07a52849e8aaf6fe4695
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 21:48:43 2012 -0700

    altosui: Catch attempt to set radio frequency to 0.0 -- use default
    
    Monitor idle was setting the frequency to 0, which takes a while with
    the new native radio frequency setting code. Don't do that, instead
    pull out the preferred frequency for that, as is done in other places
    where a frequency of 0.0 is used.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 170510bb183715e9ba580b180f20657d6602644e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 21:13:31 2012 -0700

    altosui: Find actual landing time when computing stats (trac #23)
    
    Look for the last time the height went from >10m to <2m from the
    nominal landing altitude and use that as the landing time when
    computing things like main descent speed, time under main etc.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0952224c36eba25db34bd147d2d579c66b15bbf8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 18:24:51 2012 -0700

    altosui: Change flight data saving UI to separate download/delete selections
    
    First pop up a dialog to select flights for download. Download
    them. Then, after that, pop up a *new* dialog to select flights for
    delete. Offer to delete all of the downloaded flights by default. Then
    delete the flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7dd1d62676c1e605fe69a4c0acfe7638c6b79aa5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 18:19:05 2012 -0700

    altos: Optimize ao_freq_to_set a bit
    
    Reduces size from 327 bytes to 287 bytes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d77a4ea206d627635159f35c76c744687d4e633b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 11:58:39 2012 -0700

    altosui: Show only supported telemetry version
    
    Make it clear in the UI which telemetry versions are supported,
    providing the combobox only for new firmware which supports all versions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8ebb83e64d66fa159e75aa560d39d80bb6d9d04
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 27 10:38:32 2012 -0700

    altosui: Configure radio with new direct frequency setting
    
    Instead of computing the radio setting in altosui, let the radio do it directly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1d12a117b36de7fe8dd992959b890bfd1163e81
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 26 23:35:35 2012 -0700

    Do radio settings solely by frequency
    
    Compute the radio setting needed based on the calibration value
    provided and the requested frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2550d72aee371676d2f09316051567681e53a7c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 26 22:05:04 2012 -0700

    altosui: Use ConcurrentHashMap for maps
    
    This data structure is accessed by multiple threads, so it needs to be
    re-entrant.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8610fdae8f47e1e8b6e8525227cc912664ecfafd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 26 22:04:13 2012 -0700

    altosui: Show time since last packet in flight status window
    
    Makes it easy to see when the UI is wedged, and when telemetry data
    are being successfully received.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 392a3107b9e9cc8c1ea51df6ff5ec54817adbc65
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 26 20:11:34 2012 -0700

    altosui: Restructure telemetry classes to be more sane
    
     * Make AltosTelemetryRecord be a class, rather than an interface.
    
     * Inherit from this for AltosTelemetryRecordLegacy and
       AltosTelemetryRecordRaw.
    
     * Remove bogus AltosTelemetryRecordGeneral class.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 77639dae0fb9975219c2e211ea6dd6c7965eeea2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 27 23:50:43 2011 -0700

    altos: Require callsign match in packet code
    
    Ignore packets with mismatching callsigns to avoid accidental
    connections between devices controlled by different stations.
    
    As a special case, if the device is configured with the default
    callsign (N0CALL), then let anyone connect. This allows configuration
    of new devices without needing to change the ground station callsign.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b4a4c7b6a0c3f93267f33482f490e7aa25c2158
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 13 10:40:30 2012 -0800

    doc: Add companion SPI message protocol doc
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d42ded7ebdb0c134c8dac61f41525c37d81ae61
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 13 10:44:23 2012 -0700

    update turnon_telemetrum to v1.2, add more turnon scripts

commit f450f8bc70f857053b26c4379f54a318062e89a1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 3 22:27:59 2012 -0800

    altos: Set correct registers for serial0 baud
    
    oops. not going to work very well setting serial 1.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6821ae734a7efaf2e069f6c5edf9605a9dbe125
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 3 20:46:25 2012 -0800

    altos: flush stdout when fifo from arduino serial port is empty
    
    This avoids leaving bytes pending inside altos
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65b9b5d0d91fef2c7452dc77017f31f176672304
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 3 20:42:41 2012 -0800

    Build teleshield by default

commit 7a42f2e0f145d2d520aed8e241fa39f7cb62b19f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 3 20:41:15 2012 -0800

    altos: Add support for UART0 in async mode
    
    And copy bytes from it to stdout.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 085625ff3992454b59583d95a3c415597c51f754
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 30 15:42:28 2011 -0800

    altos: More _asm -> __asm changes
    
    Missed a few last time
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 614ab6a991258a5caad0ca12ae35d0288a5b7503
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 30 15:38:32 2011 -0800

    altos: Clean up for SDCC 3.1 - more keywords
    
    _asm -> __asm
    sbit -> __sbit
    remove variables named 'data'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bbb94a6a25a106316414a9a281e924f6c56e9f38
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 30 12:27:35 2011 -0800

    altos: SDCC 3.1 wants __at instead of at
    
    Older SDCC would accept __at, so just replace all occurances unconditionally.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4783ac9653fd4f816f839452795e0d2e52129d5b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 27 15:47:54 2011 -0800

    altos: Switch teleshield to use radio slave mode
    
    And bring it up at startup time by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 791c137728dd3398bd7275be13cc9e6be96d7af4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 27 15:37:28 2011 -0800

    altos: Add teleshield directory and bring-up code
    
    This is cobbled together from various existing bits, but should at
    least provide some ability to test a teleshield board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eff8611e3eb19853b06acfcd7e978c9046cd5f78
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 17 17:05:06 2011 -0800

    altos: Create TeleMetrum v1.2 directory
    
    The hardware is software-compatible with v1.1, but it's nice to have
    the right version number in all of the files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6baf6f41040f7b074d8cc84ef75e254c5d2b466b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 17 16:58:04 2011 -0800

    altosui: googleearth doesn't accept spaces between coordinates anymore
    
    it got pickier for some reason; let's not put spaces in now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbf7c0c59854e040b65f068069d80716f02fc1bc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 13 23:03:22 2011 -0800

    altos: Fix pad orientation for pre-1.1 boards
    
    They use a different code path for accel as they don't have the
    VCC compensation code in place.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1e293ff4953b51c19af8b52f2999419ea84e7e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:19:40 2011 -0800

    altos: Add startup and config (view only) pages to TT
    
    The config page needs a pile of work before it's useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02b4e52a5349217df43105eaa1fff6bfc7dac4cc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:18:53 2011 -0800

    altos: Enable packet master and debug in TT
    
    The code was already getting linked in, so we might as well use it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e7044fd95472449e2fb860cef902fa458b91ccac
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 19:18:23 2011 -0800

    altos: Fix sdcdb settings for telemetrum v1.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f9e76e0d3492dcc8bf4b5b1f07c3c727cfdc0ef
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:54:14 2011 -0800

    altos: Trim skytraq NMEA messages. Shrink NMEA header matching code
    
    Tell the skytraq to not bother sending a bunch of the NMEA messages
    that we don't parse.
    
    Explicitly look for 'G' follows by 'P' instead of having some general
    header matching code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3dcb9451f40506abced72783966104645a73bc7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:52:02 2011 -0800

    altos: Allow TT/TBT reports to escape landed state
    
    The TM altitude reporting code kept beeping out state and altitude
    forever, which isn't very useful on TBT or TT.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f7d7a4fbede63b51208bf051e08aa73dfbf35a0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:51:31 2011 -0800

    altos: Remove LCD debugging code
    
    This isn't needed anymore.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 430b439b9a5cc98b32273a233505de2c2f975c59
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:51:03 2011 -0800

    altosui: Add ao_lcd_cursor_on/off
    
    This shows or hides a blinking cursor on the LCD.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75a8490a7bee2a2c7afd559b13f1d9c40c2aa08f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:49:17 2011 -0800

    altos: Add configurable set of channels for TT
    
    This adds the channel list for TT, which will be configured by
    AltosUI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ba946fea29ff134ffaeaea9d7932f4bd4e953aa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:48:07 2011 -0800

    altos: Export 'ao_cmd_is_white' for use by other code
    
    This function tests the current input character.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20282ef00afe70e3f3193f6f0200254cb2c33e93
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:47:08 2011 -0800

    altos: Set default flight log max to 127k on TM v0.1
    
    The flash part on v0.1 boards is only 128kB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5972c642f0de0789e90268bfa19ef8b51c06eebc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:44:36 2011 -0800

    altos: Handle internal and external telem monitoring requests
    
    Record separate internal vs external monitoring state, allowing
    both to happen at the same time, and when either is turned off, the
    other keeps working.
    
    This also adds disable/enable so that other radio users can
    temporarily take over the radio; monitoring will resume when the other
    radio user is finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef7f86453d686a49882e8c1b88a59228c4c631a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:37:53 2011 -0800

    altos: Check pdata+xdata memory usage during build
    
    The sdcc linker doesn't check the sum of pdata+xdata memory usage, it
    only ensures that xdata itself is small enough. This doesn't keep
    xdata below the end of usable ram on the cc1111 though (0xfe000).
    
    Fix up the check-stack program to also make sure all of xdata fits in
    available memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2bce71eba9f44b6fcf64e307c8174824c3a0fb57
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:32:49 2011 -0800

    altos: Set SPI fill value each time it is used.
    
    This ensures that the final MOSI pin value will be high after a
    receive is finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a705b62829d492e3a48c81077907cee61afb860
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:31:46 2011 -0800

    altos: Initialize DMA config address at boot time
    
    Instead of resetting these each time a transfer is started, just set
    them once at boot time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4de8bf6da4d725bb0514d032b0708c5cf420e8fa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:30:56 2011 -0800

    altos: debounce buttons
    
    Provide API to clear out any button events that happen during startup,
    and then discard button events 'too close' together.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ad41b5820c2e252627959e4627473f07784be23e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:29:38 2011 -0800

    altos: Build TeleTerra v0.2 by default
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f6db11c3c87725c809c518f5f19b07325faf9c84
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 12 18:10:18 2011 -0800

    altosui: Deal with serial port exceptions a bit better
    
    This catches a few exceptions and tries to make sure the serial port
    is closed afterwards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b132eefc5f63412bb4a98a4bb72b9055e40d5d42
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 22:30:17 2011 -0800

    altos: Make ao_xmem funcs require __xdata void * instead of casting
    
    Having an explicit cast in the ao_xmem wrapper macros caused the
    compiler to generate garbage values for pdata addresses, making the
    upper byte 0x00 instead of the required 0xf0. Removing the
    casts from the ao_xmem macros exposed this problem, so a new
    PDATA_TO_XDATA macros was added, along with a CODE_TO_XDATA macro
    which serve to cast pointers, with suitable address modifications, so
    that things work again.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ecde50fbebe68a2e2200a2f8d081fd37074f840
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 22:24:22 2011 -0800

    altosui: Make UI Look&Feel configurable
    
    Saves the preferred style and uses that for all current and new windows.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 713bd503902526c17a7657c18be947ef8fa6a47a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 17:18:08 2011 -0800

    altos: Shrink Skytraq NMEA parsing - common nmea_finish code
    
    This shares the checksum testing across all three lines, saving
    another 103 bytes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3e8275572550b700563b3bde73cd7a43b608f17
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 17:11:39 2011 -0800

    altos: shrink Skytraq NMEA parsing more
    
    This cuts another 78 bytes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8266d8d39c0103e68ef3e476b9639574d9a48771
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 11 16:54:18 2011 -0800

    altos: Shrink code size of Skytraq NMEA parser
    
    Just mess around with the code to make it smaller. These patches save
    173 bytes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df08b2f6de464f4546c1809b931eb4910d88b558
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 01:01:11 2011 -0700

    altos: A bunch of missing .gitignore files (mostly)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7b285ec0945830b8b31877115157ddd12d6a9fb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 00:57:45 2011 -0700

    altos: Add i2c driver for avr chip
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0669f0d74fc24c4f1925a45a9975b7a49a65b692
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 00:49:23 2011 -0700

    altosui: Only update GPS data when new GPS information arrives
    
    Track which telemetry packets are actually producing new GPS
    information and only update the GPS average position and count of
    stable GPS reports with new GPS info, instead of on every telemetry packet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7e14a2750d437e8b77d68a944a0711e7a0c882b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Oct 27 00:35:35 2011 -0700

    altos: Fix distance/bearing computations. Deal with large values
    
    Lots of little math errors dealing with large distances; easily tested
    as the GPS currently reports lat 24 lon 121, which is a long ways from
    Portland.
    
    Now reports distances in km when large, otherwise in m.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit da330c5975b9f565d059ef8084dfdacc20f34246
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 26 22:49:11 2011 -0700

    altos: Bring up basic TeleTerra v0.2 UI
    
    Lots of fun stuff here -- multiple panes of information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e4cceedb5b758faae684978299e667c4bb06f4d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 15:24:02 2011 -0700

    altos: Flip button IRQ initialization around
    
    This matches what the docs suggest
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 90e738a3379d258a48a7c92f6708040fc39c373a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 15:20:50 2011 -0700

    altos: Fix battery voltage computation.
    
    Full scale is 4.95V, not 3.333V.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f70553106707e3496d07eecb83f0c0a1acad7f77
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 14:51:32 2011 -0700

    altos: Add battery voltage sampling driver
    
    For devices without a full ADC compliment, this just samples the
    battery pin and converts to mV.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e7a10c06a0486e9f869e361e46f2c98db9897b0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 14:08:59 2011 -0700

    altos: Add button driver and sample user
    
    Hook up the teleterra buttons and have them beep
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e2736226fcd7c1ab1ba93a5ebac9b285ebf4733
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 12:55:35 2011 -0700

    src/teleterra-v0.2: Initialize more hardware
    
    Initialize the flash storage and flight state reporting beeper.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07d4477b2e8477e96a2f155a25f95e14a9a47efa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 23 12:51:05 2011 -0700

    altos/teleterra_0_2: Initialize LCD driver
    
    Initialize the LCD for testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85b259c5bba7edbd2a79471bb1104bcf3904d536
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 21 14:58:26 2011 -0700

    src/teleballoon-v1.1: Use Tm style initial state stuff
    
    Come up in pad mode unless someone talks to us while in idle mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb61f7aa2c8b692bd892b85e782f249187c80e5c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 21 11:30:43 2011 -0700

    altos: Add teleballoon-v1.1 directory
    
    This is an alternate firmware load for telemetrum v1.1.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a10aa835a06b71e2cefeb6b10daaf8cc394603b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 15 22:54:40 2011 -0700

    altos: Add LEGACY_MONITOR defines to more programs
    
    Make all monitoring programs define whether they want all of the old
    telemetry formats too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aef732fc9cdf527a18f2959d6fb7903e832209da
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 15 22:54:02 2011 -0700

    ao-bringup: Make it build with source restructuring
    
    Source code all moved around, need to find the header files in new directories.x
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0debe7ffc2aab2b4d08f42e488cb783ae91c36ab
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 23:30:53 2011 -0600

    altos: Add TeleTerra v0.2 product
    
    This includes most of the necessary drivers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65873a3ad1d8e8b5ec002be2576c6f496543306a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 23:29:24 2011 -0600

    altos: oops -- forgot to add the cc1111 string code
    
    This is required for all cc1111 builds now; it provides xdata string
    functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit badda0d910c56135401dce9adc9e6abebdba2ad7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 23:28:02 2011 -0600

    altos: Split out arch-specific bits of LCD driver
    
    The arch-specific section just puts a single nibble to the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47c2c0b79dc516d2566ae149605b7d70ef2dca98
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 20:58:04 2011 -0600

    Bump to 1.0.9.3
    
    TeleScience and TelePyro now work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 652c024ed37bfed5de17f45c772796d5cbe4599f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:48:55 2011 -0600

    altos/telescience: Add more header dependencies
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 75960500d1f290fa9f82183431443ac122f12c19
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:48:11 2011 -0600

    altos/avr: telescience doesn't have room for the flash write code
    
    This is useful for debugging the SPI and flash drivers, but not
    necessary in production code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b80f8ffb61566cbd134c399ea6ccf9290075490b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:45:51 2011 -0600

    altos/avr: Must leave space for init stack in ram
    
    The stack used during system initialization lives at the top of RAM,
    so leave some space for that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f1573a752425121d4c6a14285f1eb0fef3a8bea5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:44:48 2011 -0600

    altos/avr: Shrink default stack size to use less ram
    
    Not that we have any way of knowing how much stack we're using, but at
    least this seems to work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb837d9bb9e6736fcdfca7692b1f9490ea090838
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:13:00 2011 -0600

    altos: Allow ao_science_slave to not log data
    
    This is mostly for debugging with flash writes disabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac0bebc44bc657b303db4c41fa0c9624f3df9f4f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:11:56 2011 -0600

    altos: Make HAS_STORAGE_DEBUG define consistent
    
    This allows products to include the 'w' command for testing flash
    writing as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a28846d3ff8f82b0e97c211b9debf6d67ee5af5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 18:10:45 2011 -0600

    altos/avr: Clear SPI receive buffer before clocking new data in
    
    I don't know why this is necessary, but the receive buffer gets
    'extra' data added somehow.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e60c470b426b7be08a33133e7d8c94201d7e96d4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 17:44:40 2011 -0600

    altos/avr: Pull-up on the SPI slave select pin
    
    This makes the board work even when disconnected from TeleMetrum.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af4470f8025116179ef83726a8287e47c465907b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 17:44:02 2011 -0600

    altos/avr: Register stdio handler when using serial for stdin
    
    This code was left in a bit of a mess; just clean it up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bda859caf1501f8408703dca81412d70ba00e04
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 17:42:24 2011 -0600

    altos/avr: telescience does not have a serial port
    
    The USART is used for SPI to talk to the flash part.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a186e92c5773c5d908e9cee889d645a8172dcdc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 17:39:35 2011 -0600

    altos/avr: Make ao_arch_critical argument be a statement
    
    Wrap the argument to ao_arch_critical in do { } while (0); to make
    sure it gets correctly checked as a statement.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3453068b0feb640b9d11dbeb021c535ce8b4a31
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 17:39:06 2011 -0600

    altos/avr: Print newline after dumping ADC values
    
    Cleans up the formating a bit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06b044629951b06c7ec9b0105b89f51b2880ebd0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 11 16:03:04 2011 -0600

    altos/avr: SPI mutex is now held by the caller, not the SPI driver
    
    SPI transactions generally require a read followed by a write, with
    the chip select held the whole time. As a result, the SPI bus must be
    held across multiple transactions. To make this reliable, the caller
    must hold the SPI mutex, instead of the underlying SPI driver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d1361c95f94125cda244b4cc5e55c2fb77b680b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 9 11:09:25 2011 -0600

    altosui: Deal with missing state transitions in FlightStats window
    
    Any missing start/end times are pinned to the end of the flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c82b07471f017171c58a6968adf79901f46a987
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 9 10:55:04 2011 -0600

    altosui: Deal with telem data that goes backwards in time
    
    The new telemetry stuff can send packets with older timestamps, so
    sort telem packets read from disk to create an in-order record of the flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 636b7b368e67346b0796cd84fbfd71e10966d61f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Oct 9 10:21:56 2011 -0600

    altos: Respond to telemetry rate changes immediately
    
    Instead of waiting for the previous telemetry interval to expire,
    immediately switch to the new telemetry rate. This will provide
    more telemetry data early in the boost.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca036c5616c3e745c0b878ed90618d4ff710c0e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 22:19:52 2011 -0600

    altos: Improve TM v1.0 apogee estimate
    
    v1.0 boards have noisy accelerometer data caused by interactions
    between RF transmission and the accelerometer measurements; this noise
    generates a negative bias in the accelerometer readings. The net
    effect is that the estimated speed is lower than the actual speed,
    causing early an apogee estimate.
    
    By increasing the sigma value for accelerometer data, the kalman
    filter 'trusts' the acceleration data less, putting more weight on the
    barometer data. This causes the estimated time of apogee to be closer
    to the correct value.
    
    This reduces the response to changes in acceleration.
    
    This new value is applied solely to TeleMetrum v1.0 boards. v1.1
    boards correct for this error, and hence can use the correct sigma
    value for the accelerometer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26d7eb7149da8c797d7e704d75f73af2d2aa52c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 21:31:34 2011 -0600

    Bump to 1.0.9.2
    
    (1.1 RC 2). Flown at Oktoberfest 2011 on 10/09/2011 (we hope)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aad03e3cab4c328e53d3df47b6dac1d3f7a49229
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 16:07:57 2011 -0600

    altosui: Remove igniter voltages from chart.
    
    These are just annoying; when we add the ability to turn stuff on/off
    on the fly, we can add them to the list of available items.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6a7363b3ba99310bd44c9b66f6f5159e46762be4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 11:51:05 2011 -0600

    altos: Ignore ejection bumps when doing boost re-detect
    
    An ejection charge looks an awful lot like an extra (really small)
    motor burn. Ignore them by averaging the acceleration during
    fast/coast using a /64 exponential decay filter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82604193ed0c522c1fba0072b504fe88b027f1ee
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 11:50:24 2011 -0600

    ao-telem: Add new program to convert telem data to ascii
    
    This reads telem files and displays them in ascii form. It's not done,
    and it's not documented, but it's a start.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbf5a649c8b7101bef9d57e48e42ac775e758c79
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 11:46:38 2011 -0600

    altosui: Allow for multiple instances of each state in the graph
    
    With the new boost re-detect code, we can get multiple instances of
    boost/fast/coast, so make sure each are displayed in the graph.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9b0b7423c0640f729d61a91de6ff96ffe4b486e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 8 11:43:37 2011 -0600

    altosui: Max acceleration across boost instead of all ascent
    
    This ignores ejection bumps, making the max acceleration far more useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 258b75498916183ed250d3abb3282fe3d843e7a1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 7 09:53:09 2011 -0600

    altos: Write xdata versions of memory functions
    
    These are significantly smaller than the general pointer versions from
    libc on the cc1111.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>
    
    Conflicts:
    
    	src/Makefile.proto
    	src/cc1111/ao_adc.c
    	src/cc1111/ao_packet_master.c
    	src/core/ao.h
    
    Fix up the new makefiles

commit 128bbfa150f88c09f7adde2434b7bf0b5a9ed556
Merge: f6f54d7 246864b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 7 08:41:56 2011 -0600

    Merge remote-tracking branch 'origin/simple-quiet' into multiarch
    
    Conflicts:
    	configure.ac
    
    fix version number

commit f6f54d70b768dca1715ddddea64a4df00d82b09e
Merge: 1c344b7 0d10e25
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 7 08:40:14 2011 -0600

    Merge remote-tracking branch 'uniarch/master' into multiarch
    
    Conflicts:
    	src/core/ao_cmd.c
    
    Use ao_arch_reboot after waiting for a second

commit 0d10e25766b96f5660e213115cf27b71ff164405
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 27 21:06:54 2011 -0700

    altos: TM: Don't turn on packet slave mode until idle/invalid state
    
    Leave the packet link disabled until we've checked the
    accelerometer. That way, we cannot accidentally get to idle mode when
    the rocket is on the rail.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fba1d605a627d03f9587ec060c45fb5d3e96aaeb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 26 11:50:28 2011 -0700

    altos: Delay reboot by a second to avoid re-entering idle mode
    
    TM and Tm go into idle mode if they receive a packet after boot
    time. When tebooting the device over the packet link, the packet
    master would be (rapidly) polling the device for additional data and
    so the device would invariably receive a packet during bootup and go
    into idle mode again.
    
    Delay the reboot by a second to give the controller time to disable
    the master end of the packet link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c344b760776cd5d8c0297d8db9bf02687381b4e
Merge: 4ed53ef fc4173f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 7 08:34:59 2011 -0600

    Merge remote-tracking branch 'origin/master' into multiarch
    
    Conflicts:
    	configure.ac
    
    Fix version number and location of ao.h header

commit fc4173ff882dd9718f34ed043276ef612783dfe0
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Sep 27 00:59:08 2011 -0600

    add run-time dependency on libjfreechart-java

commit 989aae5b18856e3420ea5b7a26ddd8dccae9d6d3
Merge: 0552fbe e44f1ff
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Sep 24 15:34:59 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 0552fbed34c9698dac30c239df2a823a8502b3f3
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 30 16:59:53 2011 -0600

    include 1.0.1 release notes in docs, closes: #642705

commit 4ed53ef838afd4e922deb1c721a311974527525a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 23 10:24:33 2011 -0700

    altos: Debug code for telepyro doesn't fit in telescience
    
    Just too many strings.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f1328d22aab4378c4fb6f0c24dbee95948ca836c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 23:21:04 2011 -0700

    Dump test conversion of ADC0

commit 9b498a6b1327f543c73145e02ff16e76d09f2fe4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 22:54:56 2011 -0700

    Dump ADC registers

commit 7bc007ed45af8fe9ef5daeb7844f183cd9a49035
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 18:13:55 2011 -0700

    altos: Fix make-kalman to run under dash
    
    Dash can't deal with >&, so use the old-school > file 2>&1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 74d5dea5d5ef91db823018b631613d15c6da085d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 21 16:42:52 2011 -0600

    fix bashism that prevents building with /bin/sh->/bin/dash

commit f68f22f527104cdffa1f5e398a51a466a13ff1fb
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 21 16:42:22 2011 -0600

    add missing sense_h entry in TelePyro table

commit 16aa67fc77b82a9d051f205037b27a5384e3e3b7
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 14:24:30 2011 -0700

    altos: missing ao_log_single.c
    
    Neglected to add this file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a02d4bace05cc829522933b9df6b82a9e17336f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 11:30:43 2011 -0700

    altos: Add TelePyro v0.1 support
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0820f5c6dfe067590f36e8201a4049719dcf3d7c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 11:40:56 2011 -0700

    altos: Support staging by going back to boost as needed
    
    Detect additional motor burns by looking for high positive
    acceleration in coast or fast modes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8a00bb9ccdf0d4257f037c2bf996ce5e6b0b0c0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 11:39:24 2011 -0700

    altos: Pre-compute RDF packet len at compile time
    
    Instead of computing the RDF packet len at run time, which takes a
    pile of code space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abf17522c206b465375b73a004a6d67bfa714ba3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 21 11:36:11 2011 -0700

    altos: SPI slave code is now per-product
    
    We can't write general purpose SPI slave code as we must eliminate
    any latency because the SPI ports have no buffering.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 246864b0597ddd397aba39be1fe39df0df189433
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 16 18:27:56 2011 -0700

    Update to version 1.0.2
    
    Bdale is planning to fly this version on 9/17.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eaa7d7c7dd445ade7d8e3228306785f9a545b89a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 4 08:49:16 2011 -0700

    altos: Silence radio while firing igniters
    
    Hold the radio mutex while firing igniters to reduce potential
    interactions between the two.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1e81db87ce0f89fd0b7651ca00979498cd00b78
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 4 08:48:05 2011 -0700

    altos: Delay restart of RDF at apogee
    
    Instead of immediately trying to send RDF at apogee, start it after
    the usual RDF interval to avoid doing RDF while firing the apogee igniter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e44f1ffb7104d70f5c9b9a90529ddbe1b75da074
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 30 16:59:53 2011 -0600

    include 1.0.1 release notes in docs

commit b2d4e49bfe88aa61ca36fb1af8f3088c5754304c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 29 14:22:19 2011 -0700

    altos: Split avr clock initialization to ao_clock.c
    
    This will be shared with the attiny code for TeleTerra v0.1
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e66fd72664aae7c000dce9c528803e28e7918fdf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 17:03:26 2011 -0700

    altos: don't beep igniter continuity for telenano
    
    Without any igniters, it's not nice to annoy people.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 122c4101164d598e655fa9ad8473053d30ff4212
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 16:55:55 2011 -0700

    altos: Report continuity in telebt
    
    Report continuity values from remote altimeter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b9568a637ffdbc67225271005f2b996ee08a0df
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 16:39:41 2011 -0700

    altos: add 'report' to telebt
    
    This beeps out flight state changes and max altitude at landing, just
    like the altimeter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31e3255b6cbfaf95c0e97e2d1ec8de72f845994c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:50:30 2011 -0700

    altosui: Report error message back from libaltos
    
    This includes changing all of the error dialogs to show the error
    message rather than just the file name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf72c2f5a69a736c28a9b63e124d510ef41a9f5d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:50:01 2011 -0700

    altosui: Add bluetooth bits back in
    
    Stub out functions on mac/windows for now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d478a39f2ede7b805bbe568cc1c8ecc176d7a04
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:45:05 2011 -0700

    altos: Add the BT serial debug code back in, disabled
    
    This code is useful whenever the BT stuff is acting up, so just leave
    the source in place, turned off by default.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8eaa1c4697a3cfc2406e1adadc3094f7f712341a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:43:32 2011 -0700

    altos: Add pragma to eliminate unreachable code warning on SDCC
    
    This pragma was removed as GCC doesn't support it; make it conditional
    on SDCC so that we eliminate a warning message.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c6a3195dec6ac68f5d7b3f883ccc2c316384e76
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:42:25 2011 -0700

    altos: Blink on telem packet receive instead of toggle
    
    Toggling the LED was too confusing; just blink for 100ms each time a
    packet comes in.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cff737c290347b61ba16584880c2f4c436b95042
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:40:40 2011 -0700

    altos: Remove RSSI reporting from telebt
    
    Telebt uses one LED for bluetooth connection and the other for telem
    packet reception leaving none for RSSI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27835686648e14b030f6f7ec1fc0c0fd1c387ea4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:38:12 2011 -0700

    altos: Add RSSI blinking to new-style telemetry code
    
    Pull the RSSI data out locally and set the RSSI led blinking when
    using the variable-length TELEM output mechanism.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6f231a3e512ff7fdd87a399a72c7c36f283394f3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:20:41 2011 -0700

    Bump version to 1.0.9.0
    
    Make it distinct from any production version
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e53557373e539d591a03d02db146b27d08c7eba3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 28 15:18:29 2011 -0700

    altos: Start logging telemetry data right at boot time
    
    Anything logging telemetry data should just start logging packets as
    soon as they boot.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c3a0263d292cb0675f608d0ef085d13e51ce6ba
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Aug 28 13:39:37 2011 -0600

    update changelogs for Debian build

commit b33a92e372327158ab21c1bb2d091c58761efe10
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 15:19:43 2011 -0700

    altos: Share log code between telescience and telebt. Add telebt log
    
    Telescience and telebt both log data in 32-byte chunks, so share some
    code which manages that between the two products. Add simple telemetry
    logging to telebt.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e2b5e2957ddcb808723081ca7e046a28b7e70e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:30:34 2011 -0700

    altosui: launch controller button needs to move over
    
    monitor idle was inserted into position 2,2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc827699be4ed9ac60a7e862e6532791968bf685
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:28:01 2011 -0700

    altos: Fix up telelaunch Makefile
    
    Adding all of the mising sources
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a1cbef0e316e38c80b71d3bac15641fe56e0a99
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:27:28 2011 -0700

    altos: Add HAS_LOG for products that log to eeprom
    
    Some products have eeprom for config, but none for logging (like telelaunch)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6afbc1876cd63f64e8975e300692f95a43866f5f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:27:00 2011 -0700

    altos: ao_launch belongs in cc1111
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9adf2c9c40ea1da2637ed809dc0d004e47844440
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:25:23 2011 -0700

    altos: add ao_aes/radio_cmac to tidongle, teledongle and telebt
    
    All of these can do the telelco stuff at this point.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3c95582774355c991d0a9f27d0a86881e643e62
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 13:24:41 2011 -0700

    altos: move igniter defines back to ao_pins.h
    
    so that ao_launch gets them too
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b2db651a1dbc7ea97fce802b5f10b88be1ab42b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 27 12:42:10 2011 -0700

    altos: Add makefile for telelaunch
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02df2141e5a67afc16acd01a6c60f3cc61052b93
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 1 22:45:43 2011 -0700

    altosui: Hook up the launch controller UI from the main button box
    
    Provide a button to start the launch controller UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4568bc796a6c362ebf7f72ee9a5fa4a9a3c4ba6a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 1 17:08:24 2011 -0700

    altosui: Add primitive UI for TeleLaunch
    
    Display status along with arm and fire buttons.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be117376179126824439d98379079025ca0b245a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 1 17:06:49 2011 -0700

    altos: Keep relay closed while firing launcher
    
    Instead of opening the relay while checking the desired state, keep it
    closed until the state goes off.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc1b94df4d6b92e794ec93d9c1682ae5f61efa61
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 21 22:25:45 2011 -0700

    altos: Finish up primitive telelaunch protocol
    
    This adds two commands to teledongle, one to query and one to actually
    fire the igniter. These will (eventually) want to be replaced with
    something nicer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4299b5a36a2f6f9f7bbbc3a1b935dd2357c1fb0f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 21 20:04:05 2011 -0700

    altos: Implement remote launch protocol
    
    Uses the radio_cmac module to provide secure communication.
    Keeps igniter closed for 500ms.
    Provides remote status for arming and ignition.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 776df9ce2e7b4fa5cedda326988e66c614299af4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 20 23:46:04 2011 -0700

    altos: Get AES CBC-MAC packet transfers running
    
    This just has simple command-line based packet transfers for testing.
    
    This also adds special ao_telelaunch bits where the launch control
    code will live.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd0bf00081bb24af5cd67a9351b0b0c1a041d0d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 14:25:01 2011 -0700

    altos: More work on AES bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a731d240f802d37524ce84c3c6acf22bcda4d522
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 15 18:51:33 2011 -0700

    altos: Start work on AES and raw radio interfaces.
    
    We probably don't want this raw radio interface, but it's a start.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f145be3fc4ee94fdb5c1e2406b6c11d38bdbbd9b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 13 20:01:47 2011 -0700

    altos: Start telelaunch product
    
    Looks a lot like TM, but without the flight code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 859ee0268b9f2e1f5933019f1231d857a1cac4da
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 13 19:59:58 2011 -0700

    altosui: Add USB IDs for telelaunch and telelco to java bits
    
    telelaunch is 0x000f
    telelco is 0x0010
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b10fbbf0830053a39e4640a53598b1c027615c63
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 1 22:44:13 2011 -0700

    altos: Add 'send all baro' compile-time option
    
    This option creates a new packet type that delivers full sensor-rate
    barometer telemetry data to allow for off-line analysis of flight
    algorithms using all of the data, rather than the slower rate provided
    either over telemetry or stored in the eeprom file.
    
    Define AO_SEND_ALL_BARO and this will get built in. Perhaps this could
    be a run-time option...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c46c419704f661064d200432eb7efeeb11b3859
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 26 20:46:47 2011 -0700

    altos: re-order ao_task to match single-arch code
    
    This is just for testing to make the new build match the old build
    exactly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c32893ce79835a8f861d6ef414644c2ff9769ff6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 26 15:02:43 2011 -0700

    altos: Integrate telescience support
    
    Adds a few drivers including an LCD driver
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93b8f40bb451c9ec152490d1f431ab18f8ecb7d1
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:52:55 2011 -0600

    more release process doc updates

commit 9451ae5e4ea6ecfa512ba93197351682d4d043dc
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:51:18 2011 -0600

    update release process docs

commit 01aee9ebe517ed657692e0a39a31ae0ddfb5b8b0
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:39:45 2011 -0600

    update changelogs for Debian build

commit bc399d97a8424a5262f66a03e3bc403f793bb337
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:38:44 2011 -0600

    roll back packaging changelog for rebuild

commit 13e6e799070a1469cbc2ff990379ee520b8f0e6a
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:29:58 2011 -0600

    roll release notes version from 1.0 to 1.0.1

commit 1d15c841ad276127edae0345bd316c30731fffbf
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:24:35 2011 -0600

    ignore generated log file

commit 58a74c3c3dcd01509224326cffeb67a3e809e4e6
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 10:07:15 2011 -0600

    fix telemini firmware path name

commit 0a92eb2fa6b213533691288d8f99d72b80312983
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 09:43:06 2011 -0600

    update changelogs for Debian build

commit 3cea033ec928c21b9f7b810898ed3c3cc536d2ce
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 09:41:46 2011 -0600

    get ready for a 1.0.1 release

commit 674231773256bacd7acb4b5718c47412e47b813f
Merge: 08e3d54 3bfe8df
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 09:37:01 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 08e3d54bacf8b38a7c33e420a0bc19bcc7acedd4
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 26 09:35:54 2011 -0600

    moving git-buildpackage config into .git/ since it is fairly specific to
    Bdale's build environment, and doesn't need to be in the source package

commit 8125acc030574afed6f23aa8aa302d9c768bb04e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 25 22:55:33 2011 -0700

    altos: get avr-demo to build. Pull in AVR drivers and LCD driver
    
    This completes the basic task of making an AVR version of altos by
    getting the Teensy 'avr-demo' program to build.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9fab7dc99a0e7c22b511c5919adf7df85213252
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 25 22:04:36 2011 -0700

    altos: add GCC/SDCC compat macros, init_stack, save_context and GCC stdio hooks
    
    More arch-indepdency bits.
    
    GCC stdio is different from SDCC, so create suitable code in
    avr/ao_avr_stdio.c
    
    Create macros to initialize the task stack frame and save the task
    context.
    
    Add GCC/SDCC type definition compatibility macros
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a588092a7d76dab92e4ab11e0fdb457d2ddc9025
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 25 21:10:56 2011 -0700

    altos: AVR changes - create ao_arch.h files, define ao_arch_reboot
    
    Start pulling changes needed for avr port; architecture-specific code
    will live in <architcture>/ao_arch.h. This first change defines
    the ao_arch_reboot macro to reboot the microcontroller.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9513be7f9d3d0b0ec29f6487fa9dc8f1ac24d0de
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 25 20:43:44 2011 -0700

    altos: Restructure altos build to prepare for multi-arch support
    
    Split out sources into separate directories:
    
    	core:		architecture and product independent bits
    	cc1111:		cc1111-specific code
    	drivers:	architecture independent drivers
    	product:	product-specific sources and Makefile fragments
    	util:		scripts for building stuff
    
    This should have no effect on the built products, but testing is encouraged
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bfe8df44b575ca430ffaa051e20faa955a06c03
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 25 18:02:45 2011 -0700

    altos: Clear callsign on initial config load
    
    Before being written the first time, ao_config will get set to 0xff
    when the config storage is read. This leaves the tail of the callsign
    filled with invalid bytes. Zero the whole thing before loading the
    default callsign to make sure any extra bytes are set correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93ecaf7f18f8f4c15953c2e80dc9e1b20d04fdfa
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 15:46:30 2011 -0600

    update TeleMini turnon script now that we've made a stable firmware release

commit c3314dae2d3df82e188daf6ba8520cce833592c6
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 03:36:25 2011 -0600

    use multimaint-merge to make Debian changelogs less ugly

commit f9d87de0e2681c2ec5753f4fffef0e61a3a9e144
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 02:22:53 2011 -0600

    update changelogs for Debian build

commit 41998645c04a2ee856dec272b40c2dc5913291d3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 02:16:17 2011 -0600

    add a postinst to remove sources.list.d fragment delivered by old private
    versions of this package, no longer needed once we have official packages

commit d65e4f6b0a8ba8f67c8a916f2e8be0ec5c75f47d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 02:05:49 2011 -0600

    really, I mean it, no longer deliver the sources.list fragment

commit 0579bd5de9e7686d227a16951dd520439ca5472b
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:55:32 2011 -0600

    we need a main category in the desktop file

commit 3ec03792adebbeadc9c0d4985c6f51877e8ab969
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:48:11 2011 -0600

    update desktop file for consistency with package section

commit 0b1d5b678f0e36fbe09d4d3babffb77f857f098d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:37:31 2011 -0600

    rewind packaging changelog to last tagged version

commit f0891fc2e4fa4fd6dd5c2bfc74e4514de986a295
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:35:18 2011 -0600

    ao-view is no longer included in the altos package, so have the old-style
    Debian menu entry point to altosui instead

commit a7ee1049519bf46b3864666999249876009fc3bf
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:35:06 2011 -0600

    changes in preparation for upload to Debian

commit 2992184f7a032c95e22023080fbc26443ed786f5
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:30:36 2011 -0600

    don't deliver sources.list fragment in official Debian packages

commit 3fc92a529dae410a41038cce38c6a44f5e58bd1f
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 01:11:47 2011 -0600

    prepare to release

commit 73abe19acf709c00f5352ec12e8cd6edae1d1963
Merge: 1bd781d 5158493
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 00:34:49 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
    	doc/altusmetrum.xsl

commit 1bd781da934c738e0c9294197c7eb622b0710a9a
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 25 00:32:47 2011 -0600

    more tweaks

commit 5158493c8df527e7527057c719c75248609eb3dc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 23:21:02 2011 -0700

    doc: Remove duplicate documentation about max flight log
    
    This was described in detail in both the System Operation and AltosUI
    chapters. Remove the duplicate from the AltosUI chapter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e268798dc260311f5f0167909481b41c9d27fc1c
Merge: 458f816 242344d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 23:06:44 2011 -0700

    Merge remote-tracking branch 'origin/master'

commit 458f816ad23fd6784757b13b244057d4be64260e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 23:06:01 2011 -0700

    doc: Describe max flight log, ignite mode and pad orientation
    
    These describe what these configuration parmaeters do, not how to set them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 242344d3e32e7c7cd9270d708555923fa888e4d8
Merge: 5c1cf74 94a1b22
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:51:38 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
    	doc/altusmetrum.xsl

commit 5c1cf7492b82e63a9db9d0238ecbcd2b59486893
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:50:31 2011 -0600

    tweak tweak tweak

commit 94a1b220bbfbb64b9772f3ee64a8e9d353d65e94
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 22:29:56 2011 -0700

    doc: Move the remaining command-mode descriptions to the appendix
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit edfb553bb4fa5b0c7c6c658505b2a99d05fb13bf
Merge: c74ab82 ec96f11
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:23:56 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit c74ab82a7b7a6ad6f79129a9ef5954270e7e8f11
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:23:45 2011 -0600

    more changes

commit ec96f11666f9cbd98e16caeccd5d399978bde81b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 22:20:29 2011 -0700

    doc: Updating Firmware is now a separate chapter
    
    The Flash Image paragraph references it, change the reference wording.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11099fab63d32f53d0f2e04a7ab04392e39b5963
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 22:18:29 2011 -0700

    doc: Move updating device firmware section to separate chapter
    
    This isn't central to operation of the devices, so move it out to a
    separate chapter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50769fbbeaaf61111d363411e0ef0b2868681cf4
Merge: 425fa99 d92c173
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:15:20 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 425fa995aeaccc1ec9ecf011f185b4406df61541
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:15:15 2011 -0600

    more tweaking

commit d92c173615a5fb0278ff6878595bed3f8d813e03
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 22:12:39 2011 -0700

    doc: use 'radio link' to refer to packet command mode
    
    Make sure 'radio link' doesn't refer to telemetry and eliminate use of
    'RF link' and other similar but not identical phrases.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 65ca6f0d7c96432413868274b2cfdea4b76683e4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 23:03:23 2011 -0600

    more tweaks

commit 09981cd024297fd4ef093c7468de2b9d5f3c2691
Merge: a476e76 03c8b27
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 22:42:39 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit a476e76622b6fa70bf7c8883d2a2a64a382fbd78
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 22:42:33 2011 -0600

    more doc tweaks

commit 03c8b2702a45a12c4748cd1ec801d720c816d9e9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 21:39:48 2011 -0700

    doc: Move Packet Command Mode section to System Operations chapter
    
    It makes far more sense here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 221157af586c6fd7368ee858a390f38bc5ed50f5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 21:31:05 2011 -0700

    doc: Describe packet command mode a bit better.
    
    Include comments about TeleMini in the introduction, and then explain
    a bit better what the best method of reliably initiating packet
    command mode are (start operation, then boot telemini).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4e1aa92b6ce2f3e4c51029595d1d44a7f2f14a0
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 22:27:35 2011 -0600

    more doc tweaking

commit 6eff8d5831dde8e690586cd2a97ddf1595cd2674
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 20:59:28 2011 -0700

    doc: Document pad-mode 'on-board data logging' indicator
    
    There wasn't any documentation for this field in the 'Launch Pad' tab.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca0879ba6e5295b4fa790705f742eb647a462ea0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 20:42:09 2011 -0700

    doc: Spelling corrections in altusmetrum.xsl
    
    Lots of minor spelling errors.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 963649aa064acfe75d2ff4babd9a0d35dc254e86
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 21:39:21 2011 -0600

    doc tweaks through chap 3

commit 3d88e0493ab446d7c7011786390d30618a72d045
Merge: 02d6545 5a9972d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 21:26:26 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 5a9972d41a87d4204c6c93cacf14e2962cc1c59c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 20:22:29 2011 -0700

    altos/windows: Get latest JRE 1.6 version (Version 6 update 27)
    
    No reason to download stale java bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbfbaabb39f9f7709d00cf3dc63cc1bc7563062e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 19:13:03 2011 -0700

    altosui: Make flight monitor font size configurable
    
    Tiny netbooks aren't tall enough for the 'usual' font size, so provide
    a smaller option. Then provide a bigger option, just because.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9849883a754a73b861dd7be530753ff5c2abb499
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 01:48:28 2011 -0700

    altosui: Don't trust companion telemetry record 'channels' count
    
    It can be bogus, allowing the code to walk off the end of the
    allocated data array.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02d65453225a3807e61b2ac6e2a26da31a05bd45
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:53:02 2011 -0600

    update changelogs for Debian build

commit 1d286dab223e6c44a25180f944ccb5ba8ed9d5f5
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:51:54 2011 -0600

    prepare for another rebuild

commit 82634eae16f9691a6c70a48d0858a399814631f2
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:50:56 2011 -0600

    add pkg-config to the build deps

commit cf2823cab40aa450375c108bae8ed6b051fbefe5
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:45:28 2011 -0600

    update changelogs for Debian build

commit bf6f00693c394f885d3378415dc7c8a1815a31ed
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:43:59 2011 -0600

    roll changelog back in prep for another test build

commit 06aee245eb74e839e50226fa2ddb967c3977fe7c
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:41:53 2011 -0600

    another test round

commit 4d94e8f9f807a0bbeab0cdead011e74eeca1d1b6
Merge: 4b5369d 3b0a9a1
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 24 01:38:58 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 3b0a9a1c87390747492bfef435ac8e0829ec748f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 00:29:36 2011 -0700

    altosui: Try to get dialogs to look a little better
    
    grid bag constraints are not my friend.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2165e82327faaada23f0503b8e49b80f938b746c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 24 00:09:51 2011 -0700

    altosui: Add tool-tips to config dialogs
    
    Provides more information about the various settings, and, when
    they're disabled, tells the user why.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 63808e0392f43633f92fee137d968e969dd364c9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 23 23:20:00 2011 -0700

    Remove stale tools (ao-dumplog, ao-postflight, ao-view)
    
    These tools have all been supplanted by altosui at this point, and
    keeping them around increases the build dependencies by quite a lot.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 186dfc7c72aa7eba281f29f917088e49e44c2ddc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 23 22:51:57 2011 -0700

    altosui: Use system look&feel
    
    Turn on the 'be less ugly bit'
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b5369dc3da2fc8441eeacbf094537b0cf52240d
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 23 21:37:17 2011 -0600

    update changelogs for Debian build

commit 99316a17a9642a207c45610e7cc1c33c2600ece0
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 23 21:33:53 2011 -0600

    rewind changelog to 0.9.6.0 for rebuild

commit 192881b7cae49af375cc2b8b7305c937079ee724
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 23 20:11:01 2011 -0600

    update changelogs for Debian build

commit fc7e46b1215ea2b4cc138ed77d8eaa122369b15f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 23 20:10:14 2011 -0600

    turn off auto-tagging during Debian build

commit 998adccc1c4f8f6c44833bbf4a52d9441748b996
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 23 18:56:07 2011 -0700

    altosui: add tool-tips to the button box.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 754b9591574c12ddd6e4ab590c6a5f3806b80213
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 23 13:29:23 2011 -0700

    libaltos: fix Mac OS X function signatures
    
    altos_list_start was declared to take a (int time) parameter for some reason.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa6df3fa21e8f09e70371e6c6cc7827a533b4fe6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:35:28 2011 -0700

    altosui: Update mac os X library
    
    This has been tested on 32-bit OS X and it works; dunno about
    64-bit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 955989147f90a4fd22c1375d1b41425dae4e7dd1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:34:55 2011 -0700

    altosui: Reset all config data on 'reset' command
    
    This lets you switch altimeters without getting any stale data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d249da3fb064754753bd20cd2ca1e5ffcce294ca
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:33:52 2011 -0700

    altosui: Only 'show' config dialog once
    
    Otherwise, the dialog jumps back to the initial position each time the
    data is updated.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9254c3472e42d93181674b2c3cd80fe6eea696e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:32:36 2011 -0700

    altosui: fix 'magic' string to signal end of config data
    
    Was using "done", which happens to be displayed by the 'l'
    command. Switch to 'all finished' which doesn't appear in the config
    data output. Yes, this method is a kludge.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4aebe65b089e4b825a5ae238b81e2181bd88175a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:31:54 2011 -0700

    altosui: Can't configure flight log max on TeleMini
    
    It's only got space for one flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3a84e8e0cc86481c301f4335843a0e1a94bad5c0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 23:12:30 2011 -0700

    altosui: Make monitor-idle display correct 'On-board data logging' status
    
    Count number of stored flights and see if there's space for another
    one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afe6aba9cb91e93234ffee2a22eee40f848ddedd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 18:25:34 2011 -0700

    altosui: Add --summary option to dump flight stats to stdout
    
    useful for quickly capturing sense of a flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e2fd7ae76c23aa8da1390ebcbd8f45276cd7a32
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 18:24:54 2011 -0700

    altosui: Show filename in AltosGraph window
    
    Makes it easier to tell multiple windows apart
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f4ea46dc205454411c224ada7805f813989efd4a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 18:23:41 2011 -0700

    altosui: Add date/time/serial/flight to flight stats tab
    
    And switch to using the AltosConvert units conversions functions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4c71ba56c471720c72853057d0a527825a78fa0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 18:22:21 2011 -0700

    altosui: Capture date/time/serial/flight in AltosFlightStats
    
    Time is the time when boost was detected.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ef731bd87c6d2a71a4edcc69a218eaf1aa7c465
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 18:21:35 2011 -0700

    altosui: Add a few simple unit conversions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b83d8eca433ed5796835f6a09271f50c7f27cc81
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 17:18:02 2011 -0700

    doc: Add Installation Recommendations chapter
    
    Document installation suggestions, including mounting, RFI, antenna
    issues and ground testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0f62b8569c5535a2598cfb6ab52db79f0a52f92
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 22 17:17:43 2011 -0700

    doc: Add note about telemetry disable mode to 1.0 release notes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 393d231b9689cd1c358600ee76e0e808f89670c8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 21 22:52:45 2011 -0700

    altosui: Attempt to make both 32- and 64-bit windows DLLs
    
    We'll see if they work...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d5bd40847b17c32405dfba864a2a5a3b19aa7e85
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 21 22:12:53 2011 -0700

    altosui/windows: Fix a bunch of windows compiler warnings.
    
    Some of these may have actually been serious -- a write length was
    getting stored in a signed char...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2353d83be15b398754c2564f95374c6ea0f8de92
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 21 22:12:04 2011 -0700

    altos-fat/windows: Check and install Java 1.6 as needed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a08826292ebd802a1ff2effccac3b96fd061c47d
Merge: 3366cfe 55be3db
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 22 16:08:55 2011 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 55be3db2e31fe97e7f351e3c490b8bc4cf7192b2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 21 19:18:54 2011 -0700

    altosui: Clean up command line processing. Add --graph
    
    Make the command line processing a bit less ad-hoc, track 'mode' of
    processing and deal with all files on the command line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6823ad5e48fc0a19791d96f886b5689f88c4311b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 18 18:02:02 2011 -0700

    altos/altosui: Add ability to disable telemetry/rdf completely
    
    This turns off the telemetry system so that it never transmits telemetry
    or RDF tones. In idle mode, it will still accept packet mode connections.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a08e7ac8bd3840b699c9a1ffc6b1e115b2b84bad
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 20 11:35:55 2011 -0700

    Bump version to 0.9.7
    
    Bdale is flying 0.9.6 at chili blaster, make sure later firmware gets
    a later version number.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2b0900f8b83fcb3085f3d042ffd961ffd758d5d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 20 11:28:53 2011 -0700

    altos: Merge common config code in ao_config.c
    
    This shuffles code around in ao_config.c to share some common code
    segments for starting and committing config changes.
    
    This also stops printing out changes as they are made which aren't
    needed by the UI code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 67f28c58db0deca8f8050d33e97ad96017f4baaa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 20 11:19:57 2011 -0700

    altosui: Disable 'max flight log' config when there are stored flights
    
    When flights are stored in flash, the maximum flight log value cannot
    be changed as the flight data might need to be moved around in
    memory. Check for this case by looking for stored flights and
    disabling the combo box when storage is not empty.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcff63baf8fde1174571a2c7c860099e19dbf629
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 20 10:43:28 2011 -0700

    altosui: remove debug printf in pad pane
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3366cfe6145f64cdb04654854d5390c671a288e3
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Aug 20 09:28:04 2011 -0600

    update changelogs for Debian build

commit 787e4305a05e344c018abb872f788749203690d7
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Aug 20 09:24:29 2011 -0600

    update changelogs for Debian build

commit 605627d03eeb9f34026a84134992ad061b5b3946
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 19 22:47:50 2011 -0600

    update changelogs for Debian build

commit 048b3eb45169e572f33c68ff152b89db9ef97d31
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 21:11:41 2011 -0700

    altosui: Add 'On-board Data Logging' indicator to pad tab
    
    This shows whether the on-board data memory is full, or is ready to
    record the flight. This is indicated in the telemetry stream by a
    flight number of '0'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adb7d345963ab9981c49c7cc68c6b4d7156dce46
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 21:09:42 2011 -0700

    altosui: Ancient log files used 'apogee' for 'coast' state
    
    2009-07-18-serial-004-flight-000 says 'apogee' for the apogee-detect
    phase of the flight; map this to coast so that this flight replays
    correctly (although the log terminates at apogee...)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f64d66295a8f76680af8cfda4650aa4c4f8576d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 19:19:50 2011 -0700

    altos: Lost change that reported flight 0 when log memory was full
    
    commit 52ac83fedbfd380d14d4df2e79992bbdfba3552a added coded to check
    for a full flight log and complain with a special tone.
    
    It also reported flight 0 over telemetry, and that part of the patch
    got lost when moving to the new telemetry format. This patch
    resurrects that piece.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef7f60df841f1eb22b9cec0d7f68cf2c003d6b30
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 00:00:54 2011 -0700

    altosui: Respect storage limits in flight log max config
    
    Compute the maximum flight log using the data returned from the 'f'
    command (total storage and erase block size). Limit menu to choices
    which fall within this limit, complain if the user asks for too big a value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 746d6a472a20243a8c0eacc8edf8e81e0641bc17
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 14 00:00:07 2011 -0700

    altosui: don't set channel when using radio setting
    
    altos now sets the radio back to channel 0 when the radio setting is
    changed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 709485f20fb039f8dd087c8491c5f5a76718ae53
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 23:58:03 2011 -0700

    altos: use raw height while waiting for landing
    
    This avoids any noise introduced by the kalman filter, making landing
    detection much more reliable. This patch also changes the interval to
    10s so that the height bounds can be increased to 4m.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa71c2cdcb417eba2a2d30792ece9a47b8b3fc82
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 23:56:55 2011 -0700

    altos: Reset radio channel to zero when using radio setting
    
    Otherwise, it's hard to set the frequency over the radio link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f74761051f2a5ab45b82c4dd79a8569376bbe2e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 23:56:06 2011 -0700

    altos: Correct AO_CONFIG_MINOR from 6 to 7
    
    Forgot to bump this when adding radio setting.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 924d56a4d2d8b16530cd378b18cfc5d6e08420ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 21:10:15 2011 -0700

    altos: AltosSerial.flush_input shouldn't discard Interrupted exceptions
    
    The eeprom download code wants to interrupt serial communication so
    that it can stop downloading stuff in the middle of a run. Make
    flush_input pass the exception along instead of discarding it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcd15032eec45f3fdd003050710ebd5b85052662
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 21:09:19 2011 -0700

    altosui: Eliminate inter-chunk flush_input calls
    
    Once the serial line is nicely synchronized, we don't need to flush
    input between chunks. This speeds up eeprom downloading quite a bit.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ba7b6196f68078f4ed4538c4e7fe30699dfe908
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 21:05:46 2011 -0700

    altosui: Devices with log-format can also delete flights
    
    Any device with either flight-log-max or log-format can delete flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03e201e1acc8742399054e4ad36b533120ea1612
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:39:35 2011 -0700

    altosui: Add support for TeleScience eeprom download
    
    Using the existing eeprom methods, fetch and save TeleScience eeprom
    data, storing to a filename generated from the serial/flight from the
    TM connected to the TS board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a3e96bef31959a287b8696778d7d8cf911a7dc4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:36:18 2011 -0700

    altosui: Clean up eeprom parsing a bit
    
    Export basic parsing and checksum functions for shared use.
    Create 'erased' function to check a chunk of eeprom data for data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0ec30de37aa822ba66d25ceaa8cf8dc967b4371
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:31:08 2011 -0700

    altos: wait 10s for companion to boot
    
    In case the companion is delayed while booting, retry the setup 10
    times with a 1s delay between tries.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41e5be32819d305c8268e6f992be91411ea13435
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:30:00 2011 -0700

    altos: Send serial/flight to companion board
    
    Lets the companion log them for later matching with TeleMetrum log
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa7dd04741bf3fd9cedc59ed3b45b69ef9312609
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 21:41:25 2011 -0700

    altos: Send SPI message at flight state changes
    
    Get the companion board starting its data logging as soon as possible
    after boost starts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7f540330c040c521f9d7626009a406e704a5e41
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 14:58:34 2011 -0700

    altosui: Add companion support to the flight UI and CSV conversion
    
    Shows the companion data in a new tab. Also put companion data into
    CSV file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18369c58e62bc64b969a7cf8be3103aa33c6d4aa
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 06:29:13 2011 -0700

    altos: Check for companion init packet validity was busted
    
    Was using board_id == ~board_id instead of board_id ==
    ~board_id_inverse.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa642cf55c43188e9a21198d828d7ea90ff54280
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 05:42:05 2011 -0700

    altos: add the 'L' command to show the status of a linked companion board
    
    This prints out whether there is a board connected, along with the
    various values fetched from it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f87f0787fa5aa528674f3f4919eb22646c87c25a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 05:41:15 2011 -0700

    altos: Make sure companion task exits cleanly when done
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ebe2ffb29944abc4d6a35889c7b5f3d9f2871077
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 05:38:16 2011 -0700

    altos: Put SPI in slower mode when talking to companion board
    
    The AVR CPU on the other side just can't go very fast. This reduces
    the SPI clock by a factor of 16, just under 200kHz. As the companion
    commands are reasonably short, this shouldn't have a huge effect on
    overall SPI utilization.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30abbdc7ffcfc809b4a3fc31486fe968161ea225
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 9 16:59:16 2011 -0700

    altos: Add SPI-based companion board support
    
    This sends current flight state information and retrieves companion
    data to include in telemetry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 578c4b17b8f62f2727654ebda78ee139f9fe13fa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:38:38 2011 -0700

    altos: Don't try to use non-basestations for remote eeprom download
    
    Companion boards may also have eeprom data to fetch; don't try to use
    them as a radio.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf06af154e232d4caa1585a1d6d5279a075292e4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 21:43:56 2011 -0700

    altos/altosui: Report log format in the version command
    
    This will make it easier to figure out what the contents of the flash
    should look like from altosui; the current 'guessing' mechanism will
    not scale to many more formats.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2f2f519dbc8ce233ab36222088c1be6b1362f01
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:28:38 2011 -0700

    altos: re-write a bit of GPS parsing code to reduce size
    
    Use a local variable while computing hdop.
    Place the next incoming character in data instead of pdata.
    
    Saved a surprising amount of memory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7bcf25606cd5892d58295649f3d475d284494ee8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 12 05:26:09 2011 -0700

    altos: shrink text space from ao_config.c
    
    Eliminate redundant config initializers by setting minor to zero and
    letting upgrade code handle all of the new values.
    
    Stop computing (fake) frequency when showing radio channel
    Stop computing feet when showing main deploy height
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 313d740b5284b24f1cc7a1ba5779136b55d49ebe
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 18:33:07 2011 -0700

    libaltos: Mis-allocated device list in libaltos
    
    Would overrun mis-allocated array, causing chaos.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b87dd6f46922cf5f98deb2dffa2148c4244e48e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 13 15:00:14 2011 -0700

    ao-tools: ao-list was crashing with more than 3 devices connected
    
    the list of devices was getting realloced for each new device, but
    that realloc was too small.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 640422c028a2be898aa3a9048a0f6fad2e43dd8d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 11 16:11:34 2011 -0700

    altos: remove monitor disable stubs from altimeter code
    
    Monitor mode in the ground-station boards must be disabled when the
    radio is going to be used for another purpose, or the radio parameters
    changed. That places monitor-mode disable calls in other parts of the
    system which are shared with the altimeter code.
    
    Elide the ao_set_monitor calls for builds which do not include any
    monitoring code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d13460412046c53f36466193329caaa657bb278
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 11 15:59:47 2011 -0700

    altos: Apply igniter boot pulse-width reduction to telemini
    
    TeleMini needs the same fix as TeleMetrum to reduce startup igniter
    pulses.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b520c32bcddabd42c07ceafa827694a3ae23a76f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 11 15:57:58 2011 -0700

    altos: Pull igniter pins low as soon as possible at boot time
    
    This reduces the pulse width on the igniter circuit caused by the
    default cc1111 pin configuration at powerup time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 566b16e67be38c6425e616a5c38d641c4e1a9b12
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 22:43:26 2011 -0700

    doc: Add 1.0 release notes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a07b07d48f71b9a11e73a82db075cc57bad0c09f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 22:14:32 2011 -0700

    doc: Add release notes, include them in altusmetrum doc. Shuffle altusmetrum
    
    This adds release notes and includes them in the main altusmetrum doc
    as well as making stand-alone html available for inclusion in the website.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5aa3e49f794ba5ed2680016f3dca47d67ae99836
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 18:32:05 2011 -0700

    doc: Add telemetry docs to debian/linux/mac/windows packages
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7283deaa91e752acc45018ef2ea2f560b09af354
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 18:22:16 2011 -0700

    doc: Describe 'stats' tab in Graph UI, 'Graph Flight' button.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 21837e0026c87635abf4baf2c6c574a7b274f449
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 18:14:10 2011 -0700

    doc: Document Ignite Mode and Pad Orientation configuration options
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 967c9d5ee691f87bf0d1e49ba055eb366e513e6a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 17:43:58 2011 -0700

    doc: Update altusmetrum.xsl for v1.0 software and TeleMini
    
    Add TeleMini references and sections as appropriate, update AltosUI
    docs to describe new bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be65308182363ca87db69db530297933324f3806
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 16:01:25 2011 -0700

    Bump version to 0.9.6.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f5623c8c32a38eaeb63fa74ab370025ac015d52
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 15:00:44 2011 -0700

    altosui: Move launch-sites.txt file to altusmetrum.org
    
    The official URL is now:
    
    	http://www.altusmetrum.org/AltOS/launch-sites.txt
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4962bcf1ce15c21a946ea718bd676b901f0f2bd0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 14:35:21 2011 -0700

    altosui: Plot reasonable data from Tm files
    
    Don't plot acceleration based on baro data.
    Display baro speed if accel speed isn't available.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 01b9352eb8ca0e4e2d023ce973c4e863cdcc0c51
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 14:34:39 2011 -0700

    altosui: Prune telemetry file graphs to just the flight
    
    Remove data earlier than 1 second before boost and data after landing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e1487b1a5db0afd1d23c86d82c60b1c1a62aab0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 14:08:21 2011 -0700

    altosui: Add a 'Graph Flight' button to the 'landed'  tab
    
    This lets you see the results of a flight as soon as the rocket lands
    using the telemetry data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ac604d11de44cd824f09e4b467264a2b74be7bd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 10 13:35:26 2011 -0700

    Altosui: Add flight statistics tab to graph window
    
    Provide basic flight stats alongside the flight graph.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 94d9a2c36fabdf24d6a0b985851e95e4eb181fd9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 9 18:28:19 2011 -0700

    altosui: Ship TeleMini v1.0 firmware with fat blobs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a680ce61bdcffeacb7f0e4dcef71a03cb7cfe07d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 9 18:27:19 2011 -0700

    altosui: Ensure serial code tracks reply nesting correctly
    
    Trap any exceptional return conditions from 'get_reply' to make sure
    in_reply gets decremented.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 12bfa6cc42e3689f09abae2bd2584cbacf2aa2e0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 9 18:26:07 2011 -0700

    altosui: Don't export product defs from libaltos
    
    As we add new products, that would change the ABI generated for java,
    invaliding old library versions sitting around for windows and mac.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81ad44d4b6d9ad2f6b91d0906e8543da82da424f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 9 14:26:43 2011 -0700

    altos: Switch telemini from v0.1 to v1.0
    
    TeleMini production boards are firmware compatible with the v0.1
    design, so instead of creating another product, just rename the
    existing one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3985ef8bc69bcec13ce155567a8ed7c5c6051cb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 20:41:34 2011 -0700

    altosui: Add close button to 'fire' dialog
    
    Easier to hit than the tiny close box in the frame.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbf54a826d12c49b1b1996be247869d5ff4e2236
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 20:38:44 2011 -0700

    altosui: Make set of telemetries to use while scanning configurable
    
    with a preference to remember across application runs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7146311d9df541e075b4450cf9656a9aa7ffdd93
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 20:38:14 2011 -0700

    altosui: Reading serial from swing thread only bad if remote
    
    Make the warning on this condition based on whether the link is remote.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2662c577a895c96fce7b2bf815b9e752d2dfbde6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:53:59 2011 -0700

    altosui: Remove unused AltosConfigData from AltosTelemetryReader
    
    Now that AltosSerial manages this data, it's not needed here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 13eacb49de4312509c3a729a31dcda4d601f8a8b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:53:27 2011 -0700

    altosui: Flush radio setting to serial device
    
    When changing frequencies, make sure the device hears about it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97cf285d041062ae473c2823438b81c8fffe7f67
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:53:03 2011 -0700

    altosui: Remove debugging printfs from AltosSerial
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 364102d29ff4de0c252774f26417587fa88b7467
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:52:11 2011 -0700

    altosui: Show AltosFrequency in scan results
    
    Include frequency and description instead of just frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4cc16e111229b02d1081e2693ace0b33f662498
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:51:16 2011 -0700

    altosui: Save frequency after setting it in AltosFlightUI
    
    Otherwise we'll just save the old frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81bb6f42d8b859195ea5a35806c42d98ba82e8e1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:49:45 2011 -0700

    altosui: Have single radio_to_frequency function
    
    This takes all three radio params (setting, cal, channel) and computes
    the current frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c8c01684fa011acf3bbe5c3ebbc84aa8e8457a5e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:47:36 2011 -0700

    altosui: A few misc cleanups.
    
    Initialize radio_setting as it won't be set for older devices ever.
    Remove unused set_radio_frequency function from AltosConfigUI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd383b86b9a13d7af2d6b07f4fb85ccc666ed898
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 18:45:36 2011 -0700

    altosui: Must set radio calibration before radio setting
    
    Setting the radio calibration erases any previous radio setting as
    the radio calibration change invalidates any previously computed radio
    setting for a specific frequency.
    
    Hence, the radio setting must be configured *after* the radio
    calibration value lest it be ignored.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 40544dbfe09c64f7764a5f0686415805611fab25
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 17:46:04 2011 -0700

    altos: minor type in comment about accel correction
    
    Kurt Roeckx found a typo in the equations describing how the
    accelerometer is corrected by the 5V reference measurement.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a315b200cd0da1a964f5395cd59660be1b49672b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 12:31:48 2011 -0700

    altosui: Pull out BlueTooth support
    
    This leaves the code in place, but commented out so that it isn't used
    until we've got a bluetooth device ready for use.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a65daf94e8fe3e22f770ef76d9104c3dd11d0330
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 12:25:30 2011 -0700

    altosui: altimeter is not spelled altimter
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84ba927f503f81543dec286c4881be30bb5e60c5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 02:05:28 2011 -0700

    Set version to 0.9.5.0
    
    Make the frequency-based systems distinct
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e3e4f9c1e6a6bf972514f12c9d622258aa2aec2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 01:47:29 2011 -0700

    altosui: Convert from channels to frequencies
    
    Major areas:
    
     * Preferences are stored as frequencies instead
       of channels
    
     * Serial configuration is done using frequencies
    
     * UI is presented with frequency lists
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f03ca0ab8799bfa5100eaa2577cfd7b9c37d05bf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 7 14:52:29 2011 -0700

    altosui: Add dialogs to configure 'common' frequencies
    
    These are stored in preferences, but not yet hooked up to the TM/TD
    configure dialogs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba5dc35388d28c5769eaabc970c4d4b8c2c2ff9c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Aug 3 23:07:53 2011 -0700

    altos: Add ability to set arbitrary radio frequency
    
    This adds a separate config parameter to control the raw radio
    frequency setting, allowing the user to select an arbitrary frequency
    instead of being forced to choose one of the 10 pre-defined 'channels'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e1e5c9b3e24670e9f58c6f7389eafb3338efdb40
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 12:08:45 2011 -0700

    altos: Remove pad_orientation functions from non-accel devices
    
    Anything without an accelerometer can't detect pad orientation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7207a95823dc2a27906759528dd88256cb20679f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 12:04:00 2011 -0700

    altosui: Change button to 'Configure Altimeter'
    
    Now that we've got more than one model.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30670732ca3f5a34025ab4bc4c69afa45637b4d6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 8 11:58:23 2011 -0700

    altos: Correct flight log max on Tm to 5k
    
    Was using the wrong #define name to check for Tm/Tn devices that use
    internal flash for data storage.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a67c16958df8e60b131b01e00fd5bca590af0e7d
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 09:38:53 2011 -0600

    update changelogs for Debian build

commit 4a507898d6de631bb2e8ed4aa3e0933d97222323
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 09:34:59 2011 -0600

    rewind changelog for re-build of 0.9.4.5

commit 5082b4998b8a9787e0e2f4d96d912e434aa9b81a
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 09:31:18 2011 -0600

    clean up all existing lintian warnings

commit f26c7172a1b2b5344fae6ede562f2da7a56b80e3
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:54:14 2011 -0600

    build depend on bluetooth dev package

commit 3cad81b0ebb52352c66643a2587e94a2b693a2d2
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:38:48 2011 -0600

    stop doing automatic tag push during builds

commit ebaad64525119c0fdacf382adc2c99e5df5be23f
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:37:23 2011 -0600

    update changelogs for Debian build

commit 6f9f75cbfccf975204ab847ca0e9cf86188716c6
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:35:47 2011 -0600

    update changelogs for Debian build

commit 7c94945690a6ff5cbf872026fd6411a30089c7b1
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:33:09 2011 -0600

    simplify version in last changelog entry so git-dch is less confused

commit 6d5e5b0be237d5448aa9d15decd6127cf41ca7b2
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 8 07:30:42 2011 -0600

    update version for a Bdale build for use turning on TeleMini v1.0

commit 6492218fc316f8cf6214a577807a8dd0a80a9b6a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 19:07:56 2011 -0700

    altos/altosui: Add pad orientation configure option
    
    Allow TeleMetrum to be operated with the antenna pointing downwards on
    the pad. This provides some additional flexibility when designing an
    ebay.
    
    The accelerometer calibration levels are flipped around to match, so
    no re-calibration should be required.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11a2bb8e28df7ed87542f2ee726f877971f5d52a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 17:41:53 2011 -0700

    altosui: Add idle monitor dialog
    
    This monitors a telemetrum device in idle mode, either directly or through a
    teledongle, allowing the GPS status and batteries to be monitored
    without resorting to placing the device in pad mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3cc2eed6cdafe788a8617ab45c6664077e76411e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 18:01:52 2011 -0700

    altosui: Simple timeouts don't work with query data
    
    To get the query to come back, it's best to abort and retry the
    command, other wise the command may have been lost to the previous
    connection.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 37c41c962ea4631e62307a57d2ce6572b87fd743
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 17:41:02 2011 -0700

    altosui: Parse accel cal from 'c s' command
    
    These fields weren't used before, so the code to parse them hadn't
    been written.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 95201e7fe4a6a7ec42321e8dbad3aea3bbf4c840
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 17:40:02 2011 -0700

    altosui: Standard text field in flight UI needs more width (now 20)
    
    Latitude and longitude take more than 16 characters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82e04a0e3a3296288a524ec582785a36fd644331
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 02:09:23 2011 -0700

    altos: Require sequencing through 'main' state before landing
    
    The old version of the code would permit the flight to go straight
    from 'drogue' to 'landed' without passing through 'main' at all. This
    meant that a false landing detection would leave the main charge
    unfired, potentially causing the airframe to land on drogue alone.
    
    Requiring that the flight sequence pass through main ensures that the
    main charge will get fired at the right time, although if the airframe
    lands higher than that altitude, it will not go to 'landed' mode ever.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c55bf35b11ae3ddae152795072d69e98184bac1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 2 01:49:35 2011 -0700

    altos: Reduce height averaging filter time constant
    
    Using the longer time constant could lead to false landing detection
    just after apogee, which is definitely not a good idea.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e19a117b99e8374ca0e8e35948e23bc672ad1a32
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 1 22:33:38 2011 -0700

    altos: Average height values for landing detection
    
    Instead of using the direct output of the kalman filter and hoping
    that is quiet enough to detect landing, filter that with a long
    exponential decay filter and then check to make sure that doesn't
    change more than 2m in 5 seconds as a trigger for landing detection.
    
    Tested with existing telemetrum flight logs and it correctly detects
    landing in all cases.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 146a0ab223e8d9b376125d1e59f597f6d7851a9b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 18:49:55 2011 -0700

    altos: Add ability to read new TELEM files to ao_flight_test
    
    Not that telem files are currently very useful as the kalman filter
    gets completly confused by the variable steps caused by missing data, but...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6795d353be91df96a571cebc237e6a54a065a380
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 16:44:10 2011 -0700

    altosui: Change continutity colors to yellow/magenta
    
    Makes them stand apart from the accel/speed lines
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f6cce5749724dbb836aaa27bbeedf977106f6f3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 16:43:41 2011 -0700

    Add HARA Bragg Farms site
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6796d9e253a808824ba32cdb008da8bf302780fc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 15:53:13 2011 -0700

    Fix NCR Pawnee location
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ddef3e4ec1b3ff86b164f83807c34c2a78f73eb8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 15:45:07 2011 -0700

    altosui: Mark preload site location with red circles (like launch)
    
    Just to show where on the map the official launch location is.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1f3f3d575572eff33a2bc7a53d4691e59a428450
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 15:09:55 2011 -0700

    altosui: Add a bunch more site locations
    
    BALLS, Rio Rancho, METRA, QRS Cedar Grove and Hudson Ranch
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fef42e0d9e0a20bdbd32e052749fc63575515e1c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 11:29:13 2011 -0700

    altosui: Add launch-sites.txt
    
    Contains a few of our favorites.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81cac174c80ee42d9e94c6500da7c4c760c3ce67
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 11:25:47 2011 -0700

    altosui: Download list of site locations for map preloading
    
    The current URL for this is:
    http://gag.com/~keithp/launch-sites.txt
    
    The format is:
    <site-name>:<lat>:<lon>
    
    lat and lon are both in signed decimal degrees.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7cd8317bf78ece334e1ceb0263b875ca43bbbd2
Merge: 51796e2 a482d90
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 08:17:44 2011 -0700

    Merge branch 'preload-maps'

commit 51796e2f1ebce3ee8dc1ac90648381410c1379ee
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 23 11:32:29 2011 -0700

    altos, altosui: Add igniter mode (dual, apogee, main)
    
    This provides for redundant charges for either apogee or main.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1332ed55192f22525f31574f60fae4c6579e6f7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 17 08:13:15 2011 -0700

    Set version to 0.9.4.4
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a482d904a3f391c3a24df3660acb3f3696aa6766
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Jul 16 23:08:49 2011 -0700

    altosui: Make sure degree and minute values are visible (map preload)
    
    Set min size to preferred size so that the value remains visible
    instead of snapping to 0 pixels wide.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1681c57cbbfc5214dbc2a519e54ce9f29ffe3921
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 22:43:34 2011 -0700

    altosui: Remove a bunch of sitemap debugging printfs
    
    Seems to work, let's get less chatty
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a4d934f6e2914bfe2d965630543f029a1576c11
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 22:34:44 2011 -0700

    altosui: Display full map preload area in view.
    
    This involved fixing the map view to support arbitrary sizes, and then
    exposing a synchronous tile loading API so that the progress bar could
    be used to show tile loading progress.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit abb8510b97ce9cbbff0275cc31f74780fe1ce138
Merge: 0929ee3 00e6981
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 21:06:37 2011 -0700

    Merge branch 'scan-telemetry' into preload-maps

commit 00e6981c2e0a668864fcf391932855cd8942140c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 21:05:06 2011 -0700

    altosui: Flush telemetry lines before starting to watch for scan results
    
    This prevents pending telemetry lines from being incorrectly
    attributed to the wrong channel/telemetry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0929ee32f753255cbe1474988cb41a5a86d29a0e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 17:37:20 2011 -0700

    altosui: Try to avoid resize weirdness with map preloading
    
    grid bag + box does some strange stuff, this appears to avoid the
    worst of the interactions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 225073fd822f9861a83d65386c29fda9b37bf273
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 16:37:40 2011 -0700

    altosui: Add map preloading GUI
    
    Provide a way to manually enter latitude and longitude, preview the
    map area while downloading a 9x9 grid of map tiles to be used when
    monitoring flights without network access.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cbd14ba103ee5e3c5eec18e3a4ff13c320b98634
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 20:44:51 2011 -0700

    altosui: Set 'seen' bits in legacy telemetry packet reader
    
    Otherwise, the 'scan' code won't show detected flight computers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e905042879147dd86241bf2dcc7437e5a6eb7578
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 20:43:57 2011 -0700

    altosui: Initialize channel and telemetry before use in ScanUI
    
    Otherwise we try to use telemetry format 0, which means 'no telemetry'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 941b90a4905e34936d24a25ca90ac04eb6f5a792
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 17:38:00 2011 -0700

    altosui: Generalize and centralize telemetry constants, parse v0.8 telemetry
    
    Move telemetry constants to Altos class, adding functions to compute
    names and lengths. Generalize users of these values to use all of the
    known values.
    
    Add support for v0.8 TeleMetrum telemetry
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ef786276b5d5c7d17c3fe4f36aa41db61a9742f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 14:23:08 2011 -0700

    altosui: Finish radio scanning UI
    
    Scans all channels and telemetry formats, presenting visible devices
    in a list. Entries from the list may be selected, in which case a
    monitor window pops up with the appropriate configuration.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ebcba28b3c09925869b617880d2919e5d0e059f0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 14:19:41 2011 -0700

    altosui: Configuration telemetry record includes flight number
    
    Mark the reported altos record as including flight information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4375bc737655546c2d40f49acdfc2e60ebfea5a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 16 14:19:14 2011 -0700

    altosui: Remove debugging printf from AltosLog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f32a55ac9a3ebbde2b41782f22491e72258fe05a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 9 19:00:12 2011 -0700

    altosui: Pop up monitor window from scan dialog
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c20030ea4eb8e068e1ba88e01d07dfbc27bd7db
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 9 18:41:15 2011 -0700

    altosui: Start adding support for scanning radio for available devices
    
    This is untested.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7bb11b716ccb6c80701bc3f34ecf9bef97cbbfc9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 15 18:53:41 2011 -0700

    Set version to 0.9.4.3 for Bdale 2011-7-16 flights
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d0cf6f9a1b14a1b66aee3845964cd33d1f035c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 9 13:09:57 2011 -0700

    altos: new versions of sdcc require __ prefixes for custom keywords
    
    Fortunately, 2.9.1 appears to accept either, so we can switch now and
    prepare for sdcc 3.0.0.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f80f5705d64469bcfb00ff11aee68364edb271b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 21:38:57 2011 -0700

    altosui: Don't show missing igniter and gps values
    
    The new telemetry stuff leaves state.gps always set (but empty), which
    seems fine, we just need to look at state.gps.connected to see if
    there's a GPS receiver on board.
    
    For TeleNano, we also want to hide the igniter status fields as they
    won't have any data present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80ca066a825646f833ca609190c76c5252118d9a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 21:36:38 2011 -0700

    altosui: Build device constants into .java code
    
    This eliminates a depedency on updates to the system helper library,
    which means we don't have to provide a new library on all platforms
    just to support a new USB id.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 504ab7ab355652d5d01094c927089029596a0753
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 17:49:01 2011 -0700

    altos: product defines are always in ao_product.h
    
    When all products were built in a single directory, each one had a
    separate version of ao_product.h. Now that they all reside in
    sub-directories, each directory has its own ao_product.h
    
    This change is needed so that other modules in the system can use the
    product defines; otherwise, ao_product.h was not built at the right time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 81cf2e833bedbc1ace8fd310e9e94bfb7673d428
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 16:43:17 2011 -0700

    altos: Ensure low-rate telem packets interleave with sensor telem packets
    
    To avoid over-committing the radio link, we want to send only
    one low rate packet after each sensor packet. However, the
    initializations for this were incorrect, causing the configuration and
    location packets to be sent at the same time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ca6400fd8a360b64d8f96f50d5595a7fd17762d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 16:18:54 2011 -0700

    altos: Remove ao_telemetry_orig.c and ao_telemetry_tiny.c
    
    All products use the common ao_telemetry.c code now
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0154d13756bcb09f009981ee5e4bd27fd04b8788
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 16:19:22 2011 -0700

    altos: Switch Tm and Tn to common telemetry code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b65140a0139075adeddaccf0f4d5c7a75fac4757
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:52:25 2011 -0700

    altos: Switch flash drivers __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 038d7b25ba833da4be458409670d3f95e8aaf17b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:51:52 2011 -0700

    altos: Switch ao_flight and ao_flight_nano __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3742b36a528f114c3b1873caa4f39581145b76da
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:28:01 2011 -0700

    altos: Switch ao_dbg.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6903b6464db7eb803de8bf9b897c45431f7a1d63
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:27:32 2011 -0700

    altos: Switch ao_config.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6893752900385ee51cc4cf75e1b672202de7578a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:26:09 2011 -0700

    altos: switch ao_cmd __xdata to __pdata
    
    Saves code space
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2ec986f08ce8d4635f4435bb0042b405d93edc40
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:45:04 2011 -0700

    altos: Switch const for __code in struct ao_cmds
    
    This saves quite a bit of code space when accessing these values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 355db71f4511adff8abcb2caded61c12fe8b7ee9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:41:32 2011 -0700

    altos: Switch ao_usb.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 359baab005c274a0841268c615c23b3ffef813cf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:41:06 2011 -0700

    altos: Switch ao_telemetry.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f2f8ade6994aa3a69fd08f19c4403ceb8cea295d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:39:44 2011 -0700

    altos: Switch ao_stdio.c __data to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9ba0da9247ea424a7a147aa85daae0d5e6316b81
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:38:46 2011 -0700

    altos: Switch ao_serial.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 86b41d4c2b8a9fa4507cdb75302e0cedebb103cb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:38:29 2011 -0700

    altos: Switch ao_sample.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 803bf106caf5d6b5ac12eb00a941647c7325edd1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:37:34 2011 -0700

    altos: Switch ao_rssi.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 002f167fc2709aaf1a4984aaa0a3519a97749d5f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:37:15 2011 -0700

    altos: Switch ao_report.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5203ddaac692bfd82a01368da9fb66c25e9e14c1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:36:45 2011 -0700

    altos: Switch ao_log.c and ao_log_big.c __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62267144d189967fcd0724b6dfbdbab3cb6fb414
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:33:52 2011 -0700

    altos: Switch ao_ignite and ao_gps_sirf __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92047ff86c79c2b18ef565a4560b06fe00d6f159
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 15:31:53 2011 -0700

    altos: Switch ao_gps_skytraq and ao_gps_sirf __xdata to __pdata
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 64860be02b3efa6f784a259249cfa6d14545fbd3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 13:49:05 2011 -0700

    altos: Shrink ao_add_task by rolling up a memset loop
    
    This has a dramatic effect. By pulling the 'stack' variable into
    registers it reduces the size of this function from 550 to 231 bytes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 480b48837db31987b947e4d32248965d4a16be03
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 13:21:25 2011 -0700

    altos: Shrink ao_config_callsign_set
    
    Replacing a hand-coded memset with a function call, using static space
    instead of stack space for an array.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41c230cac359b4459ca93196d08704b7d35447c7
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 6 12:38:11 2011 -0700

    altos: Shrink ao_cmd_put16, ao_cmd_hex and ao_cmd
    
    No functional changes, just reduces code size.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 481577a29380afe6750ef7c4e928daff837cbc49
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:38:42 2011 -0700

    altosui: Compress telemetry records marked with the same time
    
    Split telemetry transmits multiple packets with the same
    timestamp. Merge those into a single record when read from a file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7cfd43663cde5ebdf04e4face076d79ff6329ac3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:38:28 2011 -0700

    altosui: Remove debug printf.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0335f83c54df0b23c28d04d34c212a1bdffadd0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:37:51 2011 -0700

    altosui: Add main/drogue voltages to default graph
    
    Until we get a UI for changing the graph elements, lets add a few more
    potentially useful values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1f859170b37864b816eb561318dbfb1cafaeed6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:37:00 2011 -0700

    altosui: Elide missing values from graphs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72575dcb9cfbb5c1ccdb3510b9962a6f60ca3fa3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:35:50 2011 -0700

    altosui: Elide nul bytes at end of telemetry string values
    
    All telemetry fields are fixed length, so any embedded strings are
    padded with nul bytes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6ac34f9c8efd464194137ac4ce8228bf9d7d83be
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 23:35:02 2011 -0700

    doc: Add section about TeleDongle USB line format
    
    Describe the format of the TELEM lines sent over USB from TeleDongle
    to the host.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit edf6252450e06fd42fa6dde3acd127baa8fa6d36
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 21:44:53 2011 -0700

    altos: Adapt to changes in telemetry Configuration packet
    
    Apogee delay added. flight_log_max changed to two bytes (in kB now).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 938949e39aac834a1c0912f8f307f74fe41418cc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 21:42:22 2011 -0700

    doc: Chang Config and Location packets
    
    Config packets get apogee delay, and have flight_log_max shrunk to two
    bytes.
    
    Location packets get climb_rate added.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4132ac5896114e5f3d8fb3f219422e8933078cf4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 5 21:41:44 2011 -0700

    altosui: Parse remaining standard telemetry packets
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ef3ce687d73c1274ce5368432f4d449b063ce5c0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 23:39:21 2011 -0700

    altos: Complete new telemetry switchover
    
    This involved rewriting the GPS code to use the telemetry structures
    directly so that a memcpy could be used to transfer the data to the
    telemetry packets, saving a bunch of code space, along with fixing up
    the gps testing programs to deal with the structure changes.
    
    In addition, the teledongle code needed to have the monitoring code
    split into separate radio receiver and USB writer threads as the
    packets are now back-to-back, and hence come too fast to wait for the
    USB data to be sent to the host after each one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 359681f23e2f71bc8f4975a4a76ae28c08ecab2e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:09:03 2011 -0700

    altos: Add split telemetry code
    
    This sends every packet every time, which isn't correct, but should be
    useful for testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b51e5466f7a125db873edd1fa9bd3881d7e98aad
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:08:19 2011 -0700

    altos: Shrink help text
    
    Reduce const space taken by command help text.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e5e4c1ad82d621ceb7286f72c87eeaf5976f9bf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:06:48 2011 -0700

    altos: Add sat info to GPS report command
    
    Plan to use this to report current flight computer state in idle mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06b6f78e22be38a26bfe11ed4d4b659d5b13f00c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:04:49 2011 -0700

    altos: Shrink const space in ao_config
    
    Eliminate separate 'cmd' and 'help' struct entries.
    Use \0 trick in cmd strings to eliminate whitespace.
    Edit help text.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3c26e534d8df34cfbf29b70cd1b2692493ce150
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:03:51 2011 -0700

    altos: teledongle does not need ao_packet_slave.c
    
    TeleDongle doesn't provide slave interfaces, so remove ao_packet_slave
    from the TD build
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c763a3f9cf2bf055e9705ce5ff4bc172f445037d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:02:52 2011 -0700

    Version strings must be < 8 bytes long
    
    The new telemetry packets include the version string, so make sure its
    less than 8 characters long
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a08173197d5533ecb395102ed34e751135660d06
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 18:01:59 2011 -0700

    doc: Fix a few minor telemetry doc mistakes
    
    Multiple 'accel' entries in the Sensor packet.
    Swap ground_accel and ground_pres to group accel cal data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98df3ba984acf3b47a09949bbea0f3264f711f5b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 4 14:17:55 2011 -0700

    doc: Complete initial telemetry description
    
    Finish describing the contents and modulation scheme for telemetry
    data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06e82bd2c2a5eea153a053e542df9bc3537e9a01
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 2 01:50:33 2011 -0700

    doc: Add telemetry format description
    
    Document the telemetry packet contents.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7fd9b8f720add559b262e81d61ededc9df16ca94
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 01:03:00 2011 -0700

    altosui: Support raw telemetry from TeleDongle
    
    Use raw telemetry frames when TeleDongle supports them, this involves
    parsing the hex dump of the packet instead of having teledongle take
    the packet apart. Only the legacy format is working at this point; the
    altos bits for the new split telemetry frames is not written yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cb239b7161feea8646425b1f5788c3c82ae24321
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 28 01:01:08 2011 -0700

    altos: ao_radio_recv needs byte count *including* rssi and status
    
    That's two more than the actual packet length.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 336224a08327cadc95f6e5b564a4ddc64aaad8f8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 24 08:31:51 2011 -0700

    altos: Start adding new telemetry frame definitions
    
    These use the initial 24 bytes per frame plan, which will probably get
    changed to 32 bytes per frame.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5e111fdf1f23203baeeb490ae1b69402ebd513b8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jun 24 08:31:12 2011 -0700

    altos: Add checksum to TELEM output lines
    
    Verify the received telemetry lines to protect against OS data loss
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 489a68ba8e3bc360e2e8fc887e4c4b840b5a0dd3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 22 12:27:34 2011 -0700

    altos: Add arbitrary telemetry packet monitoring
    
    This adds the ability to monitor arbitrary telemetry packets (up to
    128 bytes), moving the telemetry data parsing up to the host.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e67b6890dd3a06665239f8dfd2e69266d055e46
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 22 12:26:45 2011 -0700

    altos: Rename telemetry to telemetry_orig
    
    This makes room to create a new multi-packet telemetry format without
    changing anything yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc0b49dcbaa2d0a69e002c151337b6e9fd3060d9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 2 23:16:30 2011 -0700

    altosui: Handle old TeleDongle receiving kalman telemetry packets
    
    The telemetry packets now send the kalman height/speed/accel values
    instead of the ad-hoc values. If received by an old TeleDongle box,
    the speed value will be of the form 0x8000abcd, which will be printed
    as a 32-bit value by TeleDongle. We only want the abcd part, which is
    the speed * 16. Detect this automatically and compute the correct
    values for all three.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d27e281f81aee88adff3d84085356ec310e4b92
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 25 21:38:02 2011 -0600

    Switch version to 0.9.4
    
    For Mayhem, so we can tell what version each board is running
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 479bdffa35d0b8d4e48868c8d20f3cb1549521ab
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 23:55:23 2011 -0700

    Revert "altos: Debugging TBT issues -- check pin configuration after boot"
    
    This reverts commit 514348055630edec12224c4b0964240b929759a3.
    
    Looks like this was never a problem.

commit 66bdf0e066bc0bb7a326a6c2a9c88b69e5c1be66
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 23:12:47 2011 -0700

    altos: clear CPU port 1 interrupt flag when handled
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8be559baa979c15e78f8dba7879b383dbe3936d3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 22:59:15 2011 -0700

    altos: Hook up the P1 ISR for TeleBT v0.1 bt_link line
    
    Otherwise, we're heading off into the weeds...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23f441b95e55fbee709382b05d325bc021285766
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 22:49:54 2011 -0700

    altos: Initialize beeper for telebt
    
    Needed to get sounds to come out
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 514348055630edec12224c4b0964240b929759a3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 22:42:58 2011 -0700

    altos: Debugging TBT issues -- check pin configuration after boot
    
    Make sure the serial pins are configured as peripherals
    Make sure the ser_reset and bt_link pins are going the right direction.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22e3ac0eb014b8255029763ae8180ad3527ba306
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 22:42:32 2011 -0700

    altos: Add beeper to TBT v0.1
    
    It's available, let's use it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d858b64ee0e8c227c149d2af6d2d634536964f4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 22:12:31 2011 -0700

    altos: pull TBT v0.1 ser_reset line low
    
    This line resets the BT module if held low for three seconds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3336d0f726afd1d43cf62280940e5fb91dab2e91
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 21:13:19 2011 -0700

    altos: Fix BT link status pin for real TBT hardware
    
    The prototype used P2_1, while the real hardware uses P1_7. Lots of
    defines to make this work...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 19bfa3882a2d95fcade256c2d63ad24f794281e5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 20:33:58 2011 -0700

    altos: Use USART configuration 1 with flow control for TBT
    
    It's just wired that way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d9cc27641fe1778c098b065bf110be7823e6c9f4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 16:57:38 2011 -0700

    altos: Add telebt-v0.1 to Makefile
    
    Doesn't get built without it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c360e5c04e30421e9ea2f7006b7d35aef35f1edd
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri May 6 17:57:17 2011 -0600

    first cut at a telebt turn on script

commit c1760cebd47d0f03808f3204c0fcb1183f754e50
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 6 15:44:56 2011 -0700

    altos: Add preliminary telebt v0.1 defines
    
    This should make the telebt v0.1 binary that works on the real hardware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72a03baa73698fc1213a74320e6253c2380dd8fa
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 23:00:42 2011 -0700

    altosui: Fix BT manage dialog so that the device lists resize
    
    This makes the device scrolling lists fill any extra space when the
    window is resized.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e3bf13a38d24e95b16df1e2f01952d10f24cda10
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 22:55:08 2011 -0700

    altosui: Move AltosIgniteUI device open out of Swing thread
    
    Eliminate more blocking code from the Swing thread.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 109344d54d3fa4f79342fd1ea2a3f4085475e30c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 22:28:40 2011 -0700

    altosui: Display reader name (usually the device) when an I/O error occurs
    
    Access the reader name directly from the reader object instead of a
    local variable (which wasn't getting set anyways).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa5caf6310f074109472e6f55d8bd9751fb75c4c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 21:26:21 2011 -0700

    altosui: Fix TeleBT name in flight monitor title
    
    Was getting the product number, not the product name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2e7b7b80432bb251ac39efa1fa05d32b5f250e14
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 25 21:17:07 2011 -0700

    altosui: Separate out flash debug code to separate thread
    
    This avoids blocking the Swing thread while waiting for the serial
    device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 214cd69c0e4a1617ed5cde8fc2f46a4cee6ecced
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 23 22:50:58 2011 -0700

    altos: add telebt-v0.0 Makefile
    
    Git doesn't like to add these.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d41edb3384b6336f3482e61b0c9f9400a8b4f519
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 15:29:39 2011 -0700

    altosui: Make flight data download work through TeleBT
    
    This required flushing input before reading data blocks and adjusting
    some delays.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 44fb71ca3e5bccd5f601fc5a2d5da7292050b1d6
Merge: 2ebdb88 c269e26
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 14:06:39 2011 -0700

    Merge branch 'telemini' into telebt

commit 2ebdb888f6792de70b3132950a988d49752d264e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 14:01:19 2011 -0700

    altosui: Eliminate ao_cmd_filter hook
    
    Disabling status messages means we don't need to filter them out of
    the input stream.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f5c9986dfa2d130b6c8c14308638cce49391a6e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 13:42:30 2011 -0700

    altos: remove BT logging code
    
    This was used to debug the serial line startup.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0195ff442c1da5d363dfda3f88f41865d0c6b469
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 13:31:10 2011 -0700

    altos: Remove bt debug command
    
    This will permit some additional cleanups.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce7cf0c5ddc5405f6f474f4e20752fc0b02f3ecb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 13:27:40 2011 -0700

    altos: Simplify BT communications
    
    Eliminate stdio I/O wrappers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e3d501940718428135e04995dff7fef691c08a20
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 13:20:19 2011 -0700

    altos: Solidify BT connections
    
    Use delays while sending commands to BT module.
    Don't use BT for stdio until the module is initialized.
    Add \r to name setting command
    Don't require 'connected' signal for command input.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b5957d5f6f8181da7be98c9bce49a0ec0b4a713
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 10:41:28 2011 -0700

    altosui: Wait two seconds after bluetooth connect XXX
    
    "something" isn't quite ready to communicate right after the device is
    connected, so we stick a delay in. There should be a better fix.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8de9d3cbfcd1db7b554fb761296a8de09aafc8c3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 10:25:47 2011 -0700

    altos: Add delays to bt startup sequence
    
    The BT device takes a few seconds after power-up before it is ready to
    receive commands.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17f38e045fcd8ca0224095c0b2b7b098df77a8d8
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 19 08:43:40 2011 -0700

    altosui: Use persistent list of bluetooth devices for device dialogs
    
    Store a list of known bluetooth devices as preferences. Always include
    those in device dialogs with an option to go browse for more devices
    in both the device dialog and the Configure AltosUI dialog.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f249e5926f5fd9f86c41e7f0a414193533d4d8b0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 18 18:16:38 2011 -0500

    altosui: Make bluetooth dialog modal
    
    This allows it to be displayed correctly while the device dialog box
    (also modal) is up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 84163eee7847a09fe78f8762b28f857d76bf5755
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 14 10:22:30 2011 -0700

    altosui: Make AltosBTDevice implement AltosDevice interface
    
    This will allow the use of either USB or BT devices through the
    AltosDevice interface.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9cdef76c1275b343099d0d01af82d7eadd36a410
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 14 10:12:29 2011 -0700

    altosui: Create abstract AltosDevice class
    
    This will wrap either USB or BT devices. The USB device constants have
    been moved to Altos.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b3f18b38d80aa041b971204bf7a94278bd9584a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 8 19:46:15 2011 -0700

    altosui: Add primitive bluetooth device manager UI.
    
    This isn't useful, but does inquire for available bluetooth devices
    and show them in a list.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c269e263a6accd815ed5d08c0f5a6c3d5b9d3853
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 14 09:38:48 2011 -0700

    altos: Write a few pre-launch samples for Tm/Tn devices
    
    Record pre-launch samples in a small ring and flush that to flash when
    launch is detected. This provides a complete record of the flight,
    rather than simply starting after launch detect.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0fb471ce10642fc4a4bd40e4a81f8d6fe7a7c21
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 13 20:27:38 2011 -0700

    altosui: oops - lost state changes when downloading eeprom data.
    
    This would cause the reader to just keep reading past the end of the
    flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f49d694e776819e03b2c708e1c4ee23ba311430
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 9 22:53:12 2011 -0700

    altos/altosui: Log averaged baro sensor data in Tm/Tn
    
    Instead of logging the best height guess from the kalman filter, log
    barometer data. The logged data consists of the average value betwen
    log points to reduce noise.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8dd455204cf8712fa8c142b0c0517cec1bf5fd0f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 8 10:13:55 2011 -0700

    altosui: Add low-level Bluetooth APIs
    
    Adds the JNI functions to query and connect to arbitrary
    bluetooth devices.
    
    Adds Java wrappers to construct a list of proximate bluetooth devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf1c7df5301a1727e871a8447f835fe75bdce3fc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 8 10:12:50 2011 -0700

    altosui: Add TeleBT USB device support
    
    TeleBT can work just like a TeleDongle over USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a54a58d72147888f783a3caf364479efff4ed9b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 7 22:00:38 2011 -0700

    altos: Use PIO(6) on BTM to monitor BT connection. Fix BTM init.
    
    PIo(6) appears to be an active-low indication of the Bluetooth
    connection status. Hook this up using an interrupt to track the
    link state instead of using in-band status messages.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f28efe271f9670473249574f6bcf6e160fe58c7b
Merge: 8db5c52 835ab3a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 19:35:22 2011 -0700

    Merge branch 'telemini' into telebt

commit 835ab3a8c2741a09b27de58c37439a193c9919ce
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 19:35:00 2011 -0700

    altosui: Add missing AltosTelemetryMap.java file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8db5c52f1c76a05020e4e0afbe4ea27485ad9f82
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 17:26:08 2011 -0700

    altos: Clean up BT serial communcations
    
    Disable echo on both ends in command mode to eliminate looping error
    values.
    
    Switch to 57600 baud to improve performance.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5d60fdb9c969c1516feb76a16001c9688112c4c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 17:25:07 2011 -0700

    altos: Make cmd echo per-connection instead of global
    
    Allow different connections to use different echo values, permitting
    the packet link to turn off echo while the USB link still has it on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e2c18249e16c98cf5f7dccdf8d3b84bc473863a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 16:48:12 2011 -0700

    altos: Clean up serial initialization
    
    Flush serial input buffers when switching speeds.
    Ensure pin configuration is correct.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92386f2e8419c4df125692cc998eb72ec49bf991
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:12:56 2011 -0700

    altos: Clean up usage of serial port for stdio
    
    Code wanting to use this must invoke ao_add_stdio; that way
    the link can be configured before command processing starts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f8a96a8516e13878b329dbf1da855ed9a3219c4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:11:44 2011 -0700

    altos: Make ao_serial_drain public
    
    Allow external code to discard serial input
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f243a282f9aeb7433ccb2942850d380a091e603
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:10:37 2011 -0700

    altos: Remove serial monitor command
    
    This takes up space and isn't that useful these days
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 39bde78edc863d9d2ef50a59b8f28ab6274892b4
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:08:37 2011 -0700

    altos: Allow any stdio to be used with packet forwarding
    
    There's no reason to restrict packet forwarding to work only from
    USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 01952da35a57ae4da062facb26b3c6d7de29190f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:07:23 2011 -0700

    altos: Provide for a pre-filter on commands
    
    This allows for external code to see each command line before it is
    processed and potentially skip it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 359ba0d9fc2c5947e6adc98bebcd061069c61e79
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:04:58 2011 -0700

    altos: expose set of available stdio values
    
    This lets external code manipulate which connection to communicate
    over.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce18eaa28b1385c962c09459cbc5f20e234d9ad5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 1 14:03:25 2011 -0700

    altos: Add P2SEL_*_MASK defines to cc1111.h
    
    These are used to avoid having the code "know" which selections are 1
    and which are 0 bits.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8e74cf6d1c70a7a17d01c20f6831571245392498
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 31 20:58:14 2011 -0700

    altos: Add initial TeleBT code
    
    Prototyping with a TeleMetrum v0.1 board and a serial link to a
    bluetooth module.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c0971abc02b05d136aea257f3f40ba3b22b1d441
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 31 20:55:18 2011 -0700

    altos: Make ao_flight_test show true height but report saturated height
    
    To simulate a saturated baro sensor, clip baro data at a specified
    altitude. Continue to report the 'true' altitude in the output so that
    the resulting graphs are useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a14142e7b37031a51409f121b913fe793bf3603
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 31 20:53:12 2011 -0700

    altos: Baro useful ceiling is MSL, not AGL
    
    Use MSL instead of AGL for detecting over-range baro sensor values.
    Always trust baro sensor during descent; it'll get there eventually.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9dae18a664f70b668159487015e61be7f776926
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 31 20:51:15 2011 -0700

    altos: Reflect ao_flight split in ao_flight_test dependencies
    
    Need to rebuild ao_flight_test when any of the flight sources change
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f558cfa1df77c36a459168c1953d0945ee5a7f9f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 30 11:48:03 2011 -0700

    altosui: Only plot acceleration when present in data file
    
    Eliminates a bogus axis and data line for devices which do not have an
    accelerometer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9df9fc257eb2d7038d66ac7c2539aae4474bf12
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 30 11:47:07 2011 -0700

    altosui: Parse and export Max flight log value
    
    New configuration field might as well get dumped to the .csv files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 87bff181a95f6bf92c2cec350d331ba6af779e80
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 18:11:47 2011 -0700

    altos: Enable logging during nano flights
    
    Not having logging wasn't very useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 011e37f27b3926a42c8c1a74e0f179bb48829ec7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 18:10:46 2011 -0700

    altos: Run RDF beacon after apogee instead of waiting for landing
    
    This provides tracking when GPS fails, or on TeleMini.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 08e6bbef2c3529dfd468ef221c526fc9f3ed5b81
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 10:08:46 2011 -0700

    altos: ao_sample_preflight was exiting preflight mode immediately
    
    Need to stay in pre-flight mode until we've gotten enough sensor data
    to calibrate things appropriately. The conversion from a unified
    ao_flight.c file was just broken here.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 56d045040c49728a854741e99545766f3723da5e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 09:39:27 2011 -0700

    altosui: Don't display 0000-00-00 for missing flight log dates
    
    With Tm/Tn not having GPS to get the current date, it's no longer
    unusual to have no date for a flight log, so don't show the 0000-00-00
    piece in that case.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8ade7d99f02df825e70d0a964b4648156101ef78
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 09:38:23 2011 -0700

    altosui: Display exception messages from swing thread
    
    Flight log management exceptions were getting displayed from the log
    serial I/O thread instead of the swing thread. That's a bad plan.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f9be009ef26e3d7539f5932d267d7a8a7bcb7eb
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 29 09:37:11 2011 -0700

    altosui: Make deployment testing handle Connecting... dialog
    
    Supporting the Connecting... dialog requires moving all serial
    communication to a separate thread. This was done by creating a worker
    thread and command queue to communicate between the UI and the serial line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 573edcd7dfe10ac3251396eae88eece55d82bcb6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 28 23:38:02 2011 -0700

    altosui: Make flight log downloading handle 'Connecting...' dialog
    
    This required moving all of the serial communication to a separate
    thread and making the bulk of the download operation run after that
    has finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c71a145daefb86d2c1297abec68e54bd951e3adf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 28 23:35:05 2011 -0700

    altosui: Clean up packet link connecting dialog
    
    Make sure the dialog is destroyed after use (otherwise, it hangs
    around on the screen sometimes).
    
    Switch timeout before showing dialog to 500ms -- that brings the
    dialog up less often when unnecessary.
    
    Use 'timeout_started' boolean to indicate whether the I/O thread has
    queued the dialog for display and whether it needs to queue a call to
    close it down.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c6e7e812d67f91c63ba4982f7a899a72584027de
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 28 18:18:50 2011 -0700

    altos: Create custom nano flight code
    
    No igniters, just 'pad/drogue/landed' modes (where 'drogue' ==
    'flying'). A constant 1Hz telemetry and RDF rate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c754759a2d503633d527da4ebb20eb859cd506fd
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 28 17:54:44 2011 -0700

    altos: Split up flight code into separate flight/sample/kalman bits
    
    The flight code mashed together data processing, filtering and actual
    flight managament into one giant pile. Split things up so that we
    have:
    
     ao_sample.c: Sensor data processing. Reads the ring, handles calibration
     ao_kalman.c: Filter the data to track the accel/speed/height values
     ao_flight.c: Flight state management, specific to rocketry.
    
    The plan is to re-use ao_sample.c and ao_kalman.c for hardware not
    specifically designed for rocketry, like TeleNano.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 006de838bbb096b9443863a46b8a125b1e6b5600
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 27 00:48:07 2011 -0700

    altosui: Handle serial calls from swing thread
    
    Calls from the swing thread cannot be canceled as there's no way to
    put up the cancel dialog. In this case, simply use the 5 second
    timeout and fail if no communication occurs within that amount of time.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f23d0f3cbf1fb0c8eab497e266625f6410b69ba3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 27 00:46:19 2011 -0700

    altosui: Tell serial device which frame to use for timeout dialogs
    
    For the timeout dialog to appear, a frame must be configured for it to
    appear near. This patch sends the frame from the eeprom download
    functions to the serial code. That path doesn't yet work as the eeprom
    download is still trying to talk to the serial device from the swing
    event thread, which prevents the cancel dialog from working.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 067b21993e9a97fceadb355e571e5610535336a8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 27 00:13:38 2011 -0700

    altosui: Allow radio channel to be configured over the radio link
    
    TeleMini/TeleNano can't be configured via USB, so we need to allow
    the radio channel to be set over the radio link.
    
    This change carefully sets the new radio channel, disables the remote
    link and then sets the teledongle channel to the new value and brings
    the link back up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91a75279b6d306ba9d068a28c64917d5312122e8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 27 00:12:01 2011 -0700

    altosui: Off-by-one error in telemetry format configuration UI
    
    The telemetry format menu uses 0 for full and 1 for tiny, but the
    telemetry configuration uses 1 for full and 2 for tiny. One direction
    (config to UI) was right, the other (UI to config) was wrong.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ce8c9081e703d1405c2595ab9bda0cfa218c6c4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 26 23:38:54 2011 -0700

    altos: full logging must flush pending data before checking state
    
    Flight state must be checked only after any pending data have been
    written to the log as the 'current' flight state is only valid when
    the pending data values have been processed. This ensures that the
    'boost' state is not marked until the full ring of data is
    written. This ensures that the data processing code can find the
    barometer values from before boost to get an idea of the ground
    pressure value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3945d8f986d8f4bd3186a2cbaed5186e49d59839
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 26 23:15:36 2011 -0700

    altos: Variable log rate in full logging code too
    
    With the fixed ADC rate used to get better data during flight, the
    logging code now needs to vary the data storage rate so that descent
    data is recorded at 10 samples/second while ascent data is recorded at
    1 sample per second. Having the logging code do this itself eliminates
    any interaction with the flight code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97517ee585462c2d355f23f999fb8d9ebd908ec1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 26 00:01:22 2011 -0700

    altosui: Allow TM config connection to be canceled.
    
    This leaves the config UI connection attempt running and pops up a
    dialog box when it takes 'too long' in the remote case so that users
    with Tm or Tn devices can bring up the UI, and then boot the Tm/Tn
    without needing to time things carefully.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c121f1ef495e8af3eb39210baa40e212b691894
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 25 22:04:09 2011 -0700

    altosui: swing hide/show methods are deprecated
    
    I don't know why, but they are, so just replace them with
    setVisible calls.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b155647472ddfacb07c5ffa832e4d1f4a13ad342
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 25 22:01:18 2011 -0700

    altosui: Remove extra AltosEepromBlock layer
    
    This was interposed between the download layer and the eeprom layer to
    hold a eeprom block full of flight log records. The addition of the tiny
    log format required reworking the code to hold chunks full of eeprom
    data without regard to their content, so this content-specific layer
    didn't seem useful anymore.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 011615d40b3cb1d1c0ab9fa41e139e263a6a51e7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 25 21:34:31 2011 -0700

    altosui: Add support for downloading TeleMini/TeleNano flight logs
    
    Splits the eeprom downloading code into eeprom block downloading and
    separate eeprom data parsing so that the new data logging format can
    share the data downloading code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dea80af81b388cc3d7073444919f4e98b12fa730
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 25 21:29:50 2011 -0700

    altosui: Remove a bunch of debug printfs from the eeprom manager code
    
    Just noise on stdout.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f5b5848ad6ef5c808638a29c3dc0101b56ed11e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 24 08:08:43 2011 +0900

    altosui: Add telemetry format menu and preferences
    
    Switches the TeleDongle between full and tiny telemetry packet
    formats, saving the last used format for each teledongle in the
    application preferences.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3e68341f6f5daaf26dd162e4f9a06c29988986a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 24 05:27:57 2011 +0900

    altosui: Add support for telemetry version 4
    
    New telemetry format needed to support TeleNano and TeleMini
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e976a105423f2da1842f70da531c9051ba88a7f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 23 10:42:31 2011 +0900

    Add description to test flights

commit 93040ef4d0bd90ec5ae052f22243cd56adfb300a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 23 10:40:05 2011 +0900

    Add ao_kalman.h to .gitignore

commit 43a94380032300a2e33e1faa1efe93e858e0a2cf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 23 10:37:39 2011 +0900

    altos: Exit flight test at landing. Allow description in test flight list
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 32364c9e0d346e0e5d517e18d4e90b8ff2fa944f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 23 10:33:38 2011 +0900

    altos: Ignore alt error for fast->coast. Allow larger error for baro apogee.
    
    With the fixed kalman filter, transitions across mach don't cause
    bumps in the merged filter.
    
    And, with working kalman bits, the signal for broken baro detection is
    stronger and so we can allow for baro apogee detection in cases where
    noise occurs close to apogee.
    
    Bump the kalman filter to trust the baro less so that the model tracks
    across mach.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d2042ccc2d29e4cb8ea39c5c69d07cb7e3daeea
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 16:55:08 2011 +0900

    altos: Restore sensible kalman values
    
    Now that the kalman code seems to work correctly, restore the sensor
    errors and model errors to match reality
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d7b476564a16eda81ab3406f70a21995e1b464e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 21:51:52 2011 +0900

    altos: Fix up flight code testing
    
    This automates flight code testing by reporting mis-detected apogee or
    main events.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a80d3836cfce3d4cfa7a71068539415c2dc421cd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 21:50:29 2011 +0900

    altos: Missing parens and some bad arithmetic in the kalman code
    
    Fixed point computations are a pain.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f30de5766c1eefb18c7d024a2cf10ce02de41071
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 21:29:05 2011 +0900

    altos: Add ao_flight_debug code
    
    Trace the kalman filter to make sure it's working.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3053b1f3c85d4fd84b3c6cc87858f433166df34
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 17:04:07 2011 +0900

    altos: Clean up some debug stuff in ao_flight.c
    
    Remove some spurious printf debugging.
    Remove an attempt at discovering broken accelerometer code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6864e06d88a5b908cffa7c4cd2be8969ff46ce4d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 16:51:04 2011 +0900

    altos/kalman: Kalman terms can be > 1, use 32-bit fixed point
    
    Because speed and acceleration are scaled by 16, it's fairly common
    for the kalman terms to end up larger than 1. Instead of trying to
    fuss with 16-bit values and shifts, just use 32-bit values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c14d6c5ace1d67bd948273ceb7eb6807b29c3806
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 08:51:23 2011 +0900

    altos: Compute a 'trust' value for the barometer
    
    Instead of making the baro use/don't-use decision binary, use a 'trust
    value' which slowly migrates from baro+accel to accel-only mode. This
    eliminates bumps in the data from a rapid shift.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7b009b2efe3af8722c358c304c2243652594e0d5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 22 05:42:51 2011 +0900

    altos: Switch telemetrum over to kalman filter
    
    This changes the full telemetry stream to include kalman data instead
    of the old ad-hoc flight data. It's compatible in that the packet
    sizes are the same so teledongle can receive either and figure out
    which it has received.
    
    A few plotting and testing tools are added to make validating the new
    code easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20427ae4965f756aac0cedc5179a1c45b9a781f2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 21 19:59:27 2011 +0900

    altos: Add nickle kalman implementation.
    
    This generates the constants needed to implement Kalman filtering in
    the flight firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca3f03ef5c09446bebf0f5734f36a0248c457b1d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:55:39 2011 -0700

    altos: Add .sdcdbrc file for teledongle
    
    My sdcdb script uses this to set command line options automatically
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be838db49d999426a9dd02c0166fe161722f1e61
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:53:08 2011 -0700

    altos: New telemetry report format (version 4). Supports tiny telemetry.
    
    This completely replaces the version 3 format with a much simpler and
    easier to parse scheme. It's described in detail in ao_telem.h, but
    the basic idea is that the whole line is split into name/value pairs,
    separated by whitespace. Every name is unique, and the values are
    either strings or integers. No extraneous formatting or units are
    provided.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ad6bb342d237988404fa32540b38c61d6ddc1f0d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:51:02 2011 -0700

    altos: The kalman code requires a constant sample rate
    
    The kalman function can't handle a variable sample rate, so keep the
    ADC running at full speed for the whole flight instead of slowing it
    down after apogee.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31feb7777f73fed61193d3404f457ea1a081fe9c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:49:41 2011 -0700

    altos: Split telenano main from telemini
    
    Eventually, telenano will run different code; prepare for this by
    creating a telenano-specific main routine.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8950df02382f5f0aea5bac078fdf7134b98c43ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:46:18 2011 -0700

    altos: Split out tiny telemetry from full telemetry
    
    The TeleMini and TeleNano boards do not have either GPS or
    accelermeters, and they also run the kalman filter which produces
    standard unit measurements for the flight height/speed/accel
    values. This makes the telemetry significantly
    different. ao_telemetry_tiny.c sends the required data.
    
    Note that TeleNano sends the same telemetry as telemini at this point;
    there are a couple of values which are not useful, but the overhead of
    sending them is small enough that the hassle of having three telemetry
    formats seemed excessive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ba75e95c98d3e441a58d6f75d328d579e1997fe
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:41:44 2011 -0700

    altos: Make telemetry interval more consistent
    
    Instead of using a delay between telemetry packets, use a telemetry
    period and compute an appropriate delay each time. This requires
    changing the ascent telemetry from a 50ms delay to a 100ms interval,
    to provide a regular 10 packets-per-second rate. Before, we counted on
    the telemetry packet taking about 50ms to send so that we would
    receive about 10 per second.
    
    This also eliminates delays during descent for RDF tones -- those will
    get transmitted in the interval between telemetry packets without
    interrupting the spacing of those packets.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3f0bc801fd08a613c681504f0d1f9374486a2487
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:31:20 2011 -0700

    altos: Configure packet size from send/recv parameters.
    
    Instead of setting the packet size at configuration time, use the
    provided packet size to the send/recv functions to configure the
    radio. This eliminates many configuration calls, leaving us with 'RDF'
    mode and 'packet' mode, the latter working for telemetry and the
    bi-directional link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5c28b9312d90a3a66016abc641c20bcd852d69f8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 23:27:15 2011 -0700

    altos: Don't init packet slave on TD. Make slave start optional
    
    Oops. TeleDongle was starting the packet slave code, which kinda
    wrecked its ability to receive telemetry packets. This patch simply
    removes the packet slave code from teledongle as it cannot be used
    (yet), it also makes the packet slave code initialization take a
    parameter which controls whether to start that by default; in the
    future, perhaps TeleDongle will gain a command to start packet slave mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e980b251e5a4d25410710a9aa89ef940e06b0d93
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 18:43:52 2011 -0700

    altosui: Add software version to Configure AltosUI dialog
    
    Show this somewhere so we can figure out what is installed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1aeb759c48f475ffaaae787515e080440c8386c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 19 12:28:08 2011 -0700

    altos: Baro-only boards must not detect launch on accel or speed data
    
    The baro sensor generates too much noise to use small changes in
    computed speed or acceleration to cause a false launch detect.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a4f6d5ad55637cde97a1e2f247f92df59bc2e14
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 21:01:15 2011 -0700

    altos: Write height values to log for nano/mini
    
    This is a lot more useful than the old filtered pressure data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c985bb6a19c710409629f3c095332ba7afcf5248
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 20:36:59 2011 -0700

    altos/test: Add scripts to run lots of flights through the code
    
    This runs a long list of flights (there's a user-specific path
    pointing at the flights) and squawks if the baro and dual flight
    computers don't match.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dbe915795c66995805b5f37e6eb698cf2c143e61
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 20:26:12 2011 -0700

    altos: Fix mini/nano default log size to available flash space
    
    Also, remove accel cal code from boards without accel
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5db94e1e230bade966a997aa83165405a9ec9d83
Merge: 1a8f45e cbb968f
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Mar 18 21:12:39 2011 -0600

    Merge branch 'telemini' of ssh://git.gag.com/scm/git/fw/altos into telemini

commit 1a8f45e7b720d01d3ff0c35ed1caaf8cbe0c3119
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Mar 18 21:12:12 2011 -0600

    fix up script to work and have reasonable texts

commit cbb968f5cf03625d453d84dc535758072a2c04c7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 20:07:25 2011 -0700

    altos: Add TeleNano support
    
    This just uses the TeleMini bits, which should work fine for now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 32c51840c792a737019fbc9fe42f2ca073b71827
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 19:49:46 2011 -0700

    altos: Tiny logging fixes. Scan at start, stop when land or full.
    
    Initialize the flight log for tiny systems by scanning the log area to
    find the current flight number and log area bounds.
    
    Stop logging data when the flight is over, or when the log area is
    full.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62eae8a17d870e8ac6937ba23da01a5fbc652c6c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 18 16:53:11 2011 -0700

    altos: Add kalman filters for baro-only boards
    
    This adds a baro-only kalman filter to track the state of the rocket,
    and then uses it to control flight events instead of the existing
    ad-hoc mechanisms.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c826fab31f8aea25a942b6bb8435d4b04c1bef10
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 17 16:00:10 2011 -0700

    altos: Add tiny logging for TeleMini/TeleNano
    
    This splits the logging code into management of the log space within
    storage and separate code to actually write suitable log entries.  A
    new log writing module, ao_log_tiny, is added which writes only
    altimeter data at a fairly low data rate for devices using on-chip
    storage.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b546b474b7b6c5b4169b4c1ca09c6f17ebb3ae5
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Mar 11 21:41:01 2011 +1000

    ignore new flight test file

commit 82707a05af0eb2d54f46b58805c95cdf4e5a3703
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 16 20:36:50 2011 -0700

    altos: Internal flash ops block when running from flash
    
    The docs say that if you are executing from flash, then the CPU will
    stall after a flash write or erase command is started until the
    operation is complete. Take advantage of that to simplify the flash
    code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d8579f973bfe1047ee91f03555e74abdc483e69
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 16:31:43 2011 -0800

    altos: oops -- altitude reporting wasn't pausing between signals
    
    need to actually alternate the LED/tone with some space so you can
    count.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d007bccf6cb36d24a9c7c48de7d80759ac6f2e37
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 15:57:58 2011 -0800

    ao-load: Make usb descriptor rewriting optional
    
    TeleMini and TeleNano don't have USB descriptors to rewrite when
    loading firmware, so allow them to be missing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57d83f51377fb58018f422e42d74f29b86a821d2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 15:26:41 2011 -0800

    bringup: Add script for telemini
    
    Copied from teledongle with a few obvious changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ddd7485f05d0cad8f5b3e1ee9b9a4d2812ea1837
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 08:03:11 2011 -0800

    altos: Switch pins around for TeleMini
    
    TeleMini has fewer sensors and uses P0 for igniters instead of P2.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f8afc2641c779fc312a42a6358187d8716ebe61a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 23:52:11 2011 -0800

    altos: Switch LED usage for TeleMini around
    
    We're using the LEDs instead of tones, so make red mean 'low tone',
    green mean 'middle tone' and both mean 'high tone'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fc5d014721a7e5a7b22f07eb4ab0bb3c764473fe
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Feb 26 16:06:48 2011 +1000

    ao_intflash: Avoid overwriting code
    
    Require firmware to specify the end of its codespace in its Makefile,
    and use this to determine where the start of available flash is. Should
    give compile time errors if either there's no room left for storage, or
    if there's not enough room for code.

commit 0e4c55d78852415e79f7318471f4d00c89703b78
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 21:03:57 2011 -0800

    altos: Add TeleMini v1.0
    
    This adds initial code for the telemini board, a two channel
    flight computer with digital telemetry and a barometric sensor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d41358c80f2eb8b6e98d699149bb941a6671475
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 21:00:52 2011 -0800

    altos: Start with packet slave running. Turn off in pad mode.
    
    Instead of turning slave mode on in idle mode, start with it running
    and disable it in pad mode instead. This means packet mode is
    available in startup mode too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e56ed44e562f808addfd76bfb352f981db94094
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 21:59:08 2011 -0800

    altos/test: Add baro-only flight test program
    
    This builds the flight code in baro-only mode for testing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e339ffd8bd8b9e3f4758017ba355028000cb612e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 21:57:52 2011 -0800

    altos/test: Use ao_convert.c instead of hand-coded pres → alt func
    
    Fix up ao_convert.c so that it can be used within the flight test code
    instead of having a (broken) copy of the code there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02611efea0c485d78fad08c696c1f56e868d36b8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 6 20:56:25 2011 -0800

    altos: Make serial, usb, beeper and accelerometer optional components
    
    Not all boards will have these, so fix places that use them to deal
    with that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fdd15a254c6fab5ba2d02320ba0ceb3e6a56354c
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Feb 26 11:48:30 2011 +1000

    ao_intflash: Use internal flash for storage
    
    Makes any free pages at end of CC1111's internal flash available via
    the ao_storage API.

commit 8f1bd11b61d9423c62162f7bbe573fc69fd75269
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 16 14:10:06 2011 -0700

    aoview: remove -s option.

commit 45395c7825184efb835d5b165fa132be20c7f6fe
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 16 14:08:42 2011 -0700

    Bump published version number to 0.9.1

commit 9f3d26cadf37880d2c9223f59271d295b11c4c2a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 16 14:05:13 2011 -0700

    altosui: Missed jcommon.jar in the Mac OS install image
    
    This caused graphing to fail on Mac OS X
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6e340c87d3198647cf075ed520a82703b0d59beb
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 00:26:17 2011 -0800

    altos: Oops. Lost a couple of commands when merging the doc patch
    
    I didn't merge this carefully enough and managed to lose the 'f'
    and 'e' commands, which are kinda useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8cdf4fb051c22b35c251d90bc288551f7c2898bf
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Feb 27 11:11:12 2011 +1000

    src/ao_cmd: Shave off bytes from doc strings
    
    Switch to using { func, "X args\0Desc" } to specify command, saving
    a char field by looking at help[0] instead, and reduce help length by
    doing alignment with printf instead of hardcoded spaces.

commit 2cfe205de4242398e69c9e7c613af0d2a7094686
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Mar 7 00:01:01 2011 -0800

    Revert "src/ao_gps_skytraq.c: Update logging rate to 10Hz"
    
    This reverts commit b080e933a65d268aaaec8cfd5f617a13d5babc43.
    
    10Hz data isn't any better than 1Hz data; it still doesn't like going
    upwards rapidly.

commit 249cd3b63d97581b068fff988e0cd7fcd5bf493e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 19 01:06:01 2011 -0800

    altosui: Display eeprom parsing errors to user
    
    When reading the eeprom, any parsing errors (most likely bad
    checksums) indicate some kind of problem with either the hardware or
    the flight software. Display these to the user and do not erase the
    flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 629a7637871b24fe6d1204aaa7185d84933d4639
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 19 01:04:19 2011 -0800

    altosui: Always read whole eeprom block, even at end of flight
    
    Instead of stopping early, continue reading the whole eeprom block so
    that the extra serial data doesn't end up confusing the next user of
    the serial line, which may well be reading the next flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ca2cf1b7e03b8453b45b45e313a33ad65da9ad5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 19 01:02:00 2011 -0800

    altosui: Mark empty eeprom records 'invalid', don't generate exception
    
    When reading empty eeprom records, mark them as 'invalid', but don't
    generate an exception as it's normal to read these at the end of the
    flight log.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 690feb166fd2bc6b6dfc26828f1efe9f5f1c6c0d
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Feb 18 23:56:01 2011 -0700

    update changelogs for Debian build

commit 0630e7d6d8cf6abf0fe07f9a6df40ee472cce1ef
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Feb 18 19:54:18 2011 -0700

    tie bringup scripts to Bdale's bench TeleDongle

commit b080e933a65d268aaaec8cfd5f617a13d5babc43
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Feb 19 05:49:15 2011 +1000

    src/ao_gps_skytraq.c: Update logging rate to 10Hz
    
    Send commands to skytraq to update baud rate to 57,600 bps, and
    set NMEA output rate to 10Hz.

commit aad7103dcf44e69a5a30e008836cce5542ea33e2
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Feb 19 04:17:17 2011 +1000

    src/ao_gps_skytraq: simplify parsing code
    
    Added macros to make correctly constructing skytraq commands easier.
    Simplified code path for NMEA processing marginally.

commit fe5123fa801f5dafed8b052da607899d1ef20500
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Feb 2 19:12:57 2011 +1000

    ao_radio: generalise setup of packet size

commit 8b09cc1825645a57c256f38a2f9586ddecf6bda5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 18 10:02:46 2011 -0800

    altos/test: auto-configure acceleration parameters from the log file
    
    The flight test code had static accelerometer configuration values,
    making it impossible to use data from different boards without
    recompiling. As the eeprom and telem log files both contain the
    necessary data, parse that instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3bc27fabb6159ce58b14d0f7929b0f46f67c378
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 18 09:54:01 2011 -0800

    altos/test: Add dependencies in the Makefile for ao_flight_test
    
    Yes, it would be nice to automate dependency generation here, but I
    can't be bothered.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3080fdafff5212f267ba7c765a2f083435be799
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 18 09:51:37 2011 -0800

    ao-load: fix usage message to note that '=' is required for options
    
    The usage message was suggesting incorrect command line syntax; long
    options use '=' between the option name and value, not whitespace.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a09501ab714c0638410d06f80903a8769d93c688
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 12:47:25 2011 -0700

    update changelogs for Debian build

commit 2bb83d90aa03d825ca1b751418c91b194b72f1f9
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 12:46:02 2011 -0700

    elide changelog entries or re-release of 0.9

commit 9541ccd9ff9e67e0862ca31706358d8308fc85d8
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 12:42:40 2011 -0700

    update turnon script to prefer TeleDongle as programmer

commit 159fda30fe57349660c5e2d95017144ea3f5d7db
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 12:26:53 2011 -0700

    update changelogs for Debian build

commit 97f4f2e0d28eec1cf19d2d25140e42f6ac277700
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 19 11:21:52 2011 -0800

    altos: Program default flight log max value for new boards
    
    New boards have no config space values at all, and so they need each
    value to be set. Yes, this should be fixed so that there aren't two
    copies of these assignments.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 480587cf514ba21885b24c3b8fcb98d6b76ea8f4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 00:05:25 2011 -0700

    update changelogs for Debian build

commit 6244f2316267738781e31a773b377bcf8c476918
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jan 19 00:04:45 2011 -0700

    prepare to release

commit 3c72103866f041107af49e01a5ccb6d4e6b6ac80
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 23:55:42 2011 -0700

    update changelogs for Debian build

commit 4ae724fe1d2ca0d712321c4fdc2200ff46d77428
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 23:54:36 2011 -0700

    we need an install target to prevent parent dir make from failing

commit ca7b549fbf62019b01a6e6c85da50645ea9a4502
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 23:48:08 2011 -0700

    update changelogs for Debian build

commit 9a5666f42d4d90a0a488fd0a85ae9914944fe0be
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 18 22:46:25 2011 -0800

    doc: Build with 'make all' from top level. Build with 'make fat'
    
    This will make sure the docs are up-to-date for both regular and
    fat builds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72a04d679d06aaad9c2b4297fefd585fc393ce2e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 18 22:39:07 2011 -0800

    fat: Add docs to Linux package
    
    Oops. Missed this one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d91c250179f44ca17c26fff36718b7026aa8ee0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 18 22:34:15 2011 -0800

    fat: Add firmware for v1.1 and docs to mac/windows/linux installers
    
    We'll need to be sure to update this each time we add a product.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26c4cc3054b1c7c9ed6ce3c2f21f6254b3245718
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 23:29:03 2011 -0700

    freshen copyright year

commit e2e20f6ce8a9c2bca36fde5730ccd7151377ec6f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 23:18:42 2011 -0700

    add 0.9 revision entry, with caveat about telemetry format change

commit 27e6dbbe95ae9b361d60576e0cbadb66792307f3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 18 20:39:58 2011 -0800

    doc: Add v0.9 features from altosui to documentation.
    
    New flight download UI and new config items.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 92d7841edcfc8a841f71f7f97cc541f8e55c4627
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 18 20:39:30 2011 -0800

    doc: Don't delete telemetrum-outline.pdf
    
    This has a drilling template for the board.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c411dce69be58238b8312c2fd7405cbe8b5d4a5a
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jan 18 17:27:11 2011 -0700

    update changelogs for Debian build

commit da42f406e88ccc821cd45d5a94d5afec65ec50e9
Merge: ea4cdfb cf550f9
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Jan 17 09:50:17 2011 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit ea4cdfb87e03ecfb974f98305671265b6fb95372
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Jan 17 09:49:45 2011 -0700

    update documentation to reflect reality that modifying a board or separate
    pyro battery is not as simple as one trace cut on v1.0 and v1.1 boards

commit cf550f9b96fa94d8db559e01df0e265bb1c7b572
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 23:23:45 2011 -0800

    doc: Remove mention of ao_wake_task
    
    This has been removed from the altos sources, so remove it from the
    docs too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4b71c4f4ed6cae23a7f4a2e7ae697da9ec614898
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:26:53 2011 -0800

    altos: Use 5V reference data to correct accelerometer measurements.
    
    When the 3.3V and 5V values shift relative to each other (usually due
    to changes in power consumption), the measured acceleration will
    appear to shift. This patch converts the 3.3V referenced acceleration
    value into a 5V referenced acceleration, eliminating this error.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2887fe7affc0706dbeb2f04df9a00a9b799903ed
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:25:57 2011 -0800

    altos: Optimize fetching of ADC data in flight code
    
    This stores the address of the desired sample in a local variable and
    then fetches through that. Saves quite a few instructions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2681a17500913cbaf3966f09380bb1d6b59e3863
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:18:32 2011 -0800

    altos: Sample the accelerometer reference voltage on v1.1 boards
    
    This places the 5v reference samples in an array parallel to the basic
    ADC values. It doesn't do anything with the values, just stores them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69290588980bb15732a99eca5c911a3b6e9a37b9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:12:02 2011 -0800

    altos: Ensure flight code gets first crack at new ADC data
    
    Instead of having everyone wait on the raw ADC ring, have the flight
    code wait on that and have everyone else wait for the flight code to
    finish looking at the data and move its pointer forwards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1b8d7313504240ed04e0747e9b0f6e9a83d323e2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 15:57:15 2011 -0800

    altos: Auto-calibrate linux-based flight testing code
    
    Use the provided ground acceleration average to set the two
    accelerometer calibration values so that the flight code will
    detect pad/idle mode correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afd3d3cdb8c2291c1c7cda7908392d68cd04f87f
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Jan 17 15:03:40 2011 +1300

    Rework invalid accel cal detection code
    
    Slightly reduces code space.
    
    Uncalibrated accelerometer now enters invalid state as well.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 3566dee1cf83870396a0bb164f5549dd3faf58f5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 14:40:31 2011 -0800

    altosui: Remove spurious colons from eeprom selection headers
    
    This colons make the presentation a bit confusing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab31b1c737d8fd32af482e5b06699f1b832a25a1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 00:56:22 2011 -0800

    altos: Add DATA_TO_XDATA to linux test harness
    
    The flight test harness needs to expose every function used by the
    flight code in some form, and this macro is about to become used.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit add2802a8a33336180fe6856241a7f4a8200e89c
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Jan 16 00:10:30 2011 +1300

    altos: Added check for out of bounds accel
    
    Chose invalid flight mode instead of idle to give user feedback.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 58838c0b96a91da0bd0cd77c3ff312b589c08136
Author: Mike Beattie <mike@ethernal.org>
Date:   Sat Jan 15 23:21:26 2011 +1300

    altos: Added check for an accel value above 1.5g
    
    When detecting flight or idle mode, this should indicate
    that accel cal values are out of whack.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 118fe84c9ff1cc9d1653e67a2315e22e19d60a14
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 11:26:31 2011 -0800

    altos: average 512 accel/baro samples at startup instead of 1000
    
    This lets us use a simple shift instead of a divide, saving a huge
    amount of code space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a775b8f9ecefa143050653d74dfd218b32b9bb5
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Jan 16 10:54:45 2011 +1000

    altos: Restructure skytraq NMEA parsing code to save some space
    
    Splitting this into several smaller functions appears to make SDCC
    generate better code.

commit 7a35b2d7048669a96256d4ea0086299f8a0cb1df
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 22:42:38 2011 -0800

    altos: Flush log when full
    
    When the log storage is full, make sure any pending writes are flushed
    out so that the last bit isn't lost.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 47ee4597e55749e8f66f61a585ea32776979bf80
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 16:25:10 2011 -0800

    altos: TELEMETRY PROTOCOL CHANGE. Switch to 16-bit serial numbers.
    
    What a terrible mistake! The flight computer serial numbers were
    recorded in only 8 bits, so serial numbers > 255 would get truncated.
    
    There's really no fix other than bumping the field to 16 bits and
    reflashing every TM and TD on the planet. Very unfortunate.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b22ba359a02297e39a446cbd5ef51e63b795624a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:05:50 2011 -0800

    doc: inkscape tracks the filename inside the document
    
    telemetrum-outline.svg was renamed from telemetrum.svg and inkscape
    appears to care.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0a841b285fb398f0be72183ec3c9d1e358419a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 12:02:43 2011 -0800

    altosui: Require 4 sats to light up the 'GPS locked' light.
    
    This tracks the same GPS signal requirement needed for 'GPS ready' and
    ensures that we have a 3d fix.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bfdce6fc3367fdf03e0dc7ddd94da18723b8ba3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 14:30:38 2011 -0800

    altosui: Ensure serial device is closed after eeprom download finishes
    
    As this code is all event-driven, track which events will trigger
    further work and block closing the device in those specific cases,
    ensuring that all other code paths end up closing the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 987039b8f0b1d889aca9109d4c6a83f034ff64a7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 14:29:57 2011 -0800

    altosui: Remove debug message when eeprom downloads are complete.
    
    This message isn't useful now that this code appears to work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb534aae15f0f1e5d69790e159d0287b6b8a514a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 14:28:35 2011 -0800

    altosui: Use long input flush timeout when remote.
    
    100ms isn't long enough to capture pending remote serial input, so use
    300 ms in that mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4add23186b3586c99579d83efdc003f79e9bf7a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 16 14:26:18 2011 -0800

    altosui: Make serial debug more complete and accurate
    
    Display all serial input, including telemetry.
    Wait to display serial output until flush time, to debug missing flushing.
    Show when devices are opened and closed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit deb3c7b9206be0c9c46f75d35c8f766c26d9838f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 15 22:43:37 2011 -0800

    altosui: Reset eeprom download instance variables before reading flight
    
    To deal with downloading multiple flights in a single invocation, make
    sure all relevant instance variables are set back to start of flight
    download values each time a log is read.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eec9eb2e81535e62c52fbb2e57a2d33f88f92c1a
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Jan 17 07:56:53 2011 +1300

    Close serial port if Download/Delete dialog is cancelled.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit df1c6ab3ac079199b5a12328c9ff5cfa6ac29b36
Author: Mike Beattie <mike@ethernal.org>
Date:   Mon Jan 17 00:40:07 2011 +1300

    Convert EepromSelect dialog to use a GridBag
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit fef302656f21ae0ab4772f72979cbb7f071da89a
Author: Mike Beattie <mike@ethernal.org>
Date:   Sun Jan 16 20:25:19 2011 +1300

    Re-order and re-arrange eeprom download dialog
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 35adb7c98fe02e84fff70c1bee22bfa019cfacc2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 14 21:44:59 2011 -0800

    doc: Add telemetrum mounting template in svg and pdf forms
    
    telemetrum-outline.svg and telemetrum-outline.pdf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fdba0f24afd59becc499d750bbdb80aea86066ac
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 14 18:01:16 2011 -0700

    update changelogs for Debian build

commit 646e1926cdf56e2cf2425413ce716e6999b64a58
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 14 18:01:00 2011 -0700

    update changelogs for Debian build

commit d908c2ebd0b11a54cfd922a192249d0f0df0ddb0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 14 16:47:36 2011 -0800

    altosui: Add preference for serial debugging.
    
    This dumps serial input/output to stdout.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcaee12a64d5e195b55b8f77c19dfc0c57ef5d58
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 14 16:47:19 2011 -0800

    altosui: Ensure serial line is flushed after disabling remote link
    
    Flush the '~' character.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d154be89246e111a36f7c2700effbb2c97da541
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 14 16:44:50 2011 -0800

    altosui: Show dialog after successful delete or when no flights
    
    Make sure the user always sees confirmation for flight log management.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b490455807d1c70c81785ed8931a07ab44e8e421
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 14 14:31:19 2011 -0700

    update changelogs for Debian build

commit 97b1ca994599ad262400eb3c685799582f7f1b94
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 14 14:30:49 2011 -0700

    update changelogs for Debian build

commit d794ef9e0fbe4d13259db1bbd69f01717c14400b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 12 12:41:26 2011 -0800

    altos: check for valid flight number in ao_log_delete
    
    Zero is not a valid flight number, and ao_log_flight uses that to
    indicate 'no flight in this slot'. Check the user-provided input for
    zero before looking through the slots.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8801b8c1947bd39f7c985b91a2ba8dbc81bcc91a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jan 12 12:40:45 2011 -0800

    altosui: Add eeprom 'manage' ui to download and delete multiple flights
    
    This shows the list of available flights and provides options to
    download and/or delete each one.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 440d52e34364fdeeddc76a2d744cc6d1c934364f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 11 21:28:07 2011 -0800

    altosui: Add support for parsing list of flights from the 'l' command
    
    This adds parsing support to enumerate the available flights, but does
    not yet provide any UI to use it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ad419d81c90ef6a16656970466313767fef830f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 11 21:26:41 2011 -0800

    altos: oops -- 'e' command was only showing 7 of the 8 bytes per line
    
    Just a silly off-by-one error when printing out the data received from flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd2480fd757b67557d9c7de42e402034002c3e37
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jan 11 15:39:24 2011 -0800

    altosui: Split eeprom download code apart
    
    Create separate 'download config data', 'read single record' and 'read
    block' functions. This code will be shared with future multi-log
    reading code for new firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c437b14b7fc7afdfc7b809a04d7fa29d5e742307
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Jan 7 21:00:10 2011 -0800

    altos: Remove redundant initialization of ao_interval variables
    
    These are all initialized in the ao_flight_drogue state transition.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 57de960b8148bf485607898c3d66af6994d76481
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Jan 7 20:52:33 2011 -0800

    altos: Remove unused accel_vel_mach and accel_vel_boost variables
    
    Presumably left-over debugging code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca66f86a899c191b6362a334417fc84a79349677
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 20:46:29 2011 -0800

    altosui: Add configuration of flight log size
    
    This adds to the TeleMetrum configuration UI the ability to set the
    maximum flight log size.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 52ac83fedbfd380d14d4df2e79992bbdfba3552a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 20:26:39 2011 -0800

    altos: Check for full log and complain
    
    Reports special tone along with the continuity checks.
    Reports flight 0 in telemetry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 00891b40754962ef6530b237ef52017bb58112d5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 20:25:09 2011 -0800

    altos: Check requested log max size against available space
    
    Make sure the amount of memory requested for a single log isn't more
    than is available on the device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bbddcae2a15b6d430e84956ddf26955aa9173cc0
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Jan 7 20:18:25 2011 -0800

    altos: Optimize Morse code generation
    
    This reduces the size of data and code needed to report the
    flight states
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73620c41017c1774d6190dfd4be5b742eb64f8d3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 20:13:28 2011 -0800

    altos: ensure erase mark is written when erasing flights
    
    It was getting called only when *failing* to erase a flight (oops),
    secondly, it wasn't getting written because ao_storage_flush wasn't
    getting called.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit edd22ee49adf60c35f2fe6ba97c111b7ad4131c2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 17:56:06 2011 -0800

    altos: report flight log offsets in hex block numbers instead of bytes
    
    makes them compatible with the 'e' command.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1cc08af4f4a1ff61fc0deca3bdd95e8a5ca8ec5c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 17:55:54 2011 -0800

    altos: white space fix
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d8c9684239b67a69a4a3d24202a6df0d73c4f7f5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 17:54:54 2011 -0800

    altos: Speed up at45 and 25lc erase speeds
    
    No need to read the block to be erased before erasing it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2722703bd848b07a02d3ce0c83a502eca52a9f1d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 14:58:39 2011 -0800

    altos: support storage of multiple flights.
    
    This adds the logging support for dealing with multiple flights
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9b210bc33cd95e7108ab51925fdf0d5e8deaf7e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jan 7 10:05:11 2011 -0800

    altos: Add configuration parameter for maximum flight log size
    
    This parameter will permit available storage to be split into multiple
    separate flight logs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bcf14f12f6681888c3162d0f33ef2d454eb75dd
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Jan 7 00:52:50 2011 -0700

    update changelogs for Debian build

commit 408a3e04362d626778640dd0ce7d356d3863de53
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 23:38:13 2011 -0800

    altos: Mark end of available flight list with 'done' to make the UI
    code easier to write
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e991f52276248fa08d96fbecc458bc478e98d299
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 23:35:31 2011 -0800

    altos: Rip out 'optimization' in ao_log_scan
    
    Remove premature optimization to avoid re-scanning the flight logs for
    the best empty entry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 569a1dac55b70c30f01afa7bcb74442ecdd85d85
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 22:37:38 2011 -0800

    altos: Move common storage code to ao_storage.c. Add M25P80 driver
    
    This reworks the storage API so that you erase blocks and then store
    data to them so that the M25P80 driver will work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4ba9bf4291bf17c777c8c3ef7c71e4a30b9947a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 17:34:58 2011 -0800

    altos: Require manual flight erasing.
    
    This supports flash chips that require larger erase blocks.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ddcc94da4326f9ce954bd31a46b36165c58e6c18
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 12:51:39 2011 -0800

    altos: Simplify storage API
    
    This removes the config-specific APIs and exposes global variables for
    the available storage space, block size and config storage location.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3f1b1488bdc92fa9277dc549ba9f3210a8d4c8c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jan 6 11:28:35 2011 -0800

    altos: packet and usb i/o routines use 'char', not 'uint8_t'
    
    Just fixing the type of a local variable holding a character
    passed from the packet link to usb.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5688af4e4d7ca8e559d758257e79b7979f1cc924
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 22 21:13:56 2010 -0800

    altos: Add telemetrum-v1.1 directory
    
    This just clones the v1.0 build; changes will be added on top of this.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9f7296b3feab872bf51fc369ade69cc1e7cf7a3f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 22 21:06:22 2010 -0800

    altos: Split out SPI driver.
    
    For TM with the companion connector, the SPI bus will be shared among
    multiple devices. Split out the existing SPI code into a common
    driver, with the SPI bus protected by a mutex.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51c410c1c952e0e9bcf1b2c438813de63753be5f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 28 00:24:54 2010 -0800

    windows: Update NSIS installer file to use compatibility IDs
    
    This allows the file to contain a single InitDriverSetup function,
    making things shorter and (I hope) clearer.

commit 4a42f9d5c20dcaf5fd7591ccf9e32c6130d9d538
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 28 00:22:14 2010 -0800

    windows: Add compatibility IDs to telemetrum.inf
    
    This will allow the .nsi file to reference just the compatibility ID
    instead of needing to have all of the USB IDs listed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 484b44e81b655f1ecb48256095382a56d2839bae
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 26 17:39:40 2010 -0800

    altos: eliminate ao_wake_task
    
    Waking up a task waiting on some random object is a bad idea. Fix
    the waiters to look for suitable signalling.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 07213dc34fa20470a4b36a327a83d75b0f010ebb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 26 16:14:15 2010 -0800

    altos: clean up radio abort paths. Share radio code.
    
    Instead of aborting the DMA and radio operation and expecting that to
    be handled reasonably by the radio receiving task, rewrite things so
    that the abort function just wakes the receiving task while that
    terminates the DMA and cleans up the radio.
    
    This eliminates all kinds of nasty bugs dealing with radio abort
    smashing the radio registers at the wrong time, or interrupting a
    radio transmission.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b62580855c5144f5bc7e0172289bce08814d9472
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Dec 14 03:40:18 2010 +1000

    altosui: move maps to subdir, fix E/W mismatch

commit b8d2eb5509096fd5bd04598b1312077659109620
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 1 00:15:17 2010 -0700

    update changelogs for Debian build

commit ea95c060f8bd959cefc60dd6d411151f3c91384e
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 1 00:12:05 2010 -0700

    fix symlink paths in rules file

commit f95220b6f0cc74928e0e7d7c7e1f443eafc32a02
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 1 00:03:23 2010 -0700

    update changelogs for Debian build

commit ea7130e953622884afc348265f5a4c58f9876823
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Dec 1 00:00:58 2010 -0700

    modify Debian package build to deliver one copy of background.png for
    the themes and symlink it into place for gdm and slim

commit 3696b30a8d1eb351353d84b5f7af8eeff55c468b
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 29 21:47:13 2010 -0700

    update changelogs for Debian build

commit 11b3f9ff715017a2dec02003275885334f22c009
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 29 21:46:02 2010 -0700

    releasing 0.8.1

commit 5f3f11e11dff9b9f4d1dde279c0d474de0de12a5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 29 20:41:49 2010 -0800

    Add minimal release testing plan to Releasing
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0a4deee23984a8f779917bbeaf74a66a0abf592
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 29 20:34:27 2010 -0800

    Move "Releasing" to top level
    
    This file documents the AltOS release process for all systems.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b727156ef0a7fb6e442ca28be27eb344a213ecf8
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 29 20:17:35 2010 -0800

    windows: Add jfreechart.jar and jcommon.jar to windows install image
    
    These are necessary for the Graph Data button to do anything useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3e2220a180f95971d222a597d2057ca328c27356
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 29 21:29:14 2010 -0700

    adding Bdale's release process document to the source tree

commit 61a924099800494b589cbbb87c65b552ccbd8394
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 29 14:40:27 2010 -0700

    fix an Altos vs Altus typo in the docs

commit e840b6594b8a939f148fa7231e1b06a280d94074
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 22:42:43 2010 -0700

    fix section layering

commit f39698bbc12afdfadfac56c90030e16db93cf4fc
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 19:46:03 2010 -0700

    fix publish target in doc/Makefile

commit 13cea7a96821165a10a8b2433af1da7508882b0a
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:48:31 2010 -0700

    moved doc dir in web content to AltOS tree

commit 6f3c72462af86a7d9dec20f4c813a524a5be9fbb
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:32:17 2010 -0700

    update changelogs for Debian build

commit a375942979dbcd8239d8c0addb10616e6048f6ea
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:31:26 2010 -0700

    rewind changelog to recover from stupid build failure

commit 263cf6c4fc5c1a240d719bb0ceb33393864fb3d6
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:24:00 2010 -0700

    update changelogs for Debian build

commit 2615289265b6f8fa08827be794b4eee569fc6333
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:23:17 2010 -0700

    update changelogs for Debian build

commit 5e23bcc2d2ad33a839fedd2158213098a05cd9ae
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 28 18:21:31 2010 -0700

    declaring 0.8 released

commit b09d3e11c32abd07f8e11b483ac4b57148f4f2d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 27 23:08:41 2010 -0800

    windows: Bump .inf file version

commit 42c2394ccc1a1ee6dc134ed963a4f79acf031d0b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 27 23:04:50 2010 -0800

    windows: more .inf file hacking
    
    Add a LayoutFile reference
    Add the FakeModemCopyFileSection
    
    Copy AltosMetrum.Install section to AltusMetrum.Install.NT section. I
    don't know what this might do; existing files seem inconsistent.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26369a92398f4ebe3fcd54ce34cebffae0cfdf07
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 27 22:39:31 2010 -0800

    windows: remove some non-existent .inf file section references
    
    The mfglt and VerboseResultCodes sections are not present in the .inf
    file, so remove refernces to them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 641c5373724d34c3adfcf42420a528d6bba736b9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 27 22:35:18 2010 -0800

    windows: try harder to get windows install to work
    
    Add devIDs to .nsi file. Fix install section name mapping from the
    hot-plug info.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd414e2c04ce5ecbc75f19325a6d6f82cd489fb3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 27 16:30:29 2010 -0800

    altosui: Correct windows hardware IDs for nsis installer file
    
    Need real hardware IDs (encoded USB ids) to get windows to
    auto-install the driver?
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f834b22905db87557f729f942607dc363b013694
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 25 22:31:33 2010 -0700

    update changelogs for Debian build

commit da3b39d6b1b5ba48686c2a4add4b5448fd5711af
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 25 22:29:01 2010 -0700

    changed main document name from telemetrum-doc to altusmetrum

commit ab6c9c983a2830bc8807e1b75d2576141b73632d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 25 19:30:02 2010 -0700

    update fat target in Makefiles to reflect move of altosui and libaltos

commit b8f05cdc0e9b4a96852eed9d38ff6d5950e2d2ed
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 17:29:28 2010 -0800

    altosui: Clean up flash code to ensure swing gets called from right thread
    
    This moves all of the flash code to a separate thread and passes
    messages back to the swing thread to keep the UI up to date.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adbb14c63d85b7a54223f88ac623571456f4a462
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 16:28:04 2010 -0800

    altosui: Remove gratuitous threading from device flashing UI
    
    There's no need for a thread here, and swing doesn't want us to use
    one anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f88520089660845009148b69bfcea6c9dff9672
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 16:23:18 2010 -0800

    altosui: Flight data download GUI operations called only from main thread
    
    Swing doesn't like UI functions being called from non-dispatch thread,
    so fix up the eeprom download code to use SwingUtilities.invokeLater
    to make sure this works right.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6d3612e267cd4c1e7fdd74fc33952b3f26f870f5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 16:09:37 2010 -0800

    altosui: Eliminate unnecessary thread from config UI
    
    There's no reason to use a thread to run a dialog box, and
    swing doesn't like threads anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 12fb7f0e70cd244475d84469f93283112478d1e1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 15:56:42 2010 -0800

    altosui: Only call swing display functions from main thread.
    
    Swing insists that all display functions be called from a single
    thread, and the flight window wasn't following this for display
    updates. Use SwingUtilities.invokeLater to make sure the flight UI
    updates happen in the right context.
    
    Fixes a UI freeze on Mac OS.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b74cec6cd0bc043f53e9e28472765aa343136813
Author: Bob Finch <w9ya@qrparci.net>
Date:   Thu Nov 25 13:30:48 2010 -0700

    Updated AltOS PKGBUILD to track makefile changes

commit f88bde21d76a4ff91099a5051153ebace1619978
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 11:16:55 2010 -0800

    altosui: Hack up standalone makefile to maybe build altosui again
    
    This isn't tested, but at least the paths are more likely to be correct
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d98440d53378aaa6da87ed65e9abb2f96f7ee49
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 25 11:16:28 2010 -0800

    altosui: Make windows bits build after moving altosui directory
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4893ed50bc14772986ac02f9b39928f1882da923
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 23:54:08 2010 -0800

    Revert "altos: Don't abort radio transmissions with ao_radio_abort"
    
    This reverts commit 54468e5dc567aaac5c5c20e921859b7cec28bb88.
    
    With this patch in place, TD could not be placed in 'packet' mode.

commit cb08bc264c71ca972027392b42f347a03df76a43
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 22:55:08 2010 -0800

    doc: Rename telemetrum-doc as altusmetrum
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 554bdd25e132dbaec322bc11f94093d2c2e78751
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 22:49:33 2010 -0800

    doc: Add more authors, fix URL formatting, note that AltosUI actually exists
    
    Add aj and bfinch as authors. Insert an acknowledgements section. Fill
    in the Fire Igniter section in the AltosUI chapter. Then change the
    section talking about the future plans for Java to mention that they
    actually exist now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bcf78b67717374b5971820021b83061e2e9734cf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 21:39:18 2010 -0800

    doc: Reformat altos to use sections for each function
    
    This places them in the TOC, making them easier to find.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 51c7741040d95c5deece939dae5e4136cc04afc4
Merge: d1dbe3b 4e47c44
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 21:00:52 2010 -0800

    Merge branch 'buttonbox'
    
    Conflicts:
    	doc/telemetrum-doc.xsl
    
    Pull the buttbox version of the docs in as it had been updated.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e47c44d335276cf0dc5ed3a0756e50c98c1b9b9
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Nov 24 21:44:53 2010 -0700

    manually fold in documentation work from the master branch

commit 8a68c1da253c0b29a7cb9c7540c20585ad6e3dec
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Nov 24 21:21:53 2010 -0700

    tweak rev history

commit 7cd1c7765d137df711caeeb69abaaba1b36e0a65
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Nov 24 20:53:36 2010 -0700

    fix missing section close in Site Map content

commit db2b19b8f0d452d682d53c7ed0ff6e359b46efa0
Merge: b372f3c 915f881
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 18:57:35 2010 -0800

    Merge remote branch 'aj/buttonbox' into buttonbox

commit b372f3c0ee4ec49aabe61c169cb1eb9bb4fb2cfc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 18:50:46 2010 -0800

    Missing change to top level Makefile to build altosui
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 915f881d61294dc6f5a6a3e8d75567e18492a631
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 25 09:52:30 2010 +1000

    doc: Document altosui "Site Map" tab

commit f01096c4b42f9a4720ed0414826c2a283a992545
Merge: 357826a 3fbefb3
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 25 09:10:50 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 3fbefb3eea981d34a09496cf8abf0119de2e35bf
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 14:57:57 2010 -0800

    Move altosui to the top level, placing libaltos inside it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 357826aa9c7b42c59f5d52b8eb016d73b6da0c7f
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 25 09:07:34 2010 +1000

    docs: Document altosui "Graph Data" button

commit 7811e6dfa6caf10251da7df7c24b98cdc3787892
Merge: 71b1949 7a50837
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 25 08:47:36 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 7a50837ea0d92db3f469f197ec8210aee22aa143
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 24 10:55:18 2010 -0800

    altosui: Make sure packet mode is turned off when the connection fails
    
    When the packet connection times out, turn packet mode off when
    closing the serial port.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d90e2f6009e060fb59c519f7e564483a7ca6872
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 20:17:44 2010 -0800

    altosui: Let people fire igniters that don't read as 'ready'
    
    This provides for igniter testing with LEDs or other materials that
    don't look like regular igniters.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3233985a132e1d660e6df12d0056b6729f16faf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 19:09:31 2010 -0800

    altosui: Disable radio configation over packet link.
    
    Attempting to configure the radio over the packet link will only end
    up confusing the user, so disable it. This also works around a bug in
    older TM code which would lock up when trying to do this.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6cd9be22f06f21d12ee2f668989d83d3c61d14c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 19:08:07 2010 -0800

    altosui: New AltosSerial.set_radio function sets channel/call
    
    Use this anytime you need to set the device radio channel and call
    sign, either for telemetry reception or packet mode origination. This
    uses the saved callsign and per-device radio channel number. Do not
    use this when opening a telemetrum as there won't be a saved channel number.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ed7cf7d262fcf7c0c677c2fb981582b571de9e5e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 19:04:55 2010 -0800

    altosui: Make AltosSerial.flush_input keep reading while non-empty
    
    Flushing the input buffer can take a while, especially over the packet
    link. Keep reading while stuff is appearing on the reply queue.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b9db8c82d26a6a2e43d4ca40742fc1bdc502380
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 19:02:54 2010 -0800

    altos: Make radio test command careful with the radio mutex.
    
    Remember whether the radio test mode is on or off and don't try to do
    either of them twice to prevent the mutex from being acquired or
    released twice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54468e5dc567aaac5c5c20e921859b7cec28bb88
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 18:57:49 2010 -0800

    altos: Don't abort radio transmissions with ao_radio_abort
    
    We only want to abort pending radio reception to release the radio for
    other use, or to change the radio channel. Let radio transmission
    proceed. This fixes a problem with using packet mode to configure the
    radio channel; if the packet transmission is aborted, the TM ends up
    wedged.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d873dc28f0752aeb58a6263e42bdd5b9095bd392
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 23 18:56:46 2010 -0800

    altos: remove unused variable from ao_igniter
    
    The 'status' variable used to hold a reported status value from the
    igniter after firing, but we ignore that now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71b1949e50f4533bcf44537da65b19bc67863c8e
Merge: a79225c f1892b1
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Nov 24 12:14:11 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit f1892b137b1de3d6caf0293bd40ed5c3e4948066
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Nov 23 18:58:11 2010 -0700

    lose the placeholder on how GPS works, as it's going to be a
    while before I tackle that, if ever.

commit a79225c215f17fa5218ddd9db4fc3f5c563a9f74
Merge: 84cd5d4 853b711
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Nov 24 11:55:14 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 853b7112e34212040c4cb7289f9cfdb2f3ea9f90
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Nov 23 18:53:18 2010 -0700

    merge Keith's AltosUI documention into "the big book"

commit 84cd5d42d8b5659463544fe2a400758b56478609
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Nov 24 02:13:32 2010 +1000

    altosui: sitemap uses rocket gps if no pad gps

commit c7119c21baa9d4ca681975b8613ade6593f65577
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Nov 24 02:11:36 2010 +1000

    altosui: don't switch away from user selected tab

commit ae55a107f12546dc65f04618c7abc17beb920d73
Merge: d1005f6 737f2fd
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Nov 24 01:53:46 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 737f2fdd012202f453120ece117ae5e859b32082
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 22 22:26:19 2010 -0800

    doc: Add internal documentation for AltOS
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5523e7d55ecc8d310e495fa4f5115f7483c42d65
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 22 21:07:10 2010 -0700

    add a rudimentary --help for command line use

commit d1005f68376d695039c314b8d7a68bbf9acbca4f
Merge: 9a83e0d 22c0978
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Nov 23 10:14:55 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 22c09781af1df4b38562b577e9926c23e4a397f2
Merge: b27327a a79606a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 22 16:02:22 2010 -0800

    Merge remote branch 'origin/buttonbox' into buttonbox

commit b27327a05d249eaf969b67d2a8d12fc6a93841f0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 22 15:56:04 2010 -0800

    altos: assume igniter worked.
    
    Many igniters don't go open when fired, so there's no way
    to know if they worked. Assume they did as a failed igniter is
    unlikely to do anything when fired again anyways.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68323cbb222f1f33198a42abaa0550af22f75a93
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 22 15:53:27 2010 -0800

    altosui: Close serial port when debug link fails
    
    If the debug connection isn't working, close down the serial port when
    reporting the failure.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a83e0dc79f7a7467c7814d58daa2a2b89e50972
Merge: 902735f a79606a
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Nov 23 08:07:04 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit a79606a6507fc01a74910f7959e84c4e9a730714
Author: Bob Finch <w9ya@qrparci.net>
Date:   Mon Nov 22 12:24:42 2010 -0700

    Added PKGBUILDs for deps into contribs

commit 377ee7e90ecd028f984cd1abce96b2efc3b5b977
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 21 14:03:17 2010 -0800

    altos: Add on/off modes to 'C' command
    
    This lets the user turn the radio on/off and then invoke other commands.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 902735ffbfdd97672d52b09f17cdcd619193fd05
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Nov 22 05:29:26 2010 +1000

    altosui: keep sitemap more centred on rocket

commit b85df38b5611e45cb9296df07b720badf74ac26e
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Nov 22 05:22:17 2010 +1000

    altosui: improve sitemap scrolling behaviour

commit 4a9ded5b39ed08e13abc2cddba8b712f62b983f2
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 17:39:50 2010 +1000

    AltosSiteMap: ensure buffer around active tile

commit ec47bc93a487614714a752cb30ec9fe3d8f72929
Merge: 0393830 e7954c8
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 16:08:37 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit e7954c820763f80e993f9f822e837725cf36af84
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 22:03:26 2010 -0800

    altosui: When fixing eeprom gps time information, make GPS data valid
    
    Eeprom files may be missing the GPS time (due to a firmware bug). Working
    around this involves finding the next valid GPS time and using that to
    create a fake GPS time entry. However, that next GPS time may not
    be locked or may have few sats as it is from the boost stage of the
    flight. Fix this by simply forcing the fake time packet to have
    4 sats and be locked.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0393830f85da5efc96bbdf0d9769b66019c34b33
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 15:13:35 2010 +1000

    AltosSiteMap: limit nr of tiles to 200x200

commit a08b2a6363c194195db92029743f6612676373ce
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 15:03:21 2010 +1000

    AltosSiteMap: never accept 0,0 as lat/long

commit 84e570d8a8a52e0d358582135ec1b3a12be94c26
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 14:45:10 2010 +1000

    AltosSiteMap: refactor tile collection

commit 71e487344395a8efc9cd279aad92f601ff4c6d3d
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 14:05:00 2010 +1000

    AltosSiteMap: thread safe tile addition

commit c040bcd06679484175542208fb564d0271a7fc1b
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 13:19:36 2010 +1000

    AltosSiteMap: try to get new tile construction right

commit c3994dd82d489289ebc99ff9c5fa88f560c023ac
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 13:07:11 2010 +1000

    AltosSiteMap: extend map if rocket goes far away

commit 835b903727a2eabda8d9659cc46e53301f92897c
Merge: 440a0f3 8789135
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 11:15:02 2010 +1000

    Merge branch 'sitemap' into buttonbox
    
    Conflicts:
    	ao-tools/altosui/AltosSiteMap.java

commit 878913551a1e4e3c8f2b39fa4aeb234880735a1c
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 10:55:22 2010 +1000

    AltosSiteMap: explain tile size better

commit 440a0f3f5130eb0c8e614691892be8c94e7fd3c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 16:55:12 2010 -0800

    altosui: Set site map flight path lines to 6 pixels anti-aliased.
    
    Much more visible over the map.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2a7dc3ba36bac81640a9498e0d0caf1470b57c19
Merge: e5b1ada ece2c86
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 10:45:15 2010 +1000

    Merge branch 'buttonbox' into sitemap
    
    Conflicts:
    	ao-tools/altosui/AltosFlightUI.java

commit 8df185cd95cfecbed8272dd1275d077c5b45535b
Merge: ece2c86 1e71264
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 16:35:48 2010 -0800

    Merge remote branch 'aj/sitemap' into buttonbox
    
    Conflicts:
    	ao-tools/altosui/AltosFlightUI.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e5b1adae9b23b98a6321986f5cd67c9d3166b87f
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 10:34:39 2010 +1000

    AltosSiteMap: better gps check, lower zoom

commit ece2c86e2641b2cd613791293526c492b1606aa1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 16:19:42 2010 -0800

    altosui: Rewrite info table to mix with scroll pane well. Fix startup size
    
    Using a single table for the info table means that the scroll pane
    automatically picks up the table headers and shows them above the
    scrollable view.
    
    This patch also fixes the application size at startup so that no
    scrollbar is required in the info table, and the window is < 800x600.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e712647dd6df1e77650db705f3ac32a3c8f6907
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 08:58:44 2010 +1000

    altosui: reindent

commit a59a204e188e40ec8848a0dc63d6de710cee3039
Merge: 8263630 37f0201
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 08:56:13 2010 +1000

    Merge branch 'buttonbox' into sitemap

commit 82636305021c41d676f5f0f11378724fe0de0079
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 08:44:13 2010 +1000

    AltosSiteMap: be more polite about preferred size

commit 37f0201d724693528f37ac7d275f68f90cf94da0
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 14:31:23 2010 -0800

    altosui: change descent tab formatting to four columns
    
    This places labels to the left of each field. For igniter voltages,
    it uses three columns for the labels.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 66ebd954d9c9a44a8db0ee713c682e39306fabd8
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 08:28:24 2010 +1000

    Add GrabNDrag.java

commit 72f5e05f9f0055f2cef8b840812f090556c94338
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 08:18:39 2010 +1000

    AltosSiteMap: major refactoring

commit b47517d4c2e49f6f7b9954d2c85f96397fe1103e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 14:06:37 2010 -0800

    altosui: re-indent

commit 6f8bc2ad20b715343e0510563ab0f14787ef3e07
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 01:34:52 2010 +1000

    AltosDescent: switch elev from height to range

commit 89f44c5587ea4f927d5e398b6af919df0d6561c3
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 01:27:01 2010 +1000

    AltosAscent/Descent: tidy up layout

commit 51e403145d28ac913e36d205077a613845596be2
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 00:17:51 2010 +1000

    AltosSiteMapTile: draw boost circle as well as landed

commit 25ffe1cc7823895886b4777f310b4bda1c80133b
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 21 00:07:16 2010 +1000

    AltosSiteMap: automatic fetching of map data

commit 20f714bbe3137de8fb7491b39985021fd1774930
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Nov 20 22:49:51 2010 +1000

    AltosSiteMapTile: seperate map and drawing layers

commit 58f8d069ce9488e2987b8e92caa69fe68cda7569
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Nov 20 21:06:37 2010 +1000

    AltosSiteMap: add autoscroll and grabndrag scroll

commit 74cab8503b51ba6fb05a4d12a031c749e870b0ef
Merge: 0ecf033 9a99cab
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Nov 20 18:20:45 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 0ecf033110084f1a8be98282d7029dc14f70dab5
Merge: 081fbd5 71c41ea
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Nov 20 18:14:30 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit 9a99cabc1c34c657fc95246192ba6d330f5f22d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 00:13:58 2010 -0800

    altosui: Fix channel changing in flight UI to actually work
    
    Replacing the menu with a combo box required reworking the way events
    are delivered from that widget back to the channel changing
    function. Just delete the old magic and use the JComboBox action
    listener directly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71c41eadd12c3ece5fffce7669e4991778046d4e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 20 00:09:03 2010 -0800

    altosui: Initialize display thread state in constructor instead of run
    
    Some state will get set before run is called, initializing it there
    can be too late.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 081fbd5715f9d3d81d98e149fb95d40447c07a79
Merge: 90b9bc4 7920ed5
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Nov 20 17:40:49 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
    
    Conflicts:
    	ao-tools/altosui/AltosFlightUI.java

commit 7920ed5c34b088f45ce4213b061ddd1ffe22cee8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 23:18:51 2010 -0800

    altosui: calling thread.interrupt with null thread doesn't work well
    
    This was a left-over from debugging the previous patch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c8dc3794c7b5fa5a5b43b1c461d6c8bb3ab425d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 23:09:15 2010 -0800

    altosui: When switching log files, don't terminate log thread
    
    The log thread automatically switches output files when the incoming
    telemetry changes. Don't use 'close' for that as 'close' terminates
    the log thread as well as closing the file. Create a new
    'close_log_file' function which just closes the file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 594e80572821f1848db062d0cff18ca8bf0d90ce
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 22:44:48 2010 -0800

    altosui: switch channel selector to combo box. Shorten displayed device names
    
    A combo box displays the current value, which is quite nice to
    have. Add a 'toShortString' for AltosDevice so that the window frames
    and error messages don't have extra spaces generated by the
    altos_device toString method.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa07afc73bc5eccff8464a2def05ad600da33c97
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 19 23:33:42 2010 -0700

    update turnon scripts to use stashed copies of stable release firmware

commit 9ffc2eb53a47e435f39b02896b0e43ae5f47f450
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 18:25:48 2010 -0800

    altosui: Use timeouts to recover from broken packet links.
    
    This puts timeouts every place the system reads from the packet link
    and aborts the in-progress operation if it takes more than a second to
    get a response.
    
    Also mixed in here are persistent igniter status displays for the
    ejection testing UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68078eab3c07d8dc83302747cf6f3dcb1797c6ce
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 20:44:29 2010 +0800

    doc: Document the 'Flash Image' operation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b4bdda65488e8ef27d2889cb6cc8eda3c5d50e0a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 20:29:14 2010 +0800

    doc: git ignore generated doc files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0542085de2139ef562af068ec05fa73f47c73b1
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 20:26:49 2010 +0800

    doc: Add preliminary altosui documentation
    
    Also, update the Makefile to allow for further documents to be added
    without a lot of custom rules.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e7a10f71803d60f8b34c5a91efd220449442769
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 17:16:03 2010 +0800

    altosui: Clean up global AltosUI configuration settings dialog
    
    This dialog had a mish-mash of styles and was confusing.
    Now it's got a label for each line, and suitable setters for
    each element
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f72f08839346fb225238420324f0edcd070e531
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 17:14:17 2010 +0800

    altosui: Unify datafile selection to AltosDataChooser
    
    Instead of having several separate intefaces, use a single dialog for
    selecting data files for graph/export/replay.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24ffcf86c43290ce0f70fb4ee0984b3debdb8a5f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 19 15:41:30 2010 +0800

    altosui: Add igniter ground testing code
    
    Not yet hooked up, but the UI is finished.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 90b9bc4475011bead7117ed72fa5efa0f77b2813
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 19 13:30:00 2010 +1000

    AltosSiteMapTile: adjust scale to 1 nmi per tile

commit fa45336062523838ba8abb08427cdc4d9c7de7a8
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 19 13:17:29 2010 +1000

    AltosSiteMapTile: adjust centering calculation

commit fda93afcd8aa4133b0e5f008b824d072e338d0ed
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 19 13:02:05 2010 +1000

    AltosSiteMapTile: autoscale to about 2 nmi per tile

commit 483346a03c94b200692f5e6d59f3feee4dcf2ace
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 19 12:09:46 2010 +1000

    altosui: tile site maps

commit 939be6793238a275b7682ecc376fed14379cf044
Merge: e68fe94 1a4b6e9
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 18 05:54:06 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox
    
    Conflicts:
    	ao-tools/altosui/AltosFlightUI.java

commit 1a4b6e96f823035b113f01d1bdfd61afc1f33e25
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 16 22:46:29 2010 +0800

    altosui: Add igniter status to ascent and descent tabs
    
    Monitor igniters during all phases of the flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0eb41619544ead6d9dab3a8d024a12936c9cdd0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 16 22:20:00 2010 +0800

    altosui: Cleanup flight UI layout
    
    Use common constants for fonts and insets
    Shrink fonts so that the window is < 600 pixels tall.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcca333cda64be35f0c9fb0109eef1be3709dddd
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 16 21:49:59 2010 +0800

    altosui: Add callsign configuration in AltosUI configuration dialog
    
    This callsign is used during packet communication.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d1dbe3b69e6f95ef8ecd4cf959863b922ab47c66
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 15 11:08:00 2010 -0700

    add a paragraph about forcing TM back to idle mode if an accel cal goes badly

commit 39e371561469d8e5059638ffa4e7075f391de268
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 15 23:14:51 2010 +0800

    altosui: add reboot button to telemetrum configuration UI
    
    This lets you reconfigure and reboot telemetrum, including over the
    radio link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 257e97137325f5dbbd6aa034f20fd6937b67df90
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 15 22:38:35 2010 +0800

    altosui: eliminate menu bar, moving elements to buttons.
    
    This adds a new 'configure AltosUI' dialog to set the log directory
    and voice preferences.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 524644d8d8ce3f8a5a914ecfc7e2a8d474d89095
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 15 22:04:44 2010 +0800

    altosui: oops, missed a file in the previous commit
    
    AltosSerialInUseException.java just defines a new exception, thanks to
    java for making this live in a separate file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 511903704f7e1b22e88dd3e3cc35fd3c0583820e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 14 03:26:57 2010 -0800

    altosui: With --replay option, exit when replay window is closed
    
    Otherwise, the application hangs around forever.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 11c95f687b1f68d35fa1a0af2c4e7982b8bb226a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 13 17:09:51 2010 -0800

    altosui: Replace flight status table with labels, fix resize.
    
    There's no reason to use a table for the flight status data,
    replace that with a selection of widgets instead.
    
    Also, set all of the grid bag constraints for the various flight
    status displays so that resize does something sensible.
    
    Adds a scrollbar to the table display so that it can shrink.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dcfa56498d1b65a213b8aba9cbd6c4806532383c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 13 16:07:04 2010 -0800

    altosui: Open serial device at 'new' time. Prohibit duplicate opens.
    
    With the per-serial UI, there's never a reason to create a serial
    device without opening it right away. This eliminates the bug caused
    by not opening the serial device for telemetry reception.
    
    Serial devices can now be opened only once; this eliminates errors
    when trying to reflash or configure devices while receiving telemetry.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8463ffcaca6bcd31e645aba71c171f548dce96d8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 13 15:19:14 2010 -0800

    altosui: Eliminate unncessary import altosui lines
    
    Java appears to automatically import every module from the current
    package.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 566c6486c8815ae241e0b116a93b1a0ff4783831
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Nov 13 12:19:12 2010 -0700

    continuing to work on the docs

commit e68fe9454352087889c560d95797922493117acb
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 14 00:59:01 2010 +1000

    AltosSiteMap: add targeting circles around landing site

commit 1e7e02987276847274493312202d22222c953149
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 14 00:57:45 2010 +1000

    AltosTelemetryReader: actually open serial port

commit 9c32b93ef5fb43558fb0179ea1b047e35b7ed6e8
Merge: 991541f a6f30fa
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Nov 14 00:29:11 2010 +1000

    Merge branch 'buttonbox' of git://git.gag.com/fw/altos into buttonbox

commit a6f30fae906bd87dff192c5fd4d10df283f99930
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 12 17:02:22 2010 -0800

    altosui: Add RF calibration to TeleMetrum config dialog
    
    I think that's the last user-settable value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1bdc6166f3bc5ce3f8e55acb1484923781412e21
Merge: f111871 5c6a533
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 12 17:32:43 2010 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit f1118717780a81f9257d2eed7828b66538deb8a8
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 12 17:32:21 2010 -0700

    fold in content from Keith's email on the re-flashing subject

commit 7def9dd0d0a4ce9cf7c65de573100e664f278717
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 12 10:58:54 2010 -0700

    first cut at instructions on how to re-flash TM and TD devices based on email
    reply to a user who asked

commit 991541f57f065f429c6ec425efd6ac731280b2c1
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 12 23:42:42 2010 +1000

    better error behaviour if no map

commit 1bcfa22de7821984149db10cb79913efed36b41e
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 12 23:29:40 2010 +1000

    pull up maps for arbitrary locations

commit beb6c881ec006241c7d2820c64e5381131d41180
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 12 03:24:26 2010 +1000

    make infotable scrollable, revert its fontsize to 14

commit 0327c1da01a3f6ede01f05c1d775651a57fd0c68
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 12 02:08:58 2010 +1000

    tabs -> spaces

commit 81e7b43ecad666e2e2310c7c94184f888bc86585
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Nov 12 02:07:41 2010 +1000

    add site map tab, at least for QRS launches

commit 5394548fa5c7bdbfcc01e8aa19e93e1cf6345e2a
Merge: 891e629 75f7698
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 10 22:11:21 2010 -0800

    Merge remote branch 'aj/buttonbox' into buttonbox

commit 75f7698b99a661ed17a91748a99699fa6761772a
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 16:06:32 2010 +1000

    add compass bearing during descent

commit cc0a730de093c49be2a921101d27622b6f592e92
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:57:52 2010 +1000

    add compass bearing to voice output

commit 317ec72a34906faad88c6924e634617b074e71db
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:52:01 2010 +1000

    use grayled.png for off

commit 8503943e3613f8670b128012b12ff14fb54321d7
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:45:43 2010 +1000

    reduce font size for FlightInfoTable

commit 3ffaa5d1c00b28be20fd4a26deb7bd41d953e92a
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:43:05 2010 +1000

    read preferences for --replay

commit 1f3e091efdfb2fe6f06a066cac60f5d267b94856
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:40:37 2010 +1000

    add --replay command line argument

commit b16b873723ee3e5097e6725c59ce191119439ad7
Author: Anthony Towns <aj@erisian.com.au>
Date:   Thu Nov 11 15:38:27 2010 +1000

    use value_font for values

commit 891e629f6ba20654b614f3ca7211a0f1c92670cb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 10 16:28:19 2010 -0800

    altos: Use grey leds when unlit - easier to see

commit 5c6a5335a057be0219450b4b9889c647d8d4a012
Author: Bob Finch <w9ya@qrparci.net>
Date:   Mon Nov 1 14:36:41 2010 -0600

    Updated PKGBUILD-git.altos
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0d31910da592e2f67c47c8fc3e15ce8135d5094
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 9 23:34:32 2010 -0800

    altosui: Add ascent, descent and landed tabs
    
    This completes the set of tabs for in-flight status information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22d00785188a880700cd372528189a7a15278da9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 9 14:40:58 2010 -0800

    altosui: Add tab UI with 'pad' mode.
    
    This creates a multi-tab interface for flight monitoring
    and includes a special tab for 'pad' mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb77e806ded99532dc7eaa39c1893f075b028af6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 9 10:21:34 2010 -0800

    altosui: Create abstract interface for flight data display
    
    This allows the implementation of the flight data display to occur in
    the flight UI instead of the display thread.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0a92c605e238277c9881545a7226e53b5dbc295
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 8 22:17:26 2010 -0800

    altosui: Fix more calls to AltosPreferences.channel()
    
    Oops. Two more.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 94f4a50d6430cc8280cbdaa9f39d3cb858d0e077
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 8 22:10:46 2010 -0800

    altosui: Fix channel setting at serial open time
    
    Was using the previous non-device-specific preferences API.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6b17d276271faa8a420a1c8f6be17faaa0c7043c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 8 22:07:04 2010 -0800

    altosui: Create buttons for main actions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16916be51d746b1e1057b3219e5bec8f8814259e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 5 23:44:47 2010 -0700

    altosui: Split out flight monitoring to separate window
    
    This creates a per-TD (or replay) window to contain the flight
    monitoring information, allowing multiple monitors.
    
    This also adds per-TD preferences for monitoring channel.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ca931b1c484bd6b64617370e81b16e169fdae1c2
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 17:47:44 2010 -0600

    update changelogs for Debian build

commit 811ced628d586134224c1b501b40ce9eb435fc7c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 6 16:42:27 2010 -0700

    altosui: Separate out jfreechart and jcommon directories
    
    This allows these packages to be referenced separately
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c2c4d515ef9cc2cae8a8f2803e9498bb0794c4ed
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 6 16:25:49 2010 -0700

    altosui: Remove ability to graph data in .csv files
    
    There's no reason to support these files when the raw .eeprom or
    .telem files which generate them should be used instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d5caf6f2f4d9257e26aa4305b26c02d1b263fa24
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 17:14:35 2010 -0600

    remove the csv build dep, as that code will be abandoned

commit 43e23a60780191e3c6f61df44c5dd08cc8604c51
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:27:57 2010 -0600

    update changelogs for Debian build

commit 8103432bf7adfe6ee5bf3ee42e1672475e6edd5a
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:26:33 2010 -0600

    update changelogs for Debian build

commit 635066cd35fb24cacf8400a477ea4b4e3dd2c39c
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:26:19 2010 -0600

    update changelogs for Debian build

commit 4396aaaf34cda3751dcca0eceb05b4ffeb411cde
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:25:22 2010 -0600

    add build-dep on libcsv-java

commit 7475ab5804bf3fb12b1b755e850af90d5a15d3eb
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:19:35 2010 -0600

    update changelogs for Debian build

commit d8a2f4ceb1c70a6be976a78e2264c961de2f2277
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Oct 6 16:18:45 2010 -0600

    add build dep on jfreechart lib

commit f0d1468ceae065f0cdae6f6ae3323dec5636f073
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Sep 28 17:56:49 2010 -0700

    altosui: Add KML file export.
    
    Command line has switches now, --kml and --csv
    Export save dialog has combo box to select kml or csv result.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a119fd92532d53e552efe1f7c61e87181fcace0
Merge: 28da340 82744c3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 27 22:28:07 2010 -0700

    Merge remote branch 'aj/master'

commit 82744c3497d37650b88dee80be7956c4bd1cffb2
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Sep 28 15:27:07 2010 +1000

    Add callsign/serial/flight to graph title

commit 28da3406426437604125d332e4cda90d459df487
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 27 22:26:56 2010 -0700

    altosui: use Altos constants in graphing code
    
    The Altos class nicely defines constants for all of the flight states.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce7f59fbfb5a94a67a4ceced3cc371b4c6b6e5d1
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Sep 28 14:45:01 2010 +1000

    Hax0r graphing to support telem/eeprom files

commit e2b9f47a205348d38756c70e928a2a9183de6884
Merge: 7ef3ad0 8032031
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Sep 28 12:55:47 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 803203197e51e71e9c77b3610047fd5bf9a56c56
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 27 18:52:30 2010 -0700

    altosui: Deal with eeprom dates going backwards across wrap
    
    eeprom timestamps can go backwards as the GPS time stamps are
    recorded when the first GPS character is received, but not placed into
    the eeprom log until the last GPS packet is complete. If this happens
    at the same time the tick count is wrapping, then the tick count will
    wrap backwards across the 0 boundary causing time to jump forwards.
    
    Fix this by letting time go backwards across the tick boundary, which
    requires that we know when the first 'real' tick is read from the
    eeprom file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fe7eba2e4af36cf29d8dc2378ac6985be04f68c6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 27 18:51:05 2010 -0700

    altosui: .CSV output: add link quality, gps hdop and sat C/N0 numbers
    
    This makes the CSV files contain all of the available information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c89a34d1eb25155405b0036baeadc7bbfeade1c2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 27 17:11:48 2010 -0700

    altosui: Create iterables for log file scanning. Split out display threads
    
    Convert from log file reading paradigm to using iterators which is
    more idiomatic for java. Split more code out of AltosUI.java,
    including the display update threads for telemetry monitoring and
    logfile replay.x
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7ef3ad0c9354c0484c25badc69334b59c7f355e2
Merge: eb74866 e66919a
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Sep 24 10:28:06 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit e66919aa46193bd8c7a1e86fb32a3367dae121f5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 23 16:52:51 2010 -0700

    altosui: Require 4 sats for 'good' GPS data
    
    Wait for 10 consecutive GPS reports with at least 4 sats before
    reporting "GPS ready" state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 34ca8c00f4be72c314baff4c96f1e2f010948454
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Sep 20 06:30:49 2010 -0700

    altosui: remove unused ReplayThread wrapper classes
    
    These aren't used now that the replay opener dialog knows how to build
    a reader from a filename.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd010661ced6075f82a961625826665a3d8d1efe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 14:00:04 2010 -0700

    altosui: Factor some UI elements into separate classes
    
    Clean up AltosUI by moving the two main tables to separate class files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb74866e919e8c661153847871f5a79e66d37296
Merge: af404b4 1260589
Author: Anthony Towns <aj@erisian.com.au>
Date:   Mon Sep 20 22:05:26 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 1260589976c1a95848b298497fd251c4ee7d3f93
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 02:52:29 2010 -0700

    altosui: Write raw sensor data to .csv files
    
    For data export, provide the raw sensor samples instead of the
    filtered values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a4d7110debb88f4e906fee7c46f2badd561809d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 19 02:50:43 2010 -0700

    altosui: Use recorded ground acceleration when reading eeprom files
    
    The flight software records 1000 accelerometer samples and records
    that in the flight log. Use that value instead of using the very few
    samples recorded in the eeprom before boost is detected. This
    generates far more accurate accerometer data in the .csv files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit af404b428bd742039afc25ff3850f76bc92c7c29
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Sep 15 07:24:04 2010 +1000

    Add JFreeChart to Makefile.am

commit 61590b8729831cb138b2ba6b88802c208d114753
Author: Anthony Towns <aj@erisian.com.au>
Date:   Wed Sep 15 06:51:05 2010 +1000

    Add graphing.

commit 3d64f5a6511529ca53699190f4d54de1ba62a9bd
Merge: ec6da08 b9623f8
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sat Sep 11 15:15:14 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit b9623f8ef26491e9fa14e2478295fe6f5cbbd87f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 10 21:07:14 2010 -0700

    altosui: Remember directory containing firmware files
    
    Instead of forcing the user to navigate to the firmware directory each
    time, this remembers the previous directory and starts there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f2204e0832b14b1edca4266a2cbc272141ecc2b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 10 20:55:05 2010 -0700

    altosui: set default .csv file name in file save dialog
    
    This uses setSelectedFile to specify which output filename to make the
    default in the save dialog.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e053ae1f2d09347123ac9fa79e46645378b4c70
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Sep 10 10:42:35 2010 -0600

    make the column headers comma separated, too, so they align with the data

commit ec6da0824474e46de842845d7b53fe1a1dde33ed
Merge: 7c2e411 1031067
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Sep 10 16:11:34 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 10310672a83a66dc630718b151d653fc066f8e59
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Sep 10 00:09:25 2010 -0600

    update changelogs for Debian build

commit 9d0e89e8ad8926dc8371fa809835a580ae49711d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 23:04:59 2010 -0700

    altosui: Stop parsing eeprom file after hitting 'landed' state
    
    Sometimes there are additional records found in the eeprom file; the
    reader is mostly worried about not losing anything, so it reads as
    much as it can. However, the last record written for any flight is the
    'landed' record, so we can stop looking at the file after hitting that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 67b6952f7126704478ede5575e5e938d18fcc329
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 23:04:14 2010 -0700

    altosui: Fill in time value of last Eeprom record read from file
    
    The last record is handled separately, and was missing the code to
    compute the time. Sigh.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b0b584cd0ca7542e65aac0c7897ad7ab4115122
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 22:55:47 2010 -0700

    altosui: Remove debug printfs from AltosTelemetryReader
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a80bfae15f1499c49f7ef47978bf0337d8120892
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 23:57:34 2010 -0600

    rewind packaging changelog, again

commit 78ce3120e5a53858ca0d43c734aa5d28b4948ce3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 23:52:20 2010 -0600

    update changelogs for Debian build

commit 71c85613a28c24c3aad7b4aa3299d8677ef1268e
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 23:51:23 2010 -0600

    rewind packaging changelog

commit 7c2e4114a3a43f919a7a6c967d3f16e5d630f90f
Merge: ddc83b4 af200f5
Author: Anthony Towns <aj@erisian.com.au>
Date:   Fri Sep 10 15:50:01 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit af200f5b84555de0556b52146379f3934774a3f3
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 22:30:48 2010 -0700

    altosui: Fix telemetry file reader to handle tick count wrapping
    
    The telemetry reader was ignoring tick count wrapping, so you'd see
    time go backwards in jumps. Not useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 96ca7051f60ea299e3e05bafbe5717fc83c3afd2
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 22:50:03 2010 -0600

    update changelogs for Debian build

commit 2d5e48c5dc0e822fdf430f43804c1e5e79fdbf84
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 21:28:10 2010 -0700

    Add --with-fat-dir configure option to publish finished stand-alone bits
    
    --with-fat-dir specifies a directory to copy the finished
    linux/macosx/windows stand-alone ("fat") packages to. A sub-directory
    will be created under the specified directory based on the product
    version number and the files copied there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd2b77b2a516a055f29191dcdfeb727e637aae86
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 20:59:29 2010 -0700

    altosui: libaltos.so is built with libtool -- it's in ../libaltos/.libs
    
    It used to be in ../libaltos
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72a5c1258db92d0ddd660bfa875e8e55cab47af7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 20:39:41 2010 -0700

    altosui: Remove some debug printfs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 031fd9a954f2e3447d0150eb4ecc81af7b620dca
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 20:36:12 2010 -0700

    Add firmware and libaltos to 'fat' target at top-level
    
    This ensures that all of the necessary bits are available to construct
    the distribution images.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fcaa480b1dfeb2fd4044f9c4e1b6d50c46fc9984
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 21:29:20 2010 -0600

    update changelogs for Debian build

commit 48f57997452e17564e28fe3e37403f6f63d32dea
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 20:24:42 2010 -0700

    altosui: conflating USB product and vendor IDs is a bad idea
    
    We've now got a USB vendor ID called 'altusmetrum' for generic
    altusmetrum devices (old USB ID 0x000A) while the general vendor name
    for all devices is 'altusmetrum' as well.
    
    This patch splits vendors and products into separate name spaces,
    products are prefixed with product_ and vendor with (oddly) vendor_.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 632d276118ab04de67561104be650f8fb69a0450
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 20:34:43 2010 -0600

    update changelogs for Debian build

commit 1ac3d7e3ba52d1b0dc834eaa5d7886c730eaf307
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 20:34:22 2010 -0600

    initial cut at an altosui man page

commit 5c4e437975054d33604402591e1ea2f314932593
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 20:06:09 2010 -0600

    update changelogs for Debian build

commit 0ea75761416bff299233991e961ba25b6c7dcf89
Merge: 35d70c9 8ee3464
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 20:05:27 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 8ee3464d8064ebe1694c7b20177878c0d9961451
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 17:54:41 2010 -0700

    altosui: Display error dialog when AltOS JNI library can't be loaded
    
    Having an error dialog appear at application startup seems better than
    simply failing to present the device dialog later on.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4224a7526e51eb8fbf1f0a31bae7ee68c6385095
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 17:52:46 2010 -0700

    altosui: Store libaltos.so in $(libdir)/altos
    
    It's not a public library, so hide it away in a subdirectory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e4c18777d982061f5e507a4d4f4f1cd4d685268
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 17:49:37 2010 -0700

    altosui: Need to have JVM include path substituted into libaltos Makefile
    
    The libaltos Makefile needs to find the relevant jni.h file, which is
    found in the JVM_INCLUDE path, all nicely located by the configure.ac script.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35d70c92307dd478bc619b2f6c5a88e155cdad28
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 17:27:07 2010 -0600

    handle versioning of ihx files (poorly) by just wildcarding the file name,
    which assumes there's only one matching .. probably ok on Debian?

commit c286ada6457579d64e9d8ca44b927258b4a561da
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 16:27:40 2010 -0600

    update changelogs for Debian build

commit 6c0ae7e966a81ece35bccbe89d626a58afe899a2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 15:25:18 2010 -0700

    altosui: remove FATJAR from all-local to avoid building fat .jar file
    
    the fat .jar file is used in non-native builds to run from a directory
    containing all of the freetts jar files along with the altosui jar
    file. We don't want this on a real install where freetts is installed separately.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 737a64c57a8f979f51c3fa6b3f214520c736cf8a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 15:22:14 2010 -0700

    altosui: hack to make JAVAROOT directory get created before javac runs
    
    This ensures that the JAVAROOT directory gets created by adding it to
    the variable used to set the CLASSPATH environment value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b456bd9d7bcd9d968e43c38eeb6fa6ad8c58f895
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 15:11:41 2010 -0700

    altosui: fix telemetrum.inf FFFE:000A product names on AMD64 and ia64
    
    This appears to matter to Vista. Dunno why.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16980b848651a6b20a0b458446f0a19fb517539d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 9 15:10:25 2010 -0700

    altosui: Add explicit requirement to create classes directory
    
    The implicit ordering doesn't appear reliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15da683c2f747baef49c8b8d321a86faede0de30
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 15:51:50 2010 -0600

    update changelogs for Debian build

commit 012e7176954a6b74b3b667317be0f6dc41d7ab70
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 15:51:02 2010 -0600

    add libtool to build deps

commit 3e5824b9a71971ce99bfe38a1e860b421e265f02
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 9 15:43:47 2010 -0600

    update changelogs for Debian build

commit ddc83b4c401be965a9947782becf20cc8c54e6a2
Merge: afea6c2 3d49d5f
Author: Anthony Towns <aj@erisian.com.au>
Date:   Sun Sep 5 20:49:34 2010 +1000

    Merge branch 'master' of git://git.gag.com/fw/altos

commit 3d49d5f69b41c27003dbc5ccf1899014bd13bd99
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 02:05:06 2010 -0700

    altosui: ensure that 'altosui' script is installed. Pass arguments along.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b61fec225ada6a9e252e4c7920101ee18c77cbdc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:55:56 2010 -0700

    altosui: eeprom files place 'boost' time in the flight number record.
    
    Instead of looking for the first state change record, use the Flight
    record to get the boost tick.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c653a4cba5fef8d49261cf1c024f3e86e9058c6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:52:36 2010 -0700

    altosui: Record flight number when scanning file, not when running
    
    The very first record in the eeprom is the flight number, but it is
    time-stamped with the 'boost' time, and so it gets sorted until much
    later, delaying the return of data until the rocket enters boost
    mode. This drops all of the nice pad GPS and state date on the floor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38e1d87c8d449866faac026577fefa9a118428cb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:23:53 2010 -0700

    altosui: Use local .class files in the classpath
    
    This ensures that compiling only a few changed files will
    locate the old .class files instead of using a stale .jar file.

commit 9941b05a1d03dafd6cd899b5fe999ed769efb1d6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:21:14 2010 -0700

    altosui: Prevent voice altitude data from queueing up
    
    When flight status changes rapidly, the queue of voice data can get
    quite long. This change does two things -- first, it remembers when
    the altitude reporting happens due to flight events and delays the
    periodic reporting until a suitable time after that, second it ensures
    that the voice data has all been delivered before generating a new
    altitude report.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4dec5c36702d76dc95beada7c1d3222a638a2cbb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:19:11 2010 -0700

    altosui: Add AltosVoice.drain() to wait for queued speech to finish
    
    drain() blocks until all pending phrases have been processed, allowing
    the UI code to avoid pending data that will end up stale by the time
    it is emitted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 410ba89eef9c9817eef81b702966cb88820ff7c4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:13:01 2010 -0700

    altosui: Start idle thread after the rocket leaves the pad
    
    This makes the first altitude report time consistently 10 seconds
    after launch, instead of some random time depending on when the rocket
    launched relative to the time the device connection was made.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6205547ec7191aab0259a8449520e966a96129e6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:08:50 2010 -0700

    altosui: When replay thread is interrupted, don't make final report
    
    Normally, the replay process makes one final report after the file has
    been parsed. However, if the reading process is interrupted to display
    something else, this report is just annoying, so don't make it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3d99584fcfe43b22e8581874e0ac77ce3d635d48
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:03:18 2010 -0700

    altosui: Add elevation and range data to main display
    
    Reported by voice, it's useful to see these on the display as well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d58f319a7c1a6a8ccc6a539722009996ba886ab
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 01:01:10 2010 -0700

    altosui: Eeprom files contain only one date; save it.
    
    While reading eeprom files, the GPS record is reconstructed each time
    the system sees the first GPS log item (the time field), but as the
    date isn't repeated, we need to copy it from the old GPS data record.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b2aa689bf3d61e4a3ebe7c828162d1be20aad0f6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 00:59:54 2010 -0700

    altosui: Remove debugging printf from AltosEepromReader
    
    These were in place while validing the GPS data reconstruction code
    that handles eeprom files missing the first GPS date line due to the
    record overwriting bug in old firmware versions.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb0e7a59f0806734a4c959a3ce7c57f71cbe3986
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 5 00:57:38 2010 -0700

    altosui: Return AO_LOG_INVALID instead of exception for eeprom files
    
    When an eeprom file contains an invalid line, just return
    AO_LOG_INVALID instead of throwing an exception. This allows us to
    replay and parse files with extraneous serial communication.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c3a17c71a45207dd715d537704f161de9219f0d7
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 18:49:22 2010 -0700

    altosui: Fix linux fat distribution
    
    Again, use 'cp -p' instead of 'cp -a' to get files into the archive
    instead of links. Also, make the shell script 'altosui' instead of
    'altosui-fat'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 828e9e4c68e3ac90b6ba2e9fd5f131a9975f7e4a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 18:39:58 2010 -0700

    altosui: Fix up Mac OSX .zip file
    
    Must contain 'altosui.jar' instead of altosui-fat.jar.
    Also, was using 'cp -a' instead of 'cp -p' which made files
    represented by symlinks not end up in the archive.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 044fd27449c70474f51b99dec25fd23d3c03a559
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 18:20:45 2010 -0700

    altosui: Fix windows installer to ship correct files
    
    Was shipping altosui.jar instead of altosui-fat.jar
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 148b927c3b8bc7b7b5c5356392032faf2b1203d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 18:04:04 2010 -0700

    Add top-level 'fat' target to aid building distribution files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aed59e1c057c13e28fd368dc2592aa4628211097
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 17:59:11 2010 -0700

    Add version numbers to released files. Set version to 0.7.1
    
    Instead of using git revision counts for version numbers, use explicit
    versions numbers configured in the configure.ac file. Expose published
    files with version numbers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2808bba3efa1cff133cc060dabff06fab8b75388
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 17:58:52 2010 -0700

    Ignore libtool files.

commit bc183400ab93d5902c52851319999cc77f27bc81
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 17:35:17 2010 -0700

    altos: add some SDCDB config files

commit 887b11f6b9c81b9f15348d54017e700ca7dc5e55
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 17:27:17 2010 -0700

    Use autotools for altosui and libaltos
    
    This switches from hand-written Makefiles to automake with libtool
    for these parts of the system.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e844e8a0695e27af6f8e3e37a5e3bcc865b862e3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 01:13:42 2010 -0700

    altosui: Add icons to application and Windows menus.
    
    Use the altus-metrum icon for an application icon and a windows start
    menu/desktop icon.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9ea28504c646fc25791aab09b9e5faf73e0ac0c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 01:08:34 2010 -0700

    icon: add some icons for application programs
    
    altus-metrum.ico: Windows ICO file
    altus-metrum-16x16.jpg: 16x16 jpg image for java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f550677df016070430ed38bfa2b2be33f1b8c40a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 00:16:41 2010 -0700

    altosui: oops. renamed the nsis file to altos-windows.nsi
    
    And forgot to change the dependency in the Makefile
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c0988ddbf104ea729090c2e7e2a28cc6dc9e90f6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 00:14:15 2010 -0700

    altosui: ignore built files

commit ecb4a09535b6a8da0765010489a96e605dbdeb46
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 4 00:13:11 2010 -0700

    altosui: Add windows installer build using 'nsis'
    
    nsis happens to be packaged in debian, and it appears to build usable
    installers, which is all very cool.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf22923cd8b4f6f954718358b411b5b10d8e7b4d
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Sep 4 00:46:29 2010 -0400

    update changelogs for Debian build

commit 59798c6fd11502a9c8b66090c23ba50eb250692e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 12:43:45 2010 -0700

    altosui: Catch I/O errors on telemetry device, report to user
    
    This catches the USB device being unplugged and makes sure the
    user sees an error dialog in this case.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 16d8d6a8853d09f683b13f9cda3c3174a0aab130
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 12:31:05 2010 -0700

    altosui: Must flush serial line after configuring for telemetry
    
    Without flushing the configuration commands to the serial device, it
    never sees them as the telemetry input thread doesn't flush.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4f64e95e31e2335470efc15df2ab357b7d197f3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 11:48:55 2010 -0700

    Revert "altosui: Deal with altos bug setting radio channel while monitoring"
    
    This reverts commit ba65e4aeb952a1cf49a77f1e24e235508fcea71f.
    
    Testing the old code

commit 71191ecef3ba0e00d0f8a7cd1a24982bfa44ec72
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 01:30:33 2010 -0700

    altosui: Allow 'connect to device' when already connected
    
    Opening another serial device involves shutting down the display
    thread (to reset its state) and spawning another one. Shutting down
    the display thread normally closes the serial device as a part of the
    process, and if this isn't done before the new serial device is
    opened, then the new serial device ends up getting closed too.
    
    Interrupting the display thread and waiting for it to stop before
    opening the new serial device solves the problem.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba65e4aeb952a1cf49a77f1e24e235508fcea71f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 01:21:57 2010 -0700

    altosui: Deal with altos bug setting radio channel while monitoring
    
    If the monitoring thread is active, then setting the radio channel can
    sometimes cause the monitoring thread to get stuck. I'm not entirely
    sure why though. For now, work around the issue by making sure
    monitoring is off, and the monitoring thread has stopped, before
    changing the radio channel.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e5ef42c2b22c6639d90631dbbb588f9fd2494385
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 3 01:12:24 2010 -0700

    altosui: Report telemetry CRC errors in UI
    
    Telemetry CRC errors can signal problems with TeleMetrum or TeleDongle
    units, so report them in the UI.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3b3aa448f3a0f44137f7530b04b58967ba5f22f5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 2 21:11:29 2010 -0700

    altosui: build Mac OS .zip file to include paths
    
    Without the paths, the OS X zip file doesn't create a usable
    application structure.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cff0d1ef6b338b3d5ad9450d4d5f95df934cb5e4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 22:56:34 2010 -0700

    altosui: Post error dialog on invalid ROM config values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8d8980f56a4f2c7d6f2ce667130706e0f04f8ded
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 22:56:12 2010 -0700

    altosui: Remove some debug printfs from AltosRomconfig class
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5ee6cd41ed189c3166f76558ecada80917f40652
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 22:47:15 2010 -0700

    altosui: Hide internal rom config UI helper function
    
    This was getting mis-used by the flash UI causing the rom dialog
    'cancel' button to work just like 'ok'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9a690c9795e8257d2a3225f905117681668a472f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 22:46:04 2010 -0700

    altosui: allow flashing to be canceled from the rom config dialog
    
    Was using the rom config class wrong, causing cancel actions to work
    just like 'ok' actions. Oops.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f07ad14a16dbf1b75c71784ceae303825c90ade
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 22:43:22 2010 -0700

    altosui: Abort flashing if debug port isn't working
    
    Check each command going over the debug port and make sure it works as
    expected. This commit adds checks for initializing the clock,
    selecting the desired program counter and running the flash
    program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cf30343aadd5039627a85319872685f743e64b16
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:55:41 2010 -0400

    update changelogs for Debian build

commit 59a40f6d5a2159b9009a3fa0737bb679efd5b32c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:55:01 2010 -0400

    another distclean fix

commit 59ff9180f11063c257746b895a167179b3a4ff7c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:53:16 2010 -0400

    and a few more distclean fixes

commit 3aafd70257b70b7c11ba9c55749157979bc61ea2
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:52:04 2010 -0400

    more makefile distclean target work

commit d5a6ad87c7a9ac03b2e694bed0a54b6cc4322a6f
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:50:16 2010 -0400

    update changelogs for Debian build

commit 14fa24ed93b3b1cec08a170004c6fb7f4d74f7e5
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:48:31 2010 -0400

    update changelogs for Debian build

commit 83552dfa0d38db9cdf3efc89e64e6c7896467856
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:47:54 2010 -0400

    add distclean targets to libaltos and altosui to all Debian package to build

commit 6f24d2a476759104a10b26b54faff2b18b0e208b
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:46:21 2010 -0400

    update changelogs for Debian build

commit d079bfe86ed40ff450ece445cf5f5e3970e44cec
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Sep 2 00:44:30 2010 -0400

    update changelogs for Debian build

commit a470315e5d822a69ef5304512cf73c604c88e481
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 20:14:51 2010 -0700

    altosui: Remove Manifest.txt from git repo as it's built now
    
    This file is built with appropriate contents for each different .jar file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1177e0a684328422be5adc68093d0091a218a824
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 1 19:53:24 2010 -0700

    altos: Bounds check Skytraq GPS tracking data array
    
    Missing GPS serial data could cause the tracking array reset to
    get skipped, causing the array to be overrun, smashing critical data
    beyond the array.
    
    This was detected using the 'altosui' flash command to program a
    device from TM. Hitting the USB that hard caused TM to crash with a
    mutex error (3 beeps) after the ao_gps_task structure was overwritten
    with zeros.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 775acb89660cdee2f3c54c38297baefe39f2414c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 22:24:09 2010 -0700

    altosui: missed AltosReader.class in the Makefile
    
    This caused clean builds to fail to make this file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd2b9d958c2b7f846031b076ed51c4fbaaf2d68f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 31 00:20:06 2010 -0400

    update changelogs for Debian build

commit d006c5e1255433181aca4c8e6a277b2d1bc0841b
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 31 00:19:37 2010 -0400

    add runtime dependencies for altos binary package

commit c1c7d731e3774883fa0bb5538be225a59334d124
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 19:52:51 2010 -0600

    update changelogs for Debian build

commit c35632efb1919764e4b8581ed6fcf2bedd4bd517
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 19:37:50 2010 -0600

    update changelogs for Debian build

commit 2a004d17a13b4ff52d892bfdecff8ad3d0823f7c
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 19:37:17 2010 -0600

    don't build all the "fat" jar deliverables by default

commit 507e429db6638f82c32449e9c5ca06b46da30134
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 19:09:00 2010 -0600

    update changelogs for Debian build

commit 25764fcd1b65c3a5a817afdb5901ac30e8a5f0c0
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 19:08:29 2010 -0600

    update changelogs for Debian build

commit 4790f78aead8a816e5b247c022b2998ce3a94053
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 18:48:50 2010 -0600

    add a .gitattributes file, configuring the Mac and Windows binary library
    files with the export-ignore attribute, in hopes that this will prevent
    them showing up in source packages

commit 81318e5b7179b0311ab099043ecb04a25d763750
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 18:15:40 2010 -0600

    make invocation of 'install' pathless to work on more Unix variants

commit cbc72399a0f4d7429df0189bcdae683dd491cb9e
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 30 17:56:56 2010 -0600

    continue even if rm's don't have anything to do

commit a9a8d23c877e6f6c76857b7c85e3d43b4da1db27
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 05:49:11 2010 -0700

    altosui: Devices with USB id 0x000a always get listed
    
    List 'unknown' AltusMetrum devices anytime the UI needs a device
    name.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a94900b8862b99b4e317ea0ee3edd2a560f270c7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 05:48:23 2010 -0700

    altosui: build debian-style altosui too
    
    This adds the dependencies to make sure altosui and altosui.jar get built.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 38ac388baf8125c0644b868a7aaf8eba1bdf990d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 05:28:37 2010 -0700

    altosui: Build linux, mac and windows archives on Linux
    
    This adds 'fat' archives for each target OS.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35d9a8214252dbe79aeb69ae47d2e5c58a654702
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 05:27:45 2010 -0700

    libaltos: Use overlapped I/O on windows
    
    Otherwise, reads block writes and vice-versa. Crazy stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c7ba92317ac55272acbde12416448ebd17b983a6
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 04:52:00 2010 -0700

    altos: Windows sends USB Out packets of 0 length. Ack them.
    
    This was an untested case as no other operating system sents 0-length
    out packets (they're not necessary). The correct response is to ACK
    them by clearing the OUTPKT_RDY bit so that another packet can be sent.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 20a472cfe3369200150ea4ff067ceb28968dbcac
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 02:58:23 2010 -0700

    libaltos: Add pre-built Windows .dll
    
    This lets us create the windows distribution on Linux.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0300fe581c949232bc52b05fe9c1f6032cad6b60
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 02:56:25 2010 -0700

    libaltos: Add pre-built Mac OS X libaltos.dylib
    
    This allows the mac bits to be built on Linux.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5d48c494325524bbeed10e0dc7300ed44e7e208e
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 02:53:26 2010 -0700

    Update telemetrum.inf to include all current USB ids.
    
    Windows 7 has 'encouraged' us to split out each product into a
    separate USB ID. telemetrum.inf now has all of them listed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df34bbe7d1c43b12ab6d610fe810b6e1683e4c21
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 02:49:49 2010 -0700

    libaltos: Improve Makefile
    
    Builds Windows .dll correctly now and sample app.
    Moves linux install target to end so it is not default
    Adds .NOTPARALLEL to disable parallel gnumake.
    Removes -g debugging flags to shrink file size.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd5374b8e660012ae4f8b058454fd101e0749ca7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 30 02:00:30 2010 -0700

    libaltos: Fix windows build.
    
    Need stdlib.h to get calloc/free defined, remove debug printfs, fix
    serial timeouts.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 63c832394a829f41b8f77d075786530536360349
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 23:22:27 2010 -0700

    altos: shut down packet mode cleanly
    
    Instead of constantly bashing the packet master thread, let it shut
    itself down in an orderly fashion. It will shut down fairly quickly as
    all of the activities in that thread are bounded. Otherwise, the
    master packet thread might leave mutexes locked and all sorts of other
    horrors.
    
    Tested on Linux and Mac OS X and shown to be reliable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43619c13f749b79c096d1e8fdab3d5cfb5fd85f1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 22:42:23 2010 -0700

    altos: Abort radio harder when terminating packet mode.
    
    Make sure the master radio tasks don't get stuck waiting for an
    incoming packet again by aborting the radio each time we poke the
    tasks.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c4a8569f61eddf690d00337543462235ecbfbe54
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 22:41:18 2010 -0700

    altos: flush pending output when terminating packet mode
    
    Just in case the last command sent hasn't been transmitted, hang
    around for up to a second waiting for the data to get across the link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1acd3c7ec167b1b18e4ea493e5978c938a91cc89
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 21:45:19 2010 -0700

    libaltos: cjnitest needs altos_flush now

commit 6527357d1f0e94faf9e7dacac10a39875131be7c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 21:43:46 2010 -0700

    libaltos: Missing OS_LDFLAGS on cjnitest build

commit b7fa1ea3338f63b8edcf8aacccb5e519ca0b213f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 21:41:40 2010 -0700

    libaltos: Mac OS X cannot use 'poll(2)' on serial lines.
    
    Who ships this stuff, anyway? Instead of blocking, we'll poll every 100ms now,
    otherwise, we won't be able to abort the read when the device is closed. Yay!
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e60c59123232915e808cee23ef89eb1a38ced34b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 21:40:21 2010 -0700

    altosui: discard invalid lines while reading Eeprom flight data
    
    This shouldn't happen, but it's easy enough to get back in sync by just
    skipping lines with weird contents.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ae02b1590439d5c8dfb472cf1f83a14fdcfbaf11
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 21:36:47 2010 -0700

    altosui: provide separate flush_input/flush_output for serial. deal with monitor automatically
    
    (yes, this should be two patches, but the diffs in AltosSerial were merged together).
    
    First, this replaces the existing flush/flush_reply mess with two simple functions,
    one to flush output to the serial device, making sure that all data written will be seen
    while we wait for input. The other sucks any pending input off of the serial line and
    discards it.
    
    Second, AltosSerial now tracks whether the serial line is being used for telemetry
    monitoring. If so, it enables monitoring, otherwise it disables it. Eliminates a
    bunch of manual state tracking elsewhere.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit edcfb1bdf64772d3b83405ccf99385b8fea5d8e4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 29 17:33:59 2010 -0700

    libaltos: AltusMetrum devices use more than one USB ID.
    
    List all usb devices, picking those with AltusMetrum IDs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 236685807b63860ad033aa0254ce8f6d8d36d4ef
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 22:26:09 2010 -0600

    update changelogs for Debian build

commit 1cda15fdef2d9d3e54354bd5c43a0bcc7e3240cb
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 22:24:51 2010 -0600

    fix up for an 0.7 release

commit 4c5c7c7f198775c398c1ad2edafb3488384cc297
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 22:13:38 2010 -0600

    update changelogs for Debian build

commit 42055af5c6f17d14a2f1c6a2b5e1ce6d3b45a615
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 13:13:19 2010 -0600

    update changelogs for Debian build

commit 0bd4cc03b3bf23aa32b5ce1921078021d1d8a9c6
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 13:12:46 2010 -0600

    fix path to installed shared library

commit 99c1d9b4ef10ec4ebbee058ce0bb38c954a0a3a6
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:41:26 2010 -0600

    update changelogs for Debian build

commit cf65c6b8056c4af7c26b52ec6f9fbd3400cef638
Merge: 5f2f6a8 ae5eff7
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:38:25 2010 -0600

    Merge branch 'bdale'
    
    Conflicts:
    	debian/control

commit ae5eff7bc0b63047737223423009707bedcb00f5
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:37:36 2010 -0600

    Revert "lose the prebuild hook for now while I'm fumbling"
    
    This reverts commit a21b6bb60ac1c07ebd161534a4ea63bfde50dcdf.

commit de2e71c4923a0282df74dbe37d087c34b4ddd279
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:25:20 2010 -0600

    fix man page delivery path

commit a8dbe082960dc9bdd44c6e4b1198423c4e566029
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:18:28 2010 -0600

    install altosui man page

commit 5cc933039e4763b8675611c63b6147b42878a2bb
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:16:19 2010 -0600

    fix permissions on installed jar file, switch from ao-view to altosui in
    the desktop file

commit 138009e9fad01f79df4c3820fbc206f78688bdce
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:06:01 2010 -0600

    update Debian standards version

commit c280071b7db4e9a7af31dc5740eb8d27f137950e
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 12:04:13 2010 -0600

    fix up the wrapper's path to the jar file

commit 5f2f6a8f9ba56be867888758848bc7f152ccbd47
Merge: 63bd34c 9d1b27f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 27 11:00:31 2010 -0700

    Merge remote branch 'origin/master' into new-packet-format

commit 63bd34cd1b5a411489e8c3ab377f0fe0eec11f67
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 27 10:58:55 2010 -0700

    altosui: add elevation and range information
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 72a18502e40f55cbba6418dc94315517881cd411
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 11:51:24 2010 -0600

    add an install target for altosui

commit 72c33a72ee105ec692dad62d6d9c1ad40b89bfe8
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 11:45:19 2010 -0600

    add install target for libaltos

commit a21b6bb60ac1c07ebd161534a4ea63bfde50dcdf
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 11:26:29 2010 -0600

    lose the prebuild hook for now while I'm fumbling

commit 9ea94411c9730f7a271366d309ab4827beeeb839
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 11:17:54 2010 -0600

    add a dummy install target

commit c443f43f8dee6e0fcbcecf9d09e948fd928b7af4
Merge: 2950431 2923cf5
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Aug 27 03:08:53 2010 -0600

    Merge branch 'new-packet-format' of ssh://git.gag.com/scm/git/fw/altos into new-package-format

commit 2923cf5057f9cef110dd547d8677ea5b60e00796
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 27 00:10:29 2010 -0700

    altos: prepare for sdcc 2.9.1
    
    A few minor language changes -- non-standard keywords are now prefixed
    with __, such as 'at', 'interrupt', 'naked'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68967157cee620ebedcc8c2ffd6fc7656532087b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:55:44 2010 -0700

    altosui: command line args are converted to csv format
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e0506dc2014b7178f52b950e8c1cb820b35f9c6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:54:53 2010 -0700

    altosui: Remove debug printf from AltosState.java
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49364608b59de7421ab00d87d2685bc3b5f58411
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:53:06 2010 -0700

    altosui: When parsing saved telem files, errors shouldn't abort file
    
    Make syntax errors in telem files just skip the current line and move
    on to the next one instead of abandoning the whole file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a16db143fc7ca72dc91e7989420049192114642d
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:50:51 2010 -0700

    altosui: Serial line is in UTF-8 encoding. Deal with it.
    
    We read bytes from the serial line and need to convert each line into
    a string. So, save the bytes and at EOL, pass the whole mess to the
    string constructor with the appropriate encoding info.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0942912163255523d923140c01afbdb5da1c19b5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:49:37 2010 -0700

    altosui: Add support for old (version < 3) telemetry files
    
    This lets the code read telemetry files from pre-released versions of
    the software. Not strictly necessary for production, but useful for
    analysing old files.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e383595cd281687de903fb6176564bbef270cb83
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:47:38 2010 -0700

    altosui: AltosEepromReader was mis-setting boost tick
    
    It was supposed to use record.tick instead of the (unset) state.tick
    value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 651f6102ac79459fc8d5679d852c963dcb5bb3fc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:44:25 2010 -0700

    altosui: add rssi and distance/dir from pad to CSV files
    
    Just adds a couple more fields to the CSV files that might be interesting.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3dc67c1401976d6e9e2e942d5a4707a4810a0404
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:43:00 2010 -0700

    altosui: Add AltosGreatCircle constructors
    
    This adds constructurs from AltosGPS pairs and also one from empty
    args (which defines both distance and bearing as 0).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f0fd423d0bf83bc5c3f9d39e9c09397fbe8caed2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:41:26 2010 -0700

    altosui: Move number parsing code to Altos general class
    
    This moves these shared functions to the global shared class.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 68b2b66d7574dfd0bd5e3571b8ffad32ca5d2b73
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 23:37:29 2010 -0700

    altos: mark gps date written only after it gets into eeprom
    
    Data logging doesn't start until boost detect occurs. As the GPS date
    is only logged once, if that happens before logging is written to the
    flash, then the GPS date will never get saved.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa6c27df5db6bdae59d00affccb891854a6caa18
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 15:59:09 2010 -0700

    altos: print GPS state flags in GPS 'g' command
    
    Having the GPS state information can help with GPS debugging.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 34055129b4008f6a9833887b12dee39ffa408002
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 26 15:57:09 2010 -0700

    altos: always rebuild ao_product.c to track git version
    
    The git version is built into ao_product.c and saved in eeprom log
    files, providing useful diagnostics about the firmware revision used
    for each flight. However, if ao_product.c isn't recompiled, then the
    updated version won't be included. Force recompilation of this file
    each time make is run to ensure that the final output contains an
    updated version number.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 99400fdc0f19ef538fc362dde5c3ab5b7cdac409
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 16:43:38 2010 -0700

    altosui: flush replies from serial link when entering debug mode
    
    We use replies in debug mode a lot and depend on them matching the
    expected parameters. The case which caused trouble was using
    TeleMetrum to reprogram TeleDongle -- sending the 'm 0' command (to
    disable telemetry monitoring on TeleDongle) to the TeleMetrum caused
    it to reply 'Syntax Error' which confused the subsequent flashing
    operation. Flushing that reply gets things back in sync.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba086cc77273efe5397f60dcaccd1e3771441481
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 04:02:27 2010 -0700

    altosui: write USB serial number string while flashing
    
    USB serial number is encoded in UCS2 as a part of the string
    descriptors. Place those right after the other rom config bits so that
    altosui can find it. altosui is changed to write the serial number there.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 220f3afdaa432c65f8ad45be7cdbe5c8a3616db3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 04:01:47 2010 -0700

    altosui: always display romconfig ui while flashing

commit f62b2aa08ebfd912b3c732397d43ff9f6162ec88
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 04:01:14 2010 -0700

    altosui: fetch existing romconfig for flashing

commit d93787284c8e514a929edb9f944c98ae0206a33f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 03:59:09 2010 -0700

    altosui: Delay mapping Flash UI until flashing actually starts
    
    The flash operation may be abandoned before it even starts; this makes
    sure the UI doesn't flash up on the screen.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d44cbd621d2b113ac2b802ef17e3d8a660ce7f2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 03:58:00 2010 -0700

    altosui: disable radio monitoring while using serial line for debugging

commit 7bd220dfd9b3fb0e42eb90c3b37eb7b4169eb21b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 24 00:29:11 2010 -0700

    altosui: Add ability to create CSV file from telem or eeprom files
    
    This creates a comma separated value file to export data for
    external programs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 634a550149e7c344a22a637ba484f115592b1018
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 23:15:05 2010 -0700

    altosui: refactor logfile chooser dialog to share more code
    
    Move file opening logic into logfile chooser as it can be shared that way.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit afea6c264c5ebf12f1d629bd4bc724da86d11b7a
Merge: 0e17853 9d1b27f
Author: Anthony Towns <aj@erisian.com.au>
Date:   Tue Aug 24 00:02:31 2010 -0600

    Merge branch 'master' of git://git.gag.com/fw/altos

commit a55b132668a819cc26478a609cb79bd9190deb9d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 23:01:36 2010 -0700

    altosui: Separate out log file choosing dialog to share with CSV generator
    
    This dialog will be shared with the CSV file generating code, so split
    it out instead of duplicating it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 295043112ccde35092945c286596f9045ee6fa05
Merge: 2007288 ef8376c
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 23 23:11:22 2010 -0600

    Merge branch 'new-packet-format' of ssh://git.gag.com/scm/git/fw/altos into new-package-format

commit ef8376c4dd8262a34e02b6bb9e19e907ac2f4330
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:08:30 2010 -0700

    altosui: make default Manifest look for built-in freetts

commit 56b906f535ac2f86bcab71addbbcd376d74f6a73
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:03:36 2010 -0700

    altos: Place rom config variables in fixed location
    
    The device serial number and radio calibration values are stored in
    flash, mostly so that TeleDongle gets them saved.
    
    Placing them in well-known locations (starting at 0xa0) makes it
    possible to find the previous configuration and to re-write it
    easily, without requiring the .map file.
    
    altosui doesn't have the .map file parsing code, so it relies upon
    this new technique. As a benefit, it reads the old values from the
    device before reprogramming it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c0c099716197ef7539be0cf55bbb164f6804958
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:02:21 2010 -0700

    altosui: Finish device programming code
    
    Altosui can now reprogram Altusmetrum devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bd2b44ddd61fadd8bf8ee6bf783ce019b1be7cc0
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:01:38 2010 -0700

    altosui: Remove debug printf from AltosRomconfig

commit c3f57ffdb6c74de90d982eacd604e658ce9b00a5
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:01:11 2010 -0700

    altosui: flush serial output before waiting for reply

commit 8857ac5e43eac6db8d5594b8864df497a712242b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 22:00:16 2010 -0700

    altosui: remove debug printf from AltosHexfile

commit b1758be01397fd49c441f40852f3558fe9343a2d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 21:58:50 2010 -0700

    altosui: Add lots more cc1111 debug interface functions
    
    These are sufficient to program the flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f9e80f39bc39e5882bfe75f959b6501cb3277cd2
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 21:55:49 2010 -0700

    libaltos: use pipe to wake up getchar on close. use mutexes

commit 86f7b9314b042f2e512fdf35067817e68532867b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 21:54:47 2010 -0700

    altosui: pad TM config dialog values to avoid clipping descenders

commit b8519b8669ff54741dd738ac343fbd2424451247
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 21:53:37 2010 -0700

    ao-dumplog: Fix --remote and --channel options to actually work

commit ebeb13688a9a5442c838641ede6ba0dc92c9a1a4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 14:32:58 2010 -0700

    altosui: Add debug dongle API, split flash UI out
    
    Create an API to talk through the debug port on another AltOS
    device. Split the flash UI out from the flash implementation so that a
    command line flash utility can be written.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7f8d7978606abe544b1b9b6065c5480ed813b8ec
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 23 11:53:19 2010 -0700

    altosui: Add .ihx file reading code and stub out flashing UI
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2007288da8a83e3aa925e11cc196f1c65aab2e5c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:00:15 2010 -0400

    working on java packaging details

commit 44b26dd550eef789e70082ccaa46d7d430c67bce
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:15:04 2010 -0400

    add freetts as a build dep

commit 0e17853c08f77debef3e8cf82e9cdb6a5079fc9b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 22 23:06:15 2010 -0700

    altosui: Set callsign when fetching eeprom data over the air
    
    The updated firmware places the callsign in each packet to comply with
    regulations, this ensures that TeleDongle has the current callsign
    configured.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 953bc3438b10b21f3d65d292356c4ab2de23cddd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 22 23:05:20 2010 -0700

    altosui: Add TeleMetrum configuration
    
    This presents a dialog with all of the user-settable options in the
    TeleMetrum set for editing. Combo boxes are used for everything except
    the callsign.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e1463d8e265dfd42c824d90088cd2a51b4cf8131
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 21 17:57:31 2010 -0700

    altosui: Make teledongle callsign configurable
    
    Teledongle uses the callsign in packet mode; this provides a way to
    set that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09252ec22d58e946494e4ca2cf367bf3bbe1cc50
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 21 17:09:41 2010 -0700

    altos: Define USB product ID in per-product Makefile.defs file
    
    This allows Win7 to tell which kind of device is connected purely by
    USB id as it doesn't expose the USB product ID string to user space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22800dc094797e1e0ad99124198809d0360f7556
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 17 18:22:28 2010 -0700

    altosui: Select devices by USB vendor/product ID.
    
    Because Win7 doesn't expose the product name, we're swtiching to using
    the USB idProduct/idVendor values. This patch adds support for
    selecting devices by those new IDs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d14c96663a1027164fa30ed89b53f5a9d3fdb82b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 17 18:19:43 2010 -0700

    libaltos: integrate Windows support.
    
    This adds Windows support for discovery and I/O.
    
    The API to the library is mostly unchanged, except that it now exports
    product and vendor USB IDs as Win7 doesn't expose the product name
    anywhere that we've been able to find, so we'll be updating the
    firmware to use unique idProduct values for each product.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9d1b27fa147fc8b765d5be165ebef7ee0f85bd37
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 11 22:11:50 2010 -0400

    update changelogs for Debian build

commit b6da90b4627dde1fe88240c38c51559d8f781dd0
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 11 17:15:39 2010 -0400

    update changelogs for Debian build

commit 4918f73fd0a0f3f5d52907f95a0ec385e901d447
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 11 08:50:27 2010 -0400

    update changelogs for Debian build

commit f63f16a70e4d0535667a6364cafcbff026ee6a8c
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 11 08:36:59 2010 -0400

    update changelogs for Debian build

commit 294d9c7db21eaf1e71504dbcca5040371abcce55
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 7 22:30:55 2010 -0400

    ao-dumplog: add --channel option (for use with -R option)
    
    Sets the channel when downloading data with the -R option.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f317f1324b69b4241f4bb192e164b33d712d5a43
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 7 00:42:25 2010 -0400

    altosui: Start adding code to write csv files from eeprom/telem files
    
    This is a start to code which can write out a csv file full of flight
    data from either an eeprom or telem input file. It's not hooked up,
    but the restructuring necessary is finished and the output is started.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4738cb2fc639adb1d9237e6c903479f0690dd81a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 7 00:40:59 2010 -0400

    altos: add callsign to packet mode, increase payload to 64 bytes
    
    Untested, but it 'should' work. Need to add callsign setting to packet
    mode users.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b7699a5907e64bc7547fcc27e73f4a35bbaabfff
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 6 13:09:21 2010 -0400

    altosui: Add comments to Eeprom reader

commit 0e917f3ff822616adb147517ac961422e5fedbfd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 5 22:49:53 2010 -0400

    altosui: Compute flight state from eeprom data
    
    This lets eeprom files be used to replay flights.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0a9b445a4d379730b67720f8d7b682d5206a582
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:16:48 2010 -0400

    update changelogs for Debian build

commit e075b8623533965b1b77b77d38c2df32f5f77fce
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:16:24 2010 -0400

    update changelogs for Debian build

commit 410de62715a0830f03b0a65d6c7730dff51e6ef4
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:15:04 2010 -0400

    add freetts as a build dep

commit 0b85160c44d934f3d1352c1c07c296d01ceffc32
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:02:17 2010 -0400

    update changelogs for Debian build

commit d091099753d9cae01c4805812425ebea19ec09cf
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:00:46 2010 -0400

    update changelogs for Debian build

commit aed55ef1ce45b0f6e6fefeebf50be97607b31d65
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 15:00:15 2010 -0400

    working on java packaging details

commit d8bf05f7ad55964c9bce0551e58f4ef6c9f721ad
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 5 13:50:18 2010 -0400

    altosui: Split flight record out of telemetry class
    
    This will permit either telemetry or eeprom data to be used to
    construct the sequence of flight events for reply or data generation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 85a670b5a904d6750d0f179ae307baeb8fc7cbd2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Aug 5 13:40:17 2010 -0400

    altosui: Explicitly initialize Altos class
    
    Because the Altos class is never instantiated, the static initializers
    are never called, leaving the string to state mapping empty. Hand-code
    the call to the initialer instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 02f17f2cd26189e2676a9dc0d86bd959ed0bc3f4
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Aug 5 00:54:05 2010 -0400

    move to science menu

commit 9e8f7f75442303f9bfa99a0435984f5d36863ae6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 10:34:21 2010 -0700

    altosui: Split status and info panels into separate files
    
    This moves some code out of AltosUI.java into separate files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9c9b35254c693b3ade42b24d1e29eaf31e6ba2aa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 10:24:56 2010 -0700

    altosui: Clear displayed data rows as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 88e0137a60d7a13ddb7781befa76650e13ad44ae
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 10:07:38 2010 -0700

    altosui: Merge gps date and time classes into gps class
    
    No reason to split out the date and time information from the other gps info.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c3b2fe357d6acf28f48aeddd91693f10381be51
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 10:05:15 2010 -0700

    altosui: Capture config and version info in .eeprom files
    
    Instead of only writing the serial number to the .eeprom file, write
    all of the config values and all of the version reply to the .eeprom
    file. The config values, in particular, contain the accelerometer
    calibration data which is needed to correctly compute acceleration
    from the captured accelerometer data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e286eb61ad2a90746c1c31f95d26d5edb48738d3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 31 09:57:49 2010 -0700

    altosui: rename AltosEeprom -> AltosEepromDownload, split out Altos constants
    
    Renames the eeprom downloading code and adds a new file to share the
    flight data constants across the various UI modules.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e3a9e3815db3f290e28b40ae02aa654f515cfc37
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jul 31 10:55:27 2010 -0600

    update changelogs for Debian build

commit 8fc261c2b77bb8aab201a0649a84b5ffa236ce26
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Jul 31 10:55:07 2010 -0600

    see if my new freetts package works

commit 2f114c7ff6b0deddb790d34139bb11ac37f8c0da
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 13:30:36 2010 -0600

    update changelogs for Debian build

commit 7877496d47ce6d25210c0e1c6500666dbfc0876c
Merge: c71061a 4cf39b1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 12:07:49 2010 -0700

    Merge remote branch 'origin/master'

commit c71061a37d3d3be2855b61cde33d2371989d7681
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 12:06:06 2010 -0700

    Make altosui test script executable

commit 4cf39b13a574cb656999cf329f5b08e7f910604b
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:57:31 2010 -0600

    update changelogs for Debian build

commit d1848193d8208388e4ccdfbed4e5663a9ba04dd3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:56:59 2010 -0600

    add a jdk to the build deps

commit 9ad4984124b6c05114feac4c4ac078dc248ce16a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 11:56:24 2010 -0700

    altosui: remove option to install to alternate volume

commit 2e797b18f0724caf7aaf96f45997998c7416f34e
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:50:57 2010 -0600

    update changelogs for Debian build

commit 89109f9dff3ce855d80da166e3362375282f745d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:47:37 2010 -0600

    ugh, fixing failure due to aborted build

commit 6fb8546575f6d99676dbb1dce190b0b7cf24b657
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 11:45:56 2010 -0700

    Moved Mac OS packaging to altosui dir

commit 865d5cdf8931ffc796f608e3e12d7c5a70832825
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:45:18 2010 -0600

    add swig as a build dep

commit 91d75fb3919f606a1956bf8c6423a8012d99a56a
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 11:45:12 2010 -0700

    altosui: Switch eeprom extension back to .eeprom

commit 33ffd89d5a64c991d28bd7369b61e1faa18f605b
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:40:52 2010 -0600

    update changelogs for Debian build

commit 62b4cc51a0f54ef363cbff46caef80a0afecdea2
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 12:40:25 2010 -0600

    update changelogs for Debian build

commit 6f86db5e0360bef26b21336769b7635e3a11e160
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 11:24:47 2010 -0700

    Add Mac OS X packaging bits
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 950f0a8c54e5835ee5d8b0aea360bd8362c21bc5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 11:09:19 2010 -0700

    altosui: construct Darwin application directory
    
    This adds the necessary files and build steps to construct
    AltosUI.app on a Darwin system.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 669c5f52abb972a82ed6efbee7a8c7d20afb5cd0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 10:48:52 2010 -0700

    libaltos: build with java src encoding UTF8
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit efa0e034a161f4852947cbac06537d6ba4422a0e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 10:48:25 2010 -0700

    altosui: remove debug printf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 53c279b9e96da8b69837ae84038a78ca5707f2a5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 10:45:02 2010 -0700

    altosui: Close serial, join reader thread, free altos_file
    
    Separating out the close and free actions ensures that the reader thread will not
    access freed memory or dereference a null pointer while shutting down the
    connection to the serial device. Otherwise, a race condition exists between the
    serial close and the thread join.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b8bc9994d8bfde6116c8a509e70ddf45fc4decce
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 10:24:59 2010 -0700

    altosui: Remove unnecessary freetts .jar files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e33dbbba94ce42295e9fed9f4ba7e46f9eff1517
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 29 10:24:09 2010 -0700

    altosui: check for closed serial device before reading
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27a2d0c00acf78628428c20ab68e2bfba06340da
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 11:02:38 2010 -0600

    update changelogs for Debian build

commit 537492dc961ee6a1945b1041ee3cc0d3f519a42c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 11:01:21 2010 -0600

    update changelogs for Debian build

commit adf6cbcba23e24a3824f7e242ec37baa2750ab94
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jul 29 10:59:18 2010 -0600

    update changelogs for Debian build

commit d0fd53bdab2f480cd43b6d7010c2094f4fccda91
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 21:49:23 2010 -0700

    Reset GPS ready status when GPS comes unlocked on the pad
    
    If GPS becomes unlocked, then report that in the UI and via
    voice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5fd225c3a52445ecdc7c04fac5e3d9a0db177c66
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 21:01:41 2010 -0700

    altosui: report rocket ground bearing at landing only if known
    
    if state.from_pad is null, then there isn't any data to report.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2d772164af95a35ea0f5d2413a5be67de9a210f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 20:18:36 2010 -0700

    altosui: Replace device dialog. Center eeprom monitor.
    
    This adds a custom dialog for selecting device, which makes it look
    much nicer on the screen and allows the user to double-click on an
    entry to select it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea32290704a8ca468f01172166b561833b20c954
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 19:37:02 2010 -0700

    altosui: Fix Save flight data monitor layout, add cancel
    
    Use GridBagLayout to improve the appearance of the flight data monitor
    widget, add a cancel button to stop loading data (useful if the
    connection is wedged).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce90f3fe2aa6e23695ccccb36a8e6e614a08ba31
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 17:08:42 2010 -0700

    altosui: Add progress bar for eeprom downloading status
    
    This has a progress bar tracking the state and block count while
    downloading stuff from telemetrum.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6599e9576c3da9325a1731144c1b8bc4943184c0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 15:41:34 2010 -0700

    altosui: Add eeprom data capture function. No UI yet.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a6040e143ecc7830cc1c0114de85f3b72c067eb
Merge: 024d077 554a97e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 13:29:51 2010 -0700

    Merge remote branch 'keithp/macos'

commit 024d077302f91bdb17abe70d3211ab0949dab8b9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 13:29:21 2010 -0700

    Remove debug printf
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 826061eaca88c0dd75051a6006ef6703c91af595
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 13:10:11 2010 -0700

    Add voice test command for help in adjusting volume.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71da54a5ce255395376a44586782ab8b6f3b289f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 13:01:52 2010 -0700

    Make voice and channel menus work.
    
    Stores voice and channel data to preferences.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e76b9cc32bbcc5176d9bdd6f8d79778024627382
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 12:24:53 2010 -0700

    altosui: Catch errors opening USB devices. Limit list to relevant devices
    
    Avoids a segfault when failing to open a device. Limit listed telemetry
    devices to just TeleDongle units.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 172a2817dde6718724f2b5fad5a7761801446fa0
Merge: f2a006f 81bf204
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 11:20:22 2010 -0700

    Merge branch 'macos'

commit f2a006fd98045066bdf429cc142d033e9feb0a8f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 28 09:31:09 2010 -0700

    Make ao_log_data re-entrant as it is used for both sensor and GPS logs
    
    Because ao_log_data is called from two different threads, failing to
    make it re-entrant would cause the 'log' pointer parameter to get
    overwritten if another thread asked to log data while the eeprom was
    busy writing out a block.
    
    This would cause the second thread to re-writing data from the first
    thread's address, but without re-checksumming the data as the checksum
    is computed before the log mutex is taken.
    
    The bug can be seen by log blocks with invalid checksums.
    
    Here's what happens with the ao_gps_tracking_report and ao_log threads:
    
      ao_gps_tracking_report		ao_log
    
       Writes a bunch of records
       *blocks* in the eeprom flush
    					sets ao_log_data 'log' to global 'log'
    					computes checksum for 'log' block
    					*blocks* on ao_log_mutex
       Wakes up
       sets ao_log_data 'log' to 'gps_log'
       writes remaining records
       'gps_log' is left with svid = 0
       *blocks* on ao_gps_tracking_data
    					writes data, reading from
    					the current ao_log_data 'log'
    					pointer which points at 'gps_log'
    
    Making ao_log_data re-entrant fixes this by ensuring that the 'ao_log'
    thread has its own copy of the ao_log_data 'log' parameter.
    
    I made this function take an __xdata restricted pointer so that it
    could be passed in the dptr register instead of needing to go on the stack.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 554a97ef455c801dcab825815f44520f96f4c3f3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 19:29:38 2010 -0700

    Force java source encoding to UTF-8

commit 81bf2042ca39eb106b789e5a08647c3114669358
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 15:29:28 2010 -0700

    Java voice reporting cleanups.
    
    Make sure it says something at the end of a log file replay.
    Make sure it reports max speed after motor burn out, and max height
    after apogee.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f2f38f2a9fb0c106e2c6b60cdc205292ce329ea
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 10:18:20 2010 -0700

    Java clean ups -- use varargs where possible, remove AltosSerialReader
    
    Add methods that format stuff using String.format for voice and serial
    link, remove AltosSerialReader class and just embed that in the
    AltosSerial class directly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 734cd15ccff691f851359518ce6118f29dc9f88d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 10:18:09 2010 -0700

    Remove directories as .class file dependencies; it makes them get rebuilt all the time

commit 809feb75e2155e84aebfcc431867edcfd9054670
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 01:22:56 2010 -0700

    Clean up altosui build a bit

commit 3784578a40dcc61f447435cfdf22e13c409cb9c0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 00:16:15 2010 -0700

    Add application icons for Mac OS X

commit 2c273710ea9b76ebee4101893f9fe84be8a02354
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 00:11:58 2010 -0700

    Add Mac OS X packaging files for altosui

commit a58c44cd904e5429b807e5c23913051ed6484edc
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 00:09:41 2010 -0700

    libaltos: build fat 10.5-compatible library
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4e3285575e0c7d029e799258587e965779990099
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 00:09:18 2010 -0700

    libaltos: make clean remove all built files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb8507975c6e081de2e909eca6faaa8f868b609e
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jul 27 00:08:38 2010 -0700

    libaltos needs -I. on all systems
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0a782026f6b19e84ffd44f1ae1b466363474bd30
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 18:10:07 2010 -0700

    Darwin doesn't have strndup.
    
    This provides a private version of this GNU extension.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b51497597868a40df039dd3ca11b35a6258bbbb3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 18:04:10 2010 -0700

    Re-enable Linux support for altosui.
    
    This steals code from cc-usbdev for scanning the USB tree and uses the
    same tty code as on Darwin
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9153c4f2c71ed965822fcfe5112d2bc38506baf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 17:04:04 2010 -0700

    Re-enable freetts

commit 17188f36fe18c23bc2eb877ac9a01b7693f4b863
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 17:03:47 2010 -0700

    Present list of altos devices in nice format

commit 005e2d6a7bb3b0546b0c1273296875621632ec6d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 15:42:48 2010 -0700

    Switch AltosUI to libaltos for device access
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c726d8f6eb861801d7543552beab6ee2c920c96f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 15:41:39 2010 -0700

    Add libaltos which talks to USB connected altos devices

commit 05111d5be4d37bedaaee6415d6ee27347e6a112c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jul 26 12:52:17 2010 -0700

    When the EP0 IN buffer is full, don't panic, just skip sending another
    
    If the host doesn't pull the IN packet out of EP0 before sending
    another SETUP command along, the IN buffer will still be busy when we
    try to reply to the SETUP command. While I don't quite understand why
    this would ever happen, there's no need to panic about it, just drop
    the reply packet on the floor.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d0647950b76bfa9942e4f8cf87353f2b724099f4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Jul 21 14:26:36 2010 -0600

    fix text since TM only has one led to blink

commit 8eda9fe94a7fd40cb84f50e17e64956f1584ebdc
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:24:32 2010 -0600

    update changelogs for Debian build

commit cd8aa79de72b8b6b3a26d0c2522e94c621b70f13
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:24:01 2010 -0600

    update to latest Debian standards version

commit 3284c7516e302e6db403d18866924ad926ffb2a7
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:20:08 2010 -0600

    update changelogs for Debian build

commit 8f1933717e3acfbcb09191da6e79a7944f91f9d9
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:19:27 2010 -0600

    reflect documentation file name change

commit 2cf1ef555a7feceeb1c333b273c19dd848e8d03f
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:15:47 2010 -0600

    update changelogs for Debian build

commit 74c67fc466118b86b4eb5173f7a6886ae220a985
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:14:27 2010 -0600

    add build dep for sndfile

commit 0794ab1e13313fa49b7caf01aef20b052ad78a88
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:10:01 2010 -0600

    update changelogs for Debian build

commit 15a6791ba8f8313b6b55752c3fa7dc254d56dd5c
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:08:56 2010 -0600

    update changelogs for Debian build

commit e747954b6a9e71705f619684df8a118a909b1039
Merge: bd40a5b 695879d
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 22:07:22 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit bd40a5b431847c071f5c486d754eca5627e5e3b9
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Jul 20 02:12:03 2010 -0600

    significant update

commit 695879dbccfc5ec6b79698653c58814158f91686
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jul 14 19:07:02 2010 -0700

    Switch DBG pins to GPIO when using any debug commands. Reboot to restore.
    
    If you want to use TeleMetrum as a debug dongle, you need to flip the
    three pins used to talk to the remote debug port from SPI mode to GPIO
    mode.
    
    This patch doesn't provide any way to get back to SPI mode, so you'll
    have to reboot the TeleMetrum to write out config parameters or log
    flight data after using any debug commands.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9ec6be0e92dee01f7aac006ef6f7779c1da1b36
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 3 17:42:36 2010 -0400

    Telemetry code was mis-computing RSSI
    
    The RSSI data from the hardware reports in 1/2 dBm increments, and so
    must be divided to report plain RSSI numbers.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 62294ea3830d3ea261a8761edc9fa6f98201d321
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jun 24 12:38:23 2010 -0700

    update changelogs for Debian build

commit 4766b13d1241fa585907c6f77707d2d4b3ccff75
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jun 24 12:37:55 2010 -0700

    update changelogs for Debian build

commit 52834517c0706b1f16fb81643a42dc1c1997e00a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 21 15:53:33 2010 -0700

    Abort any in-progress radio operation when changing radio channel
    
    In monitor mode, the current receive operation must be aborted so that
    the radio channel change can take effect without receiving a
    telemetry packet on the old channel. Aborting any in-progress radio
    operation will make sure that happens.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5933eaa44fe45027b856f1303dd657b974eb53e7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 21 11:44:32 2010 -0700

    ao-postflight: was walking off state.data array

commit 11d155d558d0b121b66f089adee0a47d71f65a78
Merge: 544003a 24393ea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 16 21:54:06 2010 -0700

    Merge remote branch 'mjb/master'

commit 544003a8da0248fd6f3c62ded86af74ab7cdadf6
Merge: 267923e 93c1e29
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 16 21:52:23 2010 -0700

    Merge remote branch 'origin/master'

commit 267923e56e22b3635a21f42ef77a3a36158bc273
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 16 21:49:43 2010 -0700

    Add special code for USB panic's.
    
    The USB system may panic if the hardware isn't ready for IN data when
    the driver thinks it should be. This adds a special panic code to make
    figuring this out easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 50ae347bf9de49ccfc92d26888f36e155fb406a3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 16 21:48:04 2010 -0700

    ao-view: disable radio telemetry monitoring during channel change
    
    This makes ao-view disable the radio so that the channel change has an
    immediate effect rather than waiting for a packet on the old channel.
    
    Note that this should also be fixed in the TM code itself so that this
    change wouldn't be required.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24393eab0ea085f2d0224b59fdc3c00693e5d3a9
Author: Mike Beattie <mike@ethernal.org>
Date:   Thu Jun 17 14:04:01 2010 +1200

    Extension to KML output format, and minor bug fix
    
    Extended KML output by breaking flight into coloured segments representing
    flight state. Add extra statistical information to description bubbles
    visible in Google Earth when clicking on links in My Places.
    
    Fix Bugs:
    * output kml to file provided as argument.
    * move kml coordinate output code to take advantage of nsat calculation
    * remove superfluous %9.2f format specifier from raw_file output.
    
    Signed-off-by: Mike Beattie <mike@ethernal.org>

commit 93c1e29b07c331a5ca6e0f647b9d2e9266ed3014
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue May 18 23:12:45 2010 -0600

    updates from Bob

commit bb46c9a1da5788a082e4483e576a5a6d3963507b
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue May 18 00:26:28 2010 -0600

    update changelogs for Debian build

commit 16c4cae7ebed7bd3ee0f12b8872bf950574f17e8
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue May 18 00:26:00 2010 -0600

    update changelogs for Debian build

commit bc89d962c87b50e5487628f8ca25e4443ac4823d
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue May 18 00:24:03 2010 -0600

    merge the altusmetrum-themes package

commit 0c6cf621dfd8339b8bc3915750a3147235f1331b
Merge: 32e430b 563a9dc
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon May 17 23:59:43 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 32e430b8a5f93b312f6359b4d553bad92ed37b19
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon May 17 22:43:19 2010 -0600

    merge in a derivative of Bob Finch's mere mortals guide as a getting started
    chapter

commit 563a9dcdfef42718370c49f16cc2271642b3e055
Author: Keith Packard <keithp@keithp.com>
Date:   Mon May 17 21:30:57 2010 -0700

    Finish basic flight monitoring UI with voice using FreeTTS
    
    This captures telemetry data to log files and presents flight status
    information in audio form using FreeTTS.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69092ffd23ac1928d5c84413fd00c2423f313fc2
Merge: 3c2211a cc002c0
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon May 17 20:10:46 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit cc002c0a43a02845ba67d1a61828be382f307b2e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 16 22:31:23 2010 -0700

    Fix telemetrum.inf, tested by Adrian and Keithp

commit 3c2211ad7877d622435bc9e8c9c0b01d62be6ff0
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 13 15:37:37 2010 -0600

    typo fix from Bob

commit f0433c83d76e90d78fb86a1f4a2f145f3c57fb25
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 13 01:27:39 2010 -0600

    updates from Bob

commit 0f05cf06e3f1ec510b11d993d9038211ac66c97b
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 19:54:04 2010 -0600

    update changelogs for Debian build

commit 6bd85138c1bfbc1d8b78dce1501870a65a64db36
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 19:53:40 2010 -0600

    lose the quotes since they apparently aren't necessary

commit d639144b9bb840fbbced199738787ec054eddf12
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 17:04:41 2010 -0600

    update changelogs for Debian build

commit ae6854df00579ea1c3486f1bf8f19443d5ac9498
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 17:04:13 2010 -0600

    update desktop file for conformance with current standards

commit 7191d74e680a63728f5eb139069a674fef969e6c
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 16:45:00 2010 -0600

    update changelogs for Debian build

commit 68eaaa694bb7bf20642ad11eac8a13c1c8e21b7d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 16:44:14 2010 -0600

    add desktop file

commit 9d3d09578381bb6e6f88c39b0e945371bbc22c5a
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 16:34:49 2010 -0600

    add desktop file provided by Bob Finch

commit 3cc1dad3b497524ffef61190dd68908cb19e8c35
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 12 16:28:35 2010 -0600

    add initial package build scripts for Arch Linux from Bob Finch

commit 1b8671bd0a00cec6ae4ccf442cd007b18af82fb0
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun May 9 01:41:00 2010 -0600

    lots of updates

commit 53b9a9bc28a9278249ff37f92110c21380e93cda
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 6 13:59:23 2010 -0600

    update changelogs for Debian build

commit cde60f16f6ab2cdd5010a0e106ae312d144947cf
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 6 13:58:31 2010 -0600

    Revert "Merge remote branch 'remotes/origin/fix-reset'"
    
    This reverts commit 314d27a73c903fef2968dabac3d5313573713460, reversing
    changes made to fa77db2ffd8a749c93767db5a6311131e00473ae.
    
    For whatever reason, this is utterly not doing the right things today!

commit 8be04df7e1e0a369ffb1137c6e2ec63585e3c935
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 6 12:48:00 2010 -0600

    update changelogs for Debian build

commit 314d27a73c903fef2968dabac3d5313573713460
Merge: fa77db2 823fc0a
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu May 6 12:47:30 2010 -0600

    Merge remote branch 'remotes/origin/fix-reset'

commit 823fc0ac27b8df9b4ba1ca0f229b431baf5b46dd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 5 12:50:39 2010 -0700

    Don't change dbg clock while changing reset_n. Use 20ms everywhere
    
    This changes the reset code to be more conservative about changing
    things at the same time, and also sets all timings to 20ms to make
    debugging with the scope easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa77db2ffd8a749c93767db5a6311131e00473ae
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 5 02:34:41 2010 -0600

    update changelogs for Debian build

commit 8b6767e24a88482dbd3d4c4c969a0be08917d22b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 5 01:32:46 2010 -0700

    Use ao_delay to sleep for 2 seconds instead of trying ao_sleep
    
    ao_sleep doesn't delay for a specified time interval as much as one
    might want it to.

commit e6bb80975fde20928a830170f0821d59a8c72690
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 5 01:31:57 2010 -0700

    Fix all stdio reading functions to be __critical
    
    Oh, right SDCC has '__critical' to mark sections of code that need to
    run with interrupts disabled; no need to use EA = 0 and EA = 1.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff03cdf746b83542ebcca00d32e6cc69ccfc122d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 5 01:57:54 2010 -0600

    update changelogs for Debian build

commit 8702f497c4278648303eced1aed5bd76d559521a
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 5 01:57:11 2010 -0600

    initial attempt at a telemetrum turn on script .. needs work

commit 01cefa181b04e53c20109ef8f3ffff633744da73
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 5 01:56:51 2010 -0600

    update changelogs for Debian build

commit 45a1c2d2dfb69e5269ef2756fcd0f734b48d41cb
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed May 5 01:54:33 2010 -0600

    update changelogs for Debian build

commit f7ff3278bb670df59d7425a014cfe8e3718fea3f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 5 00:44:42 2010 -0700

    Disable interrupts while reading from stdin
    
    With multiple input source support, there is a lag between asking a
    device if it has data and then waiting for more data to appear. If an
    interrupt signalling additional input arrives in this interval, we'll
    go to sleep with input available.
    
    This patch uses a big hammer by just disabling interrupts for the
    whole process.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa9ff021d683764a43800eaa18ea0c9be5134939
Author: Keith Packard <keithp@keithp.com>
Date:   Tue May 4 21:42:54 2010 -0700

    Revert "Add optional 's' command to packet slave to enable/disable slave mode"
    
    This reverts commit e7dc7fab787df63a4de72c8450e94092eb04d7db.
    
    This patch didn't work, and magically appears to break flashing TM
    from TD.

commit 8c95f33686f69da717013ec2c25dbcd99c03aa45
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 29 17:48:44 2010 -0600

    more text created during SFO->DEN flight

commit af0613ffc178b9b1f011c315923f92f2581fe53e
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 27 00:18:43 2010 -0600

    update changelogs for Debian build

commit 99094f02bf4849ba1f6b9842ded6c39d894320f7
Merge: 641e76c 75d8ffd
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 27 00:17:37 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 641e76c5d419dab057298541b3a7546877643198
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Apr 27 00:17:15 2010 -0600

    add some RF usage information from an email reply sent today, and re-indent

commit 75d8ffd4eadf31d50b2f58c021530c17ff1bdc66
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 23 13:53:25 2010 -0700

    Autodetect flite voice registration function
    
    Old versions of flite exported the function 'register_cmu_us_kal'
    while new ones export 'register_cmu_us_kal16'. This patch just checks
    which one is available and uses that.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97f4874d19ec05c81a04a3ecd06abffcf7fbfafc
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 22 16:25:35 2010 -0700

    More ALtosUI changes

commit e7dc7fab787df63a4de72c8450e94092eb04d7db
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 22 14:53:44 2010 -0700

    Add optional 's' command to packet slave to enable/disable slave mode
    
    This option has been selected for teledongle so that you can use slave
    mode and hook two teledongles together over the RF link.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f4383394b5d2b275b21e3ce8040d8cb9e48bb375
Merge: 5f93cf8 c879b17
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 18 08:36:07 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 5f93cf8c73555f43c14b1b0757f264bde69e9b8a
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 18 08:35:43 2010 -0600

    capture work done on SFO->DEN flight

commit c879b178d83c9a9a521f42a960b10e19b11cee92
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 10 22:09:57 2010 -0700

    Increase reset switch time to 100ms
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3a2e1221735d54dc3f2b97b4e75ed6f33ab8227
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 10 15:01:14 2010 -0600

    update changelogs for Debian build

commit 9394393c24c0a96b94319f2d0aa78fb498a121c9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 9 17:51:01 2010 -0700

    Only have the slave return a packet if it received one.
    
    When the receive is aborted to switch modes, it's important to not
    immediately re-acquire the radio and try to send a packet as the
    aborting thread won't know to kick the receiver again.
    
    This prevents the 'C' command from locking up as it tries to stop the
    packet slave before turning on the transmitter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce39372a3aeffff1a08d609e63164a00cf974663
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Apr 9 13:50:49 2010 -0600

    wrong Yaesu model

commit a832c7e9d9e9e420e1281136188bd53b34c56464
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Apr 9 00:10:03 2010 -0600

    update changelogs for Debian build

commit c0ee1ae25e1d18138d8372f47085de48ffada344
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Apr 9 00:09:21 2010 -0600

    file changed by auto tools

commit 25e69ebfec94560e0714cf2cc623dc9697b4ea99
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Apr 9 00:08:32 2010 -0600

    update changelogs for Debian build

commit ea5d4f01d18d93d032f05933041b7b6881289780
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 8 22:45:04 2010 -0700

    libflite may forget to reference libasound

commit 4b02f293e9c32a568fad89558274f21157e7d473
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 20:08:07 2010 -0600

    update changelogs for Debian build

commit 5c3b6e2d1989bcaa19ae3e294f297ec3e5648a53
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 19:56:40 2010 -0600

    update changelogs for Debian build

commit 01e524f11a67390a8ea1f20aa2d611909b4da363
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 19:55:05 2010 -0600

    choose a better set of docbook xsl files

commit f93c9bf3695862db31f2c3b3bc5a7bb24ef3766c
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 8 17:28:17 2010 -0700

    When changing RESET line, delay 20ms
    
    The GPS data sheet suggests a 1uF cap on the reset line to ensure it
    is held low long enough for the power supply to come up to voltage. TM
    v1.0 loads a 0.001uF cap there, but in case that isn't large enough,
    it could be replaced with the larger one. This change makes sure that
    even with that larger value, the debugging link will be able to reset
    the target.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit baaaac499cfbc1286ae55374cfdc796d32983b92
Merge: a4356b9 dec9971
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 8 13:31:23 2010 -0700

    Merge remote branch 'origin/master'

commit a4356b9bcf679c4d7b88fbbad77a98ecb0f80098
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 8 13:30:16 2010 -0700

    Use 16-bit flite voice (which appears to have changed symbols recently)

commit 447c121fc1ceb878e45718ad1364a5349965a59a
Merge: 10330d2 53ca3f9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 8 11:46:56 2010 -0700

    Merge remote branch 'origin/master' into altosui

commit dec9971d70f17067ba0051206851b49c7604ac85
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:43:03 2010 -0600

    update changelogs for Debian build

commit 6629ec52def8917ad033847812a1adc4c3e9c947
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:42:47 2010 -0600

    lose the url entirely for now

commit a1539a075a0cc79c9122fea878d9a20ee722a18c
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:41:42 2010 -0600

    update changelogs for Debian build

commit 934434ffb3514fe9ff95692784750d7c5217a5d3
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:41:28 2010 -0600

    fix typo in url

commit 8a067cd0eebbec313fc39086747ef618f2d1cf37
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:36:18 2010 -0600

    update changelogs for Debian build

commit 05ad58389fa3814ecb56344bf4ec3a3e025920a2
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:34:54 2010 -0600

    need another build dep

commit 6fbdc7037db185f03bd5ff96b9d9320646572df7
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:28:49 2010 -0600

    update changelogs for Debian build

commit 8f1d47e9cd61738e516d15fc97d5730d80611e87
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 8 12:28:20 2010 -0600

    update changelogs for Debian build

commit 10330d23518c94a8b791193a97a6cc07b1c9a97c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 6 00:58:00 2010 -0700

    Enable telemetry monitoring
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e10e43eff9de3f034da49c4f88728fb933f5035
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 6 00:56:57 2010 -0700

    Tasks may move in task structure as a result of ao_exit
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7fc7901cd591c93d9d0cffeec2977ebb17554d4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 6 00:55:19 2010 -0700

    TD reports "not-connected" when GPS has 0 sats

commit e064d05da87926c19fb665b40fb280fb59328183
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 6 00:54:52 2010 -0700

    serial port read function cannot be interrupted. poll every 1 second

commit c099a67d9ea37e731e0eca318102560281ac240f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 5 22:42:05 2010 -0700

    Interrupt running replay thread when starting another replay
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cc600a0389720bc7e435dbda8bec080ef19e0c58
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 5 22:21:46 2010 -0700

    Add Linux device discovery
    
    AltosDeviceLinux.java scans /proc to locate suitable devices. This
    will be hooked up to the UI shortly.

commit c28646d72005daeadb70b95fd3b0050bd752cc55
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 4 20:55:30 2010 -0700

    Switch TeleMetrum from v0.2 to v1.0
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d22ba55ae0e056530a727df50f14ad853d79a2c8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 4 20:55:18 2010 -0700

    Clean up some altosui comments

commit 6251e89c6eea655769f77bc18e98e79c99cf3cad
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 4 19:54:46 2010 -0700

    Don't abort the radio when enabling telemetry monitoring
    
    If telemetry monitoring is already on, then there isn't any point, and
    if it's not on, then presumably there isn't any radio work to abort.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b0b99f30c4e00689e9faceb363a5c7284541c6be
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 4 19:48:50 2010 -0700

    Make ao_radio_idle keep trying to get the radio to idle.
    
    Attempting to abort a radio operation could lead to a hang if the user
    of the radio jumped in and started using it again before the task
    attempting to abort woke up. This change just keeps smacking the radio
    until the radio goes idle long enough to detect it.

commit 0e7abc9fedec568b431c983d3df1b0b29f4f10e3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 4 16:32:04 2010 -0700

    Use RXTX for serial comm. Add logdir preference saving

commit c66eebad323e4572bb7cc23bc476ee144f03e9b8
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Apr 3 08:02:44 2010 -0600

    rewrite urls in docbook format

commit 3d34c488c5b71020d86f83156fd821fd860bf214
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 3 00:02:44 2010 -0700

    Make .jar file

commit 4bea4c327e002ce8f88218f0d840af7c1521bc35
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 23:25:02 2010 -0700

    Remove unused cell renderer class

commit 4ad062969ae8a608b8428620579bbe114e580a11
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 23:20:38 2010 -0700

    Remove GPS data missing from skytraq. Save max height/accel/speed

commit ebd49d4ec6b0b60c85b2de45cfe2e36add8fe9bf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 23:05:40 2010 -0700

    Report current gps nsat, not last locked nsat

commit 3f9b66b307ee88172151e3bee58e50f5acbde109
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 23:00:30 2010 -0700

    Clean up GPS data formatting

commit 9cc48698ec14c34d437baad7b6540edc31e9741c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 22:47:40 2010 -0700

    Fix state updates

commit 6d523ee4dad3b9890d3cf05852459101fe7e26ea
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 21:48:41 2010 -0700

    Fix status update

commit caa0bf49668344937483190d1c258bfa32971d19
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 21:44:00 2010 -0700

    Fix up table formatting

commit a579402f428dd6a0529505069d1846f70b83ab5d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 18:10:59 2010 -0700

    Display table of flight info. gps is not working yet though

commit 65079f84ea64220fa928c3ad96652fed159bf74b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 16:07:40 2010 -0700

    Steal C code from ao-view

commit 02f2be90879b682b6e648cf2debc83223d127b9d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 2 13:37:52 2010 -0700

    Add telem parsing code

commit 8c600abf87c95f8f214b5e56ff6eab955795dff5
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 1 23:56:47 2010 -0600

    crudely incorporate "day in the life" info from web page

commit 53ca3f98aeb70cb780031fee788de950e4388cf6
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Apr 1 23:39:42 2010 -0600

    tweak copyright assertion

commit 6454e309858aeef7912e862de8632618d89b4205
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 1 18:31:14 2010 -0700

    Fix windows install file

commit 584ab100640a07dec6e06829e73b7260d17d2232
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 1 18:30:56 2010 -0700

    Add Windows install .inf file

commit a06bee96e648d9ded8776f3d6cba9505e7be1a60
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 31 23:05:03 2010 -0700

    Add telemetry data parsing code

commit 7f233369e32c3254165ee251df0a3dbc21ea5a29
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 31 13:49:54 2010 -0700

    Start adding java-based UI

commit 76768804e68ed09421d7a48cb0b390f102ce2d76
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:26:35 2010 -0600

    make lintian happy

commit eb3cc3e9b60ec23acbb7d797affa743d671801ab
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:19:48 2010 -0600

    update changelogs for Debian build

commit 00f49c8fb0aa38331360bdb85c32bcebe60dcdc3
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:19:07 2010 -0600

    fix typo

commit f03ed0876c67b58624abf0c14bf73444b0322d3c
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:18:37 2010 -0600

    update changelogs for Debian build

commit b41e617080fe825f7810ee5eee52ea37f7618ec6
Merge: 28e40cc df7bda1
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:15:32 2010 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
    	ChangeLog

commit 28e40ccfcd80ab8764d4aa235257cea4d193a0c1
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:14:47 2010 -0600

    update changelogs for Debian build

commit 20d4d410e0fc04fe192e309811eed6c0194fa5a8
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Mar 30 23:11:40 2010 -0600

    initial harness for documentation

commit 9801ff7de21027935f52ccabaa3ff157e22d21ce
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Mar 15 12:04:18 2010 -0600

    move gbp.conf into debian/

commit df7bda1f32b0049c3878c325ea0b55999f3980e3
Merge: 23da4f3 a7042fe
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 12 10:38:26 2010 -0800

    Merge remote branch 'origin/master'

commit 23da4f3bcdd1d780c9e1f6b68ad2fb309fcae6ba
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 12 10:37:32 2010 -0800

    Document the ao-dumplog '--remote' flag for radio-link downloads
    
    The --remote (or -R) flag uses TeleDongle to fetch data over the radio
    command link from TeleMetrum. It's been there for a while, but the man
    page failed to mention it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93df98898f8cd199ae13158bc4f65e3494c954ad
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 12 10:35:12 2010 -0800

    Round radio calibration value instead of truncating
    
    The radio calibration function in the bring-up code was truncating the
    radio calibration value which caused the resulting frequency to
    always measure above the target frequency, instead of trying to get as
    close as possible. This change will result in a closer frequency
    match, but may sometimes be below the target frequency.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a7042fe7d065d1da1252be5ad43e3c9856214dc8
Author: Bdale Garbee <bdale@Deborah.(none)>
Date:   Fri Mar 5 19:11:11 2010 -0800

    update changelogs for Debian build

commit eda5e1166a97766aa22561beaa1086ba4e19ee16
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Mar 4 17:33:39 2010 -0700

    update changelogs for Debian build

commit 6e61170d42936c18cd6efba6f4c14af616a30745
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 28 18:24:46 2010 -0800

    Need to duplicate new altitude conversion code in aoview.
    
    Altitude conversion is now done with a smaller table and interpolation
    instead of a giant table.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e4e17e6d3844ae682a0e7a9469a522359bac77b6
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Feb 27 17:36:13 2010 -0700

    update changelogs for Debian build

commit a1478f65538fdaac7b58ffbd958a035b74956099
Merge: 901fce5 bbf8c9f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 15:19:33 2010 -0800

    Merge remote branch 'origin/master'

commit 901fce5fe3e2762406079ecaa787612b5ed4b34a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 15:18:47 2010 -0800

    Add .gitignore for ao-bringup
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7aab73a265841aac817ea34235dd1eb819debf76
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 15:14:04 2010 -0800

    Fix up LED colors for each product.
    
    Different products assign different color LEDs to the two available
    LED drivers (P1_0, P1_1). Make the LED color pin assignments
    per-product (in ao_pins.h), then deal with not always having a green LED.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1d6d8d76ec65373ffee70add75d183f5c4168f61
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 15:11:44 2010 -0800

    Eliminate deadlock when writing config from radio link
    
    Writing the 'Saved\r\n' string would fill the packet buffer and cause
    a flush to occur, which would need to wait for the radio link to
    receive and transmit a packet. The radio link always re-fetches the
    radio channel number when lighting up the radio, so it need to look in
    the config space. If the config mutex was held by the config writing
    process while the radio was trying to get the channel number, then
    we'd get a deadlock.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f1956ebadd7bf46b84a05a0c383b6404ca26b344
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 27 15:10:16 2010 -0800

    Leave .ihx files in the build directory too - easier to debug that way
    
    sdcdb wants the .ihx and .cdb files in the same directory, so humor it
    by copying the .ihx files to the src directory instead of moving them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bbf8c9f1748af3f1fac08ddf80ae98da2e9b5727
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Feb 26 15:21:12 2010 -0700

    create a turn on script for lighting up TeleDongle v0.2 boards

commit 461d4a1948e112ec7353caf88967391d876469dd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Feb 26 10:33:13 2010 -0800

    Add LED test

commit 5d7a3a5fbc0af4621c67a6fd51a9c9d5ae688fa5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 25 16:40:13 2010 -0800

    Fix and document the ao-rawload --run flag
    
    This allows ram-based programs to be loaded and executed easily.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e60deca147c85a064719dfad14ccabd1049bbbd
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 25 16:33:34 2010 -0800

    Allow product names to have suffixes (like board revisions)
    
    When looking for a board by product name, just look at the prefix of
    the name instead of requiring an exact match. This will allow products
    to have board version suffixes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f4d5790a284e2d02dd7568fbca90402fa5ed1aea
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 25 16:32:57 2010 -0800

    Add ao_radio_xmit to help test boards without flashing them.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7d551b0078acb1596a9b9023c3df6dbfa46213c
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:30:23 2010 -0700

    update changelogs for Debian build

commit 2f45953ee54034209a23c254e65da36e44cf075f
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:29:47 2010 -0700

    un-muck changelog

commit 540f86678853e7ea80ae91f3f2ec0ec88c5b1ca7
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:27:51 2010 -0700

    debugging

commit cdccd92f6ed97be7385e84de5694064cb8f43946
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:25:28 2010 -0700

    conditionalize use of git on executability of /usr/bin/git binary

commit 54dd7a200e6956aace5a580d4c4d6a10a13c654b
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:22:45 2010 -0700

    update changelogs for Debian build

commit 4b6b28530206c6fdbe46699b81746fbbcab5b148
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:22:20 2010 -0700

    see if this works

commit c74958d3e8c5ce8006a9f9f6853238fce0c77432
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 17:13:29 2010 -0700

    move git-using variable declaration into the prebuild target

commit cf091a7252eba09902a42a3cfe7b4d6a343907ce
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 16:44:44 2010 -0700

    update changelogs for Debian build

commit deccc10f0305c0cd02bf6317d6dc9d2ae38c3dac
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 16:43:32 2010 -0700

    add gawk as a build dependency since strtonum is a gawk extension

commit ac45da6e61597dcdb119b976f7301b2cc7fdced4
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 14:57:26 2010 -0700

    update changelogs for Debian build

commit 24912821b3230b8357b9e0094cd69fa0bccc5513
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Feb 24 14:53:27 2010 -0700

    update changelogs for Debian build

commit 82fdbfe1229d1ea5e6906ea240d54b3da73d9a69
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 21:35:43 2010 -0800

    Must install .map files for ao-load to work
    
    ao-load uses the .map files to rewrite the serial number and other
    config parameters into the program flash.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5215c2bd9249a285fc834db0c453fb3e7daed87
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 21:20:05 2010 -0800

    Add back stack size checking to altos linking phase
    
    This verifies that the stack start specified during the compile
    will work with the resulting program
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 18eeb79026f7e5c54bf99435537c024427011a36
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 21:05:45 2010 -0800

    Quiet make output.
    
    This borrows ideas from the notmuch project to reduce the command line
    clutter seen when compiling or linking stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 004c2a9b7a4b44ef71ca60482573e8e9d8c6ce93
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 20:36:08 2010 -0800

    Update .gitignore files

commit 84c93bb2fc4558a5e4654794ba90e730a84eaf67
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 20:22:16 2010 -0800

    Change altos build process to support per-product compile-time changes
    
    This creates per-product subdirectories and recompiles everything for
    each product, allowing per-product compile-time changes for things
    like peripheral pin assignments and attached serial devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fd0a42e0e96dcb8ecc9e999f70bcf70692692af9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 20 20:21:07 2010 -0800

    Change barometer conversion code to shrink conversion table

commit 876e9a10b9096ead85fbe08ec9a6a0329cf7cbd4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Feb 13 16:42:27 2010 -0800

    Log GPS data on pad after boost detect.
    
    This wakes up the two GPS reporting tasks and gets them to report out
    any existing GPS data to the log file. To make sure the timestamps in
    that GPS data are accurate, this also records GPS time on receipt of
    the GPS data instead of when that is logged.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c83615567b4567f3dc45a7f7b894943b45fbb65c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 7 00:25:22 2010 -0800

    Pull in a bit more data for filtering the start of the boost

commit f8967607b3dda0c0ce7afe8bb077da2da5ed3dcd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Feb 7 00:24:56 2010 -0800

    Compute daytime using GPS as time base

commit 2a6350149407c7d2e7d143906c40c5e331248aeb
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Feb 11 18:48:56 2010 -0800

    Missing ao_mutex_put in gps_dump

commit 9856b7c4397afcecc8f541af9a83824e817b3612
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 10 16:31:50 2010 -0800

    Switch to using internal cc1111 temperature sensor
    
    v0.2 has no temperature sensor, and several of the v0.1 boards didn't
    get a temperature sensor loaded. Use the internal temperature sensor
    on the cc1111 in all cases instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c2533be15858774ef9381aa8c8344356fd5b971
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 22:06:19 2010 -0800

    Force idle mode by shorting the SPI clock to ground at boot time.
    
    This allows you to override the flight mode detection code in case the
    accelerometer calibration is broken somehow. Hold the SPI clock shoted
    to ground until the LED comes on, then remove it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 28346736a7799c0767e54511d9949cd61d35e471
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 20:57:48 2010 -0800

    Add simple gps dump command 'g'
    
    This just dumps out the data in a very simple format to verify the GPS
    receiver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a6082a8b4501ac4cb18584ace1f0c40e088e5484
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 20:57:29 2010 -0800

    Remove flash debugging printfs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05bb953830604721c9a49dd56256b86f3666b5ff
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 20:42:57 2010 -0800

    Don't set ao_flash_setup_done until we're actually done.
    
    Because we're accessing this variable outside of the mutex, we need to
    make sure it isn't set until the data it covers has been initialized.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 327e5e782958e516a7b7a786ab6c176b0decb8b8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 20:04:42 2010 -0800

    Dump config block from read/write config and flash_status commands

commit 05e5bb2d330b755967d06fb859585c81f5f5fbb5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 19:46:46 2010 -0800

    Dump more flash parameters for the flash_status command

commit d4c8895b349998e02e03ed83466a0ca7afb3d99b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 17:57:52 2010 -0800

    Add 'f' command to display flash status register contents
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c1334f712f01543adb10809bc1a3ca120e27290b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 09:55:04 2010 -0800

    Add at45db161d.h header file for new flash part.
    
    Forgot to add this when I added the driver.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0d4c1b06d27e850d233f8ddf8fe32912bf0ec8f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 01:29:41 2010 -0800

    Remove green LED and temp sensor from v0.2 code
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc8d18736239b14c2ec48a40a01515912c5c25e6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jan 9 01:22:06 2010 -0800

    Add AT45DBxx1D driver
    
    This driver supports the AT45DB011D through AT45DB321D DataFlash
    parts as found in TeleMetrum v0.2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3bab7e66d25988f5d63ec139c8814a85b983f8f3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 19 20:32:18 2009 -0800

    Remove dbg driver code from telemetrum/teledongle
    
    The only board with debug outputs is the TI dongle at this point, so
    the debug modules were disabled in TM and TD some time
    ago. Unfortunately, the code was not removed then.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eddb82390a0ecb07ef83c04861993842906b03ab
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 19 15:31:36 2009 -0800

    Ensure that ao_alarm waits at least the specified time
    
    Because the timer tick may happen soon, it's important to delay by
    another tick to ensure that we don't wake up early.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 598d168bd6552c3756e4b0267de44147eadab9f6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 19 14:03:11 2009 -0800

    Disable monitor mode before attempting radio test.
    
    If monitor mode is left active, then the radio lock will not be able
    to be acquired for the radio test.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d4cf1446680d8b47396bcda338e8df7af395d102
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 19 13:53:38 2009 -0700

    update changelogs for Debian build

commit 10d1bbcd9709a5eee8d50989215242b16feb7232
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 19 11:34:16 2009 -0800

    Use ao_radio_get/ao_radio_put in packet code.
    
    The ao_radio_get function both acquires the mutex *and* configures the
    radio channel and frequency. Failing to use this in the packet code
    would leave the radio frequency unconfigured.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a15abc1882a3bdd2c980eed169f3b80337528390
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 19 12:15:29 2009 -0700

    update changelogs for Debian build

commit bbb152c712801653374a8f82869e2e8bf41f7279
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 19 12:05:40 2009 -0700

    update changelogs for Debian build

commit 7ac8efea5d60b81adccdc1e38ac4c13facfae7c9
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 15 23:58:29 2009 -0800

    Add --cal to man page

commit 5481082b18226a0de6b377215b3b330bdbc4a6c6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 5 19:50:38 2009 -0800

    Allow radio calibration to be set from ao-load
    
    This moves the initial radio calibration value into const memory where
    it will be used if no eeprom configuration value is available, either
    on an unprogrammed board with eeprom or a device without an eeprom.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 46f03ab3145a61139c8ca6fc99e8f2798728b5a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 5 15:36:12 2009 -0800

    Re-order config values. Change frequency to cal
    
    Place more often used values at top, and consistently call the radio
    value 'calibration' instead of 'frequency'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf29a62532fec12e6af2d2f3a6624882c863e933
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Dec 5 11:03:42 2009 -0700

    update changelogs for Debian build

commit cd49847f3125df1733f298b56a43e8027ab5ce05
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 4 23:38:26 2009 -0800

    Add radio calibration configuration.
    
    The crystal we use is only good for 20ppm, which generates a fairly
    significant error bounds at our RF frequency. This commit adds a
    configuration variable that sets the RF frequency control variable so
    that the output frequency can be adjusted.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c671a3f31f54715284beef5baa4a72ca922e4018
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 4 23:36:54 2009 -0800

    Make ao_cmd_decimal produce both 32 and 16 bit values.
    
    ao_cmd_lex_u32 is produced in addition to ao_cmd_lex_i so that
    functions can easily read 32-bit values from the command line.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e6d6ad66ce177eb6e49eaa04b1ecc6426f4bbdbf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 4 23:35:40 2009 -0800

    Remove send_serial and serial_baud commands.
    
    No longer useful, and they take up space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ce7325cefbbe91054c1e8174cf40a6c687f6694b
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Dec 4 21:02:07 2009 -0700

    update changelogs for Debian build

commit 9a1d7dd78c07d18954ef620b6ed25d6701df21e2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 4 14:35:39 2009 -0800

    Change default callsign to "N0CALL"

commit 291e2004e77debdc1543912cf11043c849305de8
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 26 11:18:37 2009 -0700

    update changelogs for Debian build

commit 40533095a96b6c6364eebdc4b7d53c4eabe72e9a
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 26 11:16:04 2009 -0700

    update changelogs for Debian build

commit ab1075e7219b02258c1613d93379582be4168947
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 26 11:15:13 2009 -0700

    change home URL in control file to be the AltOS page

commit d34dcc5f3616e59ee90ed172770fe2a3eb1e0cac
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 26 10:40:07 2009 -0700

    fix absolute path in debian/dirs, add Suggests for slim-altusmetrum

commit ea40561b36519a5dcabedabe18672b79ea5e9993
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Nov 22 10:18:44 2009 -0700

    update changelogs for Debian build

commit d6ba07e885bdc62ba64719c9d8cc42fcecbcb09d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 22 01:10:44 2009 -0800

    Automatically extract flight number for eeprom and telem filenames.
    
    Extract flight number from either telemetry or eeprom files and use
    that in the resulting filenames. To ensure that files remain unique,
    add a new field, -seq-%03d. This is appended only when the sequence
    number is non-zero as it shouldn't occur in normal usage.
    
    This also eliminates some duplicate filename creation code in the
    library and aoview sources.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 06cebd1026dc1bd6ee51526fa2d02905df3b3b37
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 22 00:52:58 2009 -0800

    ao-postflight: don't try to use missing gps sat data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a9ada1b538af3308e1b22bd024d9204521184173
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 22:12:21 2009 -0800

    ao-postflight: compute barometric alt for each GPS position
    
    Print that to the --gps file, and use that in the --kml file for the
    altitude. Gives a very different picture of our flight tracks,
    presumably far more accurate (at least in altitude).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b84b634d9ae8ce6ab1c02833a3ed8514404e1ca3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 22:11:45 2009 -0800

    Don't crash if --plot isn't passed on ao-postflight command line
    
    Crashing is not nice.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2d77c18b15834046b7b79d49d87211828f2409e9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 21:10:09 2009 -0800

    Convert telemetry file GPS satellite information in cc_log_read
    
    The satellite info wasn't being correctly converted from telemetry
    files to the data log structure, so ao-postflight was not seeing it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1e7fb61700f1f6f2ed5fdbc4380d7187b0cd187b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 21:09:03 2009 -0800

    Fix --plot arg handling. Add -all option.
    
    The --plot file name handing is special as the library wants a
    filename instead of a stdio file pointer.
    
    Add a --all option that just creates all of the possible outputs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 199f0cecae22645140185238682b9e1aba0e5715
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 20:36:20 2009 -0800

    Make TD print 0000-00-00 for invalid dates.
    
    This 'shouldn't' happen, but in case it does, I want to know about it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 238d03462a56dc1b7c871608cb00f961a88c1b97
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 20:35:22 2009 -0800

    Make ao-postflight create filenames using input filenames.
    
    Instead of requiring the user to provide names for the various output
    options, just create them from the input name by replacing the extension.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1a3b4c02a01187f8b7b9a9c97712476d0007ab35
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 19:52:26 2009 -0800

    Document ao-postflight --gps and --kml options.
    
    These were missing from the man page, but included in the --help output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80b23f3044a654d61212891a61fadb8a3a4e5572
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 21 18:57:45 2009 -0800

    Decode HDOP data from skytraq GPS
    
    The hdop data was getting dropped on the floor, but is rather useful
    when deciding if the GPS position is crazy or not. This reports HDOP *
    5 (giving a useful range of .2-50).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8f036ee7cd30ce3ed2e5cc8501914a4c19b73875
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 20 13:19:02 2009 -0700

    update changelogs for Debian build

commit 87e6f3e5c1688503ab8595912d8d6eb7139830b7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 20 12:16:37 2009 -0800

    Eliminate SiRF state values from ao-view.
    
    With Skytraq not having any visible GPS state information, just
    remove this from the display.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8065b8146a31438e66f83c13b99281ec47439a73
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 20 11:56:48 2009 -0800

    Add GPS date/time output to ao-postflight.
    
    GPS date/time information was already being stored in the log, it just
    wasn't getting displayed by ao-postflight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6894541e0ee144bfc689cc02d4ed333711d3b500
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 20 11:55:28 2009 -0800

    Reduce igniter firing time from 500ms to 50ms.
    
    Given that the system will brown-out with the longer pulse, it doesn't
    make sense to even try; failure at 50ms probably indicates a short.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b75aa1c825b84bd7fa1578320fbc7e904c373a7d
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Nov 19 21:43:13 2009 -0700

    fix typo in comment

commit c2f661b75ec035f6a3f700962290ef297f9ab0af
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Nov 20 11:44:06 2009 -0700

    update changelogs for Debian build

commit b0d7e3f9c9322542e9b649bb6ad7f7e5bb99dffa
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 15 16:20:18 2009 -0800

    Stop using SiRF state info.
    
    With the switch to the skytraq GPS unit, we don't have the same level
    of detail in the GPS stream, so stop reporting that in the telemetry
    stream, in the UI and writing it to eeprom.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 524665fc221b0d483453c67b7211e282cebc8980
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 15 16:04:41 2009 -0800

    Add date to GPS data, captured from GPRMC packet.
    
    Pull the date out of the GPS stream and send it over the telemetry
    link and write it to the eeprom.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ee279ba76c2a79d142c466f19ef758cf4c01d70
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 15 15:59:01 2009 -0800

    Add flight number to telemetry stream.
    
    This makes it easier to tie the telemetry and eeprom files together as
    they're now both labeled with serial and flight numbers, which should
    be unique.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6391c89bd5b89f5f46255b8365c658a873e5959a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 15 15:53:01 2009 -0800

    Switch order of serial/flight in ao-postflight summary

commit 9b06e294e2777f69bcf5e98789c3f5477097d53b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 15 15:51:58 2009 -0800

    Enable telemetry receive in ao_view

commit 4cffc9c4b079e39c8196ddbaf91129cda6df7f8b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 14 22:24:37 2009 -0800

    Share telemetry parsing code in cc library.
    
    ao-view had a private copy of the telemetry parsing code which
    included the ability to parse the newer version of that file. Those
    changes have been moved to the library version and the private copy removed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0e0db8ca3af4c07bae909938486766c646bf580b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 14 22:24:09 2009 -0800

    Provide a dummy 'uninstall' target in the src directory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c654a9369294c9b8066c33f91161d8005b96680
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 14 22:17:24 2009 -0800

    Loosen tolerances for main->landed transition
    
    Detecting that the rocket has landed is required for the system to
    flush the eeprom log and re-enable the RDF beacon. This patch changes
    the landed state entry requirements for the accelerometer to require
    only that the accelerometer stay within a quarter of a g (down from
    1/10g) and changes the testing interval from 20 seconds to 5
    seconds.
    
    The requirement that the barometric altitude be within 1000m of the
    launch altitude and that the barometer change by no more than 0.05kPa
    are unchanged.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 03092d1a72a9651711e22c58dca6d6aba5705c5e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Nov 14 16:35:12 2009 -0800

    ao-postflight: fix sloppy gps sat data realloc code (was crashing).
    
    Realloc'ing the wrong data, and failing to set the realloc'ed size was
    causing ao-postflight to crash while reading long logs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adf656192441eb7f44792955c86e469145477e29
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 5 22:11:59 2009 -0800

    Return radio to telemetry settings when packet system closed.
    
    To receive telemetry after disabling the packet system, the radio must
    be reconfigured for telemetry mode.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 83afdbdc154fe013bfe35ce5ecf1d61570b04ed6
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 5 21:45:00 2009 -0800

    Add reboot command.
    
    This resets the processor using the watchdog timer.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0358988ac0ee25a564d48af79b1c3fb0c0fe0a88
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 5 21:44:31 2009 -0800

    Add Watchdog Timer Control register definitions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4114210e0b813f4af99d0cb7755ad2ac2c4b120e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 5 21:43:21 2009 -0800

    Move ao_match_word from ao_ignite.c to ao_cmd.c
    
    This is a generally useful command line utility.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a79a04ddb0b3ee64de34e366f71a0f6db509c01
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 4 21:59:51 2009 -0800

    Stop recording in ao-dumplog after receiving an invalid block
    
    If no samples in a block are valid, assume the flight log is over.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 843ee489aac34ad6d81f55f1c85fb9eecc42d86b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 4 21:59:12 2009 -0800

    Flush pending input when switching to remote packet mode
    
    Any pending input would just confuse the application, so pull it off
    the link and dump it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 036400a2db303f3db3be7cc0426f88359c6bd2b1
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 4 21:42:51 2009 -0800

    Explicitly use USB I/O routines in packet code
    
    Using the implicit stdio functions (putchar/getchar/flush) would
    result in essentially random redirection of each, depending on whether
    the packet code had characters available when getchar was called. This
    would cause lockups in putchar.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3ece984f4d72b4f720a5efdfaad7cff77a93d676
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 4 21:32:07 2009 -0800

    In USB pollchar, wait for packet before re-checking USB out len
    
    This probably wouldn't actually cause a problem, but it seems more
    reliable to wait for a packet interrupt before re-reading the packet
    OUT len register. This could avoid spinning while waiting for a USB
    packet, which seems like a good thing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc62bb254085cc705203b57260c04ac5e14c6611
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Nov 4 21:29:37 2009 -0800

    In packet master, move USB flush from packet thread to echo thread
    
    This keeps the packet thread from blocking on USB and also makes the
    flush happen after every packet (slightly more USB traffic, but
    packets are slow anyway).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 27ebaf8e13aed06bb1ea6e770f767495a02be6c5
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 3 01:27:37 2009 -0800

    Add ability to dump eeprom data over radio link.
    
    This adds a '-R' option to ao-dumplog to redirect the connection
    through a USB attached TeleDongle over the radio link to a remote
    TeleMetrum device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1de322b960005c9a16051afa1881fadb00f4bcd6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Nov 3 00:40:38 2009 -0800

    Pass accel calibration over telemetry stream. Telemetry data format change.
    
    This allows the ground station to convert the accelerometer sensor
    values into acceleration and speed data. This requires a new telemetry
    data structure, and so TeleMetrum and TeleDongle units must be updated
    synchronously. ao-view will parse either telemetry stream, and the
    serial format from TeleDongle now has a version number to allow for
    future changes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b529e5e8998702986909111a457f3ce9932e1ccf
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 23:48:29 2009 -0800

    ao_flight_test was using accel value for pressure too

commit f57bea012d4fbca097df0d98fcd30eb4abd9701a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 21:47:41 2009 -0800

    Reformat ADC values to show all 16 bits

commit 79718e798e96567f0ba11c61f187e432fdcf95ee
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 21:48:16 2009 -0800

    Remove "f" command

commit a4137263b69864c524d39c6ff88a0225fd06e79b
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 21:47:15 2009 -0800

    Remove "d" command

commit 47f510464907d2b9488109c96ade87a41d878842
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 21:46:39 2009 -0800

    Remove "l" command as ao-dumplong no longer uses it

commit 144db05f6b286a0450d486f69ce192632a2c0656
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 21:38:18 2009 -0800

    Add two-point accelerometer calibration.
    
    Calibration now uses two values, one upside right and the other upside
    down instead of a single horizontal value. This allows the use of
    other accelerometers and compensates for variations in the divider
    circuit to provide more accurate data.

commit 17611788aadc9460287145a340a7c18bf63766aa
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 2 16:54:06 2009 -0700

    update changelogs for Debian build

commit 7db9d86178ecfd58cc1c17ac9fcbdcfd2f13aaec
Merge: b219801 f9de200
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 15:47:40 2009 -0800

    Merge remote branch 'origin/master'

commit b219801fb0e5eaff7778d21701da977104522da3
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 15:45:58 2009 -0800

    Add ao_usb_pollchar to ao.h

commit b92333ff5e75bf96804359e9fbf464d3b518bd95
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 15:45:42 2009 -0800

    Disable interrupts while removing tasks from task list

commit d519564fd08d2defe1211de83ccbdfa3c7cfe702
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Nov 2 15:45:07 2009 -0800

    Add more docs to the README file

commit f9de20000794c97a04d5bc2476191864bd2af371
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 2 16:00:11 2009 -0700

    update changelogs for Debian build

commit 127c3125e5a4b86b8f304bc2889e313688c3d83e
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 2 15:59:12 2009 -0700

    update changelogs for Debian build

commit 6b1e77569e2fed3c44606ed268421df5d3ed4020
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 2 15:57:41 2009 -0700

    update changelogs for Debian build

commit 8203bfa58af32a1d07a44c1c151b200df0b65f15
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Nov 2 15:56:42 2009 -0700

    de-version the libreadline-dev build dependency

commit 0b483233118673cbc2cda1be6acd379df82bc95a
Merge: ca5d323 550482d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 20:59:02 2009 -0800

    Merge remote branch 'origin/master' into skytraq

commit ca5d323a3d206050d95f52a61e92c69e1f54e7b5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Nov 1 20:57:03 2009 -0800

    Enable packet-based communcation to command processor
    
    This splits the packet code into master/slave halves and hooks the
    slave side up to the getchar/putchar/flush logic in ao_stdio.c
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c1a9ce16b966a21c885bf3be31cbcb85368b3fa
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 31 01:30:22 2009 -0700

    No need to wakeup &ao_tick_count now

commit cd0d495d7ef276956e730196476daa70a4359918
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 31 01:20:26 2009 -0700

    Poke master to speed up packet rate when things are busy

commit 442b1ef18c8320d4e5329dc92bb5268a36058fc5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 31 01:19:41 2009 -0700

    Use ao_alarm for ao_delay so it can be easily interrupted

commit 4f7ed9ff484778381db647c27d2a34d0cadec41e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:53:03 2009 -0700

    Do more flushing in packet test code

commit 6a7aa1810a90a9216160aec55ec4bd02b3240e1b
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:52:44 2009 -0700

    Add RFIM register

commit bf65e0b2a1299b49adc2d339ab9d9c7599aded9e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:52:22 2009 -0700

    Send SYN packet to set sequence numbers

commit d46797e5c08d4955d516458185e2cfb51ee2d567
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:51:38 2009 -0700

    Use ao_radio_done to wait for TX to completely finish with packet

commit c5ec6fcfa1bd17aad0f85d2fbe603f1d125836e6
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:50:54 2009 -0700

    Switch packet code from timer thread to ao_alarm

commit b428faf74ae145126ec1da972028fcfe0b4b2b18
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:48:36 2009 -0700

    Remove reason from ao_dma_abort

commit 73db30b2f9128c37dc7fa075793a8862814ce044
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:46:21 2009 -0700

    Add ao_alarm

commit 251b0971f049cbf2f8db79a32729d47441ce65f3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:45:43 2009 -0700

    Wait for TX to finish sending data

commit 9b31f07fe3556896b3e997bba156e30ef5777a80
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 23:43:52 2009 -0700

    Add radio carrier command

commit 7b14c3e609749f4fc00dbd660541375048535218
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 30 16:39:15 2009 -0700

    Initial packet bits. Just testing transmission

commit 690fc263516d8beb6b24e86fbcd6588f42ce4e5c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Oct 21 17:18:49 2009 +0900

    Add keyhole-markup generation for ao-postflight.
    
    This lets you see the flight path in googleearth.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b657aa209b9ea3b3efd33a940283b3ba60a169af
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 12:59:53 2009 +0900

    Add ao_wake_task and ao_exit
    
    ao_wake_task signals a specific task to wake up.
    ao_exit terminates the current task.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d709a0688eff84e25e24d755850ef045d6b0c3de
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 16 12:56:45 2009 +0900

    Save some DSEG space by marking cmd functions __reentrant
    
    __reentrant causes the compiler to place args and locals on the stack
    instead of in the data segment.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 550482d953c491a5ede9f2d243493afb13289898
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:58:46 2009 -0600

    update changelogs for Debian build

commit 2de548f45d0f50b558acc83f57e1e2fc1223ab92
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:58:19 2009 -0600

    oops, forgot to specify the repo to push to

commit 68008ac11c2735ca53a1b474324df43f2f1d5cdd
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:57:33 2009 -0600

    update changelogs for Debian build

commit 513328ac5f7c25f9ee144ab6befbea60d69eed1a
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:56:50 2009 -0600

    automate push of updated and tagged master branch during debian/rules prebuild

commit 67bf7d388a6dd2dbf65575bf4f0423ad355b4f2f
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:54:44 2009 -0600

    update changelogs for Debian build

commit 23bc21a93ccb9f35917f283ac5df6ce0870df71a
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:54:16 2009 -0600

    undue damage from partial build

commit 7da56ad8576ef212ffb6cb573bdaf578453e3fe0
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:52:52 2009 -0600

    add support for tagging git repository on each Debian package build

commit 8d4aa4ee54f85f4951cdd7293d58aaa405cfcdc5
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:49:34 2009 -0600

    update changelogs for Debian build

commit 241a860fe856b1dfad6e792736313648300d5c24
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 16:48:43 2009 -0600

    flush repetitive junk out of debian/changelog, and update the prebuild target
    in debian/rules to put git commit details into the Debian changelog

commit 6c4cdc927b43736b39be29d23ac3dc723f69e4d6
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 15:57:19 2009 -0600

    update changelogs for Debian build

commit c57bd7fd2f80e50b0b4c87fccb024ab07c93773d
Merge: adf8764 2b76572
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Oct 12 15:57:08 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 69b6f6bb465163cf767bb68e0e4a716d8ad2b39c
Merge: bc77da6 2b76572
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 17:16:21 2009 -0700

    Merge branch 'master' into skytraq

commit 2b765728ce177e26899f6feef00bfdf6aeaf2678
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 17:15:38 2009 -0700

    Add apogee igniter delay.
    
    Provide for a delay after apogee before the drogue charge is
    fired. This allows TM to be used as a back-up altimeter.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bc77da68c9cb7d4cca483eadbbb7e9ccf71c0060
Merge: 46cccf6 8f7ea3d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 15:09:48 2009 -0700

    Merge branch 'master' into skytraq

commit 8f7ea3de7037f40b0ff462b60d503c19431ae62b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 15:08:14 2009 -0700

    Report igniter continuity in pad/idle mode via beeper
    
    one short beep = drogue
    two short beeps = main
    three short beeps = both
    one long warble = neither
    
    In idle mode, it does this just once. In pad mode, it keeps testing
    and reporting.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit adf8764bc4591795ba4e618ccbd6393fc6ce6450
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 10 15:11:23 2009 -0600

    update changelogs for Debian build

commit 541da6f3bbf81be93dfe3c01f7c8cfd757b28a2b
Merge: dfc73cb 5f26ad6
Author: Bdale Garbee <bdale@gag.com>
Date:   Sat Oct 10 15:05:50 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 46cccf62fb40514b5930fcb2ffdaf2735415c764
Merge: fb8f3fe 5f26ad6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 14:00:03 2009 -0700

    Merge branch 'master' into skytraq

commit 5f26ad663b3f60dddc9d967206e365f45dc4acd1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 13:58:16 2009 -0700

    ao-dumplog: switch to 'e' command, display progress
    
    Using the 'e' command allows additional checking of the data,
    including end-to-end checksums and detection of missing data.
    
    Progress is displayed by showing the recorded flight state along with
    a '.' for each eeprom block read.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb8f3fee6a1bab1e46d782e84405845cee2dadb4
Merge: 22856cf b8fc397
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 13:41:00 2009 -0700

    Merge branch 'master' into skytraq

commit b8fc3975bd92037a0cf53b0ff2b0e05ce0ba668f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 13:39:01 2009 -0700

    Send 0-length IN packet to flush USB after full packet
    
    USB bulk transfers are a sequence of maximum-sized packets followed by
    a short packet, which signals the end of the transfer. When the last
    packet of the transfer would be a full-sized packet, an additional
    packet of zero length is sent to signal the transfer end.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 22856cf8bb0f5e1f37c9b774132d9ef6934526ed
Merge: 2f76034 e29961f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 11:44:20 2009 -0700

    Merge branch 'master' into skytraq

commit e29961fdb2a48874c895829880eadbf13e094c0c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Oct 10 11:43:31 2009 -0700

    Add channel menu to ao-view.
    
    Sets radio channel when TD is connected, saves selected channel in
    gconf database.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2f7603490a169df8f18b565db4fa967832ffc9bd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 9 22:48:29 2009 -0700

    Build two versions of TM, one for SiRF, one for SkyTraq
    
    This creates two separate images, depending on which GPS unit is
    connected.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33b0b6f2f2e07de105619a7b463226d2813152ab
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Oct 9 22:02:40 2009 -0700

    Add support for the SkyTraq GPS unit
    
    This is a build-time option selected by hacking the Makefile at present.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a3771bfc5ce740f9d89193e9f8b1d7987aa57264
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 6 20:06:00 2009 -0700

    ao-view: fix snd_pcm_open return checking
    
    I don't know how this code was supposed to work before...
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac4b8a73848f434999a532eab4665253c267c597
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Oct 6 20:05:36 2009 -0700

    ao-postflight: dump out GPS signal data
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dfc73cba1bee8b121e00e8cba45e7dfaaf79e9d8
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 21 22:46:59 2009 -0700

    update changelogs for Debian build

commit 459ff3d377297f80ee2fba0df0a29ff6603467a1
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 21 11:00:32 2009 -0700

    update changelogs for Debian build

commit 327c64305a59f48ababf19875874a550af6b9cef
Merge: c8a81a4 74f0fb4
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Sep 21 11:00:22 2009 -0700

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 74f0fb4dd189abc1d5027c64fa5a648a6003285a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 20 13:33:59 2009 -0700

    make bit-banging reset script actually reset

commit 7ea371a09385e2a93199f78685e8cb86793ed104
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 20 13:33:26 2009 -0700

    Add --gps option to ao-postflight

commit bc7ccb339e538a0e6120db0e5c0d9130c565e0dd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 20 13:32:59 2009 -0700

    ao_rawload: Don't reset after we finish loading

commit c8a81a419f7f2331624f90bd6c107a86f6b04451
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 20 09:21:00 2009 -0600

    update changelogs for Debian build

commit df42ccaaf468cdc5d93cbd1c001f58df58419722
Merge: 0b24e40 078e9cd
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 20 09:19:28 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 078e9cdbdb388b22c6151f76ff0660fc14b8ef55
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Sep 10 11:53:06 2009 -0700

    Plot raw accel data for the motor accel section.
    
    This shows a short sequence of accelerometer data without any filtering.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8b485d937ff148848ebda7f9ca6be29bb1de1f16
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 21:02:48 2009 -0700

    Show acceleration only during boost phase.
    
    We're interested in motor performance; the rest of the flight is
    boring, after all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9e660315e1bd2bf71ab1c0574e895e1f7608a58f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 21:01:44 2009 -0700

    Fix cc_period_make to not get stuck on samples with matching time
    
    When two samples have matching times, step to the second one;
    otherwise, we'll get stuck forever.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 932f1539b38567e565fd484171c13539b1467308
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 20:26:17 2009 -0700

    Color plots, integrate only flight portion of data.
    
    Telemetry files have piles of pad data which shouldn't be integrated
    into the velocity data as it tends to generate huge values from the
    noise of the sensor.
    
    Also make the data lines colored to keep them visually distinct from
    the rest of the plot image.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9177f5f4e9d832558ddd9ab227c4511f6201e7e5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 18:11:24 2009 -0700

    Update usage and man page for ao-postflight

commit 0b24e4034f93010372a3d084668d10f0e4a2c2e1
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 18:01:20 2009 -0600

    update changelogs for Debian build

commit a5e94aa0677070a051714443cf7fd7e2b5e90269
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:59:47 2009 -0600

    need a run-time dependency to pull in the cairo module

commit 97acef95cc9843998963921459fdd71dd7eaa6b4
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:48:23 2009 -0600

    update changelogs for Debian build

commit 3f95a5abbf8ada70328ced45fbb2781ed1cb3d29
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:48:10 2009 -0600

    more build deps for plotting lib

commit 9d7e96e323d652de08b2f2a73e0eb3c321080185
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:47:56 2009 -0600

    update changelogs for Debian build

commit ae4e131b61244e06020b82919e31e05dd7dba88f
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:46:39 2009 -0600

    update changelogs for Debian build

commit 37e6c9a492a1d51373bf9333fb3172e0c377720f
Merge: d256f82 2e6686b
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:46:10 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 2e6686b1e183c66188ea447b8a54e4c29402443b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 16:45:47 2009 -0700

    Use plplotd instead of plplotd-gnome2

commit d256f8204e9fce53ae4309562bb4c0cde1fae43e
Merge: 0fc344d 32d3536
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 17:34:08 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 32d3536706324808df6cd02248a236302b831571
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 16:24:35 2009 -0700

    Add plots to ao-postflight using the plplot library
    
    It's not perfect, but it generates .svg plot output.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0fc344dfc031a8b1eef7cc40efb1d5ba7782269d
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:15:57 2009 -0600

    update changelogs for Debian build

commit 4b0de757874c0ecaf38e3dfd3beefc398150e3d5
Merge: 773c4ff d0eac98
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:15:53 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit d0eac989b1ffc8ae30ba12da403eb4bf1ad42d6b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 13:15:10 2009 -0700

    Don't look at NULL strings (summary_name)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73f4a57239f770aff603b961169c0e2cfe2c276b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 13:08:54 2009 -0700

    Use pressure speed for drogue and beyond states. Fix differentiation time.
    
    Drogue state should always use pressure speeds.
    
    Differentiation code was using centi-seconds instead of seconds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 773c4ffbc1d2e02eb02cfa543a077a408986da30
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:05:55 2009 -0600

    update changelogs for Debian build

commit 45ede4a4b203ef9da5bf05c49cb9c5a2e6382ec5
Merge: 45e2938 e35e485
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:05:51 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit e35e485ffe6b26034788ab295121bc2693b7eec1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 13:04:31 2009 -0700

    Initialize summary_name and detail_name so stuff appears on stdout.
    
    Uninitialized variables lead to mysterious results.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 45e2938121411d1fc9b3aec3fdeaaeb3c90db5ed
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:02:14 2009 -0600

    update changelogs for Debian build

commit d42ebf0661ecf15455e5051de1e16ae66f8dd857
Merge: 384dbe9 7a19aac
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 14:02:09 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 7a19aac5e881e635962a64fff73027ca2143b96f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Sep 6 12:51:48 2009 -0700

    Add DSP code to filter data, allowing for integration/differentiation
    
    This adds the computation of speed from both accelerometer and
    barometer measurements and then presents a periodic flight profile
    using filtered data as a detailed flight record.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 384dbe9fc7fa8e4e5dceec5e150f0f1d3383bbdc
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 10:40:06 2009 -0600

    update changelogs for Debian build

commit 35c54b3a278fa9bc2bc7f4b5ee04866697c93ba0
Merge: 4f8eff7 6d018ab
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Sep 6 10:39:23 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 6d018ab933832e2d80bb1564c339d9fb18b57be2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 5 22:45:49 2009 -0700

    Handle vageries of .telem files in ao-postflight
    
    Telem files have multiple entries of the same state, and sometimes
    long gaps between recordings. Deal with this as best as possible.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit c46e832b28820d7c5be4efaacbbd7c0607927fe5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 5 22:03:31 2009 -0700

    Add simple post-flight analysis tool (ao-postflight)
    
    This tool reads either an eeprom or telem log file and displays some
    rudimentary data (max accel/alt for each flight stage).
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26f56b51bd11aa91f1d77b81827b49c28cb6ec5f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Sep 5 00:29:26 2009 -0700

    Add ao-dumplog to capture flight log from command line
    
    This duplicates the functionality of the flight log stuf in ao-view,
    except from the command line where it belongs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 73adae3661160d410dcc802873b530d255c210e5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 15:30:22 2009 -0700

    Add --device/-D support to the command line tools and manuals
    
    Use the new cc_usbdevs_find_by_arg function to locate suitable target
    devices connected via USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4f8eff7401ee2d8092ab36fa33411f9b23dda880
Author: Bdale Garbee <bdale@gag.com>
Date:   Fri Sep 4 16:03:55 2009 -0600

    update changelogs for Debian build

commit 332b056459b1352e233a8bf5f08498df12d32160
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 15:01:32 2009 -0700

    'fix' ao-eeprom to read two blocks at once. Work around kernel bugs.
    
    The kernel appears to leave serial data undelivered at times. Reading
    two blocks at once appears to make it relinquish the queued data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit df88ae4c5f229efcc0ea5cb0a81fc2bb8f96fea2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 14:23:02 2009 -0700

    Add 'ao-list' utility to show attached AltOS devices
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0935d6a7e907e20381a42882ae728051f9bece02
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 14:21:19 2009 -0700

    Parse the USB serial number as an integer.
    
    AltOS devices use simple integer serial numbers, so parse the USB
    value as such to make matching values more forgiving.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0c771d999914f9d17c723900f2987acc45fd0fbb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 13:00:02 2009 -0700

    Move usb scanning code to ao-tools library
    
    This will allow the scanning code to be used by the command line tools
    as well as the ao-view GUI.
    
    Now that ao-view depends on the ao-tools library, it has been moved to
    the ao-tools directory as well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 15341b6e6dcf52df083d6aa37ef881ea6ad48ee5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 12:25:37 2009 -0700

    Set all of the values to reset the radio for telemetry
    
    Was sizeof(rdf_setup) instead of sizeof(telemetry_setup) when
    resetting the radio back to telemetry data mode from rdf mode. With
    the length value removed from the rdf config, these two arrays are no
    longer the same length, and so the last config value was not set
    leaving the radio sending garbage.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fee46389b70a624ab5b1128a8b4c3083c7747bcb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 11:46:55 2009 -0700

    Make RDF beacon only run on pad and after landing.
    
    It's pretty much impossible to RDF the rocket during flight, and it
    interferes with the telemetry data stream. Leave it enabled on the pad
    so that radios can be tested, and then re-enable it once the rocket
    has landed.
    
    This patch also turns the rdf 'on' time into a parameter so it can be
    changed, and then sets that parameter to 500ms, once every 5 seconds.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 54545640b0db7747137655f84bc67fd290ecb904
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Sep 4 11:45:52 2009 -0700

    Add back the RDF tone generator
    
    Tracking the rocket on the ground may be easier using tones than using
    the digital data stream, so we'll try that and see what we think.
    
    This reverts commit 3a3bfd471a868d546d83cdc431b53c8f5208edb9.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9fafee109e96435c96639b21211cac0500673a63
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 2 23:18:15 2009 -0600

    update changelogs for Debian build

commit cb4a73f3b65ba72f645fd37ab8712829c9537bf8
Merge: 9ddd869 e2e449d
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Sep 2 23:17:37 2009 -0600

    Merge commit 'origin/master'

commit e2e449d5c23356e913f312de1fb2611a9dd5a352
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 2 22:01:52 2009 -0700

    Remove bit-banging debug support from TM board builds
    
    Our current TM boards don't have the wires to do bit-banging to
    another cc1111 board, so it doesn't make sense to fill up their flash
    with useless code (and the 'help' text with useless commands). Leave
    this to the TI board until we have boards that can serve as debug dongles.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit acea083d80e1ecc4287083519ea666964016b257
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 2 22:00:37 2009 -0700

    Make the ao_log_record structures 8 bytes again.
    
    When the GPS signal strength data was added, the structure was
    accidentally extended to 9 bytes, making all log records 9 bytes
    long. While not a serious problem, this left log records spanning
    across eeprom block boundaries, which seems like a bad plan.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7d39f17684feb49ac8a0017902158f298696e37c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Sep 2 21:57:54 2009 -0700

    Make eeprom reads and writes across block boundary work
    
    Reading and writing across the block boundary was not stepping the
    eeprom position after the partial i/o operation at the end of the
    first block. This meant that the operation would re-use the end of the
    previous block, either re-reading or re-writing it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9ddd8696b4004ccc03238d95a8c2a1d07075e0fb
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:48:03 2009 -0600

    update changelogs for Debian build

commit 6926c4ab5d87a8f2eb4fcde2c673fb3a4639e115
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:47:44 2009 -0600

    pixmap file should not be executable

commit 1495e2f27acde3743c3764a0c31ee082224d6c64
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:42:55 2009 -0600

    update changelogs for Debian build

commit c8c5b7963babe8eb16e2651fba9cd2c8d1cba74e
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:42:37 2009 -0600

    deliver an icon for the Debian menu system

commit 591b99c232e780246fc07841c09c8c4e7835facb
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:26:00 2009 -0600

    update changelogs for Debian build

commit b34474c1f3083e73b7184d519f54d4c8031836fd
Merge: 8df1697 0d65bff
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Aug 31 16:25:32 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 6358041f846ba9a20fa650c367d907dc4336e54c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Aug 22 13:38:56 2009 -0700

    Enable GPS degraded mode, set 10 sec degraded timeout.
    
    No reason not to let the GPS report solutions whenever it likes, let's
    see how this works.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0d65bff443c17d4d98c18b620ec075ab66b30efd
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Aug 21 10:47:46 2009 -0700

    Turn off GPS tracking data when not present in data stream
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8df169791835510d96c11a3b0aa3cc5b79fa7fde
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:21:23 2009 -0600

    update changelogs for Debian build

commit 42ab6d52540d0326ef89e9d57954b08248558468
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:21:06 2009 -0600

    fix location for delivery of sources.list fragment

commit 977f5dc0bc7c666dcc1f21db77416efca0d696aa
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:11:11 2009 -0600

    update changelogs for Debian build

commit 8d4d6655f1b4c2fbc522fd255bfb75406e5ddaef
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:11:00 2009 -0600

    oops, aoview is now ao-view!

commit b9a97aea65f871fd287bc0bb566d8664766f4afd
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:07:16 2009 -0600

    update changelogs for Debian build

commit 21e3dd0affac89919e5d0e29c6e9eb1eacb51801
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 02:06:49 2009 -0600

    enable support for Debian menus

commit 0087c1776e0253fc2bd3b86f15bf9d1b32bdc45a
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 00:52:57 2009 -0600

    update changelogs for Debian build

commit 4486d9156e19e4280b42bcd422d81d04f2d04a92
Merge: dd09f0b 33edd62
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Aug 19 00:49:24 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 33edd62992a32b0ec8ca66d879fa300871db5937
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 23:38:16 2009 -0700

    Update ao-view to add GPS satellite tracking data
    
    This adds another column to the display to hold per-satellite GPS
    tracking data and a count of the visible and locked sats.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 29687cbd462a332d9a36ed87500c5b737dcae3f4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 22:35:15 2009 -0700

    Handle GPS satellite tracking data
    
    SiRF message #4 includes signal strength and GPS engine state for each
    of the satellites being tracked. This data is now parsed and sent to
    eeprom and the radio.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dd09f0bc2b950c00f3b489878cd69ad8a003f46c
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 18 21:57:01 2009 -0600

    update changelogs for Debian build

commit cd5ce661e2a8f9694933358ccb5b916fbed089c2
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 18 21:49:39 2009 -0600

    add support for building Debian package

commit d996aa9b32fb0eb385bd3d158256c29788a42fe3
Merge: b3b2d3c 7d4ceb7
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 18 18:56:09 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit 7d4ceb75a454e6c9b3fe0bd934fadcb5104dea36
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 17:55:22 2009 -0700

    Add ao-ejection.1 man page
    
    Document the input requirements and output format
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b3b2d3c475a135084b5628c730fc6fca1ba0817b
Merge: 4685fc5 da12b89
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 18 18:36:03 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos

commit da12b89fb056a68e65ba363fef91d266727cb685
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 17:30:43 2009 -0700

    Create ChangeLog from git log

commit 7d69e2b3715faed10ce21ad562fc4d25dfc5f9c1
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 17:29:29 2009 -0700

    Fix ao-bitbang examples to not have . in the first column

commit 4685fc541466afbeefc151bcb64cd054739c048b
Merge: 1c2a0b6 c29275b
Author: Bdale Garbee <bdale@gag.com>
Date:   Tue Aug 18 18:09:38 2009 -0600

    Merge branch 'master' of ssh://git.gag.com/scm/git/fw/altos
    
    Conflicts:
    	ao-tools/ao-bitbang/Makefile.am
    	ao-tools/ao-eeprom/Makefile.am
    	ao-tools/ao-load/Makefile.am
    	ao-tools/ao-load/ao-load.c
    	ao-tools/ao-rawload/Makefile.am

commit c29275b72438637d46d7a50742882d2736eb176a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 15:21:57 2009 -0700

    Add manual pages for remaining commands.
    
    Manuals written for ao-bitbang, ao-eeprom, ao-load, ao-rawload and
    ao-view.
    
    Manual for ao-dbg updated to reflect program name change.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b03d620722dc54630539afba40720c30de69b2d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 12:19:31 2009 -0700

    Use --tty/-T on command line to specify target device
    
    Also, use the ALTOS_TTY environment variable in all tools. Note that
    the magic value of "BITBANG" switches the library to connecting
    through a CP2103 instead.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c790fe859dff062692964338091ffbbcdf63257
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 12:40:24 2009 -0700

    Rename tools to ao-<foo>
    
    Use a consistent prefix to make it easier to remember which programs
    belong to this package
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c2a0b6653623b689d68d7349a6b2dce3e20a4a6
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 13:36:54 2009 -0700

    re-add debugger sources

commit 9a9cce5510b87252f863239ac807b9fb4395b288
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 12:19:31 2009 -0700

    Start working on using getopt for the tty name

commit 9789ca5e8caa9a013e804f307b9da380e147bd75
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 12:40:24 2009 -0700

    Rename tools to ao-<foo>
    
    Use a consistent prefix to make it easier to remember which programs
    belong to this package
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a5782398d968e7cb11f7203afada7c216f233b3b
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Aug 18 11:34:28 2009 -0700

    Remove unused cctools code paths for old libusb and cp2103 ioctls.
    
    Communication with the CP2103 board has gone through three revisions,
    first using ioctls supported by the CP2103 kernel driver, then using
    the old synchronous usb library and now using the newer libusb
    asynchronous interface. There's no reason to keep shipping the old
    stale code now that the new stuff works reliably.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7cba411de0780c65e3490ab67186a514f0ea42ec
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Aug 17 20:47:31 2009 -0700

    test for sdcc, nickle and readline
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f48dcffae761700355a17b59345d55a60703f0c4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 9 20:43:10 2009 -0700

    Sync USB data after each memory write command
    
    This makes sure we flush the USB link often enough for the other end to keep
    up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cd5456f18e4b39ad76d5549df91a0e0cfb18a2e9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 9 16:08:07 2009 -0700

    Handle partial ALSA PCM writes
    
    The ALSA spec says that snd_pcm_writei will not return a partial write, but
    at least on the OLPC, that's not true. Deal with this.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3056cb8eef5aee0dcd342488386355d8b8f574c8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Aug 9 15:55:19 2009 -0700

    Check more alsa return statuses

commit 8ddf3345afd8cbf638e81993633f7861d8dbca63
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 01:47:34 2009 -0700

    Don't report distance to rocket without valid GPS
    
    When there's no valid GPS data, don't try to report the distance and bearing
    to the rocket after landing.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbcb7b20fa701a6e534d38e307839466545668e3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 01:05:33 2009 -0700

    Add B command to set serial baud rate
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 91b023e7e4eeed838e0320d2ddac0f6aac39e565
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 01:05:13 2009 -0700

    Get rid of spaces after minus sign in climb value

commit 28be20cf914fb34dc3c776519708d0f02091764e
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 01:04:39 2009 -0700

    Switch to 57600 baud for GPS data

commit d3f76ce58b9c0ed2e5a9fe3bbc7fb9cb38247714
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 01:04:17 2009 -0700

    Drain serial port before changing speed
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d7c2d358ed8a1afc9f0ba2bd830b10f6b56dc7b1
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 00:44:42 2009 -0700

    Display last known GPS coord while unlocked
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5195fcfe239e430e1f9f11774c9a245c7b29dae9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 00:44:01 2009 -0700

    use g_source_destroy instead of free on serial object

commit 1e5e98bd8f5ea0bc15592de454e3629383462371
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 18 00:43:22 2009 -0700

    Trim aoview_serial_set_callback args down to just port and callback

commit 08f37056deec25d77062bc411a04033401b033a5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 22:11:03 2009 -0700

    Reset GPS at boot time

commit 1150aa850f5a025b849556e32c4dddb27937d9af
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 22:10:43 2009 -0700

    Fix up serial debug output

commit 2a7956a64935246475f92d44c08369e0230b676a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:34:13 2009 -0700

    Allow the GPS port to run at 4800 baud if desired

commit 8d650769c319261c97f5e68eff9138207b95c0f8
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:33:53 2009 -0700

    Initialize the GPS serial protocol state
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab40d224b39ba6d29c4056e2d2c365e1eb3d3793
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:33:18 2009 -0700

    Use uint8_t for comparisons to avoid int conversions
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6749bf24792bb41ca700cf4b8e5e1ac1a63cbf0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:30:53 2009 -0700

    Add AO_GPS_RUNNING state.
    
    This tracks whether the GPS receiver has ever sent a valid report to the
    flight computer, allowing the user to tell whether the GPS receiver is
    working at all.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a1da7e871aee75308bc05ce1b7a0dc402e4c9509
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:25:35 2009 -0700

    Add M command to monitor serial bytes

commit ddfa2308c0be4c002f982ae9da6032ee7854117d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 21:24:45 2009 -0700

    Support the not-connected GPS state

commit 34f148500df427c148188c0ada20bf914a7c74ba
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 19:23:10 2009 -0700

    Use 57600 baud for GPS. Clean up gps init.
    
    Assume GPS is either in 4800 NMEA or 57600 SiRF mode, send just the sequence
    to get from 4800 NMEA to 5760 SiRF.
    
    Also, eliminate threads from the gps test program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2deca0c52cd6cfb4baceb59c8a5458344bada338
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 17:09:20 2009 -0700

    Try harder to get the GPS receiver serial link sync'd up.
    
    We cannot assume that the GPS receiver is in any particular state when it
    boots, so we try to send the serial configuration at several rates and hope
    that it eventually sees something that it likes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31d5670a9144b943ce9c8cb00deb5fb659af0b1c
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 17:06:18 2009 -0700

    Rolling average for pad location. Say 'GPS ready'.
    
    Use a rolling average for the pad location, instead of just averaging all
    positions. This filters out old (presumably less accurate) values eventually.
    
    When enough GPS samples have been acquired, say 'GPS ready'.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bfe1e76c82738baaf65abbc58c3244a07ea8fefe
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 16:22:51 2009 -0700

    Split GPS data into a separate column
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5f0179652e8bb85add9067e5253e981c60f2c51e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 16:03:35 2009 -0700

    Fix up SiRF parsing and test code so that it actually works
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0b35447d05a0c7eaf4fefcbcf0065fe3320bba82
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Jul 17 13:58:14 2009 -0700

    Add host-side gps protocol testing program

commit fef7334bddb9fccfbd6deab7d5d466ab3e76323a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Jul 11 00:56:13 2009 -0700

    Hook aoview directly to alsa
    
    This skips the flite internal audio stuff which opened and closed the audio
    device for each phrase. This caused the first part of some phrases to be
    missed when using an external audio device.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 80cadf44f5f1accd6ddfca25c2af8d4d424f26d9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jul 9 20:55:10 2009 -0700

    Show speed. Format numbers. Timeout and report final status.
    
    The speed value is now shown in the top label bar. Ascent shows
    accelerometer-derived data, otherwise it's baro derived.
    
    All of the numbers displayed are now given sensible printf formats so they
    don't contain way too many digits.
    
    Instead of doing periodic reporting based on flight tick count, data is
    reported every 10 seconds based on wall time. After landing, or when no data
    have been received for a while, final flight information is spoken.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 19630ef084866f4230e68ccf11284b30c68128b1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jul 5 08:35:28 2009 -0700

    Dont smash aoview_monitor_parse input buffer

commit e506ed4b6efb86eab50204658fcd433b987e3831
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 30 15:25:52 2009 -0700

    Integrate flite into aoview directly. Fix great circle computation.
    
    Use a separate thread for flite rather than a separate program.
    Save voice state to gconf.
    Add filters for replay file selection
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5b988e0146075d57434f8484e1ec9fcf3e183df2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 30 15:24:53 2009 -0700

    Make window taller

commit 696233b088645bba1aaa6aa6c5358c3ecfa5cd3f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 30 15:24:31 2009 -0700

    Use 16kHz voice

commit 2e06772c8b6fd74f86e640ed97f0d5bc8c095c2f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Jun 30 11:58:30 2009 -0700

    Add telem replay and larger labels
    
    Replays telemetry files in real time
    Shows height/state/rssi in big values at the top.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 566dde161385263700eaae51095eecfa9b5972ee
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 29 23:06:47 2009 -0700

    Update aoview/.gitignore
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4ca2d910f3be689fd3c78a4f1be0555d6b1a30c1
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 29 23:05:27 2009 -0700

    Use flite to announce flight state
    
    This uses the flite voice synthesis library from festival to announce
    altitude and speed information during the rocket flight.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 527d7c803ed9597b210634018cb2eb9d048d9846
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 29 23:03:58 2009 -0700

    Add GPS speed and error data to telemetry and aoview
    
    Having switched to the SiRF binary GPS format, the velocity and error data
    can now be displayed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ee4919dd771b00e2a2dd1083c9528efa7baab50f
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jun 29 13:54:00 2009 -0700

    Convert GPS to SiRF binary protocol.
    
    This switches the GPS unit from NMEA to SiRF protocol at startup and then
    parses the binary data. The binary data uses a different encoding of lat/lon
    than the NMEA strings, and so the telemetry and eeprom data formats change
    with this switch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 49bf37767d2453869f2ca2c0832d1124322c66e0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 17 23:22:25 2009 -0700

    Add ejection computation utility
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e59520e343c2573b1b92c0b3c4aaa93e51bc55d3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 17 13:55:23 2009 -0700

    Fix clock initialization to not try to use 32kHz xtal on P2_3/P2_4
    
    None of our boards have a 32kHz xtal oscillator, instead we use those pins
    (on Telemetrum) for the deployment firing circuits. The old clock
    initialization code was switching from the 32kHz RC oscillator to the 32kHz
    crystal and overriding our use of those pins.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1c3cc12c08ddefbd6456a55c54ef87dd94d4ae9a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 14 17:25:34 2009 -0700

    Some kernels reference USB ttys as tty/tty* instead of tty:tty*
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f2cbd41332b1b63865c5f1a4e749419b469853a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 14 16:45:19 2009 -0700

    Rename state apogee -> coast

commit 5834a12c1d3d71105c9e3d1ceaf9f3ffac9ff1eb
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 14 16:39:28 2009 -0700

    rename states. launchpad -> pad, coast -> fast

commit 8c40f19acd09fe93d492c9355da8a1198c34b1c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jun 14 16:36:29 2009 -0700

    Disable monitor mode when communicating via usb

commit 7adea9c59c73acd52743446c74fb675e0a1d6d05
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 4 14:38:45 2009 -0700

    Format GPS seconds as %02d.%04d to avoid spaces in the value
    
    The aoview GPS parsing code doesn't deal well with spaces in the middle of
    the value, so pad the seconds field with a zero as needed.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a0e6bfee635b64092262936c858542318f6fc6dc
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jun 4 13:11:48 2009 -0600

    newer INSTALL file pulled in by autogen.sh

commit cf1e258d52b878df10b51a047709b10ecd51a68e
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jun 4 13:09:29 2009 -0600

    add a distclean target to src/Makefile

commit 176052b7c14fcad067835ecb550778faf67cf4da
Author: Bdale Garbee <bdale@gag.com>
Date:   Thu Jun 4 13:07:10 2009 -0600

    add lib to the front of the subdir list

commit 208bc15714c7b4020c017eef19011c4eb9ab51e2
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 4 11:20:10 2009 -0700

    Move build and debug tools to 'cctools' directory.
    
    These tools were merged in from the ccdbg package.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 17d2432a8b9c15963cd3b821f025ad33972ef477
Merge: 210dbaa 8a9a3f0
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 4 11:13:15 2009 -0700

    Merge ccdbg and altos sources into one giant repository
    
    Keeping these separate isn't making things any easier.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 210dbaa23cdacf3a6f2d6e23493e96ee2ac9bca7
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 4 10:41:34 2009 -0700

    Use autotools, move altos to src subdir
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8cce307bb3156584ba17ae5a787f645dfee5fb94
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Jun 4 10:25:30 2009 -0700

    Make menu seperator insensitive

commit 778cae8fc5a4b30e5045e4703316fc61ae18562a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 3 17:07:34 2009 -0700

    aoview: Add eeprom data fetching
    
    Fetches the last flight data from a TM device connected via USB and writes
    it to the flight log directory.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit bf140966e9649e75b884c8aa5f25ffbf9eed10ea
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Jun 3 10:57:46 2009 -0700

    Stop log dumping at flight end. Print 'end' at end of log.
    
    No reason to continue dumping data past the end of the flight now that the
    logging stuff has been demonstrated to work reliably. Also, to make
    automated log dumping easier, this prints out 'end' after the log data so
    that aoview knows when to stop reading.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 35ac66969abe24ca23776618306a59fc17770e06
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 31 09:22:01 2009 -0700

    Start adding bi-directional packet link

commit 3a3bfd471a868d546d83cdc431b53c8f5208edb9
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 23:17:33 2009 -0700

    Eliminate RDF tone generation.
    
    Now that we have a viable telemetry-signal based RDF device via TeleDongle,
    there's no reason to continue to waste power and bandwidth with a NFM tone.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4d83eef0fe1d24a845ab29a535dfc56e13e7ee20
Author: Keith Packard <keithp@keithp.com>
Date:   Thu May 28 23:17:25 2009 -0700

    Change .gitignore to match new aoload procedure

commit dcfcf3bec6788460b6fe8c239c80bad4526bd15b
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 27 22:01:37 2009 -0700

    Leave serial number writing to aoload
    
    Instead of building per-serial hex files, leave that
    process to the new aoload program
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8a9a3f02b951382573ff74dd6ce5a1c0f335fa86
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 27 21:53:15 2009 -0700

    Add aoload to load serial-numbered altos binaries.
    
    aoload is a custom version of ccload which edits the data before sending it
    to the target machine, writing the target serial number into the data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5a7a63c34b778e40a61ddabd16ec1af9a2be50c3
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 23 21:20:12 2009 -0700

    Fix aoview telemetry GPS parsing code to use correct columns
    
    This code was trying to pull the GPS data from the wrong columns, causing
    aoview to fail to display GPS information.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26988c3e7acb2fa832810475e43e08fd2867459c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 23 21:18:57 2009 -0700

    Parse both telemetry or log data ao_flight_test
    
    Change the way data is fed from files to the flight test rig to handle
    either kind of input file.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d6f5a0689023546464a71561f53fa2c943077c88
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 23 21:16:22 2009 -0700

    Avoid 16-bit overflow in velocity computation.
    
    Adding two 16 bit integers together can wrap around to negative numbers,
    this resulted in velocity values which never decreased, making the switch
    from coast to apogee state not occur.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aa6d87aeb616dd62f0debaded297232022b4f8bd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 20 09:44:55 2009 -0700

    Make file handling more general so it can be reused.
    
    The log file handling stuff will be useful for saving eeprom data, so pull
    it out of the real-time log handling code and make a general interface.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b730c8bcbce649cdddba935e1112aaae538bc526
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 23:54:44 2009 -0700

    Ignore aoview_glade.h

commit 91b07410122d0eaaf292cdb31c200925d45eaf2c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 23:36:21 2009 -0700

    Transmit computed ground pressure and acceleration values
    
    These are the last two values relevant to figuring out the state of the
    flight computer, and as they are computed by averaging 10 seconds of 100Hz
    sample data, they're a lot more accurate than anything the receiver could do
    on its own.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 71d1689759829f1bc8550f1a4d8c9f2dc90b2ab4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 23:18:09 2009 -0700

    Provide install target

commit f301b95e87c8ec1e3b58d595a05d486bede5e0c2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 23:13:20 2009 -0700

    Embed glade file in executable
    
    This eliminates install issues nicely.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 26361686d6fc63dc22d22285f0543c5c2c756fb4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 23:05:23 2009 -0700

    Add About dialog to aoview.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0f3233c49f43cd4e372e613303919ce4d50255b2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 22:44:19 2009 -0700

    USB device names can contain '.' too
    
    Depending on the hierarchy of devices, names can contain '.', so allow those
    too.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 33221277690e6ee30387c506c3f2b8237ed48efd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 22:43:34 2009 -0700

    scandir returns -1 on error
    
    In which case, the namelist is invalid, so don't look at it, and don't free
    it.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7cb9fb675f56bf30ab6bf0bcdc5cb679709ffe3e
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 22:29:54 2009 -0700

    Send computed accel/vel/pres values over the radio
    
    These computed values reflect what the flight computer is actually refering
    to for state changes, and will be useful in debugging the flight software as
    well as provide a filtered view of the data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 2c780d67b8a22d75a2da4b2af21fd35f0c6f5236
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 22:29:06 2009 -0700

    Handle disappearing serial devices
    
    Put up a dialog when the serial open fails, and shut down monitoring when
    the serial device disappears while running.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 69616104813fc5ba89fb3128d04fb9328961c59c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 22:24:53 2009 -0700

    While on the pad, zero out velocity every second
    
    We integrate acceleration to get velocity, but that means sitting on the pad
    for a long time can add substantial error to the velocity value. Each
    second, take the velocity value from a full second ago and subtract that out
    of the current velocity. Once we detect boost, this will stop, which means
    that as long as we detect boost within a second, we won't have subtracted
    out any "real" velocity.
    
    This keeps the pad velocity hovering around zero, which is pretty useful.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1234694eb903b204488ddc7cb30bcfe34bf1e677
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 01:29:06 2009 -0700

    Clear table, reset log on disconnect

commit 4316b6af86b37522038e642235c163fcaad52e96
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 01:28:16 2009 -0700

    Add pad lat/lon, max accel, max height
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4348281bd788a13ea700413537f12da3c00356e4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 00:46:09 2009 -0700

    Clean up GPS display
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ff68e38770351ddac3285ce275cd85adab01fd3d
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 00:45:38 2009 -0700

    Make aoview window taller
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit be3f4fed7b863c8cdaabe32b61b65a8b3cd11355
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 17 00:13:45 2009 -0700

    Add lots more aoview UI bits
    
    Logs data to files, displays current state in window.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 93d7ce8e054515ed7b166eb042ae7f47e564d21d
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 16 20:45:26 2009 -0700

    When logging starts up, right the whole ring to the log.
    
    This preserves the data pre boost-detect for later analysis.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fec4212a59a7b3321536b25707dcabc43c797c33
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 16 20:04:31 2009 -0700

    Abandon use of accelerometer for apogee detect.
    
    Integrating the accelerometer data to compute velocity worked for one rocket
    flight, but additional testing shows that it doesn't work in other
    airframes. Until we figure out how this should work, we'll rely on the
    altimeter to detect apogee.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 09771c644de54ae354e8f98af7ba74289b3c0fcc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 16 02:25:04 2009 -0700

    Add preliminary aoview code
    
    AoView connects with TeleDongle to present telemetry information in a
    reasonable form. Right now, it just displays information to stdout, but it
    does have fancy dialogs for finding the USB devices.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 37250b00f6286aee4b3b28604f5d463db3079a89
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 20:41:54 2009 -0700

    Discard usb output before connection. Handle USB reset.
    
    Discarding output before USB is plugged in allows threads that send output
    and do other things to work without a USB connection. Unfortuantely, there
    doesn't appear to be any way to detect when the USB link is disconnected,
    which means that once USB is enabled, future writes will continue to block.
    
    USB reset causes the USB interrupts to all be reconfigured back to power-on
    state.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9b974217958b1017e62d6c4f4568f547ccc30c58
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 20:40:42 2009 -0700

    Enable radio monitor by default in teleterra, teledongle and tidongle
    
    These ground loads want to monitor the radio constantly, and not require use
    of the 'm' command before listening.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 25fc03a333b2cfad0a93ebc385fbcf74b63c229e
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 20:39:28 2009 -0700

    Remove monitor/rssi functions from telemetrum load
    
    Telemetrum is now a flight-only load, use teleterra or teledongle for ground
    boards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 05493b98eb1ae4d30cb0b600849d70b03fa33594
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 20:38:11 2009 -0700

    Split out ao_state_names to separate file
    
    Allows state names to be used in programs without monitoring enabled.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d085d43701e3cdd2119e947a9ae45baa78c80318
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 14:29:30 2009 -0700

    Indicate RSSI with a blinking LED
    
    Blink the red LED at a rate proportional to the RSSI value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 055331d5f7d5adc40c348c3efd331a562dcda82a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 11:19:13 2009 -0700

    Make ao_flight_test show AGL altitude and positive acceleration under boost
    
    This makes the output more readable
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d91208fbf5fc7797b93087ef8619454c4bed0130
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 11:18:24 2009 -0700

    Make ao_flight_test able to read raw logging data
    
    Protect ao_flight_test reading functions so that a simple
    'script' output can be fed to the program and have it work correctly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d3dbd8949e1102220ad5fd0863f493c819b96e46
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 11:16:53 2009 -0700

    Print only RSSI when packet CRC is invalid
    
    Packets with invalid CRC usually contain bogus data, so don't print that,
    just print out the RSSI which may contain useful data.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8168820b667cc1deffab64dd81cb4e6e2e6eabe4
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 11:00:43 2009 -0700

    Accelerometer-based velocity values are invalid after apogee
    
    Because the orientation of the flight computer relative to the ground is
    unknown after apogee, the accelerometer data cannot be integrated to compute
    velocity. Main deploy is now based purely on barometric altitude and landing
    detection no longer checks for a low velocity value.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 24fdda44ff8604e40510b196ead17564d8f8cd3d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 10:59:04 2009 -0700

    Add velocity check for boost detect via accelerometer
    
    Bumping the rocket can cause a brief period of high acceleration, which may
    cause a mistaken boost detection. Require both a high acceleration and
    reasonable velocity to trigger boost phase.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7a1aa3fdbc0d1fae5e7ee027bf8904598c6ebe41
Author: Keith Packard <keithp@keithp.com>
Date:   Wed May 13 10:58:30 2009 -0700

    Typo in callsign

commit 497c89a7d08920630894b2605c3b6a0bdc4c229b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 23:11:06 2009 -0700

    Use recorded accelerometer baseline data in ao_flight_test
    
    With the flight computer recording a long-term average value for the
    accelerometer in the flight record, use that to prime the flight test code
    when running a log file through the simulator.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ba3c53636e485450f48093d0a88a6629775f7c3a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 23:01:16 2009 -0700

    Don't re-initialize the landing range data at each apogee detect sample
    
    The landing range values are used only after apogee detect, so we need only
    initialize them on the transition from apogee to drogue.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit b623b1098bc7a10d471730259438fb82804221d0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 23:00:06 2009 -0700

    Initialize ao_min_vel with |ao_flight_vel|
    
    As ao_min_vel is stored as an absolute value, it's important to preserve
    that invariant, even though we don't expect ao_flight_vel to be negative at
    coast.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e9584e846b9bd7926d61451d32ba5d7a30416f7b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 22:58:31 2009 -0700

    Decrease telemetry rate on the pad to 1/sec instead of 20/sec
    
    Transmitting telemetry through the radio consumes a significant amount of
    battery; reducing the rate to 1/sec will reduce power usage while waiting
    for launch.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 97cecb517cd7bf75e1219c76a93bfe6964c07052
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 22:57:19 2009 -0700

    Increase the initial accel/baro average to 1000 samples
    
    To get an accurate baseline of the launchpad state, take a longer average of
    the two sensors as the unit boots up.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 98806b1ff3f41484663d61ff430e9e2764c7b5e6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun May 10 22:54:14 2009 -0700

    Record average accelerometer value in flight start log record
    
    The average accelerometer value cannot be extracted from the log as the
    record starts after that is computed. As that drives much of the
    accelerometer-based state transition logic, it is an important value to
    have, so we log it as part of the flight start record now.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit a12edbfe21fe27a9efbf87bacda9ab4806256e2b
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 9 10:24:10 2009 -0700

    Add version command to show product information

commit e80b87f5e3ccf152d67a2e87bdefda161c455599
Author: Keith Packard <keithp@keithp.com>
Date:   Sat May 9 10:23:49 2009 -0700

    Pad callsign with nuls

commit beae3360828da21eb1a3c4f88e930f242d4e36b7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri May 1 08:14:57 2009 -0700

    USB spec limits bulk endpoints to 64 byte payload max.
    
    For full-speed devices, bulk endpoints may use 8, 16, 32 or 64 bytes, but no
    more.

commit de7814c738488c2c16c6216c93fa78128895e5d5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 29 17:46:56 2009 -0700

    Use 'char' instead of 'uint8_t' for character data
    
    String and character constants are of char type, so using uint8_t causes
    promotion to 16-bit types when comparing the two.

commit 4ae74fffb939d67424efa3e7f433637f1f920ebc
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 29 17:46:36 2009 -0700

    Eliminate incorrect cast in printf string argument
    
    char * is a pointer to a string in the default address space, not a generic pointer
    to a string. As such, the compiler (at least 2.9.0) mis-compiles this if the
    cast is included.

commit 39f2a3c6bd501d12a92bfd38434ce67bb5beb70d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 29 17:44:41 2009 -0700

    Correct radio frequency shown in config display.
    
    Radio frequency base is 434.550, not 435.550

commit 75ca1751b7cac2f8074d0713ee96d6ab45b54f19
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 29 17:42:26 2009 -0700

    Reset landing interval tests at apogee
    
    This moves all of the interval management into the landing test code and
    out of the main loop. The interval is reset at apogee to make sure the
    sensors produce a stable reading for at least 20 seconds

commit 7a1b77c2d7253a681389f32b70e2460aac188807
Author: Bdale Garbee <bdale@gag.com>
Date:   Sun Apr 26 17:53:13 2009 -0600

    clean up host programs, too

commit 5df80c346d65a9d56a8699b056dc44924acb31fe
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 16:04:07 2009 -0700

    Was missing v_batt in adc dump command

commit c3fec2c4c65db71e88ef0c05c69463438a7cfc6c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 15:38:28 2009 -0700

    Add manual ignition and igniter test commands

commit 819f1de8dd6010fae050bcef930943c7923929f9
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 15:38:03 2009 -0700

    Clean up commands a bit

commit 178abb5c8439509926a5507911d7148b84f051b8
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 15:08:58 2009 -0700

    Clear more files on make clean

commit 70a69f3acdca27b80cdb2069de59bbc6dba83dbd
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 15:05:29 2009 -0700

    Label binaries with product and serial info

commit 5ed3b1cb52b573db1fee9655a29a0e6dd72f53fe
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 01:37:02 2009 -0700

    Make sure full log is written and flushed on landing.
    
    The final state change to landing is recorded in the logging thread, so have
    that turn off logging once it has recorded that state. Then make it go to
    sleep.

commit 2e737ad00cad5d893b252d8aa9dbff3d9b800731
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 01:36:53 2009 -0700

    Clean up monitor output a bit

commit 38a0b61b0a0b3c00f064c8d562950a17a6ddff4a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 26 00:11:32 2009 -0700

    Add configuration support
    
    Current config variables:
    Main deploy altitude above launch (in meters)
    Acceleration zero g calibration (manual or automatic)
    Radio channel (freq = 435.550MHz + channel * 100kHz)
    Callsign (max 8 characters)
    
    Supporting this involved shuffling code around so that the
    non-telemetrum builds could include only the stuff they needed.

commit c65f1a1acd2ca00758833cec5d3f8056d303d3e2
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 14:44:33 2009 -0700

    Allow for slower ADC operation. Add power saving code.
    
    This tries to make the flight computer use less power by disabling USB in
    flight mode, lowering the telemetry rate after ascent. It also disables the
    RDF beacon during ascent and re-enables it once descent has started.

commit 8e7b48b5f090be81980ab00fbce814ae1cc253e4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 14:44:04 2009 -0700

    Allow ADC to be disabled

commit 7bc3d9962872850e7b420221cf689db16b4305cc
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 14:43:23 2009 -0700

    Place CPU in P0 state while idle

commit e45fce7f82d704d677f84c69b0e07588d109d780
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 14:42:20 2009 -0700

    Add RDF beacon and callsign to telemetry

commit 61510f98404bca6861b2da98f6cd9ba9deb76968
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 14:40:51 2009 -0700

    Add radio code to emit a 1kHz tone

commit 0f07803d84b5ac89500ee33a6818c50583e3ff7f
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 13:18:37 2009 -0700

    Allow the USB system to be disabled/enabled at run-time

commit 45976af820fc41099928df71ea8304c56eb9fc7c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 13:16:27 2009 -0700

    Make LED usage depend on target device

commit 4a050704ad2c497e9f1b0988334228b0bbc4c170
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 25 13:13:24 2009 -0700

    Make some functions reentrant to save DSEG space

commit 6b3d25a6d6d7847765eb03b836913dd5ecef2993
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:17:37 2009 -0700

    Add monitor task to flight software
    
    Allows the use of telemetrum in teledongle mode.

commit ad0d2d88a91cbd02c56ea5ff6dab23e16aec6510
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:17:19 2009 -0700

    Report difference from ground to max altitude at landing

commit f94ab879ff6f97708827c74facd11003a2d8b590
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:16:29 2009 -0700

    Display data with units while running simulation

commit 6fb26340b150e831a8a9e25e3b68074c29e48dbe
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:13:31 2009 -0700

    Enabling apogee detect via speed: < 200m/s && < max_speed - 50m/s
    
    This change ensures that we actually got going fairly fast, and then slowed
    down a bunch before enabling apogee detect. Otherwise, we'll detect apogee
    right off the pad as we're not going very fast at that point...
    
    This also adds the 'f' command to show the current flight status on the USB
    port.

commit 20b9f304ecbddd73a0ee2461b4c5e80f08157f98
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:12:28 2009 -0700

    configure igniter ports, set values to measured ones

commit 6bf1d91ce0b723abe2bcec89668c13135ec044cf
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:11:40 2009 -0700

    Move ao_led_init to end of file to be consistent with other files

commit b4de7d550ec9a09ccf5f6a72debc6646706e3516
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:10:20 2009 -0700

    Define ao_state_names in ao.h so other people can share

commit 8e62747b3692d0ac75b08eaf5c3e4b5d766be6ad
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:09:31 2009 -0700

    Bump NUM_CMDS to 10

commit 2f781beb73ef24ab5fbe2688a83d07ad26c15972
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 19:09:09 2009 -0700

    Move beep_init to end of file to be consistent with other files

commit b99315cee4ab796376458a2442cf36806fa4aed3
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 10:19:31 2009 -0700

    Update flight algorithm based on data collected from SN-1 Flight 1
    
    This now correctly sequences through the flight data collected from the
    first TeleMetrum test flight.
    
    This also completes up the flight algorithm test harness (ao_flight_test),
    which runs the flight algorithm on the Linux host from a captured data log.

commit b32f2f0090ff967edac07ae4d7a9895ed0b96d31
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 22:17:44 2009 -0700

    Add igniters and update flight control algorithm

commit f155333ae18a25068644792e8940269d9fb28033
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 24 00:15:09 2009 -0700

    Avoid ram from 0xfda2 through feff, its funky

commit f9c1c545c9dc11c3190a6cf7504883131fffce2f
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 22:18:33 2009 -0700

    remove ao_flight_test until its ready

commit 86e73c009f78dc4664883353124fc891fbb01dce
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 20:50:07 2009 -0700

    Add teledongle module

commit 204daac71ad56926730f5d6860bd70c645302e19
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 14:26:01 2009 -0700

    Set telemetry rate to 100ms

commit 306b28f632e21b42ab165e7944283cf9764b590e
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 14:23:26 2009 -0700

    Wrong license on ao_monitor.c

commit dca3a6de26d26c0020f3fb2cf5d8ac1552c195b1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 23 14:23:00 2009 -0700

    Crank up radio to 10dBm

commit fbe3096f7e9a8112dbc79f376eccdaa6872ae520
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 16:03:28 2009 -0700

    Add COPYING file

commit 9b7788f18bbaf3c4e5ebbf6c5ebd926468b0e045
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:55:01 2009 -0700

    Clean up TeleTerra files

commit 61cee50c86e275f9fde875bd317c3e74255394ec
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:53:55 2009 -0700

    simplify ao_time function

commit 3703ecdc9e190f2e0b7ead0e71b78be881c1f3b7
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:53:46 2009 -0700

    One line radio status

commit 1fbb3c17672a03ea6318fee07f9c2dcd7a8d0b16
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:49:16 2009 -0700

    Add new binaries to .gitignore

commit 00d5610caff61559eb24c24beaa56629d6bb03be
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:49:00 2009 -0700

    Speed up dbg port bit frobbing

commit c7555eb16876aa8ff9fe7f648d325a1b8fb54d23
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:48:28 2009 -0700

    Use sdcc from path

commit ada6dea04b94be016598566c4c13e6105aaec353
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:48:14 2009 -0700

    Clean up task list formatting

commit 0a1b2297ee9f5bbb918bd72f26088a3e0b84839a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 15:47:57 2009 -0700

    Control radio monitoring with the M command

commit 837c620f07b63efc171be3ac14c78bc99adf7592
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 22 14:25:43 2009 -0700

    Shrink USB output buffers, work around USB packet errors

commit d87e9c25947d7cc2eba8894a524977f2c55a089a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 21 02:07:24 2009 -0700

    Clean up telemetry now that all packets are the same

commit 1b333def5052d2ed47fdeaef23a897fe326f6340
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 21 02:07:08 2009 -0700

    Add longer debug delays to reset/debug_mode entry

commit d1887ded41a5bfec8e10e9fd736fa9444b9b6222
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 21 01:17:03 2009 -0700

    Fix up fancy dbg stuff. Add teleterra initial bits.
    
    The dbg stuff needed a bit of help to actually walk the tables; it appears
    that complex expressions confuse sdcc.
    
    This also adds primitive teleterra bits, but no UI, etc.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 43c8f7012102cdb591ace899420c10e4a78385ad
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 20 23:33:41 2009 -0700

    Add radio support. Build separate executables for TeleMetrum and the TI dongle
    
    Ok, way too big a patch, but things were in rough shape.
    This patch adds support for the radio, both transmit and receive.
    Then, because I could no longer run the TeleMetrum code on the TI
    dongle, I ended up building a separate image for the TI board, which
    involved creating a mechanism for having multiple command sets and splitting
    code for different functions into different files.

commit 5be13b76a2e29b84cd6d1eec065e3354b0dafce5
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 18 23:19:24 2009 -0700

    Start using pdata area for less-frequently used data

commit 3e18b5a0d4c7d84df98b6ed0b7783de1d42d45bf
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 18 23:19:05 2009 -0700

    Slow down panic presentation

commit c4e983daa4579896b227fdcb2be43fad75e94307
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 18 23:17:45 2009 -0700

    Parse GPS data locally. Add 'g' command to display recent GPS results.
    
    This parses the GPS GGA message and stores it in a global variable,
    protected by a mutex.

commit ed6f67dc47d750d5ff8bea63ae7cbb560689b9b6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 18 23:16:01 2009 -0700

    Add task names and 'T' command to show task status.
    
    The T command shows the current wchan and PC for each task in the system.

commit 3d5a5fc4db5f681e848202c4ee4099d2879677d6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Apr 18 19:32:18 2009 -0700

    Fix GPL version at 2
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 022f83ca6fd589005d8eb3e25e633950fef69fa7
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 23:38:14 2009 -0700

    Add gps, debug dongle support and pressure alt tables
    
    GPS also pulled in serial support. The altitude tables take raw 11-bit
    pressure sample numbers and convert them to standard pressure altitude
    values.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 31fce622b1bab7e3f421069d7f6d4d9bdcd825de
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:32:45 2009 -0700

    Enable FEC in radio packets

commit 293a357911090a2f37bdd6f7ea96942079ffdf2e
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:29:42 2009 -0700

    Add CRC to radio packets

commit 20834caf01ddf481e8362b0d2627ef383a82e09d
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:23:10 2009 -0700

    Add data whitening

commit 94e5343a72121a81ab19bf5025e6b6fc9847eb4f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:19:25 2009 -0700

    Add packet status byte defines

commit 04bc51c170c6f22bb5cc16867ce9a307818a7a00
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:11:31 2009 -0700

    Add separate xmit/recv programs to radio demo

commit fafe55c3405964e0defdf25b6c00236f9aaefbc5
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:11:11 2009 -0700

    Get env var for debug method selection

commit 26095fc0511ee0d5213f038986032f7c59964cf0
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Apr 17 10:10:47 2009 -0700

    Run-time selection between cp2103 and cc1111

commit 543bedde83cbce5145668e72965e02d892187b59
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Apr 16 20:38:14 2009 -0700

    Send data

commit 5e2393eb6b1a6d7b180bd63d5165ee7b7ff5f9e0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 15 14:25:26 2009 -0700

    Move a bunch of variables from __data to __xdata

commit 4d1091d9bd121f05f5fe0a9c9d2bc0da8c562b9a
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:25:15 2009 -0700

    Slow down panic code, disable interrupts

commit 545478dd02eaeff6a65d318e722b1e4fce5e01b4
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:24:25 2009 -0700

    Keep reporting flight state while it changes

commit 9605045164882b4ca3d1317ac860b02513a51f30
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:23:55 2009 -0700

    use red LED to indicate system startup

commit dc844ee7e49a3b6145b3165252a592ed070d600f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:23:13 2009 -0700

    Use ao_ee_flush_internal while holding mutex

commit 5e45d1c89b00e74d5b2730345843f43aab516af2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:22:56 2009 -0700

    Leave beeping and lights to the flight code

commit 902c342289c1d13a4d55b9224acb6d67578b7a60
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 21:22:31 2009 -0700

    Make mutex functions reentrant

commit acc4fc635edb70ec1ba2dff9f7ac0c8542c72c47
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 19:08:01 2009 -0700

    Add in existing flight pieces: flight/report/log
    
    These pieces come from the old telemetrum firmware.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ac99982b10fd5772218660137ee21db9b90cd885
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 14:21:56 2009 -0700

    Add eeprom driver and command loop
    
    This involved adding dma control and a mutex implementation.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fbd8f4aff5058f4d371596b04715b7cb6d38e729
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 11:04:09 2009 -0700

    Switch from --model-large to --model-small
    
    This shrinks the application quite a bit, and should make it faster as well.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fb63262699d3a6fbf347d24efda8b01f75b7d0d3
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Apr 14 10:02:19 2009 -0700

    Add comments, clean up white space, etc.
    
    Various clean ups now that the basic code appears to work.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7e4abf3a40c39d0ce4f466281bef9a464df85dd4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 13 21:58:07 2009 -0700

    Switch USB to double-buffered

commit b56a44e48552bc32dbba9ff21770c370219a684a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 13 21:51:59 2009 -0700

    Fix USB input/output by reloading packet limits.
    
    The USB controller is reset during the connection process, which clears the
    packet limits set in the controller at initialization time. Reload those
    values when the configuration is set.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit cdaf3fc5802acf2ddc7972a15649ab0e1b31b873
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 13 20:39:46 2009 -0700

    USB working up through reading strings

commit c5c1e3fb1c253d387be02c127253ac2a55d577b4
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 13 13:51:08 2009 -0700

    Add USB support.
    
    This offers a single CDC ACM device over USB.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f3f25a1cec7d2a034aa544569cfd23bea1a996c5
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 23:53:55 2009 -0700

    Add beep/led support.
    
    Support our P2_0 connected buzzer, and formalize LED output support.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e14f07bfdb8824fc7ed6df1129c66ee39ffd6d54
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 23:17:16 2009 -0700

    Add A/D sampler
    
    Sample A/D at the timer tick, placing data in a ring
    of samples.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 823f4f92de0c1f8dd7a644a8e56ffe9822bee6e2
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 22:52:47 2009 -0700

    Add 100Hz timer
    
    Use Timer 1 to generate a 100Hz timer interrupt

commit 650a77e209dbb54c8d8fd9824cee430985564973
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 21:58:49 2009 -0700

    Update README

commit 870e98334018a66de8a6e4a659d2dc5dee1cbecf
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 21:52:56 2009 -0700

    GPL Version 2 only

commit 11c526bdcbf4012e18fbfdc29ca8832870ca38f0
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 21:47:32 2009 -0700

    Add load command to s51

commit 55402ba3e87fd699c51079843309f1f0d1534724
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 21:33:55 2009 -0700

    Make test more complicated

commit 3d3f849c9af9028f667cef4afedc0798d39a9efc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 21:33:46 2009 -0700

    SP points at last pushed byte

commit f72c4cbc8fd9412dd1cce0fc446e7bbd2edc2d34
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 20:27:03 2009 -0700

    Add .gitignore

commit 1903a86bf2cc6b685ccc475e62eabe49a4ec5b43
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 20:25:39 2009 -0700

    Initial AltOS import

commit 5221dc63cf3a059a32aca2bfa7828c215be814a1
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Apr 12 12:38:58 2009 -0700

    Add ccdump

commit ee110425fb814780476d1d3d8a257af126f41763
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 6 17:09:23 2009 -0700

    Bump buffer pointer as data is written to cc-usb

commit 2d9b8a83a2d9f495199033e43f519d26f27938fe
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Apr 6 11:31:49 2009 -0700

    Add support for a serial-connected custom debug dongle
    
    This uses the cc1111 board as a custom debug dongle with faster
    methods for communicating with the debug target.

commit 24edd56155ed0fa02fdd8f66fdc7aa5a1021bf7d
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 1 17:50:47 2009 -0700

    Reset cc1111 on s51 exit

commit 5fcfe854d29e1862d9a6adcbef3ef5119eb52fa3
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Apr 1 00:06:45 2009 -0700

    Add timer-based beep test

commit 91607bebdd167ac632aca4b66e22cb0cabdf0d20
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Mar 26 22:41:47 2009 -0700

    Add readline support to s51

commit 66ee94ed10e3d79b24f45a5c63e58456d4d30343
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 11:37:48 2009 -0700

    Deal with MSB-outputing DMA engine

commit d3732fd405af03c3752a84c4b78da7ef5ebd3744
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 11:14:03 2009 -0700

    Flip ADC bytes around

commit 50cc8e97e76d9b60c622962e1c74cf422dfb2c0f
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 11:01:30 2009 -0700

    Add spacing for serial adc data

commit 5577ca3762bfc000b0bc3782c73a8f95996a28a6
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 10:58:57 2009 -0700

    Inc only one on dest addr

commit 378227d869a3e8787c532c8c4e1563b44002c4b5
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 10:55:17 2009 -0700

    Dump remaining inputs

commit f54a41e37d6897db2e24fbc82880076b78a0ae41
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 10:50:36 2009 -0700

    Remove poll for ti demo button

commit 2b93a70fdd9e47e8195855451aa19ecad5d8b068
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 10:50:14 2009 -0700

    Add adc to serial conversion

commit d9fd548db15232e3a8823815962b252c7a5e7cba
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 10:04:50 2009 -0700

    Add ADC via DMA example

commit 61faf2b773300988fe27cfde5bc045be9950a1b0
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 09:45:14 2009 -0700

    Add DMA example

commit 7b3fdf5b42c9be9bebc1ceb7a52ff0f5a2a28fcd
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 01:05:36 2009 -0700

    Back to 0dBm

commit 31d59b88baa2cd96dc6263d1c5877283f2cd8c36
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 01:03:08 2009 -0700

    Make radio test compile again

commit 9ce713fdd19bf1a51370dacba3670504356c5c11
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 01:02:07 2009 -0700

    Wait for xtal to stabilize

commit ffd43886dc902f3bb7407294018e3d62cac39480
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:55:11 2009 -0700

    Check serial input

commit 029963cc94fbb47560118b5de73c537e2c14ed7c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:50:02 2009 -0700

    Eliminate array walking

commit 019456a17d36f8f9f9b72cfbc980492175086d32
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:41:49 2009 -0700

    Add a per-char delay

commit cfaf187e96ba98eb8dd934409a10bc70273fe68a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:36:35 2009 -0700

    Use UTX1IF to wait for serial TX complete

commit 006124529b243c7657a94312d2c868a82878d8bb
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:29:29 2009 -0700

    Send more interesting text

commit 5049acd3d1ae42304513f667f55a2ddffa4c685a
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:24:56 2009 -0700

    More random serial bit frobbing

commit 50bdc2407c674a4770912d3a626f36820a7f1527
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:13:15 2009 -0700

    Flip serial TX code around a bit

commit 7b7617e376afe0df1d505375b76198358330370c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:09:47 2009 -0700

    Try serial polarity high/high

commit 18edacdb1e6e429cc29a164e22ef2a566096b9d9
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:06:32 2009 -0700

    Make serial test simpler

commit 62744c186792739c3bf5798c80ff87c69fbe2b65
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 25 00:03:45 2009 -0700

    Flip start/stop bits around

commit 9e96107d5d1a9681b07c36bb5860c748bfe10ec0
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 23:57:12 2009 -0700

    Stop high

commit c41ceb9a488b2209d1d3c09967d1473ce608030f
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 23:24:01 2009 -0700

    Change radio to -30dBm

commit c35de083ca3d4f362063b056a0fd74ffe629d168
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 23:11:48 2009 -0700

    Add serial test program

commit 8ecbd8734f0fb5588b2a8eb20720cfc6f43dfb47
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 22:37:38 2009 -0700

    Wait for xtal to stabilize after changing to 24MHz

commit e120269fc0f8e14ddf1755337b1d092173e16da2
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 22:21:31 2009 -0700

    Actually return byte read from SPI

commit de1ac6f99a1526fa840a52cfc10fa3edc0589bed
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 22:12:51 2009 -0700

    Clear UxCSR_TX_BYTE after transmitting a byte

commit 3ed3ff63e46767a256d30c5da5c52ae20089a91d
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 20:04:58 2009 -0700

    Led the LED turn on

commit 91b3a6ae74184692f45702587c4d678b2799ad8c
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 19:55:04 2009 -0700

    actually write and compare SPI test bits

commit 7de3a43887485c3c6cf52960376ccde33fb33985
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 19:54:02 2009 -0700

    Add USART-based SPI test code

commit ef0eef68280e9b6ca5e3bb71062e23054340e1ed
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 17:22:36 2009 -0700

    Change spi test string

commit 8131389ee5018c05b721146a98367150cf500fdf
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 17:15:09 2009 -0700

    Oops, not merging in the bit read for SPI test

commit 3429016d1359ec650993d2fb0596184e3f717871
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 17:04:45 2009 -0700

    Adjust clock/data phase for spi test

commit fedd18b28ea54e1dabcd2f9e8cab3ae4ee0fd070
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 16:35:13 2009 -0700

    MISO needs to be an input

commit f0c233f25a208a636833312b1766825815735304
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Mar 24 15:41:55 2009 -0700

    Add bit-banging spi eeprom test program

commit 6eeee64cf16ccc9218dbdde5426f25bda5e3407f
Author: Bdale Garbee <bdale@gag.com>
Date:   Wed Mar 18 02:58:33 2009 -0600

    working beep at around 4khz

commit 4726317de811c20e8d6754762437b5c9cbb3a48c
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Mar 18 01:54:34 2009 -0700

    Add simple test program to light up the transmitter at 434.550MHz
    
    This starts a transmit sequence, but doesn't send any data so the
    transmitter just locks on.

commit a0a27600ee2bf237e74eb83767a8d2e7c91df24f
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 15 18:14:21 2009 -0700

    Correctly comment which bit the beep program uses

commit 25b77d236c01258abfc03114c2fc9ea2d69ca6e7
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 15 18:11:53 2009 -0700

    Add telemetrum beeper example

commit 164b4e4749ad64ebbe26e84fd7b4fa1aa733dbe4
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 15 18:11:20 2009 -0700

    sdcc gets the lib path correct based on the model

commit 04a316133af93b79bfbebb91f05eec1015ec2abc
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 15 18:10:43 2009 -0700

    Bump debug speed back up

commit 9fd63972758d6d5572f7bcaadec9b1c0e974a2e8
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 21:05:40 2009 -0800

    Only flip changing bits in async mode

commit c8fd04e154bcfd65ae1200980bd8163caabd7fe4
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 21:05:06 2009 -0800

    The debug port only works if reset is higher than clock. weird

commit ade11f88754b4ab0386ebf86afc5257e59238f62
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 21:04:38 2009 -0800

    Make manual bit flipping sync after every transaction

commit e63b5271bb54afc36e4b9891e51e053ff6011092
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 14:49:22 2009 -0800

    Add ccmanual

commit 77d754afc2d14aaa4413c13ebe3777ef385f62a9
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 14:48:49 2009 -0800

    Sync after manual bit reading

commit 5a338c8a7394d003355f96a8777b6fe83bb8493c
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Mar 7 14:48:35 2009 -0800

    Flip debug pins around to match telemetrum

commit cc0495b7028f4b1189a00707d828a68534d1dea2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Mar 6 22:52:35 2009 -0800

    Wait for a while when switching the RESET_N line
    
    The cc1111 manual suggests placing a 2.7kΩ resister and 1nF capacitor on the
    RESET_N line to filter out noise. This increases the time necessary to reset
    the chip to several microseconds which is longer than the interval between
    two USB packets. Flush the USB packet queue and sleep for a while after
    changing the value on the RESET_N line to make sure the chip sees the state
    change.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 41289e6d8f1767547a33fea349866e928e44910f
Author: Bdale Garbee <bdale@gag.com>
Date:   Mon Mar 2 07:46:20 2009 -0700

    minor s51.1 formatting fixes
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fdee231ed097a4348aee78fbd4aa92826b80de03
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 1 23:12:31 2009 -0800

    Add s51 manual.
    
    This documents (briefly) the s51 hex debugging interface program, including
    some simple commands to test the operation of the system interactively.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit f7d91bd23b8214e09deae0aafb516331e934c49b
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Mar 1 18:43:03 2009 -0800

    Sometimes the link breaks and the GET_PC command returns garbage

commit 3cc8d11eb8d5d0b42141dd84a58d461287f59e3a
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Jan 25 08:38:48 2009 -0800

    Support 'set' command
    
    The 'set' command modifies target memory and registers
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 60940b4be23962db79b8e914ec943d0636dd68ad
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 5 21:45:21 2009 -0800

    Expose ccdbg_set_clock API
    
    This allows applications to change the debug port clock
    rate on the fly.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit eb09e61b0682eb2aeac8e1a34d58b897ba6db8e7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 5 21:44:44 2009 -0800

    Use custom sdcc libraries (this needs to be configured...)
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1ccfe0887c794397131ab1c986c25f66eea86a6c
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Jan 5 21:43:44 2009 -0800

    Have S51 ignore SIGINT while running under sdcdb.
    
    This prevents keyboard interrupts from accidentally stopping
    s51.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 7c03937b36aac82b08f4ea0c6da33a994fe15ec7
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 30 22:40:13 2008 -0800

    Add simple and timer sample programs
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 6c2a65c743a4ffae96ed27dbc38c1bf9242ed1df
Author: Keith Packard <keithp@keithp.com>
Date:   Tue Dec 30 22:35:53 2008 -0800

    Save/restore registers to host during memory operations. Cache ROM data.
    
    Because the debug port uses instructions for most operations, the debug code
    will clobber registers used by the running program. Save and restore these
    to avoid corrupting application data.
    
    If the ROM file is known, use that to return data instead of fetching it
    from the target to improve performance.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ea366058aa467a8a7caf17e7014758f3741ea7f7
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 29 12:35:11 2008 -0800

    Fix flashing less than a full page of data. Verify page at a time.
    
    The 8051 flashing code requires special help with counts with non-zero low
    byte. Also, instead of verifying the entire flash contents at the end,
    verify each page as it goes.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e0697186a2f9b6139636ff5d5c162879c85caf9c
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 28 00:11:13 2008 -0800

    Use SFR access funcs. Support 'dump' command. Add -m (monitor) flag.
    
    Not all SFRs are visible in the unified address space, so the SFR-specific
    accessors are required.
    
    The dump command is the same as the various 'd*'
    commands, but also supports dumping program memory.
    
    The new -m (monitor) flag watches the command stream between s51 and sdcdb.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 23aca1fcbc169184e32d4ec19f28dd4fd4cfda36
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 28 00:09:30 2008 -0800

    Save/restore regs when reading/writing memory. Add SFR access.
    
    The DPL and ACC registers are used by the memory access code,
    so they need to be saved and restored. Stuff them up high in ram for now;
    this should probably be fixed to pull them back to the host instead.
    
    Special SFR access is required as not all SFRs are visible in the unified
    address space.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1405838160b69e2cda456e21502a1d03b3aa7548
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 27 11:25:58 2008 -0800

    s51: get start address from ihx file. re-enable breakpoints after reset.
    
    Use the start of the ihx file when asked to run from 0x0, this lets
    sdcdb run programs from ram.
    
    The reset command clears all hw breakpoints, so reset them afterwards.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 1264c3676e95427bba5d01e05c303d036a7f9eca
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 26 23:05:04 2008 -0800

    Switch to libusb-1.0 and use async interface.
    
    The async libusb interface offers substantial performance benefits by not
    making each command wait for the reply. This makes talking over this
    interface almost reasonable.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit d2d9cfd74fd66836c913c02276e09136d83b35dc
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 26 17:58:48 2008 -0800

    s51: add breakpoints and the ability to block awaiting a breakpoint.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 4c4093c3fdd309123fdd068c0e1ff4947104492d
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 22 19:11:56 2008 -0800

    Add more commands to s51 assembly-language debugger
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55eba4fa08b022197106245d36a70f575a070b0a
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 22 19:10:27 2008 -0800

    Make read_memory debug output use ccdbg_debug.
    
    This makes it default to not being presented, which makes s51 much happier
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e75918f3667a5c8ad294bec4acef6fe81682edf6
Author: Keith Packard <keithp@keithp.com>
Date:   Sun Dec 21 23:33:35 2008 -0800

    Add preliminary version of s51, a UI clone of the 8051 emulator.
    
    sdcdb provides source-level debugging using the 8051 emulator, s51. By
    emulating that emulator a the UI level, we should be able to get source
    debugging right on our target platform.
    
    This is just the preliminary structure for the program with most commands
    not yet implemented.

commit f7d49868aeae80d515b12a7e339628f1296754a6
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 20 23:30:06 2008 -0800

    Cleanup work; separating out the cp interface to be more abstract.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 30f23f23a6db3d12fdc9c088cf6ab47c5e5077fb
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 21:13:04 2008 -0800

    Clean up autotools stuff.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 9025eb792861930e6af918d2727c4f5d97a69936
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 21:11:45 2008 -0800

    Autotools.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit ab909db28307cfbf7ee8d692506bb79d7ffd627a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 19:08:13 2008 -0800

    Ignore .ihx files

commit cc8db276bc4f2fd7eb00168a5c0689a8457a5c6f
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 19:07:37 2008 -0800

    Move blink example to subdir
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 82e2d7ebed6682062dc400478c736bd6c91195c9
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 19:04:26 2008 -0800

    Clean up makefiles, move ihx files to .ihx

commit 52fb5f795adfd7f62e5b6dbe65877d14361cfdae
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 14:39:57 2008 -0800

    ignore more stuff

commit 4ecfc33f16aa36b315519e6f279da65374b67aba
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 14:37:53 2008 -0800

    Add cc1111 isr stub example

commit d32e6658c3e489b62ba3cf6d22e3ab177b9b8a3a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 14:37:29 2008 -0800

    Add blink-tiny flash and ram versions

commit b4d1127ef007843c643b778b3b2f6b915b1d5d9a
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 14:19:29 2008 -0800

    Flash multiple pages. Eliminate off-by-one error in hex_image length.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 55995515b9d4fc1e193039eab697c5d03db417c2
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Dec 19 11:04:16 2008 -0800

    Add flash writing code.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 0bc52385b8f86f9ca1c450ad106e6d8afe3bc153
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 18 12:37:32 2008 -0800

    faster
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 3779cc8b32cac3640f42bd0400d4199ddae965a1
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 18 12:17:41 2008 -0800

    cq
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit dc03adc179669d41e3551d74b3c5a60db41ff217
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 18 12:07:06 2008 -0800

    Add ability to load Intel HEX files. Add sample sdcc LED blinker.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 807e2adacb025af77bb53c03209e9c8e0d7a5f95
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Dec 18 00:18:50 2008 -0800

    Add ability to read/write arbitrary memory. Write LED blinker program.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 8c879bf51c14a5928135d59211facd72f6a32808
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 17 23:15:47 2008 -0800

    Move manual bit-banging debug code to separate file
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit aec3bbce84a5ceb92060a4b3889379f2af2404ac
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 17 23:15:19 2008 -0800

    reduce clock to 50us
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit fa168f963f8b00144d12aa2770e9c0917cfae123
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 17 23:12:59 2008 -0800

    Fill out ccdbg-command to support all debug commands.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 5df84df7cd6a31527dcfd11030f00ef9d8abf170
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 17 22:24:59 2008 -0800

    Clean up bitbanging layer. Add debug printfs.
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit 584e28bac8af38de433767e017977ed1adddeb36
Author: Keith Packard <keithp@keithp.com>
Date:   Wed Dec 17 12:32:15 2008 -0800

    Clean up sample debug files
    
    Signed-off-by: Keith Packard <keithp@keithp.com>

commit e64b4dbf15e9ee1cb0de002985de7575e83d46e9
Author: Keith Packard <keithp@keithp.com>
Date:   Mon Dec 8 17:25:28 2008 -0800

    Add support for input-only lines (-)

commit 4f38974a9941cddaba27c17c5a46f923db386c94
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 6 16:32:27 2008 -0800

    Add another example

commit 3709ec3205cfb152b6568f3ea505c67fe7504c2a
Author: Keith Packard <keithp@keithp.com>
Date:   Sat Dec 6 16:32:12 2008 -0800

    Add libusb support and lots more examples

commit 39801e6e9fb9388072ee414a447f74095a6ac960
Author: Keith Packard <keithp@keithp.com>
Date:   Fri Nov 28 22:57:07 2008 -0800

    Random hacking

commit 01cb2799875e086ee6096627c058ee235bbc33d5
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 27 17:07:15 2008 -0800

    Add prototypes, add stub mainline, add .gitignore

commit 0ffe4ef870b0e564789a1990aeab5b6651868e5b
Author: Keith Packard <keithp@keithp.com>
Date:   Thu Nov 27 12:33:40 2008 -0800

    cc1111 debug port access through cp2103 serial chip
